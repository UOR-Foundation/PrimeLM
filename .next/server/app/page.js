/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FPrimeLM-Demo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FPrimeLM-Demo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?cc4a\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/forbidden-error */ \"(rsc)/./node_modules/next/dist/client/components/forbidden-error.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/unauthorized-error */ \"(rsc)/./node_modules/next/dist/client/components/unauthorized-error.js\", 23));\nconst page4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\"));\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page4, \"/workspaces/PrimeLM-Demo/src/app/page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [module0, \"/workspaces/PrimeLM-Demo/src/app/layout.tsx\"],\n'not-found': [module1, \"next/dist/client/components/not-found-error\"],\n'forbidden': [module2, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module3, \"next/dist/client/components/unauthorized-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/workspaces/PrimeLM-Demo/src/app/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPSUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHNCQUFzQixvSkFBZ0Y7QUFDdEcsc0JBQXNCLDBOQUFnRjtBQUN0RyxzQkFBc0IsME5BQWdGO0FBQ3RHLHNCQUFzQixnT0FBbUY7QUFDekcsb0JBQW9CLGdKQUE4RTtBQUdoRztBQUdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDdUI7QUFHckI7QUFDRiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFHRTtBQUNGO0FBQ08sd0JBQXdCLHVHQUFrQjtBQUNqRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb2R1bGUwID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9sYXlvdXQudHN4XCIpO1xuY29uc3QgbW9kdWxlMSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL25vdC1mb3VuZC1lcnJvclwiKTtcbmNvbnN0IG1vZHVsZTIgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9mb3JiaWRkZW4tZXJyb3JcIik7XG5jb25zdCBtb2R1bGUzID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvdW5hdXRob3JpemVkLWVycm9yXCIpO1xuY29uc3QgcGFnZTQgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvYXBwL3BhZ2UudHN4XCIpO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcGFnZS9tb2R1bGUuY29tcGlsZWRcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zc3InXG59O1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbi8vIFdlIGluamVjdCB0aGUgdHJlZSBhbmQgcGFnZXMgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IHRyZWUgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICcnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbcGFnZTQsIFwiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL3NyYy9hcHAvcGFnZS50c3hcIl0sXG4gICAgICAgICAgXG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICdsYXlvdXQnOiBbbW9kdWxlMCwgXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9sYXlvdXQudHN4XCJdLFxuJ25vdC1mb3VuZCc6IFttb2R1bGUxLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4nZm9yYmlkZGVuJzogW21vZHVsZTIsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2ZvcmJpZGRlbi1lcnJvclwiXSxcbid1bmF1dGhvcml6ZWQnOiBbbW9kdWxlMywgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvdW5hdXRob3JpemVkLWVycm9yXCJdLFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0uY2hpbGRyZW47XG5jb25zdCBwYWdlcyA9IFtcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvYXBwL3BhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgR2xvYmFsRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5XCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc2VydmVyLXV0aWxpdHknXG59O1xuY29uc3QgX19uZXh0X2FwcF9yZXF1aXJlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fXG5jb25zdCBfX25leHRfYXBwX2xvYWRfY2h1bmtfXyA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5leHBvcnQgY29uc3QgX19uZXh0X2FwcF9fID0ge1xuICAgIHJlcXVpcmU6IF9fbmV4dF9hcHBfcmVxdWlyZV9fLFxuICAgIGxvYWRDaHVuazogX19uZXh0X2FwcF9sb2FkX2NodW5rX19cbn07XG5leHBvcnQgKiBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zZXJ2ZXItdXRpbGl0eSdcbn07XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBQYWdlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICBwYWdlOiBcIi9wYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnLFxuICAgICAgICBhcHBQYXRoczogW11cbiAgICB9LFxuICAgIHVzZXJsYW5kOiB7XG4gICAgICAgIGxvYWRlclRyZWU6IHRyZWVcbiAgICB9XG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXBhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FPrimeLM-Demo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/metadata-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/metadata-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZ3b3Jrc3BhY2VzJTJGUHJpbWVMTS1EZW1vJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGd29ya3NwYWNlcyUyRlByaW1lTE0tRGVtbyUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZodHRwLWFjY2Vzcy1mYWxsYmFjayUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZtZXRhZGF0YSUyRmFzeW5jLW1ldGFkYXRhLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZtZXRhZGF0YSUyRm1ldGFkYXRhLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj10cnVlISIsIm1hcHBpbmdzIjoiQUFBQSxvT0FBcUg7QUFDckg7QUFDQSwwT0FBd0g7QUFDeEg7QUFDQSwwT0FBd0g7QUFDeEg7QUFDQSxvUkFBNkk7QUFDN0k7QUFDQSx3T0FBdUg7QUFDdkg7QUFDQSw0UEFBaUk7QUFDakk7QUFDQSxrUUFBb0k7QUFDcEk7QUFDQSxzUUFBc0kiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1wYWdlLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9jbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2h0dHAtYWNjZXNzLWZhbGxiYWNrL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9tZXRhZGF0YS9hc3luYy1tZXRhZGF0YS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbWV0YWRhdGEvbWV0YWRhdGEtYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZzcmMlMkZhcHAlMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsZ0pBQThFIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9wYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"c8c3eee22500\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9nbG9iYWxzLmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImM4YzNlZWUyMjUwMFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n\n\nconst metadata = {\n    title: 'PrimeLM Demo',\n    description: 'A basic proof of concept implementation demonstrating PrimeLM\\'s Prime Core in a conversational chatbot.'\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            children: children\n        }, void 0, false, {\n            fileName: \"/workspaces/PrimeLM-Demo/src/app/layout.tsx\",\n            lineNumber: 16,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/workspaces/PrimeLM-Demo/src/app/layout.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ3NCO0FBRWYsTUFBTUEsV0FBcUI7SUFDaENDLE9BQU87SUFDUEMsYUFBYTtBQUNmLEVBQUM7QUFFYyxTQUFTQyxXQUFXLEVBQ2pDQyxRQUFRLEVBR1Q7SUFDQyxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztrQkFDVCw0RUFBQ0M7c0JBQU1IOzs7Ozs7Ozs7OztBQUdiIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9sYXlvdXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTWV0YWRhdGEgfSBmcm9tICduZXh0J1xuaW1wb3J0ICcuL2dsb2JhbHMuY3NzJ1xuXG5leHBvcnQgY29uc3QgbWV0YWRhdGE6IE1ldGFkYXRhID0ge1xuICB0aXRsZTogJ1ByaW1lTE0gRGVtbycsXG4gIGRlc2NyaXB0aW9uOiAnQSBiYXNpYyBwcm9vZiBvZiBjb25jZXB0IGltcGxlbWVudGF0aW9uIGRlbW9uc3RyYXRpbmcgUHJpbWVMTVxcJ3MgUHJpbWUgQ29yZSBpbiBhIGNvbnZlcnNhdGlvbmFsIGNoYXRib3QuJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7XG4gIGNoaWxkcmVuLFxufToge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlXG59KSB7XG4gIHJldHVybiAoXG4gICAgPGh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8Ym9keT57Y2hpbGRyZW59PC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIm1ldGFkYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiYm9keSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server.edge */ "(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server-edge.js");
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call the default export of \"/workspaces/PrimeLM-Demo/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/workspaces/PrimeLM-Demo/src/app/page.tsx",
"default",
));


/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/metadata-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/metadata-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZ3b3Jrc3BhY2VzJTJGUHJpbWVMTS1EZW1vJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGd29ya3NwYWNlcyUyRlByaW1lTE0tRGVtbyUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZodHRwLWFjY2Vzcy1mYWxsYmFjayUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZtZXRhZGF0YSUyRmFzeW5jLW1ldGFkYXRhLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZtZXRhZGF0YSUyRm1ldGFkYXRhLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj10cnVlISIsIm1hcHBpbmdzIjoiQUFBQSxvT0FBcUg7QUFDckg7QUFDQSwwT0FBd0g7QUFDeEg7QUFDQSwwT0FBd0g7QUFDeEg7QUFDQSxvUkFBNkk7QUFDN0k7QUFDQSx3T0FBdUg7QUFDdkg7QUFDQSw0UEFBaUk7QUFDakk7QUFDQSxrUUFBb0k7QUFDcEk7QUFDQSxzUUFBc0kiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1wYWdlLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9jbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2h0dHAtYWNjZXNzLWZhbGxiYWNrL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9tZXRhZGF0YS9hc3luYy1tZXRhZGF0YS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbWV0YWRhdGEvbWV0YWRhdGEtYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(ssr)/./src/app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRndvcmtzcGFjZXMlMkZQcmltZUxNLURlbW8lMkZzcmMlMkZhcHAlMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsZ0pBQThFIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9wYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PrimeLMChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_core_primelm_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/core/primelm-models */ \"(ssr)/./src/lib/core/primelm-models.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_core_primelm_models__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_core_primelm_models__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction DebugPanel({ primeCore, showDebug }) {\n    if (!showDebug || !primeCore) return null;\n    const debugInfo = primeCore.getDebugInfo();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mt-4 p-4 bg-gray-50 rounded-lg text-sm\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                className: \"font-semibold text-gray-700 mb-3\",\n                children: \"Prime Core Debug Info\"\n            }, void 0, false, {\n                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                lineNumber: 22,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"font-medium text-blue-600 mb-2\",\n                                children: \"Human User\"\n                            }, void 0, false, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 27,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-blue-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"ID: \",\n                                            debugInfo.humanUser.identity.id\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 29,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-blue-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"Turns: \",\n                                            debugInfo.humanUser.conversationState.turnCount\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 32,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-blue-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"Prime Factors: \",\n                                            debugInfo.humanUser.conversationState.primeCount\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 35,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-blue-100 px-2 py-1 rounded text-xs\",\n                                        children: [\n                                            \"Traits: \",\n                                            debugInfo.humanUser.identity.personality.traits.join(', ')\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 38,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 28,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 26,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"font-medium text-purple-600 mb-2\",\n                                children: \"Chatbot User\"\n                            }, void 0, false, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 46,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-purple-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"ID: \",\n                                            debugInfo.chatbotUser.identity.id\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 48,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-purple-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"Turns: \",\n                                            debugInfo.chatbotUser.conversationState.turnCount\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 51,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-purple-100 px-2 py-1 rounded\",\n                                        children: [\n                                            \"Prime Factors: \",\n                                            debugInfo.chatbotUser.conversationState.primeCount\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 54,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-purple-100 px-2 py-1 rounded text-xs\",\n                                        children: [\n                                            \"Traits: \",\n                                            debugInfo.chatbotUser.identity.personality.traits.join(', ')\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 57,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 47,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 45,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                lineNumber: 24,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-3 pt-3 border-t border-gray-200\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"font-medium text-gray-700\",\n                            children: \"Conversation Coherence:\"\n                        }, void 0, false, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 67,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"bg-green-100 px-3 py-1 rounded font-mono\",\n                            children: [\n                                (debugInfo.coherence * 100).toFixed(1),\n                                \"%\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 68,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 66,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                lineNumber: 65,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n        lineNumber: 21,\n        columnNumber: 5\n    }, this);\n}\nfunction MessageBubble({ message, showPrimes }) {\n    const isHuman = message.sender === 'human';\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `flex ${isHuman ? 'justify-end' : 'justify-start'} mb-4`,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${isHuman ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800'}`,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-sm font-medium mb-1\",\n                    children: isHuman ? 'You' : 'PrimeBot'\n                }, void 0, false, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 87,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: message.text\n                }, void 0, false, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 90,\n                    columnNumber: 9\n                }, this),\n                showPrimes && message.primeFactors && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-2 pt-2 border-t border-opacity-20 border-white\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-xs opacity-75\",\n                            children: [\n                                \"Prime Factors: \",\n                                Object.keys(message.primeFactors).length\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 94,\n                            columnNumber: 13\n                        }, this),\n                        message.coherence !== undefined && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-xs opacity-75\",\n                            children: [\n                                \"Coherence: \",\n                                (message.coherence * 100).toFixed(1),\n                                \"%\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 98,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 93,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n            lineNumber: 82,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n        lineNumber: 81,\n        columnNumber: 5\n    }, this);\n}\nfunction PrimeLMChat() {\n    const [primeCore, setPrimeCore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isInitializing, setIsInitializing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [initError, setInitError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isProcessing, setIsProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showDebug, setShowDebug] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showPrimes, setShowPrimes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PrimeLMChat.useEffect\": ()=>{\n            const initializePrimeCore = {\n                \"PrimeLMChat.useEffect.initializePrimeCore\": async ()=>{\n                    try {\n                        console.log(' Starting PrimeLM initialization...');\n                        const core = new _lib_core_primelm_models__WEBPACK_IMPORTED_MODULE_2__.PrimeCore();\n                        await core.initialize();\n                        setPrimeCore(core);\n                        setIsInitializing(false);\n                        // Add welcome message\n                        setMessages([\n                            {\n                                id: '1',\n                                text: \"Hello! I'm PrimeBot, powered by PrimeLM's Prime Core. I process conversation through mathematical prime factorization. Try asking me something!\",\n                                sender: 'chatbot',\n                                timestamp: new Date()\n                            }\n                        ]);\n                    } catch (error) {\n                        console.error(' Failed to initialize PrimeLM:', error);\n                        setInitError(error instanceof Error ? error.message : 'Unknown error');\n                        setIsInitializing(false);\n                    }\n                }\n            }[\"PrimeLMChat.useEffect.initializePrimeCore\"];\n            initializePrimeCore();\n        }\n    }[\"PrimeLMChat.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PrimeLMChat.useEffect\": ()=>{\n            messagesEndRef.current?.scrollIntoView({\n                behavior: 'smooth'\n            });\n        }\n    }[\"PrimeLMChat.useEffect\"], [\n        messages\n    ]);\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !primeCore || isProcessing) return;\n        const userMessage = {\n            id: Date.now().toString(),\n            text: inputText.trim(),\n            sender: 'human',\n            timestamp: new Date()\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInputText('');\n        setIsProcessing(true);\n        try {\n            const response = await primeCore.processConversation(inputText.trim());\n            const debugInfo = primeCore.getDebugInfo();\n            const botMessage = {\n                id: (Date.now() + 1).toString(),\n                text: response,\n                sender: 'chatbot',\n                timestamp: new Date(),\n                primeFactors: debugInfo.chatbotUser.conversationState.primeFactors,\n                coherence: debugInfo.coherence\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    botMessage\n                ]);\n        } catch (error) {\n            console.error(' Error processing message:', error);\n            const errorMessage = {\n                id: (Date.now() + 1).toString(),\n                text: \"Sorry, I encountered an error processing your message. Please try again.\",\n                sender: 'chatbot',\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMessage\n                ]);\n        } finally{\n            setIsProcessing(false);\n        }\n    };\n    const handleKeyPress = (e)=>{\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleSendMessage();\n        }\n    };\n    if (isInitializing) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 206,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold text-gray-700 mb-2\",\n                        children: \"Initializing PrimeLM Core\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 207,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500\",\n                        children: \"Loading neural network models and prime mathematics...\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 208,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                lineNumber: 205,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n            lineNumber: 204,\n            columnNumber: 7\n        }, this);\n    }\n    if (initError) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-red-500 text-6xl mb-4\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 218,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-semibold text-red-600 mb-2\",\n                        children: \"Initialization Failed\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 219,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600 mb-4\",\n                        children: initError\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 220,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [\n                            \"Make sure you have installed the required dependencies:\",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 223,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"code\", {\n                                className: \"bg-gray-200 px-2 py-1 rounded mt-2 inline-block\",\n                                children: \"npm install @xenova/transformers\"\n                            }, void 0, false, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 224,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 221,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>window.location.reload(),\n                        className: \"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",\n                        children: \"Retry\"\n                    }, void 0, false, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 228,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                lineNumber: 217,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n            lineNumber: 216,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-100\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-4xl mx-auto p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-lg shadow-sm p-6 mb-4\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                        className: \"text-2xl font-bold text-gray-800\",\n                                        children: \"PrimeLM Demo\"\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 246,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-gray-600\",\n                                        children: \"Conversational AI through Prime Core mathematics\"\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 247,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 245,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setShowDebug(!showDebug),\n                                        className: `px-3 py-1 rounded text-sm ${showDebug ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'}`,\n                                        children: \"Debug\"\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 250,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setShowPrimes(!showPrimes),\n                                        className: `px-3 py-1 rounded text-sm ${showPrimes ? 'bg-purple-500 text-white' : 'bg-gray-200 text-gray-700'}`,\n                                        children: \"Primes\"\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 258,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 249,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                        lineNumber: 244,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 243,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-lg shadow-sm mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-96 overflow-y-auto p-4\",\n                            children: [\n                                messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessageBubble, {\n                                        message: message,\n                                        showPrimes: showPrimes\n                                    }, message.id, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 274,\n                                        columnNumber: 15\n                                    }, this)),\n                                isProcessing && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-start mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-200 text-gray-800 max-w-xs lg:max-w-md px-4 py-2 rounded-lg\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-pulse\",\n                                                children: \"Processing through Prime Core...\"\n                                            }, void 0, false, {\n                                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                                lineNumber: 284,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                            lineNumber: 283,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 282,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                    lineNumber: 281,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: messagesEndRef\n                                }, void 0, false, {\n                                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                    lineNumber: 289,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 272,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"border-t border-gray-200 p-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"text\",\n                                        value: inputText,\n                                        onChange: (e)=>setInputText(e.target.value),\n                                        onKeyPress: handleKeyPress,\n                                        placeholder: \"Type your message...\",\n                                        className: \"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                        disabled: isProcessing\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 295,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleSendMessage,\n                                        disabled: !inputText.trim() || isProcessing,\n                                        className: \"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                        children: \"Send\"\n                                    }, void 0, false, {\n                                        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                        lineNumber: 304,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                lineNumber: 294,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 293,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 271,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DebugPanel, {\n                    primeCore: primeCore,\n                    showDebug: showDebug\n                }, void 0, false, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 316,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center text-sm text-gray-500 mt-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                    children: \"PrimeLM Demo:\"\n                                }, void 0, false, {\n                                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                                    lineNumber: 321,\n                                    columnNumber: 13\n                                }, this),\n                                \" Real neural networks  Prime factorization  Mathematical coherence\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 320,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mt-1\",\n                            children: \"No mocking or hard-coding - functional proof of concept implementation\"\n                        }, void 0, false, {\n                            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                            lineNumber: 323,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n                    lineNumber: 319,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n            lineNumber: 241,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/workspaces/PrimeLM-Demo/src/app/page.tsx\",\n        lineNumber: 240,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRW9CLE1BQU0sQ0FBQ0YsS0FBSzt3Q0FDNUNHLFlBQVl0Qjt3Q0FDWnVCLGFBQVk7d0NBQ1p2RixXQUFVO3dDQUNWd0YsVUFBVW5EOzs7Ozs7a0RBRVosOERBQUNvQzt3Q0FDQ0MsU0FBU3BCO3dDQUNUa0MsVUFBVSxDQUFDckQsVUFBVW9CLElBQUksTUFBTWxCO3dDQUMvQnJDLFdBQVU7a0RBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQVFQLDhEQUFDTjtvQkFBV0MsV0FBV0E7b0JBQVdDLFdBQVdBOzs7Ozs7OEJBRzdDLDhEQUFDRztvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNzRTs7OENBQ0MsOERBQUNtQjs4Q0FBTzs7Ozs7O2dDQUFzQjs7Ozs7OztzQ0FFaEMsOERBQUNuQjs0QkFBRXRFLFdBQVU7c0NBQU87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzlCIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2FwcC9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQcmltZUNvcmUgfSBmcm9tICcuLi9saWIvY29yZS9wcmltZWxtLW1vZGVscyc7XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xuICBzZW5kZXI6ICdodW1hbicgfCAnY2hhdGJvdCc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgcHJpbWVGYWN0b3JzPzogUmVjb3JkPG51bWJlciwgbnVtYmVyPjtcbiAgY29oZXJlbmNlPzogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBEZWJ1Z1BhbmVsKHsgcHJpbWVDb3JlLCBzaG93RGVidWcgfTogeyBwcmltZUNvcmU6IFByaW1lQ29yZSB8IG51bGwsIHNob3dEZWJ1ZzogYm9vbGVhbiB9KSB7XG4gIGlmICghc2hvd0RlYnVnIHx8ICFwcmltZUNvcmUpIHJldHVybiBudWxsO1xuICBcbiAgY29uc3QgZGVidWdJbmZvID0gcHJpbWVDb3JlLmdldERlYnVnSW5mbygpO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcC00IGJnLWdyYXktNTAgcm91bmRlZC1sZyB0ZXh0LXNtXCI+XG4gICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwIG1iLTNcIj5QcmltZSBDb3JlIERlYnVnIEluZm88L2gzPlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTRcIj5cbiAgICAgICAgey8qIEh1bWFuIFVzZXIgSW5mbyAqL31cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ibHVlLTYwMCBtYi0yXCI+SHVtYW4gVXNlcjwvaDQ+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTFcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctYmx1ZS0xMDAgcHgtMiBweS0xIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgSUQ6IHtkZWJ1Z0luZm8uaHVtYW5Vc2VyLmlkZW50aXR5LmlkfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWJsdWUtMTAwIHB4LTIgcHktMSByb3VuZGVkXCI+XG4gICAgICAgICAgICAgIFR1cm5zOiB7ZGVidWdJbmZvLmh1bWFuVXNlci5jb252ZXJzYXRpb25TdGF0ZS50dXJuQ291bnR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctYmx1ZS0xMDAgcHgtMiBweS0xIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgUHJpbWUgRmFjdG9yczoge2RlYnVnSW5mby5odW1hblVzZXIuY29udmVyc2F0aW9uU3RhdGUucHJpbWVDb3VudH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibHVlLTEwMCBweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgIFRyYWl0czoge2RlYnVnSW5mby5odW1hblVzZXIuaWRlbnRpdHkucGVyc29uYWxpdHkudHJhaXRzLmpvaW4oJywgJyl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogQ2hhdGJvdCBVc2VyIEluZm8gKi99XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtcHVycGxlLTYwMCBtYi0yXCI+Q2hhdGJvdCBVc2VyPC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1wdXJwbGUtMTAwIHB4LTIgcHktMSByb3VuZGVkXCI+XG4gICAgICAgICAgICAgIElEOiB7ZGVidWdJbmZvLmNoYXRib3RVc2VyLmlkZW50aXR5LmlkfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXB1cnBsZS0xMDAgcHgtMiBweS0xIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgVHVybnM6IHtkZWJ1Z0luZm8uY2hhdGJvdFVzZXIuY29udmVyc2F0aW9uU3RhdGUudHVybkNvdW50fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXB1cnBsZS0xMDAgcHgtMiBweS0xIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgUHJpbWUgRmFjdG9yczoge2RlYnVnSW5mby5jaGF0Ym90VXNlci5jb252ZXJzYXRpb25TdGF0ZS5wcmltZUNvdW50fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXB1cnBsZS0xMDAgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14c1wiPlxuICAgICAgICAgICAgICBUcmFpdHM6IHtkZWJ1Z0luZm8uY2hhdGJvdFVzZXIuaWRlbnRpdHkucGVyc29uYWxpdHkudHJhaXRzLmpvaW4oJywgJyl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgey8qIENvaGVyZW5jZSBJbmZvICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIHB0LTMgYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPkNvbnZlcnNhdGlvbiBDb2hlcmVuY2U6PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJnLWdyZWVuLTEwMCBweC0zIHB5LTEgcm91bmRlZCBmb250LW1vbm9cIj5cbiAgICAgICAgICAgIHsoZGVidWdJbmZvLmNvaGVyZW5jZSAqIDEwMCkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBNZXNzYWdlQnViYmxlKHsgbWVzc2FnZSwgc2hvd1ByaW1lcyB9OiB7IG1lc3NhZ2U6IE1lc3NhZ2UsIHNob3dQcmltZXM6IGJvb2xlYW4gfSkge1xuICBjb25zdCBpc0h1bWFuID0gbWVzc2FnZS5zZW5kZXIgPT09ICdodW1hbic7XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCAke2lzSHVtYW4gPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfSBtYi00YH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YG1heC13LXhzIGxnOm1heC13LW1kIHB4LTQgcHktMiByb3VuZGVkLWxnICR7XG4gICAgICAgIGlzSHVtYW4gXG4gICAgICAgICAgPyAnYmctYmx1ZS01MDAgdGV4dC13aGl0ZScgXG4gICAgICAgICAgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCdcbiAgICAgIH1gfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTFcIj5cbiAgICAgICAgICB7aXNIdW1hbiA/ICdZb3UnIDogJ1ByaW1lQm90J31cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+e21lc3NhZ2UudGV4dH08L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHtzaG93UHJpbWVzICYmIG1lc3NhZ2UucHJpbWVGYWN0b3JzICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcHQtMiBib3JkZXItdCBib3JkZXItb3BhY2l0eS0yMCBib3JkZXItd2hpdGVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTc1XCI+XG4gICAgICAgICAgICAgIFByaW1lIEZhY3RvcnM6IHtPYmplY3Qua2V5cyhtZXNzYWdlLnByaW1lRmFjdG9ycykubGVuZ3RofVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7bWVzc2FnZS5jb2hlcmVuY2UgIT09IHVuZGVmaW5lZCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTc1XCI+XG4gICAgICAgICAgICAgICAgQ29oZXJlbmNlOiB7KG1lc3NhZ2UuY29oZXJlbmNlICogMTAwKS50b0ZpeGVkKDEpfSVcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByaW1lTE1DaGF0KCkge1xuICBjb25zdCBbcHJpbWVDb3JlLCBzZXRQcmltZUNvcmVdID0gdXNlU3RhdGU8UHJpbWVDb3JlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0luaXRpYWxpemluZywgc2V0SXNJbml0aWFsaXppbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpbml0RXJyb3IsIHNldEluaXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lucHV0VGV4dCwgc2V0SW5wdXRUZXh0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2lzUHJvY2Vzc2luZywgc2V0SXNQcm9jZXNzaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dEZWJ1Zywgc2V0U2hvd0RlYnVnXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd1ByaW1lcywgc2V0U2hvd1ByaW1lc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplUHJpbWVDb3JlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgUHJpbWVMTSBpbml0aWFsaXphdGlvbi4uLicpO1xuICAgICAgICBjb25zdCBjb3JlID0gbmV3IFByaW1lQ29yZSgpO1xuICAgICAgICBhd2FpdCBjb3JlLmluaXRpYWxpemUoKTtcbiAgICAgICAgc2V0UHJpbWVDb3JlKGNvcmUpO1xuICAgICAgICBzZXRJc0luaXRpYWxpemluZyhmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgd2VsY29tZSBtZXNzYWdlXG4gICAgICAgIHNldE1lc3NhZ2VzKFt7XG4gICAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgICB0ZXh0OiBcIkhlbGxvISBJJ20gUHJpbWVCb3QsIHBvd2VyZWQgYnkgUHJpbWVMTSdzIFByaW1lIENvcmUuIEkgcHJvY2VzcyBjb252ZXJzYXRpb24gdGhyb3VnaCBtYXRoZW1hdGljYWwgcHJpbWUgZmFjdG9yaXphdGlvbi4gVHJ5IGFza2luZyBtZSBzb21ldGhpbmchXCIsXG4gICAgICAgICAgc2VuZGVyOiAnY2hhdGJvdCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1dKTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluaXRpYWxpemUgUHJpbWVMTTonLCBlcnJvcik7XG4gICAgICAgIHNldEluaXRFcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgIHNldElzSW5pdGlhbGl6aW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaW5pdGlhbGl6ZVByaW1lQ29yZSgpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpbnB1dFRleHQudHJpbSgpIHx8ICFwcmltZUNvcmUgfHwgaXNQcm9jZXNzaW5nKSByZXR1cm47XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICB0ZXh0OiBpbnB1dFRleHQudHJpbSgpLFxuICAgICAgc2VuZGVyOiAnaHVtYW4nLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgfTtcblxuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlXSk7XG4gICAgc2V0SW5wdXRUZXh0KCcnKTtcbiAgICBzZXRJc1Byb2Nlc3NpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwcmltZUNvcmUucHJvY2Vzc0NvbnZlcnNhdGlvbihpbnB1dFRleHQudHJpbSgpKTtcbiAgICAgIGNvbnN0IGRlYnVnSW5mbyA9IHByaW1lQ29yZS5nZXREZWJ1Z0luZm8oKTtcbiAgICAgIFxuICAgICAgY29uc3QgYm90TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgdGV4dDogcmVzcG9uc2UsXG4gICAgICAgIHNlbmRlcjogJ2NoYXRib3QnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHByaW1lRmFjdG9yczogZGVidWdJbmZvLmNoYXRib3RVc2VyLmNvbnZlcnNhdGlvblN0YXRlLnByaW1lRmFjdG9ycyxcbiAgICAgICAgY29oZXJlbmNlOiBkZWJ1Z0luZm8uY29oZXJlbmNlXG4gICAgICB9O1xuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBib3RNZXNzYWdlXSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHByb2Nlc3NpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgIHRleHQ6IFwiU29ycnksIEkgZW5jb3VudGVyZWQgYW4gZXJyb3IgcHJvY2Vzc2luZyB5b3VyIG1lc3NhZ2UuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICAgIHNlbmRlcjogJ2NoYXRib3QnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBlcnJvck1lc3NhZ2VdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlS2V5UHJlc3MgPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGFuZGxlU2VuZE1lc3NhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzSW5pdGlhbGl6aW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwIG14LWF1dG8gbWItNFwiPjwvZGl2PlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTcwMCBtYi0yXCI+SW5pdGlhbGl6aW5nIFByaW1lTE0gQ29yZTwvaDI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPkxvYWRpbmcgbmV1cmFsIG5ldHdvcmsgbW9kZWxzIGFuZCBwcmltZSBtYXRoZW1hdGljcy4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGluaXRFcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1heC13LW1kXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgdGV4dC02eGwgbWItNFwiPuKaoO+4jzwvZGl2PlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1yZWQtNjAwIG1iLTJcIj5Jbml0aWFsaXphdGlvbiBGYWlsZWQ8L2gyPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgbWItNFwiPntpbml0RXJyb3J9PC9wPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgTWFrZSBzdXJlIHlvdSBoYXZlIGluc3RhbGxlZCB0aGUgcmVxdWlyZWQgZGVwZW5kZW5jaWVzOlxuICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICA8Y29kZSBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCBweC0yIHB5LTEgcm91bmRlZCBtdC0yIGlubGluZS1ibG9ja1wiPlxuICAgICAgICAgICAgICBucG0gaW5zdGFsbCBAeGVub3ZhL3RyYW5zZm9ybWVyc1xuICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfSBcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTQgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ibHVlLTYwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgUmV0cnlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTEwMFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy00eGwgbXgtYXV0byBwLTRcIj5cbiAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBwLTYgbWItNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDBcIj5QcmltZUxNIERlbW88L2gxPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+Q29udmVyc2F0aW9uYWwgQUkgdGhyb3VnaCBQcmltZSBDb3JlIG1hdGhlbWF0aWNzPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dEZWJ1Zyghc2hvd0RlYnVnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtICR7XG4gICAgICAgICAgICAgICAgICBzaG93RGVidWcgPyAnYmctYmx1ZS01MDAgdGV4dC13aGl0ZScgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTcwMCdcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIERlYnVnXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1ByaW1lcyghc2hvd1ByaW1lcyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSAke1xuICAgICAgICAgICAgICAgICAgc2hvd1ByaW1lcyA/ICdiZy1wdXJwbGUtNTAwIHRleHQtd2hpdGUnIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS03MDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBQcmltZXNcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIENoYXQgQXJlYSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBtYi00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTk2IG92ZXJmbG93LXktYXV0byBwLTRcIj5cbiAgICAgICAgICAgIHttZXNzYWdlcy5tYXAobWVzc2FnZSA9PiAoXG4gICAgICAgICAgICAgIDxNZXNzYWdlQnViYmxlIFxuICAgICAgICAgICAgICAgIGtleT17bWVzc2FnZS5pZH0gXG4gICAgICAgICAgICAgICAgbWVzc2FnZT17bWVzc2FnZX0gXG4gICAgICAgICAgICAgICAgc2hvd1ByaW1lcz17c2hvd1ByaW1lc31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgICAge2lzUHJvY2Vzc2luZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LXN0YXJ0IG1iLTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgbWF4LXcteHMgbGc6bWF4LXctbWQgcHgtNCBweS0yIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXB1bHNlXCI+UHJvY2Vzc2luZyB0aHJvdWdoIFByaW1lIENvcmUuLi48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogSW5wdXQgQXJlYSAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IGJvcmRlci1ncmF5LTIwMCBwLTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0VGV4dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0VGV4dChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgb25LZXlQcmVzcz17aGFuZGxlS2V5UHJlc3N9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUeXBlIHlvdXIgbWVzc2FnZS4uLlwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBweC0zIHB5LTIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNQcm9jZXNzaW5nfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpbnB1dFRleHQudHJpbSgpIHx8IGlzUHJvY2Vzc2luZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlIHB4LTYgcHktMiByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIERlYnVnIFBhbmVsICovfVxuICAgICAgICA8RGVidWdQYW5lbCBwcmltZUNvcmU9e3ByaW1lQ29yZX0gc2hvd0RlYnVnPXtzaG93RGVidWd9IC8+XG5cbiAgICAgICAgey8qIEZvb3RlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS01MDAgbXQtNFwiPlxuICAgICAgICAgIDxwPlxuICAgICAgICAgICAgPHN0cm9uZz5QcmltZUxNIERlbW86PC9zdHJvbmc+IFJlYWwgbmV1cmFsIG5ldHdvcmtzIOKGkiBQcmltZSBmYWN0b3JpemF0aW9uIOKGkiBNYXRoZW1hdGljYWwgY29oZXJlbmNlXG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTFcIj5cbiAgICAgICAgICAgIE5vIG1vY2tpbmcgb3IgaGFyZC1jb2RpbmcgLSBmdW5jdGlvbmFsIHByb29mIG9mIGNvbmNlcHQgaW1wbGVtZW50YXRpb25cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIlByaW1lQ29yZSIsIkRlYnVnUGFuZWwiLCJwcmltZUNvcmUiLCJzaG93RGVidWciLCJkZWJ1Z0luZm8iLCJnZXREZWJ1Z0luZm8iLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsImg0IiwiaHVtYW5Vc2VyIiwiaWRlbnRpdHkiLCJpZCIsImNvbnZlcnNhdGlvblN0YXRlIiwidHVybkNvdW50IiwicHJpbWVDb3VudCIsInBlcnNvbmFsaXR5IiwidHJhaXRzIiwiam9pbiIsImNoYXRib3RVc2VyIiwic3BhbiIsImNvaGVyZW5jZSIsInRvRml4ZWQiLCJNZXNzYWdlQnViYmxlIiwibWVzc2FnZSIsInNob3dQcmltZXMiLCJpc0h1bWFuIiwic2VuZGVyIiwidGV4dCIsInByaW1lRmFjdG9ycyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJQcmltZUxNQ2hhdCIsInNldFByaW1lQ29yZSIsImlzSW5pdGlhbGl6aW5nIiwic2V0SXNJbml0aWFsaXppbmciLCJpbml0RXJyb3IiLCJzZXRJbml0RXJyb3IiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaW5wdXRUZXh0Iiwic2V0SW5wdXRUZXh0IiwiaXNQcm9jZXNzaW5nIiwic2V0SXNQcm9jZXNzaW5nIiwic2V0U2hvd0RlYnVnIiwic2V0U2hvd1ByaW1lcyIsIm1lc3NhZ2VzRW5kUmVmIiwiaW5pdGlhbGl6ZVByaW1lQ29yZSIsImNvbnNvbGUiLCJsb2ciLCJjb3JlIiwiaW5pdGlhbGl6ZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJlcnJvciIsIkVycm9yIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsIm5vdyIsInRvU3RyaW5nIiwicHJldiIsInJlc3BvbnNlIiwicHJvY2Vzc0NvbnZlcnNhdGlvbiIsImJvdE1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJoYW5kbGVLZXlQcmVzcyIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiaDIiLCJwIiwiYnIiLCJjb2RlIiwiYnV0dG9uIiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiaDEiLCJtYXAiLCJyZWYiLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0Iiwib25LZXlQcmVzcyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJzdHJvbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/lib/conversation/discourse-layer.ts":
/*!*************************************************!*\
  !*** ./src/lib/conversation/discourse-layer.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DiscourseLayer: () => (/* binding */ DiscourseLayer)\n/* harmony export */ });\n// =============================================================================\n// DISCOURSE LAYER - Conversation Flow and Topic Management\n// =============================================================================\nclass DiscourseLayer {\n    constructor(schemaVocabulary){\n        this.schemaVocabulary = schemaVocabulary;\n        this.topicState = {\n            currentTopic: '',\n            topicHistory: [],\n            topicTransitions: new Map(),\n            topicDepth: 0,\n            topicCoherence: 0\n        };\n        this.conversationFlow = {\n            currentPhase: 'opening',\n            turnsSincePhaseChange: 0,\n            expectedNextMoves: [\n                'greeting',\n                'introduction',\n                'question'\n            ],\n            conversationMomentum: 0\n        };\n        this.referenceResolution = {\n            pronouns: new Map(),\n            entityReferences: new Map(),\n            contextualReferences: new Map()\n        };\n    }\n    /**\n   * Analyze conversation flow and determine discourse context\n   */ analyzeDiscourseContext(input, semanticContext, pragmaticContext) {\n        console.log(' Analyzing discourse context...');\n        // Update topic tracking\n        this.updateTopicState(input, semanticContext, pragmaticContext);\n        // Update conversation flow\n        this.updateConversationFlow(input, semanticContext, pragmaticContext);\n        // Resolve references\n        this.updateReferenceResolution(input, pragmaticContext);\n        // Calculate topic continuity\n        const topicContinuity = this.calculateTopicContinuity(input, semanticContext);\n        // Detect discourse markers\n        const discourseMarkers = this.detectDiscourseMarkers(input);\n        // Determine expected response type\n        const expectedResponseType = this.determineExpectedResponseType(semanticContext, this.conversationFlow.currentPhase);\n        console.log(' Discourse analysis:', {\n            currentTopic: this.topicState.currentTopic,\n            conversationPhase: this.conversationFlow.currentPhase,\n            topicContinuity,\n            expectedResponseType\n        });\n        return {\n            topicContinuity,\n            conversationPhase: this.conversationFlow.currentPhase,\n            expectedResponseType,\n            discourseMarkers,\n            referenceResolutions: this.referenceResolution.entityReferences\n        };\n    }\n    /**\n   * Update topic state based on current input\n   */ updateTopicState(input, semanticContext, pragmaticContext) {\n        // Extract potential topics from input\n        const inputTopics = this.extractTopicsFromInput(input, semanticContext);\n        if (inputTopics.length > 0) {\n            const newTopic = inputTopics[0];\n            // Check if this is a topic transition\n            if (this.topicState.currentTopic && this.topicState.currentTopic !== newTopic) {\n                // Record topic transition\n                if (!this.topicState.topicTransitions.has(this.topicState.currentTopic)) {\n                    this.topicState.topicTransitions.set(this.topicState.currentTopic, []);\n                }\n                this.topicState.topicTransitions.get(this.topicState.currentTopic).push(newTopic);\n                // Add current topic to history\n                this.topicState.topicHistory.push(this.topicState.currentTopic);\n                this.topicState.topicDepth = 0; // Reset depth for new topic\n            } else if (this.topicState.currentTopic === newTopic) {\n                // Continuing same topic - increase depth\n                this.topicState.topicDepth++;\n            }\n            this.topicState.currentTopic = newTopic;\n        }\n        // Calculate topic coherence\n        this.topicState.topicCoherence = this.calculateTopicCoherence(pragmaticContext);\n    }\n    /**\n   * Extract topics from input using semantic analysis\n   */ extractTopicsFromInput(input, semanticContext) {\n        const topics = [];\n        // Use semantic entities as topic indicators\n        if (semanticContext.entities && semanticContext.entities.length > 0) {\n            semanticContext.entities.forEach((entity)=>{\n                const entityType = this.schemaVocabulary.inferEntityType(entity);\n                if (entityType) {\n                    topics.push(`${entityType.toLowerCase()}_discussion`);\n                } else {\n                    topics.push(`${entity}_topic`);\n                }\n            });\n        }\n        // Use intent as topic indicator\n        if (semanticContext.intent) {\n            switch(semanticContext.intent){\n                case 'IDENTITY_INTRODUCTION':\n                case 'IDENTITY_QUERY':\n                    topics.push('identity_discussion');\n                    break;\n                case 'HELP_REQUEST':\n                    topics.push('assistance_request');\n                    break;\n                case 'INFORMATION_REQUEST':\n                    topics.push('information_seeking');\n                    break;\n                case 'GREETING':\n                    topics.push('social_interaction');\n                    break;\n            }\n        }\n        return topics;\n    }\n    /**\n   * Update conversation flow state\n   */ updateConversationFlow(input, semanticContext, pragmaticContext) {\n        this.conversationFlow.turnsSincePhaseChange++;\n        const currentPhase = this.conversationFlow.currentPhase;\n        let newPhase = currentPhase;\n        // Determine conversation phase transitions\n        switch(currentPhase){\n            case 'opening':\n                if (semanticContext.intent === 'IDENTITY_INTRODUCTION' || semanticContext.intent === 'ENTITY_INTRODUCTION') {\n                    newPhase = 'exploration';\n                } else if (this.conversationFlow.turnsSincePhaseChange > 3) {\n                    newPhase = 'exploration';\n                }\n                break;\n            case 'exploration':\n                if (this.topicState.topicDepth > 2) {\n                    newPhase = 'deepening';\n                } else if (this.hasTopicTransition()) {\n                    newPhase = 'transition';\n                }\n                break;\n            case 'deepening':\n                if (this.hasTopicTransition()) {\n                    newPhase = 'transition';\n                } else if (this.conversationFlow.turnsSincePhaseChange > 8) {\n                    newPhase = 'transition';\n                }\n                break;\n            case 'transition':\n                if (this.topicState.topicDepth > 0) {\n                    newPhase = 'exploration';\n                } else if (this.conversationFlow.turnsSincePhaseChange > 2) {\n                    newPhase = 'exploration';\n                }\n                break;\n        }\n        if (newPhase !== currentPhase) {\n            this.conversationFlow.currentPhase = newPhase;\n            this.conversationFlow.turnsSincePhaseChange = 0;\n            this.updateExpectedNextMoves(newPhase);\n        }\n        // Update conversation momentum\n        this.updateConversationMomentum(semanticContext, pragmaticContext);\n    }\n    /**\n   * Check if there's been a topic transition\n   */ hasTopicTransition() {\n        return this.topicState.topicHistory.length > 0 && this.topicState.topicDepth === 0;\n    }\n    /**\n   * Update expected next moves based on conversation phase\n   */ updateExpectedNextMoves(phase) {\n        switch(phase){\n            case 'opening':\n                this.conversationFlow.expectedNextMoves = [\n                    'greeting',\n                    'introduction',\n                    'question'\n                ];\n                break;\n            case 'exploration':\n                this.conversationFlow.expectedNextMoves = [\n                    'information_sharing',\n                    'question',\n                    'elaboration'\n                ];\n                break;\n            case 'deepening':\n                this.conversationFlow.expectedNextMoves = [\n                    'detailed_explanation',\n                    'follow_up',\n                    'clarification'\n                ];\n                break;\n            case 'transition':\n                this.conversationFlow.expectedNextMoves = [\n                    'topic_change',\n                    'summary',\n                    'new_question'\n                ];\n                break;\n            case 'closing':\n                this.conversationFlow.expectedNextMoves = [\n                    'farewell',\n                    'summary',\n                    'future_reference'\n                ];\n                break;\n        }\n    }\n    /**\n   * Update conversation momentum\n   */ updateConversationMomentum(semanticContext, pragmaticContext) {\n        let momentum = this.conversationFlow.conversationMomentum;\n        // Increase momentum for active engagement\n        if (semanticContext.intent === 'QUESTION' || semanticContext.intent === 'INFORMATION_REQUEST') {\n            momentum += 0.2;\n        }\n        // Increase momentum for entity introductions\n        if (semanticContext.intent === 'ENTITY_INTRODUCTION' || semanticContext.intent === 'IDENTITY_INTRODUCTION') {\n            momentum += 0.3;\n        }\n        // Decrease momentum for generic responses\n        if (semanticContext.intent === 'GENERAL_CONVERSATION' && semanticContext.entities.length === 0) {\n            momentum -= 0.1;\n        }\n        // Momentum decay over time\n        momentum *= 0.95;\n        this.conversationFlow.conversationMomentum = Math.max(0, Math.min(1, momentum));\n    }\n    /**\n   * Update reference resolution\n   */ updateReferenceResolution(input, pragmaticContext) {\n        // Resolve pronouns to entities\n        this.resolvePronounReferences(input, pragmaticContext);\n        // Update entity references\n        this.updateEntityReferences(input, pragmaticContext);\n        // Update contextual references\n        this.updateContextualReferences(input, pragmaticContext);\n    }\n    /**\n   * Resolve pronoun references\n   */ resolvePronounReferences(input, pragmaticContext) {\n        const pronouns = [\n            'it',\n            'he',\n            'she',\n            'they',\n            'that',\n            'this'\n        ];\n        pronouns.forEach((pronoun)=>{\n            if (input.toLowerCase().includes(pronoun)) {\n                // Find most recent relevant entity\n                const recentEntity = this.findMostRecentEntity(pragmaticContext, pronoun);\n                if (recentEntity) {\n                    this.referenceResolution.pronouns.set(pronoun, recentEntity);\n                }\n            }\n        });\n    }\n    /**\n   * Find most recent relevant entity for pronoun resolution\n   */ findMostRecentEntity(pragmaticContext, pronoun) {\n        // Look through recent conversation history for entities\n        const recentTurns = pragmaticContext.conversationHistory.slice(-5);\n        for(let i = recentTurns.length - 1; i >= 0; i--){\n            const turn = recentTurns[i];\n            if (Object.keys(turn.entities).length > 0) {\n                // Return the first entity found (most recent)\n                return Object.values(turn.entities)[0];\n            }\n        }\n        return null;\n    }\n    /**\n   * Update entity references\n   */ updateEntityReferences(input, pragmaticContext) {\n        // Track entity mentions and their contexts\n        for (const [key, entity] of pragmaticContext.entityMemory){\n            if (input.toLowerCase().includes(entity.value.toLowerCase())) {\n                this.referenceResolution.entityReferences.set(entity.value, {\n                    type: entity.entityType || 'unknown',\n                    lastMentioned: Date.now(),\n                    context: input\n                });\n            }\n        }\n    }\n    /**\n   * Update contextual references\n   */ updateContextualReferences(input, pragmaticContext) {\n        // Track references to previous topics or concepts\n        this.topicState.topicHistory.forEach((topic)=>{\n            if (input.toLowerCase().includes(topic.toLowerCase())) {\n                this.referenceResolution.contextualReferences.set(topic, {\n                    referenceType: 'topic_callback',\n                    originalContext: topic,\n                    currentMention: input\n                });\n            }\n        });\n    }\n    /**\n   * Calculate topic continuity score\n   */ calculateTopicContinuity(input, semanticContext) {\n        if (!this.topicState.currentTopic) return 0;\n        let continuity = 0;\n        // Check for topic-related keywords\n        const topicKeywords = this.getTopicKeywords(this.topicState.currentTopic);\n        const inputWords = input.toLowerCase().split(/\\W+/);\n        const matchingKeywords = inputWords.filter((word)=>topicKeywords.includes(word)).length;\n        continuity = matchingKeywords / Math.max(topicKeywords.length, 1);\n        // Boost continuity for entity references\n        if (semanticContext.entities && semanticContext.entities.length > 0) {\n            continuity += 0.3;\n        }\n        return Math.min(1, continuity);\n    }\n    /**\n   * Get keywords associated with a topic\n   */ getTopicKeywords(topic) {\n        const topicKeywordMap = {\n            'identity_discussion': [\n                'name',\n                'identity',\n                'who',\n                'person',\n                'individual'\n            ],\n            'animal_discussion': [\n                'dog',\n                'cat',\n                'pet',\n                'animal',\n                'breed',\n                'species'\n            ],\n            'vehicle_discussion': [\n                'car',\n                'truck',\n                'vehicle',\n                'drive',\n                'transportation'\n            ],\n            'assistance_request': [\n                'help',\n                'assist',\n                'support',\n                'aid',\n                'guidance'\n            ],\n            'information_seeking': [\n                'what',\n                'how',\n                'why',\n                'when',\n                'where',\n                'question'\n            ],\n            'social_interaction': [\n                'hello',\n                'hi',\n                'greeting',\n                'nice',\n                'meet'\n            ]\n        };\n        return topicKeywordMap[topic] || [];\n    }\n    /**\n   * Calculate topic coherence\n   */ calculateTopicCoherence(pragmaticContext) {\n        if (pragmaticContext.conversationHistory.length < 2) return 1;\n        const recentTurns = pragmaticContext.conversationHistory.slice(-5);\n        let coherenceScore = 0;\n        // Check for consistent entity references\n        const entityCounts = new Map();\n        recentTurns.forEach((turn)=>{\n            Object.values(turn.entities).forEach((entity)=>{\n                const entityStr = entity;\n                entityCounts.set(entityStr, (entityCounts.get(entityStr) || 0) + 1);\n            });\n        });\n        // Higher coherence for repeated entity references\n        const maxEntityCount = Math.max(...Array.from(entityCounts.values()), 0);\n        coherenceScore = maxEntityCount / recentTurns.length;\n        return Math.min(1, coherenceScore);\n    }\n    /**\n   * Detect discourse markers in input\n   */ detectDiscourseMarkers(input) {\n        const markers = [];\n        const lowerInput = input.toLowerCase();\n        const discourseMarkerPatterns = {\n            'topic_shift': [\n                'anyway',\n                'by the way',\n                'speaking of',\n                'that reminds me'\n            ],\n            'elaboration': [\n                'also',\n                'furthermore',\n                'in addition',\n                'moreover'\n            ],\n            'contrast': [\n                'but',\n                'however',\n                'on the other hand',\n                'although'\n            ],\n            'conclusion': [\n                'so',\n                'therefore',\n                'in conclusion',\n                'to summarize'\n            ],\n            'clarification': [\n                'i mean',\n                'that is',\n                'in other words',\n                'specifically'\n            ],\n            'sequence': [\n                'first',\n                'then',\n                'next',\n                'finally',\n                'after that'\n            ]\n        };\n        Object.entries(discourseMarkerPatterns).forEach(([markerType, patterns])=>{\n            patterns.forEach((pattern)=>{\n                if (lowerInput.includes(pattern)) {\n                    markers.push(markerType);\n                }\n            });\n        });\n        return [\n            ...new Set(markers)\n        ]; // Remove duplicates\n    }\n    /**\n   * Determine expected response type based on context\n   */ determineExpectedResponseType(semanticContext, conversationPhase) {\n        // Base response type on semantic intent\n        let responseType = 'acknowledgment';\n        switch(semanticContext.intent){\n            case 'QUESTION':\n            case 'INFORMATION_REQUEST':\n            case 'IDENTITY_QUERY':\n            case 'ENTITY_QUERY':\n            case 'BOT_IDENTITY_QUERY':\n                responseType = 'informative_answer';\n                break;\n            case 'GREETING':\n                responseType = 'social_response';\n                break;\n            case 'IDENTITY_INTRODUCTION':\n            case 'ENTITY_INTRODUCTION':\n                responseType = 'acknowledgment_with_followup';\n                break;\n            case 'HELP_REQUEST':\n                responseType = 'supportive_response';\n                break;\n            case 'GRATITUDE':\n                responseType = 'gracious_acknowledgment';\n                break;\n        }\n        // Modify based on conversation phase\n        switch(conversationPhase){\n            case 'opening':\n                if (responseType === 'acknowledgment') {\n                    responseType = 'welcoming_response';\n                }\n                break;\n            case 'deepening':\n                if (responseType === 'informative_answer') {\n                    responseType = 'detailed_explanation';\n                }\n                break;\n            case 'transition':\n                // Don't override query responses in transition phase\n                if (responseType !== 'informative_answer') {\n                    responseType = 'transitional_response';\n                }\n                break;\n        }\n        return responseType;\n    }\n    /**\n   * Get current discourse state for response generation\n   */ getDiscourseState() {\n        return {\n            topicState: {\n                ...this.topicState\n            },\n            conversationFlow: {\n                ...this.conversationFlow\n            },\n            referenceResolution: {\n                pronouns: new Map(this.referenceResolution.pronouns),\n                entityReferences: new Map(this.referenceResolution.entityReferences),\n                contextualReferences: new Map(this.referenceResolution.contextualReferences)\n            }\n        };\n    }\n    /**\n   * Reset discourse state for new conversation\n   */ resetDiscourseState() {\n        this.topicState = {\n            currentTopic: '',\n            topicHistory: [],\n            topicTransitions: new Map(),\n            topicDepth: 0,\n            topicCoherence: 0\n        };\n        this.conversationFlow = {\n            currentPhase: 'opening',\n            turnsSincePhaseChange: 0,\n            expectedNextMoves: [\n                'greeting',\n                'introduction',\n                'question'\n            ],\n            conversationMomentum: 0\n        };\n        this.referenceResolution = {\n            pronouns: new Map(),\n            entityReferences: new Map(),\n            contextualReferences: new Map()\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2NvbnZlcnNhdGlvbi9kaXNjb3Vyc2UtbGF5ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGdGQUFnRjtBQUNoRiwyREFBMkQ7QUFDM0QsZ0ZBQWdGO0FBMEJ6RSxNQUFNQTtJQU1YQyxZQUFZQyxnQkFBa0MsQ0FBRTtRQUM5QyxJQUFJLENBQUNBLGdCQUFnQixHQUFHQTtRQUV4QixJQUFJLENBQUNDLFVBQVUsR0FBRztZQUNoQkMsY0FBYztZQUNkQyxjQUFjLEVBQUU7WUFDaEJDLGtCQUFrQixJQUFJQztZQUN0QkMsWUFBWTtZQUNaQyxnQkFBZ0I7UUFDbEI7UUFFQSxJQUFJLENBQUNDLGdCQUFnQixHQUFHO1lBQ3RCQyxjQUFjO1lBQ2RDLHVCQUF1QjtZQUN2QkMsbUJBQW1CO2dCQUFDO2dCQUFZO2dCQUFnQjthQUFXO1lBQzNEQyxzQkFBc0I7UUFDeEI7UUFFQSxJQUFJLENBQUNDLG1CQUFtQixHQUFHO1lBQ3pCQyxVQUFVLElBQUlUO1lBQ2RVLGtCQUFrQixJQUFJVjtZQUN0Qlcsc0JBQXNCLElBQUlYO1FBQzVCO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEWSx3QkFDRUMsS0FBYSxFQUNiQyxlQUFvQixFQUNwQkMsZ0JBQXFDLEVBT3JDO1FBQ0FDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHdCQUF3QjtRQUN4QixJQUFJLENBQUNDLGdCQUFnQixDQUFDTCxPQUFPQyxpQkFBaUJDO1FBRTlDLDJCQUEyQjtRQUMzQixJQUFJLENBQUNJLHNCQUFzQixDQUFDTixPQUFPQyxpQkFBaUJDO1FBRXBELHFCQUFxQjtRQUNyQixJQUFJLENBQUNLLHlCQUF5QixDQUFDUCxPQUFPRTtRQUV0Qyw2QkFBNkI7UUFDN0IsTUFBTU0sa0JBQWtCLElBQUksQ0FBQ0Msd0JBQXdCLENBQUNULE9BQU9DO1FBRTdELDJCQUEyQjtRQUMzQixNQUFNUyxtQkFBbUIsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ1g7UUFFckQsbUNBQW1DO1FBQ25DLE1BQU1ZLHVCQUF1QixJQUFJLENBQUNDLDZCQUE2QixDQUM3RFosaUJBQ0EsSUFBSSxDQUFDWCxnQkFBZ0IsQ0FBQ0MsWUFBWTtRQUdwQ1ksUUFBUUMsR0FBRyxDQUFDLDBCQUEwQjtZQUNwQ3BCLGNBQWMsSUFBSSxDQUFDRCxVQUFVLENBQUNDLFlBQVk7WUFDMUM4QixtQkFBbUIsSUFBSSxDQUFDeEIsZ0JBQWdCLENBQUNDLFlBQVk7WUFDckRpQjtZQUNBSTtRQUNGO1FBRUEsT0FBTztZQUNMSjtZQUNBTSxtQkFBbUIsSUFBSSxDQUFDeEIsZ0JBQWdCLENBQUNDLFlBQVk7WUFDckRxQjtZQUNBRjtZQUNBSyxzQkFBc0IsSUFBSSxDQUFDcEIsbUJBQW1CLENBQUNFLGdCQUFnQjtRQUNqRTtJQUNGO0lBRUE7O0dBRUMsR0FDRCxpQkFDRUcsS0FBYSxFQUNiQyxlQUFvQixFQUNwQkMsZ0JBQXFDLEVBQy9CO1FBQ04sc0NBQXNDO1FBQ3RDLE1BQU1jLGNBQWMsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ2pCLE9BQU9DO1FBRXZELElBQUllLFlBQVlFLE1BQU0sR0FBRyxHQUFHO1lBQzFCLE1BQU1DLFdBQVdILFdBQVcsQ0FBQyxFQUFFO1lBRS9CLHNDQUFzQztZQUN0QyxJQUFJLElBQUksQ0FBQ2pDLFVBQVUsQ0FBQ0MsWUFBWSxJQUFJLElBQUksQ0FBQ0QsVUFBVSxDQUFDQyxZQUFZLEtBQUttQyxVQUFVO2dCQUM3RSwwQkFBMEI7Z0JBQzFCLElBQUksQ0FBQyxJQUFJLENBQUNwQyxVQUFVLENBQUNHLGdCQUFnQixDQUFDa0MsR0FBRyxDQUFDLElBQUksQ0FBQ3JDLFVBQVUsQ0FBQ0MsWUFBWSxHQUFHO29CQUN2RSxJQUFJLENBQUNELFVBQVUsQ0FBQ0csZ0JBQWdCLENBQUNtQyxHQUFHLENBQUMsSUFBSSxDQUFDdEMsVUFBVSxDQUFDQyxZQUFZLEVBQUUsRUFBRTtnQkFDdkU7Z0JBQ0EsSUFBSSxDQUFDRCxVQUFVLENBQUNHLGdCQUFnQixDQUFDb0MsR0FBRyxDQUFDLElBQUksQ0FBQ3ZDLFVBQVUsQ0FBQ0MsWUFBWSxFQUFHdUMsSUFBSSxDQUFDSjtnQkFFekUsK0JBQStCO2dCQUMvQixJQUFJLENBQUNwQyxVQUFVLENBQUNFLFlBQVksQ0FBQ3NDLElBQUksQ0FBQyxJQUFJLENBQUN4QyxVQUFVLENBQUNDLFlBQVk7Z0JBQzlELElBQUksQ0FBQ0QsVUFBVSxDQUFDSyxVQUFVLEdBQUcsR0FBRyw0QkFBNEI7WUFDOUQsT0FBTyxJQUFJLElBQUksQ0FBQ0wsVUFBVSxDQUFDQyxZQUFZLEtBQUttQyxVQUFVO2dCQUNwRCx5Q0FBeUM7Z0JBQ3pDLElBQUksQ0FBQ3BDLFVBQVUsQ0FBQ0ssVUFBVTtZQUM1QjtZQUVBLElBQUksQ0FBQ0wsVUFBVSxDQUFDQyxZQUFZLEdBQUdtQztRQUNqQztRQUVBLDRCQUE0QjtRQUM1QixJQUFJLENBQUNwQyxVQUFVLENBQUNNLGNBQWMsR0FBRyxJQUFJLENBQUNtQyx1QkFBdUIsQ0FBQ3RCO0lBQ2hFO0lBRUE7O0dBRUMsR0FDRCx1QkFBK0JGLEtBQWEsRUFBRUMsZUFBb0IsRUFBWTtRQUM1RSxNQUFNd0IsU0FBbUIsRUFBRTtRQUUzQiw0Q0FBNEM7UUFDNUMsSUFBSXhCLGdCQUFnQnlCLFFBQVEsSUFBSXpCLGdCQUFnQnlCLFFBQVEsQ0FBQ1IsTUFBTSxHQUFHLEdBQUc7WUFDbkVqQixnQkFBZ0J5QixRQUFRLENBQUNDLE9BQU8sQ0FBQyxDQUFDQztnQkFDaEMsTUFBTUMsYUFBYSxJQUFJLENBQUMvQyxnQkFBZ0IsQ0FBQ2dELGVBQWUsQ0FBQ0Y7Z0JBQ3pELElBQUlDLFlBQVk7b0JBQ2RKLE9BQU9GLElBQUksQ0FBQyxHQUFHTSxXQUFXRSxXQUFXLEdBQUcsV0FBVyxDQUFDO2dCQUN0RCxPQUFPO29CQUNMTixPQUFPRixJQUFJLENBQUMsR0FBR0ssT0FBTyxNQUFNLENBQUM7Z0JBQy9CO1lBQ0Y7UUFDRjtRQUVBLGdDQUFnQztRQUNoQyxJQUFJM0IsZ0JBQWdCK0IsTUFBTSxFQUFFO1lBQzFCLE9BQVEvQixnQkFBZ0IrQixNQUFNO2dCQUM1QixLQUFLO2dCQUNMLEtBQUs7b0JBQ0hQLE9BQU9GLElBQUksQ0FBQztvQkFDWjtnQkFDRixLQUFLO29CQUNIRSxPQUFPRixJQUFJLENBQUM7b0JBQ1o7Z0JBQ0YsS0FBSztvQkFDSEUsT0FBT0YsSUFBSSxDQUFDO29CQUNaO2dCQUNGLEtBQUs7b0JBQ0hFLE9BQU9GLElBQUksQ0FBQztvQkFDWjtZQUNKO1FBQ0Y7UUFFQSxPQUFPRTtJQUNUO0lBRUE7O0dBRUMsR0FDRCx1QkFDRXpCLEtBQWEsRUFDYkMsZUFBb0IsRUFDcEJDLGdCQUFxQyxFQUMvQjtRQUNOLElBQUksQ0FBQ1osZ0JBQWdCLENBQUNFLHFCQUFxQjtRQUUzQyxNQUFNRCxlQUFlLElBQUksQ0FBQ0QsZ0JBQWdCLENBQUNDLFlBQVk7UUFDdkQsSUFBSTBDLFdBQVcxQztRQUVmLDJDQUEyQztRQUMzQyxPQUFRQTtZQUNOLEtBQUs7Z0JBQ0gsSUFBSVUsZ0JBQWdCK0IsTUFBTSxLQUFLLDJCQUMzQi9CLGdCQUFnQitCLE1BQU0sS0FBSyx1QkFBdUI7b0JBQ3BEQyxXQUFXO2dCQUNiLE9BQU8sSUFBSSxJQUFJLENBQUMzQyxnQkFBZ0IsQ0FBQ0UscUJBQXFCLEdBQUcsR0FBRztvQkFDMUR5QyxXQUFXO2dCQUNiO2dCQUNBO1lBRUYsS0FBSztnQkFDSCxJQUFJLElBQUksQ0FBQ2xELFVBQVUsQ0FBQ0ssVUFBVSxHQUFHLEdBQUc7b0JBQ2xDNkMsV0FBVztnQkFDYixPQUFPLElBQUksSUFBSSxDQUFDQyxrQkFBa0IsSUFBSTtvQkFDcENELFdBQVc7Z0JBQ2I7Z0JBQ0E7WUFFRixLQUFLO2dCQUNILElBQUksSUFBSSxDQUFDQyxrQkFBa0IsSUFBSTtvQkFDN0JELFdBQVc7Z0JBQ2IsT0FBTyxJQUFJLElBQUksQ0FBQzNDLGdCQUFnQixDQUFDRSxxQkFBcUIsR0FBRyxHQUFHO29CQUMxRHlDLFdBQVc7Z0JBQ2I7Z0JBQ0E7WUFFRixLQUFLO2dCQUNILElBQUksSUFBSSxDQUFDbEQsVUFBVSxDQUFDSyxVQUFVLEdBQUcsR0FBRztvQkFDbEM2QyxXQUFXO2dCQUNiLE9BQU8sSUFBSSxJQUFJLENBQUMzQyxnQkFBZ0IsQ0FBQ0UscUJBQXFCLEdBQUcsR0FBRztvQkFDMUR5QyxXQUFXO2dCQUNiO2dCQUNBO1FBQ0o7UUFFQSxJQUFJQSxhQUFhMUMsY0FBYztZQUM3QixJQUFJLENBQUNELGdCQUFnQixDQUFDQyxZQUFZLEdBQUcwQztZQUNyQyxJQUFJLENBQUMzQyxnQkFBZ0IsQ0FBQ0UscUJBQXFCLEdBQUc7WUFDOUMsSUFBSSxDQUFDMkMsdUJBQXVCLENBQUNGO1FBQy9CO1FBRUEsK0JBQStCO1FBQy9CLElBQUksQ0FBQ0csMEJBQTBCLENBQUNuQyxpQkFBaUJDO0lBQ25EO0lBRUE7O0dBRUMsR0FDRCxxQkFBc0M7UUFDcEMsT0FBTyxJQUFJLENBQUNuQixVQUFVLENBQUNFLFlBQVksQ0FBQ2lDLE1BQU0sR0FBRyxLQUN0QyxJQUFJLENBQUNuQyxVQUFVLENBQUNLLFVBQVUsS0FBSztJQUN4QztJQUVBOztHQUVDLEdBQ0Qsd0JBQWdDaUQsS0FBYSxFQUFRO1FBQ25ELE9BQVFBO1lBQ04sS0FBSztnQkFDSCxJQUFJLENBQUMvQyxnQkFBZ0IsQ0FBQ0csaUJBQWlCLEdBQUc7b0JBQUM7b0JBQVk7b0JBQWdCO2lCQUFXO2dCQUNsRjtZQUNGLEtBQUs7Z0JBQ0gsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ0csaUJBQWlCLEdBQUc7b0JBQUM7b0JBQXVCO29CQUFZO2lCQUFjO2dCQUM1RjtZQUNGLEtBQUs7Z0JBQ0gsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQ0csaUJBQWlCLEdBQUc7b0JBQUM7b0JBQXdCO29CQUFhO2lCQUFnQjtnQkFDaEc7WUFDRixLQUFLO2dCQUNILElBQUksQ0FBQ0gsZ0JBQWdCLENBQUNHLGlCQUFpQixHQUFHO29CQUFDO29CQUFnQjtvQkFBVztpQkFBZTtnQkFDckY7WUFDRixLQUFLO2dCQUNILElBQUksQ0FBQ0gsZ0JBQWdCLENBQUNHLGlCQUFpQixHQUFHO29CQUFDO29CQUFZO29CQUFXO2lCQUFtQjtnQkFDckY7UUFDSjtJQUNGO0lBRUE7O0dBRUMsR0FDRCwyQkFBbUNRLGVBQW9CLEVBQUVDLGdCQUFxQyxFQUFRO1FBQ3BHLElBQUlvQyxXQUFXLElBQUksQ0FBQ2hELGdCQUFnQixDQUFDSSxvQkFBb0I7UUFFekQsMENBQTBDO1FBQzFDLElBQUlPLGdCQUFnQitCLE1BQU0sS0FBSyxjQUMzQi9CLGdCQUFnQitCLE1BQU0sS0FBSyx1QkFBdUI7WUFDcERNLFlBQVk7UUFDZDtRQUVBLDZDQUE2QztRQUM3QyxJQUFJckMsZ0JBQWdCK0IsTUFBTSxLQUFLLHlCQUMzQi9CLGdCQUFnQitCLE1BQU0sS0FBSyx5QkFBeUI7WUFDdERNLFlBQVk7UUFDZDtRQUVBLDBDQUEwQztRQUMxQyxJQUFJckMsZ0JBQWdCK0IsTUFBTSxLQUFLLDBCQUMzQi9CLGdCQUFnQnlCLFFBQVEsQ0FBQ1IsTUFBTSxLQUFLLEdBQUc7WUFDekNvQixZQUFZO1FBQ2Q7UUFFQSwyQkFBMkI7UUFDM0JBLFlBQVk7UUFFWixJQUFJLENBQUNoRCxnQkFBZ0IsQ0FBQ0ksb0JBQW9CLEdBQUc2QyxLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0UsR0FBRyxDQUFDLEdBQUdIO0lBQ3ZFO0lBRUE7O0dBRUMsR0FDRCwwQkFBa0N0QyxLQUFhLEVBQUVFLGdCQUFxQyxFQUFRO1FBQzVGLCtCQUErQjtRQUMvQixJQUFJLENBQUN3Qyx3QkFBd0IsQ0FBQzFDLE9BQU9FO1FBRXJDLDJCQUEyQjtRQUMzQixJQUFJLENBQUN5QyxzQkFBc0IsQ0FBQzNDLE9BQU9FO1FBRW5DLCtCQUErQjtRQUMvQixJQUFJLENBQUMwQywwQkFBMEIsQ0FBQzVDLE9BQU9FO0lBQ3pDO0lBRUE7O0dBRUMsR0FDRCx5QkFBaUNGLEtBQWEsRUFBRUUsZ0JBQXFDLEVBQVE7UUFDM0YsTUFBTU4sV0FBVztZQUFDO1lBQU07WUFBTTtZQUFPO1lBQVE7WUFBUTtTQUFPO1FBRTVEQSxTQUFTK0IsT0FBTyxDQUFDa0IsQ0FBQUE7WUFDZixJQUFJN0MsTUFBTStCLFdBQVcsR0FBR2UsUUFBUSxDQUFDRCxVQUFVO2dCQUN6QyxtQ0FBbUM7Z0JBQ25DLE1BQU1FLGVBQWUsSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQzlDLGtCQUFrQjJDO2dCQUNqRSxJQUFJRSxjQUFjO29CQUNoQixJQUFJLENBQUNwRCxtQkFBbUIsQ0FBQ0MsUUFBUSxDQUFDeUIsR0FBRyxDQUFDd0IsU0FBU0U7Z0JBQ2pEO1lBQ0Y7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxxQkFBNkI3QyxnQkFBcUMsRUFBRTJDLE9BQWUsRUFBaUI7UUFDbEcsd0RBQXdEO1FBQ3hELE1BQU1JLGNBQWMvQyxpQkFBaUJnRCxtQkFBbUIsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7UUFFaEUsSUFBSyxJQUFJQyxJQUFJSCxZQUFZL0IsTUFBTSxHQUFHLEdBQUdrQyxLQUFLLEdBQUdBLElBQUs7WUFDaEQsTUFBTUMsT0FBT0osV0FBVyxDQUFDRyxFQUFFO1lBQzNCLElBQUlFLE9BQU9DLElBQUksQ0FBQ0YsS0FBSzNCLFFBQVEsRUFBRVIsTUFBTSxHQUFHLEdBQUc7Z0JBQ3pDLDhDQUE4QztnQkFDOUMsT0FBT29DLE9BQU9FLE1BQU0sQ0FBQ0gsS0FBSzNCLFFBQVEsQ0FBQyxDQUFDLEVBQUU7WUFDeEM7UUFDRjtRQUVBLE9BQU87SUFDVDtJQUVBOztHQUVDLEdBQ0QsdUJBQStCMUIsS0FBYSxFQUFFRSxnQkFBcUMsRUFBUTtRQUN6RiwyQ0FBMkM7UUFDM0MsS0FBSyxNQUFNLENBQUN1RCxLQUFLN0IsT0FBTyxJQUFJMUIsaUJBQWlCd0QsWUFBWSxDQUFFO1lBQ3pELElBQUkxRCxNQUFNK0IsV0FBVyxHQUFHZSxRQUFRLENBQUNsQixPQUFPK0IsS0FBSyxDQUFDNUIsV0FBVyxLQUFLO2dCQUM1RCxJQUFJLENBQUNwQyxtQkFBbUIsQ0FBQ0UsZ0JBQWdCLENBQUN3QixHQUFHLENBQUNPLE9BQU8rQixLQUFLLEVBQUU7b0JBQzFEQyxNQUFNaEMsT0FBT0MsVUFBVSxJQUFJO29CQUMzQmdDLGVBQWVDLEtBQUtDLEdBQUc7b0JBQ3ZCQyxTQUFTaEU7Z0JBQ1g7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELDJCQUFtQ0EsS0FBYSxFQUFFRSxnQkFBcUMsRUFBUTtRQUM3RixrREFBa0Q7UUFDbEQsSUFBSSxDQUFDbkIsVUFBVSxDQUFDRSxZQUFZLENBQUMwQyxPQUFPLENBQUNzQyxDQUFBQTtZQUNuQyxJQUFJakUsTUFBTStCLFdBQVcsR0FBR2UsUUFBUSxDQUFDbUIsTUFBTWxDLFdBQVcsS0FBSztnQkFDckQsSUFBSSxDQUFDcEMsbUJBQW1CLENBQUNHLG9CQUFvQixDQUFDdUIsR0FBRyxDQUFDNEMsT0FBTztvQkFDdkRDLGVBQWU7b0JBQ2ZDLGlCQUFpQkY7b0JBQ2pCRyxnQkFBZ0JwRTtnQkFDbEI7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELHlCQUFpQ0EsS0FBYSxFQUFFQyxlQUFvQixFQUFVO1FBQzVFLElBQUksQ0FBQyxJQUFJLENBQUNsQixVQUFVLENBQUNDLFlBQVksRUFBRSxPQUFPO1FBRTFDLElBQUlxRixhQUFhO1FBRWpCLG1DQUFtQztRQUNuQyxNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUN4RixVQUFVLENBQUNDLFlBQVk7UUFDeEUsTUFBTXdGLGFBQWF4RSxNQUFNK0IsV0FBVyxHQUFHMEMsS0FBSyxDQUFDO1FBRTdDLE1BQU1DLG1CQUFtQkYsV0FBV0csTUFBTSxDQUFDQyxDQUFBQSxPQUN6Q04sY0FBY3hCLFFBQVEsQ0FBQzhCLE9BQ3ZCMUQsTUFBTTtRQUVSbUQsYUFBYUssbUJBQW1CbkMsS0FBS0MsR0FBRyxDQUFDOEIsY0FBY3BELE1BQU0sRUFBRTtRQUUvRCx5Q0FBeUM7UUFDekMsSUFBSWpCLGdCQUFnQnlCLFFBQVEsSUFBSXpCLGdCQUFnQnlCLFFBQVEsQ0FBQ1IsTUFBTSxHQUFHLEdBQUc7WUFDbkVtRCxjQUFjO1FBQ2hCO1FBRUEsT0FBTzlCLEtBQUtFLEdBQUcsQ0FBQyxHQUFHNEI7SUFDckI7SUFFQTs7R0FFQyxHQUNELGlCQUF5QkosS0FBYSxFQUFZO1FBQ2hELE1BQU1ZLGtCQUE0QztZQUNoRCx1QkFBdUI7Z0JBQUM7Z0JBQVE7Z0JBQVk7Z0JBQU87Z0JBQVU7YUFBYTtZQUMxRSxxQkFBcUI7Z0JBQUM7Z0JBQU87Z0JBQU87Z0JBQU87Z0JBQVU7Z0JBQVM7YUFBVTtZQUN4RSxzQkFBc0I7Z0JBQUM7Z0JBQU87Z0JBQVM7Z0JBQVc7Z0JBQVM7YUFBaUI7WUFDNUUsc0JBQXNCO2dCQUFDO2dCQUFRO2dCQUFVO2dCQUFXO2dCQUFPO2FBQVc7WUFDdEUsdUJBQXVCO2dCQUFDO2dCQUFRO2dCQUFPO2dCQUFPO2dCQUFRO2dCQUFTO2FBQVc7WUFDMUUsc0JBQXNCO2dCQUFDO2dCQUFTO2dCQUFNO2dCQUFZO2dCQUFRO2FBQU87UUFDbkU7UUFFQSxPQUFPQSxlQUFlLENBQUNaLE1BQU0sSUFBSSxFQUFFO0lBQ3JDO0lBRUE7O0dBRUMsR0FDRCx3QkFBZ0MvRCxnQkFBcUMsRUFBVTtRQUM3RSxJQUFJQSxpQkFBaUJnRCxtQkFBbUIsQ0FBQ2hDLE1BQU0sR0FBRyxHQUFHLE9BQU87UUFFNUQsTUFBTStCLGNBQWMvQyxpQkFBaUJnRCxtQkFBbUIsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7UUFDaEUsSUFBSTJCLGlCQUFpQjtRQUVyQix5Q0FBeUM7UUFDekMsTUFBTUMsZUFBZSxJQUFJNUY7UUFDekI4RCxZQUFZdEIsT0FBTyxDQUFDMEIsQ0FBQUE7WUFDbEJDLE9BQU9FLE1BQU0sQ0FBQ0gsS0FBSzNCLFFBQVEsRUFBRUMsT0FBTyxDQUFDQyxDQUFBQTtnQkFDbkMsTUFBTW9ELFlBQVlwRDtnQkFDbEJtRCxhQUFhMUQsR0FBRyxDQUFDMkQsV0FBVyxDQUFDRCxhQUFhekQsR0FBRyxDQUFDMEQsY0FBYyxLQUFLO1lBQ25FO1FBQ0Y7UUFFQSxrREFBa0Q7UUFDbEQsTUFBTUMsaUJBQWlCMUMsS0FBS0MsR0FBRyxJQUFJMEMsTUFBTUMsSUFBSSxDQUFDSixhQUFhdkIsTUFBTSxLQUFLO1FBQ3RFc0IsaUJBQWlCRyxpQkFBaUJoQyxZQUFZL0IsTUFBTTtRQUVwRCxPQUFPcUIsS0FBS0UsR0FBRyxDQUFDLEdBQUdxQztJQUNyQjtJQUVBOztHQUVDLEdBQ0QsdUJBQStCOUUsS0FBYSxFQUFZO1FBQ3RELE1BQU1vRixVQUFvQixFQUFFO1FBQzVCLE1BQU1DLGFBQWFyRixNQUFNK0IsV0FBVztRQUVwQyxNQUFNdUQsMEJBQTBCO1lBQzlCLGVBQWU7Z0JBQUM7Z0JBQVU7Z0JBQWM7Z0JBQWU7YUFBa0I7WUFDekUsZUFBZTtnQkFBQztnQkFBUTtnQkFBZTtnQkFBZTthQUFXO1lBQ2pFLFlBQVk7Z0JBQUM7Z0JBQU87Z0JBQVc7Z0JBQXFCO2FBQVc7WUFDL0QsY0FBYztnQkFBQztnQkFBTTtnQkFBYTtnQkFBaUI7YUFBZTtZQUNsRSxpQkFBaUI7Z0JBQUM7Z0JBQVU7Z0JBQVc7Z0JBQWtCO2FBQWU7WUFDeEUsWUFBWTtnQkFBQztnQkFBUztnQkFBUTtnQkFBUTtnQkFBVzthQUFhO1FBQ2hFO1FBRUFoQyxPQUFPaUMsT0FBTyxDQUFDRCx5QkFBeUIzRCxPQUFPLENBQUMsQ0FBQyxDQUFDNkQsWUFBWUMsU0FBUztZQUNyRUEsU0FBUzlELE9BQU8sQ0FBQytELENBQUFBO2dCQUNmLElBQUlMLFdBQVd2QyxRQUFRLENBQUM0QyxVQUFVO29CQUNoQ04sUUFBUTdELElBQUksQ0FBQ2lFO2dCQUNmO1lBQ0Y7UUFDRjtRQUVBLE9BQU87ZUFBSSxJQUFJRyxJQUFJUDtTQUFTLEVBQUUsb0JBQW9CO0lBQ3BEO0lBRUE7O0dBRUMsR0FDRCw4QkFBc0NuRixlQUFvQixFQUFFYSxpQkFBeUIsRUFBVTtRQUM3Rix3Q0FBd0M7UUFDeEMsSUFBSThFLGVBQWU7UUFFbkIsT0FBUTNGLGdCQUFnQitCLE1BQU07WUFDNUIsS0FBSztZQUNMLEtBQUs7WUFDTCxLQUFLO1lBQ0wsS0FBSztZQUNMLEtBQUs7Z0JBQ0g0RCxlQUFlO2dCQUNmO1lBQ0YsS0FBSztnQkFDSEEsZUFBZTtnQkFDZjtZQUNGLEtBQUs7WUFDTCxLQUFLO2dCQUNIQSxlQUFlO2dCQUNmO1lBQ0YsS0FBSztnQkFDSEEsZUFBZTtnQkFDZjtZQUNGLEtBQUs7Z0JBQ0hBLGVBQWU7Z0JBQ2Y7UUFDSjtRQUVBLHFDQUFxQztRQUNyQyxPQUFROUU7WUFDTixLQUFLO2dCQUNILElBQUk4RSxpQkFBaUIsa0JBQWtCO29CQUNyQ0EsZUFBZTtnQkFDakI7Z0JBQ0E7WUFDRixLQUFLO2dCQUNILElBQUlBLGlCQUFpQixzQkFBc0I7b0JBQ3pDQSxlQUFlO2dCQUNqQjtnQkFDQTtZQUNGLEtBQUs7Z0JBQ0gscURBQXFEO2dCQUNyRCxJQUFJQSxpQkFBaUIsc0JBQXNCO29CQUN6Q0EsZUFBZTtnQkFDakI7Z0JBQ0E7UUFDSjtRQUVBLE9BQU9BO0lBQ1Q7SUFFQTs7R0FFQyxHQUNEQyxvQkFJRTtRQUNBLE9BQU87WUFDTDlHLFlBQVk7Z0JBQUUsR0FBRyxJQUFJLENBQUNBLFVBQVU7WUFBQztZQUNqQ08sa0JBQWtCO2dCQUFFLEdBQUcsSUFBSSxDQUFDQSxnQkFBZ0I7WUFBQztZQUM3Q0sscUJBQXFCO2dCQUNuQkMsVUFBVSxJQUFJVCxJQUFJLElBQUksQ0FBQ1EsbUJBQW1CLENBQUNDLFFBQVE7Z0JBQ25EQyxrQkFBa0IsSUFBSVYsSUFBSSxJQUFJLENBQUNRLG1CQUFtQixDQUFDRSxnQkFBZ0I7Z0JBQ25FQyxzQkFBc0IsSUFBSVgsSUFBSSxJQUFJLENBQUNRLG1CQUFtQixDQUFDRyxvQkFBb0I7WUFDN0U7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRGdHLHNCQUE0QjtRQUMxQixJQUFJLENBQUMvRyxVQUFVLEdBQUc7WUFDaEJDLGNBQWM7WUFDZEMsY0FBYyxFQUFFO1lBQ2hCQyxrQkFBa0IsSUFBSUM7WUFDdEJDLFlBQVk7WUFDWkMsZ0JBQWdCO1FBQ2xCO1FBRUEsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRztZQUN0QkMsY0FBYztZQUNkQyx1QkFBdUI7WUFDdkJDLG1CQUFtQjtnQkFBQztnQkFBWTtnQkFBZ0I7YUFBVztZQUMzREMsc0JBQXNCO1FBQ3hCO1FBRUEsSUFBSSxDQUFDQyxtQkFBbUIsR0FBRztZQUN6QkMsVUFBVSxJQUFJVDtZQUNkVSxrQkFBa0IsSUFBSVY7WUFDdEJXLHNCQUFzQixJQUFJWDtRQUM1QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvbGliL2NvbnZlcnNhdGlvbi9kaXNjb3Vyc2UtbGF5ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERJU0NPVVJTRSBMQVlFUiAtIENvbnZlcnNhdGlvbiBGbG93IGFuZCBUb3BpYyBNYW5hZ2VtZW50XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBTY2hlbWFWb2NhYnVsYXJ5IH0gZnJvbSAnLi4vc2VtYW50aWMvc2NoZW1hLXZvY2FidWxhcnknO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29udGV4dCB9IGZyb20gJy4vcHJhZ21hdGljLWxheWVyJztcblxuZXhwb3J0IGludGVyZmFjZSBUb3BpY1N0YXRlIHtcbiAgY3VycmVudFRvcGljOiBzdHJpbmc7XG4gIHRvcGljSGlzdG9yeTogc3RyaW5nW107XG4gIHRvcGljVHJhbnNpdGlvbnM6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgdG9waWNEZXB0aDogbnVtYmVyO1xuICB0b3BpY0NvaGVyZW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnZlcnNhdGlvbkZsb3cge1xuICBjdXJyZW50UGhhc2U6ICdvcGVuaW5nJyB8ICdleHBsb3JhdGlvbicgfCAnZGVlcGVuaW5nJyB8ICd0cmFuc2l0aW9uJyB8ICdjbG9zaW5nJztcbiAgdHVybnNTaW5jZVBoYXNlQ2hhbmdlOiBudW1iZXI7XG4gIGV4cGVjdGVkTmV4dE1vdmVzOiBzdHJpbmdbXTtcbiAgY29udmVyc2F0aW9uTW9tZW50dW06IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWZlcmVuY2VSZXNvbHV0aW9uIHtcbiAgcHJvbm91bnM6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4gIGVudGl0eVJlZmVyZW5jZXM6IE1hcDxzdHJpbmcsIGFueT47XG4gIGNvbnRleHR1YWxSZWZlcmVuY2VzOiBNYXA8c3RyaW5nLCBhbnk+O1xufVxuXG5leHBvcnQgY2xhc3MgRGlzY291cnNlTGF5ZXIge1xuICBwcml2YXRlIHNjaGVtYVZvY2FidWxhcnk6IFNjaGVtYVZvY2FidWxhcnk7XG4gIHByaXZhdGUgdG9waWNTdGF0ZTogVG9waWNTdGF0ZTtcbiAgcHJpdmF0ZSBjb252ZXJzYXRpb25GbG93OiBDb252ZXJzYXRpb25GbG93O1xuICBwcml2YXRlIHJlZmVyZW5jZVJlc29sdXRpb246IFJlZmVyZW5jZVJlc29sdXRpb247XG5cbiAgY29uc3RydWN0b3Ioc2NoZW1hVm9jYWJ1bGFyeTogU2NoZW1hVm9jYWJ1bGFyeSkge1xuICAgIHRoaXMuc2NoZW1hVm9jYWJ1bGFyeSA9IHNjaGVtYVZvY2FidWxhcnk7XG4gICAgXG4gICAgdGhpcy50b3BpY1N0YXRlID0ge1xuICAgICAgY3VycmVudFRvcGljOiAnJyxcbiAgICAgIHRvcGljSGlzdG9yeTogW10sXG4gICAgICB0b3BpY1RyYW5zaXRpb25zOiBuZXcgTWFwKCksXG4gICAgICB0b3BpY0RlcHRoOiAwLFxuICAgICAgdG9waWNDb2hlcmVuY2U6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5jb252ZXJzYXRpb25GbG93ID0ge1xuICAgICAgY3VycmVudFBoYXNlOiAnb3BlbmluZycsXG4gICAgICB0dXJuc1NpbmNlUGhhc2VDaGFuZ2U6IDAsXG4gICAgICBleHBlY3RlZE5leHRNb3ZlczogWydncmVldGluZycsICdpbnRyb2R1Y3Rpb24nLCAncXVlc3Rpb24nXSxcbiAgICAgIGNvbnZlcnNhdGlvbk1vbWVudHVtOiAwXG4gICAgfTtcblxuICAgIHRoaXMucmVmZXJlbmNlUmVzb2x1dGlvbiA9IHtcbiAgICAgIHByb25vdW5zOiBuZXcgTWFwKCksXG4gICAgICBlbnRpdHlSZWZlcmVuY2VzOiBuZXcgTWFwKCksXG4gICAgICBjb250ZXh0dWFsUmVmZXJlbmNlczogbmV3IE1hcCgpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGNvbnZlcnNhdGlvbiBmbG93IGFuZCBkZXRlcm1pbmUgZGlzY291cnNlIGNvbnRleHRcbiAgICovXG4gIGFuYWx5emVEaXNjb3Vyc2VDb250ZXh0KFxuICAgIGlucHV0OiBzdHJpbmcsXG4gICAgc2VtYW50aWNDb250ZXh0OiBhbnksXG4gICAgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dFxuICApOiB7XG4gICAgdG9waWNDb250aW51aXR5OiBudW1iZXI7XG4gICAgY29udmVyc2F0aW9uUGhhc2U6IHN0cmluZztcbiAgICBleHBlY3RlZFJlc3BvbnNlVHlwZTogc3RyaW5nO1xuICAgIGRpc2NvdXJzZU1hcmtlcnM6IHN0cmluZ1tdO1xuICAgIHJlZmVyZW5jZVJlc29sdXRpb25zOiBNYXA8c3RyaW5nLCBhbnk+O1xuICB9IHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBBbmFseXppbmcgZGlzY291cnNlIGNvbnRleHQuLi4nKTtcblxuICAgIC8vIFVwZGF0ZSB0b3BpYyB0cmFja2luZ1xuICAgIHRoaXMudXBkYXRlVG9waWNTdGF0ZShpbnB1dCwgc2VtYW50aWNDb250ZXh0LCBwcmFnbWF0aWNDb250ZXh0KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY29udmVyc2F0aW9uIGZsb3dcbiAgICB0aGlzLnVwZGF0ZUNvbnZlcnNhdGlvbkZsb3coaW5wdXQsIHNlbWFudGljQ29udGV4dCwgcHJhZ21hdGljQ29udGV4dCk7XG4gICAgXG4gICAgLy8gUmVzb2x2ZSByZWZlcmVuY2VzXG4gICAgdGhpcy51cGRhdGVSZWZlcmVuY2VSZXNvbHV0aW9uKGlucHV0LCBwcmFnbWF0aWNDb250ZXh0KTtcblxuICAgIC8vIENhbGN1bGF0ZSB0b3BpYyBjb250aW51aXR5XG4gICAgY29uc3QgdG9waWNDb250aW51aXR5ID0gdGhpcy5jYWxjdWxhdGVUb3BpY0NvbnRpbnVpdHkoaW5wdXQsIHNlbWFudGljQ29udGV4dCk7XG4gICAgXG4gICAgLy8gRGV0ZWN0IGRpc2NvdXJzZSBtYXJrZXJzXG4gICAgY29uc3QgZGlzY291cnNlTWFya2VycyA9IHRoaXMuZGV0ZWN0RGlzY291cnNlTWFya2VycyhpbnB1dCk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGV4cGVjdGVkIHJlc3BvbnNlIHR5cGVcbiAgICBjb25zdCBleHBlY3RlZFJlc3BvbnNlVHlwZSA9IHRoaXMuZGV0ZXJtaW5lRXhwZWN0ZWRSZXNwb25zZVR5cGUoXG4gICAgICBzZW1hbnRpY0NvbnRleHQsIFxuICAgICAgdGhpcy5jb252ZXJzYXRpb25GbG93LmN1cnJlbnRQaGFzZVxuICAgICk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+SrCBEaXNjb3Vyc2UgYW5hbHlzaXM6Jywge1xuICAgICAgY3VycmVudFRvcGljOiB0aGlzLnRvcGljU3RhdGUuY3VycmVudFRvcGljLFxuICAgICAgY29udmVyc2F0aW9uUGhhc2U6IHRoaXMuY29udmVyc2F0aW9uRmxvdy5jdXJyZW50UGhhc2UsXG4gICAgICB0b3BpY0NvbnRpbnVpdHksXG4gICAgICBleHBlY3RlZFJlc3BvbnNlVHlwZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcGljQ29udGludWl0eSxcbiAgICAgIGNvbnZlcnNhdGlvblBoYXNlOiB0aGlzLmNvbnZlcnNhdGlvbkZsb3cuY3VycmVudFBoYXNlLFxuICAgICAgZXhwZWN0ZWRSZXNwb25zZVR5cGUsXG4gICAgICBkaXNjb3Vyc2VNYXJrZXJzLFxuICAgICAgcmVmZXJlbmNlUmVzb2x1dGlvbnM6IHRoaXMucmVmZXJlbmNlUmVzb2x1dGlvbi5lbnRpdHlSZWZlcmVuY2VzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdG9waWMgc3RhdGUgYmFzZWQgb24gY3VycmVudCBpbnB1dFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVUb3BpY1N0YXRlKFxuICAgIGlucHV0OiBzdHJpbmcsXG4gICAgc2VtYW50aWNDb250ZXh0OiBhbnksXG4gICAgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dFxuICApOiB2b2lkIHtcbiAgICAvLyBFeHRyYWN0IHBvdGVudGlhbCB0b3BpY3MgZnJvbSBpbnB1dFxuICAgIGNvbnN0IGlucHV0VG9waWNzID0gdGhpcy5leHRyYWN0VG9waWNzRnJvbUlucHV0KGlucHV0LCBzZW1hbnRpY0NvbnRleHQpO1xuICAgIFxuICAgIGlmIChpbnB1dFRvcGljcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBuZXdUb3BpYyA9IGlucHV0VG9waWNzWzBdO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgdG9waWMgdHJhbnNpdGlvblxuICAgICAgaWYgKHRoaXMudG9waWNTdGF0ZS5jdXJyZW50VG9waWMgJiYgdGhpcy50b3BpY1N0YXRlLmN1cnJlbnRUb3BpYyAhPT0gbmV3VG9waWMpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRvcGljIHRyYW5zaXRpb25cbiAgICAgICAgaWYgKCF0aGlzLnRvcGljU3RhdGUudG9waWNUcmFuc2l0aW9ucy5oYXModGhpcy50b3BpY1N0YXRlLmN1cnJlbnRUb3BpYykpIHtcbiAgICAgICAgICB0aGlzLnRvcGljU3RhdGUudG9waWNUcmFuc2l0aW9ucy5zZXQodGhpcy50b3BpY1N0YXRlLmN1cnJlbnRUb3BpYywgW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9waWNTdGF0ZS50b3BpY1RyYW5zaXRpb25zLmdldCh0aGlzLnRvcGljU3RhdGUuY3VycmVudFRvcGljKSEucHVzaChuZXdUb3BpYyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY3VycmVudCB0b3BpYyB0byBoaXN0b3J5XG4gICAgICAgIHRoaXMudG9waWNTdGF0ZS50b3BpY0hpc3RvcnkucHVzaCh0aGlzLnRvcGljU3RhdGUuY3VycmVudFRvcGljKTtcbiAgICAgICAgdGhpcy50b3BpY1N0YXRlLnRvcGljRGVwdGggPSAwOyAvLyBSZXNldCBkZXB0aCBmb3IgbmV3IHRvcGljXG4gICAgICB9IGVsc2UgaWYgKHRoaXMudG9waWNTdGF0ZS5jdXJyZW50VG9waWMgPT09IG5ld1RvcGljKSB7XG4gICAgICAgIC8vIENvbnRpbnVpbmcgc2FtZSB0b3BpYyAtIGluY3JlYXNlIGRlcHRoXG4gICAgICAgIHRoaXMudG9waWNTdGF0ZS50b3BpY0RlcHRoKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMudG9waWNTdGF0ZS5jdXJyZW50VG9waWMgPSBuZXdUb3BpYztcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgdG9waWMgY29oZXJlbmNlXG4gICAgdGhpcy50b3BpY1N0YXRlLnRvcGljQ29oZXJlbmNlID0gdGhpcy5jYWxjdWxhdGVUb3BpY0NvaGVyZW5jZShwcmFnbWF0aWNDb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRvcGljcyBmcm9tIGlucHV0IHVzaW5nIHNlbWFudGljIGFuYWx5c2lzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUb3BpY3NGcm9tSW5wdXQoaW5wdXQ6IHN0cmluZywgc2VtYW50aWNDb250ZXh0OiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgdG9waWNzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIFVzZSBzZW1hbnRpYyBlbnRpdGllcyBhcyB0b3BpYyBpbmRpY2F0b3JzXG4gICAgaWYgKHNlbWFudGljQ29udGV4dC5lbnRpdGllcyAmJiBzZW1hbnRpY0NvbnRleHQuZW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgc2VtYW50aWNDb250ZXh0LmVudGl0aWVzLmZvckVhY2goKGVudGl0eTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLnNjaGVtYVZvY2FidWxhcnkuaW5mZXJFbnRpdHlUeXBlKGVudGl0eSk7XG4gICAgICAgIGlmIChlbnRpdHlUeXBlKSB7XG4gICAgICAgICAgdG9waWNzLnB1c2goYCR7ZW50aXR5VHlwZS50b0xvd2VyQ2FzZSgpfV9kaXNjdXNzaW9uYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9waWNzLnB1c2goYCR7ZW50aXR5fV90b3BpY2ApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVc2UgaW50ZW50IGFzIHRvcGljIGluZGljYXRvclxuICAgIGlmIChzZW1hbnRpY0NvbnRleHQuaW50ZW50KSB7XG4gICAgICBzd2l0Y2ggKHNlbWFudGljQ29udGV4dC5pbnRlbnQpIHtcbiAgICAgICAgY2FzZSAnSURFTlRJVFlfSU5UUk9EVUNUSU9OJzpcbiAgICAgICAgY2FzZSAnSURFTlRJVFlfUVVFUlknOlxuICAgICAgICAgIHRvcGljcy5wdXNoKCdpZGVudGl0eV9kaXNjdXNzaW9uJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0hFTFBfUkVRVUVTVCc6XG4gICAgICAgICAgdG9waWNzLnB1c2goJ2Fzc2lzdGFuY2VfcmVxdWVzdCcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdJTkZPUk1BVElPTl9SRVFVRVNUJzpcbiAgICAgICAgICB0b3BpY3MucHVzaCgnaW5mb3JtYXRpb25fc2Vla2luZycpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdHUkVFVElORyc6XG4gICAgICAgICAgdG9waWNzLnB1c2goJ3NvY2lhbF9pbnRlcmFjdGlvbicpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b3BpY3M7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbnZlcnNhdGlvbiBmbG93IHN0YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNvbnZlcnNhdGlvbkZsb3coXG4gICAgaW5wdXQ6IHN0cmluZyxcbiAgICBzZW1hbnRpY0NvbnRleHQ6IGFueSxcbiAgICBwcmFnbWF0aWNDb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0XG4gICk6IHZvaWQge1xuICAgIHRoaXMuY29udmVyc2F0aW9uRmxvdy50dXJuc1NpbmNlUGhhc2VDaGFuZ2UrKztcbiAgICBcbiAgICBjb25zdCBjdXJyZW50UGhhc2UgPSB0aGlzLmNvbnZlcnNhdGlvbkZsb3cuY3VycmVudFBoYXNlO1xuICAgIGxldCBuZXdQaGFzZSA9IGN1cnJlbnRQaGFzZTtcblxuICAgIC8vIERldGVybWluZSBjb252ZXJzYXRpb24gcGhhc2UgdHJhbnNpdGlvbnNcbiAgICBzd2l0Y2ggKGN1cnJlbnRQaGFzZSkge1xuICAgICAgY2FzZSAnb3BlbmluZyc6XG4gICAgICAgIGlmIChzZW1hbnRpY0NvbnRleHQuaW50ZW50ID09PSAnSURFTlRJVFlfSU5UUk9EVUNUSU9OJyB8fCBcbiAgICAgICAgICAgIHNlbWFudGljQ29udGV4dC5pbnRlbnQgPT09ICdFTlRJVFlfSU5UUk9EVUNUSU9OJykge1xuICAgICAgICAgIG5ld1BoYXNlID0gJ2V4cGxvcmF0aW9uJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnZlcnNhdGlvbkZsb3cudHVybnNTaW5jZVBoYXNlQ2hhbmdlID4gMykge1xuICAgICAgICAgIG5ld1BoYXNlID0gJ2V4cGxvcmF0aW9uJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdleHBsb3JhdGlvbic6XG4gICAgICAgIGlmICh0aGlzLnRvcGljU3RhdGUudG9waWNEZXB0aCA+IDIpIHtcbiAgICAgICAgICBuZXdQaGFzZSA9ICdkZWVwZW5pbmcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzVG9waWNUcmFuc2l0aW9uKCkpIHtcbiAgICAgICAgICBuZXdQaGFzZSA9ICd0cmFuc2l0aW9uJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdkZWVwZW5pbmcnOlxuICAgICAgICBpZiAodGhpcy5oYXNUb3BpY1RyYW5zaXRpb24oKSkge1xuICAgICAgICAgIG5ld1BoYXNlID0gJ3RyYW5zaXRpb24nO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29udmVyc2F0aW9uRmxvdy50dXJuc1NpbmNlUGhhc2VDaGFuZ2UgPiA4KSB7XG4gICAgICAgICAgbmV3UGhhc2UgPSAndHJhbnNpdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAndHJhbnNpdGlvbic6XG4gICAgICAgIGlmICh0aGlzLnRvcGljU3RhdGUudG9waWNEZXB0aCA+IDApIHtcbiAgICAgICAgICBuZXdQaGFzZSA9ICdleHBsb3JhdGlvbic7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb252ZXJzYXRpb25GbG93LnR1cm5zU2luY2VQaGFzZUNoYW5nZSA+IDIpIHtcbiAgICAgICAgICBuZXdQaGFzZSA9ICdleHBsb3JhdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKG5ld1BoYXNlICE9PSBjdXJyZW50UGhhc2UpIHtcbiAgICAgIHRoaXMuY29udmVyc2F0aW9uRmxvdy5jdXJyZW50UGhhc2UgPSBuZXdQaGFzZTtcbiAgICAgIHRoaXMuY29udmVyc2F0aW9uRmxvdy50dXJuc1NpbmNlUGhhc2VDaGFuZ2UgPSAwO1xuICAgICAgdGhpcy51cGRhdGVFeHBlY3RlZE5leHRNb3ZlcyhuZXdQaGFzZSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGNvbnZlcnNhdGlvbiBtb21lbnR1bVxuICAgIHRoaXMudXBkYXRlQ29udmVyc2F0aW9uTW9tZW50dW0oc2VtYW50aWNDb250ZXh0LCBwcmFnbWF0aWNDb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGVyZSdzIGJlZW4gYSB0b3BpYyB0cmFuc2l0aW9uXG4gICAqL1xuICBwcml2YXRlIGhhc1RvcGljVHJhbnNpdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50b3BpY1N0YXRlLnRvcGljSGlzdG9yeS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICB0aGlzLnRvcGljU3RhdGUudG9waWNEZXB0aCA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZXhwZWN0ZWQgbmV4dCBtb3ZlcyBiYXNlZCBvbiBjb252ZXJzYXRpb24gcGhhc2VcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRXhwZWN0ZWROZXh0TW92ZXMocGhhc2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAocGhhc2UpIHtcbiAgICAgIGNhc2UgJ29wZW5pbmcnOlxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkZsb3cuZXhwZWN0ZWROZXh0TW92ZXMgPSBbJ2dyZWV0aW5nJywgJ2ludHJvZHVjdGlvbicsICdxdWVzdGlvbiddO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4cGxvcmF0aW9uJzpcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb25GbG93LmV4cGVjdGVkTmV4dE1vdmVzID0gWydpbmZvcm1hdGlvbl9zaGFyaW5nJywgJ3F1ZXN0aW9uJywgJ2VsYWJvcmF0aW9uJ107XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVlcGVuaW5nJzpcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb25GbG93LmV4cGVjdGVkTmV4dE1vdmVzID0gWydkZXRhaWxlZF9leHBsYW5hdGlvbicsICdmb2xsb3dfdXAnLCAnY2xhcmlmaWNhdGlvbiddO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RyYW5zaXRpb24nOlxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkZsb3cuZXhwZWN0ZWROZXh0TW92ZXMgPSBbJ3RvcGljX2NoYW5nZScsICdzdW1tYXJ5JywgJ25ld19xdWVzdGlvbiddO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Nsb3NpbmcnOlxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkZsb3cuZXhwZWN0ZWROZXh0TW92ZXMgPSBbJ2ZhcmV3ZWxsJywgJ3N1bW1hcnknLCAnZnV0dXJlX3JlZmVyZW5jZSddO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbnZlcnNhdGlvbiBtb21lbnR1bVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDb252ZXJzYXRpb25Nb21lbnR1bShzZW1hbnRpY0NvbnRleHQ6IGFueSwgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCk6IHZvaWQge1xuICAgIGxldCBtb21lbnR1bSA9IHRoaXMuY29udmVyc2F0aW9uRmxvdy5jb252ZXJzYXRpb25Nb21lbnR1bTtcbiAgICBcbiAgICAvLyBJbmNyZWFzZSBtb21lbnR1bSBmb3IgYWN0aXZlIGVuZ2FnZW1lbnRcbiAgICBpZiAoc2VtYW50aWNDb250ZXh0LmludGVudCA9PT0gJ1FVRVNUSU9OJyB8fCBcbiAgICAgICAgc2VtYW50aWNDb250ZXh0LmludGVudCA9PT0gJ0lORk9STUFUSU9OX1JFUVVFU1QnKSB7XG4gICAgICBtb21lbnR1bSArPSAwLjI7XG4gICAgfVxuICAgIFxuICAgIC8vIEluY3JlYXNlIG1vbWVudHVtIGZvciBlbnRpdHkgaW50cm9kdWN0aW9uc1xuICAgIGlmIChzZW1hbnRpY0NvbnRleHQuaW50ZW50ID09PSAnRU5USVRZX0lOVFJPRFVDVElPTicgfHwgXG4gICAgICAgIHNlbWFudGljQ29udGV4dC5pbnRlbnQgPT09ICdJREVOVElUWV9JTlRST0RVQ1RJT04nKSB7XG4gICAgICBtb21lbnR1bSArPSAwLjM7XG4gICAgfVxuICAgIFxuICAgIC8vIERlY3JlYXNlIG1vbWVudHVtIGZvciBnZW5lcmljIHJlc3BvbnNlc1xuICAgIGlmIChzZW1hbnRpY0NvbnRleHQuaW50ZW50ID09PSAnR0VORVJBTF9DT05WRVJTQVRJT04nICYmIFxuICAgICAgICBzZW1hbnRpY0NvbnRleHQuZW50aXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBtb21lbnR1bSAtPSAwLjE7XG4gICAgfVxuICAgIFxuICAgIC8vIE1vbWVudHVtIGRlY2F5IG92ZXIgdGltZVxuICAgIG1vbWVudHVtICo9IDAuOTU7XG4gICAgXG4gICAgdGhpcy5jb252ZXJzYXRpb25GbG93LmNvbnZlcnNhdGlvbk1vbWVudHVtID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgbW9tZW50dW0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgcmVmZXJlbmNlIHJlc29sdXRpb25cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlUmVmZXJlbmNlUmVzb2x1dGlvbihpbnB1dDogc3RyaW5nLCBwcmFnbWF0aWNDb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0KTogdm9pZCB7XG4gICAgLy8gUmVzb2x2ZSBwcm9ub3VucyB0byBlbnRpdGllc1xuICAgIHRoaXMucmVzb2x2ZVByb25vdW5SZWZlcmVuY2VzKGlucHV0LCBwcmFnbWF0aWNDb250ZXh0KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgZW50aXR5IHJlZmVyZW5jZXNcbiAgICB0aGlzLnVwZGF0ZUVudGl0eVJlZmVyZW5jZXMoaW5wdXQsIHByYWdtYXRpY0NvbnRleHQpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjb250ZXh0dWFsIHJlZmVyZW5jZXNcbiAgICB0aGlzLnVwZGF0ZUNvbnRleHR1YWxSZWZlcmVuY2VzKGlucHV0LCBwcmFnbWF0aWNDb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIHByb25vdW4gcmVmZXJlbmNlc1xuICAgKi9cbiAgcHJpdmF0ZSByZXNvbHZlUHJvbm91blJlZmVyZW5jZXMoaW5wdXQ6IHN0cmluZywgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCk6IHZvaWQge1xuICAgIGNvbnN0IHByb25vdW5zID0gWydpdCcsICdoZScsICdzaGUnLCAndGhleScsICd0aGF0JywgJ3RoaXMnXTtcbiAgICBcbiAgICBwcm9ub3Vucy5mb3JFYWNoKHByb25vdW4gPT4ge1xuICAgICAgaWYgKGlucHV0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocHJvbm91bikpIHtcbiAgICAgICAgLy8gRmluZCBtb3N0IHJlY2VudCByZWxldmFudCBlbnRpdHlcbiAgICAgICAgY29uc3QgcmVjZW50RW50aXR5ID0gdGhpcy5maW5kTW9zdFJlY2VudEVudGl0eShwcmFnbWF0aWNDb250ZXh0LCBwcm9ub3VuKTtcbiAgICAgICAgaWYgKHJlY2VudEVudGl0eSkge1xuICAgICAgICAgIHRoaXMucmVmZXJlbmNlUmVzb2x1dGlvbi5wcm9ub3Vucy5zZXQocHJvbm91biwgcmVjZW50RW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgbW9zdCByZWNlbnQgcmVsZXZhbnQgZW50aXR5IGZvciBwcm9ub3VuIHJlc29sdXRpb25cbiAgICovXG4gIHByaXZhdGUgZmluZE1vc3RSZWNlbnRFbnRpdHkocHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCwgcHJvbm91bjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8gTG9vayB0aHJvdWdoIHJlY2VudCBjb252ZXJzYXRpb24gaGlzdG9yeSBmb3IgZW50aXRpZXNcbiAgICBjb25zdCByZWNlbnRUdXJucyA9IHByYWdtYXRpY0NvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtNSk7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IHJlY2VudFR1cm5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB0dXJuID0gcmVjZW50VHVybnNbaV07XG4gICAgICBpZiAoT2JqZWN0LmtleXModHVybi5lbnRpdGllcykubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGZpcnN0IGVudGl0eSBmb3VuZCAobW9zdCByZWNlbnQpXG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHR1cm4uZW50aXRpZXMpWzBdIGFzIHN0cmluZztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGVudGl0eSByZWZlcmVuY2VzXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUVudGl0eVJlZmVyZW5jZXMoaW5wdXQ6IHN0cmluZywgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCk6IHZvaWQge1xuICAgIC8vIFRyYWNrIGVudGl0eSBtZW50aW9ucyBhbmQgdGhlaXIgY29udGV4dHNcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudGl0eV0gb2YgcHJhZ21hdGljQ29udGV4dC5lbnRpdHlNZW1vcnkpIHtcbiAgICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGVudGl0eS52YWx1ZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZVJlc29sdXRpb24uZW50aXR5UmVmZXJlbmNlcy5zZXQoZW50aXR5LnZhbHVlLCB7XG4gICAgICAgICAgdHlwZTogZW50aXR5LmVudGl0eVR5cGUgfHwgJ3Vua25vd24nLFxuICAgICAgICAgIGxhc3RNZW50aW9uZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgY29udGV4dDogaW5wdXRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb250ZXh0dWFsIHJlZmVyZW5jZXNcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ29udGV4dHVhbFJlZmVyZW5jZXMoaW5wdXQ6IHN0cmluZywgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCk6IHZvaWQge1xuICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgdG8gcHJldmlvdXMgdG9waWNzIG9yIGNvbmNlcHRzXG4gICAgdGhpcy50b3BpY1N0YXRlLnRvcGljSGlzdG9yeS5mb3JFYWNoKHRvcGljID0+IHtcbiAgICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRvcGljLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlUmVzb2x1dGlvbi5jb250ZXh0dWFsUmVmZXJlbmNlcy5zZXQodG9waWMsIHtcbiAgICAgICAgICByZWZlcmVuY2VUeXBlOiAndG9waWNfY2FsbGJhY2snLFxuICAgICAgICAgIG9yaWdpbmFsQ29udGV4dDogdG9waWMsXG4gICAgICAgICAgY3VycmVudE1lbnRpb246IGlucHV0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0b3BpYyBjb250aW51aXR5IHNjb3JlXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVRvcGljQ29udGludWl0eShpbnB1dDogc3RyaW5nLCBzZW1hbnRpY0NvbnRleHQ6IGFueSk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLnRvcGljU3RhdGUuY3VycmVudFRvcGljKSByZXR1cm4gMDtcbiAgICBcbiAgICBsZXQgY29udGludWl0eSA9IDA7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHRvcGljLXJlbGF0ZWQga2V5d29yZHNcbiAgICBjb25zdCB0b3BpY0tleXdvcmRzID0gdGhpcy5nZXRUb3BpY0tleXdvcmRzKHRoaXMudG9waWNTdGF0ZS5jdXJyZW50VG9waWMpO1xuICAgIGNvbnN0IGlucHV0V29yZHMgPSBpbnB1dC50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXFcrLyk7XG4gICAgXG4gICAgY29uc3QgbWF0Y2hpbmdLZXl3b3JkcyA9IGlucHV0V29yZHMuZmlsdGVyKHdvcmQgPT4gXG4gICAgICB0b3BpY0tleXdvcmRzLmluY2x1ZGVzKHdvcmQpXG4gICAgKS5sZW5ndGg7XG4gICAgXG4gICAgY29udGludWl0eSA9IG1hdGNoaW5nS2V5d29yZHMgLyBNYXRoLm1heCh0b3BpY0tleXdvcmRzLmxlbmd0aCwgMSk7XG4gICAgXG4gICAgLy8gQm9vc3QgY29udGludWl0eSBmb3IgZW50aXR5IHJlZmVyZW5jZXNcbiAgICBpZiAoc2VtYW50aWNDb250ZXh0LmVudGl0aWVzICYmIHNlbWFudGljQ29udGV4dC5lbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb250aW51aXR5ICs9IDAuMztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWluKDEsIGNvbnRpbnVpdHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBrZXl3b3JkcyBhc3NvY2lhdGVkIHdpdGggYSB0b3BpY1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRUb3BpY0tleXdvcmRzKHRvcGljOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgdG9waWNLZXl3b3JkTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgICAnaWRlbnRpdHlfZGlzY3Vzc2lvbic6IFsnbmFtZScsICdpZGVudGl0eScsICd3aG8nLCAncGVyc29uJywgJ2luZGl2aWR1YWwnXSxcbiAgICAgICdhbmltYWxfZGlzY3Vzc2lvbic6IFsnZG9nJywgJ2NhdCcsICdwZXQnLCAnYW5pbWFsJywgJ2JyZWVkJywgJ3NwZWNpZXMnXSxcbiAgICAgICd2ZWhpY2xlX2Rpc2N1c3Npb24nOiBbJ2NhcicsICd0cnVjaycsICd2ZWhpY2xlJywgJ2RyaXZlJywgJ3RyYW5zcG9ydGF0aW9uJ10sXG4gICAgICAnYXNzaXN0YW5jZV9yZXF1ZXN0JzogWydoZWxwJywgJ2Fzc2lzdCcsICdzdXBwb3J0JywgJ2FpZCcsICdndWlkYW5jZSddLFxuICAgICAgJ2luZm9ybWF0aW9uX3NlZWtpbmcnOiBbJ3doYXQnLCAnaG93JywgJ3doeScsICd3aGVuJywgJ3doZXJlJywgJ3F1ZXN0aW9uJ10sXG4gICAgICAnc29jaWFsX2ludGVyYWN0aW9uJzogWydoZWxsbycsICdoaScsICdncmVldGluZycsICduaWNlJywgJ21lZXQnXVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHRvcGljS2V5d29yZE1hcFt0b3BpY10gfHwgW107XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRvcGljIGNvaGVyZW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUb3BpY0NvaGVyZW5jZShwcmFnbWF0aWNDb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0KTogbnVtYmVyIHtcbiAgICBpZiAocHJhZ21hdGljQ29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA8IDIpIHJldHVybiAxO1xuICAgIFxuICAgIGNvbnN0IHJlY2VudFR1cm5zID0gcHJhZ21hdGljQ29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5LnNsaWNlKC01KTtcbiAgICBsZXQgY29oZXJlbmNlU2NvcmUgPSAwO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBjb25zaXN0ZW50IGVudGl0eSByZWZlcmVuY2VzXG4gICAgY29uc3QgZW50aXR5Q291bnRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICByZWNlbnRUdXJucy5mb3JFYWNoKHR1cm4gPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyh0dXJuLmVudGl0aWVzKS5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICAgIGNvbnN0IGVudGl0eVN0ciA9IGVudGl0eSBhcyBzdHJpbmc7XG4gICAgICAgIGVudGl0eUNvdW50cy5zZXQoZW50aXR5U3RyLCAoZW50aXR5Q291bnRzLmdldChlbnRpdHlTdHIpIHx8IDApICsgMSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIaWdoZXIgY29oZXJlbmNlIGZvciByZXBlYXRlZCBlbnRpdHkgcmVmZXJlbmNlc1xuICAgIGNvbnN0IG1heEVudGl0eUNvdW50ID0gTWF0aC5tYXgoLi4uQXJyYXkuZnJvbShlbnRpdHlDb3VudHMudmFsdWVzKCkpLCAwKTtcbiAgICBjb2hlcmVuY2VTY29yZSA9IG1heEVudGl0eUNvdW50IC8gcmVjZW50VHVybnMubGVuZ3RoO1xuICAgIFxuICAgIHJldHVybiBNYXRoLm1pbigxLCBjb2hlcmVuY2VTY29yZSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGRpc2NvdXJzZSBtYXJrZXJzIGluIGlucHV0XG4gICAqL1xuICBwcml2YXRlIGRldGVjdERpc2NvdXJzZU1hcmtlcnMoaW5wdXQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXJrZXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGxvd2VySW5wdXQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIGNvbnN0IGRpc2NvdXJzZU1hcmtlclBhdHRlcm5zID0ge1xuICAgICAgJ3RvcGljX3NoaWZ0JzogWydhbnl3YXknLCAnYnkgdGhlIHdheScsICdzcGVha2luZyBvZicsICd0aGF0IHJlbWluZHMgbWUnXSxcbiAgICAgICdlbGFib3JhdGlvbic6IFsnYWxzbycsICdmdXJ0aGVybW9yZScsICdpbiBhZGRpdGlvbicsICdtb3Jlb3ZlciddLFxuICAgICAgJ2NvbnRyYXN0JzogWydidXQnLCAnaG93ZXZlcicsICdvbiB0aGUgb3RoZXIgaGFuZCcsICdhbHRob3VnaCddLFxuICAgICAgJ2NvbmNsdXNpb24nOiBbJ3NvJywgJ3RoZXJlZm9yZScsICdpbiBjb25jbHVzaW9uJywgJ3RvIHN1bW1hcml6ZSddLFxuICAgICAgJ2NsYXJpZmljYXRpb24nOiBbJ2kgbWVhbicsICd0aGF0IGlzJywgJ2luIG90aGVyIHdvcmRzJywgJ3NwZWNpZmljYWxseSddLFxuICAgICAgJ3NlcXVlbmNlJzogWydmaXJzdCcsICd0aGVuJywgJ25leHQnLCAnZmluYWxseScsICdhZnRlciB0aGF0J11cbiAgICB9O1xuICAgIFxuICAgIE9iamVjdC5lbnRyaWVzKGRpc2NvdXJzZU1hcmtlclBhdHRlcm5zKS5mb3JFYWNoKChbbWFya2VyVHlwZSwgcGF0dGVybnNdKSA9PiB7XG4gICAgICBwYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcyhwYXR0ZXJuKSkge1xuICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXJUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KG1hcmtlcnMpXTsgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgZXhwZWN0ZWQgcmVzcG9uc2UgdHlwZSBiYXNlZCBvbiBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGRldGVybWluZUV4cGVjdGVkUmVzcG9uc2VUeXBlKHNlbWFudGljQ29udGV4dDogYW55LCBjb252ZXJzYXRpb25QaGFzZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBCYXNlIHJlc3BvbnNlIHR5cGUgb24gc2VtYW50aWMgaW50ZW50XG4gICAgbGV0IHJlc3BvbnNlVHlwZSA9ICdhY2tub3dsZWRnbWVudCc7XG4gICAgXG4gICAgc3dpdGNoIChzZW1hbnRpY0NvbnRleHQuaW50ZW50KSB7XG4gICAgICBjYXNlICdRVUVTVElPTic6XG4gICAgICBjYXNlICdJTkZPUk1BVElPTl9SRVFVRVNUJzpcbiAgICAgIGNhc2UgJ0lERU5USVRZX1FVRVJZJzpcbiAgICAgIGNhc2UgJ0VOVElUWV9RVUVSWSc6XG4gICAgICBjYXNlICdCT1RfSURFTlRJVFlfUVVFUlknOlxuICAgICAgICByZXNwb25zZVR5cGUgPSAnaW5mb3JtYXRpdmVfYW5zd2VyJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdHUkVFVElORyc6XG4gICAgICAgIHJlc3BvbnNlVHlwZSA9ICdzb2NpYWxfcmVzcG9uc2UnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0lERU5USVRZX0lOVFJPRFVDVElPTic6XG4gICAgICBjYXNlICdFTlRJVFlfSU5UUk9EVUNUSU9OJzpcbiAgICAgICAgcmVzcG9uc2VUeXBlID0gJ2Fja25vd2xlZGdtZW50X3dpdGhfZm9sbG93dXAnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0hFTFBfUkVRVUVTVCc6XG4gICAgICAgIHJlc3BvbnNlVHlwZSA9ICdzdXBwb3J0aXZlX3Jlc3BvbnNlJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdHUkFUSVRVREUnOlxuICAgICAgICByZXNwb25zZVR5cGUgPSAnZ3JhY2lvdXNfYWNrbm93bGVkZ21lbnQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgLy8gTW9kaWZ5IGJhc2VkIG9uIGNvbnZlcnNhdGlvbiBwaGFzZVxuICAgIHN3aXRjaCAoY29udmVyc2F0aW9uUGhhc2UpIHtcbiAgICAgIGNhc2UgJ29wZW5pbmcnOlxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAnYWNrbm93bGVkZ21lbnQnKSB7XG4gICAgICAgICAgcmVzcG9uc2VUeXBlID0gJ3dlbGNvbWluZ19yZXNwb25zZSc7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWVwZW5pbmcnOlxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAnaW5mb3JtYXRpdmVfYW5zd2VyJykge1xuICAgICAgICAgIHJlc3BvbnNlVHlwZSA9ICdkZXRhaWxlZF9leHBsYW5hdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0cmFuc2l0aW9uJzpcbiAgICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgcXVlcnkgcmVzcG9uc2VzIGluIHRyYW5zaXRpb24gcGhhc2VcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSAhPT0gJ2luZm9ybWF0aXZlX2Fuc3dlcicpIHtcbiAgICAgICAgICByZXNwb25zZVR5cGUgPSAndHJhbnNpdGlvbmFsX3Jlc3BvbnNlJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlVHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBkaXNjb3Vyc2Ugc3RhdGUgZm9yIHJlc3BvbnNlIGdlbmVyYXRpb25cbiAgICovXG4gIGdldERpc2NvdXJzZVN0YXRlKCk6IHtcbiAgICB0b3BpY1N0YXRlOiBUb3BpY1N0YXRlO1xuICAgIGNvbnZlcnNhdGlvbkZsb3c6IENvbnZlcnNhdGlvbkZsb3c7XG4gICAgcmVmZXJlbmNlUmVzb2x1dGlvbjogUmVmZXJlbmNlUmVzb2x1dGlvbjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcGljU3RhdGU6IHsgLi4udGhpcy50b3BpY1N0YXRlIH0sXG4gICAgICBjb252ZXJzYXRpb25GbG93OiB7IC4uLnRoaXMuY29udmVyc2F0aW9uRmxvdyB9LFxuICAgICAgcmVmZXJlbmNlUmVzb2x1dGlvbjoge1xuICAgICAgICBwcm9ub3VuczogbmV3IE1hcCh0aGlzLnJlZmVyZW5jZVJlc29sdXRpb24ucHJvbm91bnMpLFxuICAgICAgICBlbnRpdHlSZWZlcmVuY2VzOiBuZXcgTWFwKHRoaXMucmVmZXJlbmNlUmVzb2x1dGlvbi5lbnRpdHlSZWZlcmVuY2VzKSxcbiAgICAgICAgY29udGV4dHVhbFJlZmVyZW5jZXM6IG5ldyBNYXAodGhpcy5yZWZlcmVuY2VSZXNvbHV0aW9uLmNvbnRleHR1YWxSZWZlcmVuY2VzKVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgZGlzY291cnNlIHN0YXRlIGZvciBuZXcgY29udmVyc2F0aW9uXG4gICAqL1xuICByZXNldERpc2NvdXJzZVN0YXRlKCk6IHZvaWQge1xuICAgIHRoaXMudG9waWNTdGF0ZSA9IHtcbiAgICAgIGN1cnJlbnRUb3BpYzogJycsXG4gICAgICB0b3BpY0hpc3Rvcnk6IFtdLFxuICAgICAgdG9waWNUcmFuc2l0aW9uczogbmV3IE1hcCgpLFxuICAgICAgdG9waWNEZXB0aDogMCxcbiAgICAgIHRvcGljQ29oZXJlbmNlOiAwXG4gICAgfTtcblxuICAgIHRoaXMuY29udmVyc2F0aW9uRmxvdyA9IHtcbiAgICAgIGN1cnJlbnRQaGFzZTogJ29wZW5pbmcnLFxuICAgICAgdHVybnNTaW5jZVBoYXNlQ2hhbmdlOiAwLFxuICAgICAgZXhwZWN0ZWROZXh0TW92ZXM6IFsnZ3JlZXRpbmcnLCAnaW50cm9kdWN0aW9uJywgJ3F1ZXN0aW9uJ10sXG4gICAgICBjb252ZXJzYXRpb25Nb21lbnR1bTogMFxuICAgIH07XG5cbiAgICB0aGlzLnJlZmVyZW5jZVJlc29sdXRpb24gPSB7XG4gICAgICBwcm9ub3VuczogbmV3IE1hcCgpLFxuICAgICAgZW50aXR5UmVmZXJlbmNlczogbmV3IE1hcCgpLFxuICAgICAgY29udGV4dHVhbFJlZmVyZW5jZXM6IG5ldyBNYXAoKVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJEaXNjb3Vyc2VMYXllciIsImNvbnN0cnVjdG9yIiwic2NoZW1hVm9jYWJ1bGFyeSIsInRvcGljU3RhdGUiLCJjdXJyZW50VG9waWMiLCJ0b3BpY0hpc3RvcnkiLCJ0b3BpY1RyYW5zaXRpb25zIiwiTWFwIiwidG9waWNEZXB0aCIsInRvcGljQ29oZXJlbmNlIiwiY29udmVyc2F0aW9uRmxvdyIsImN1cnJlbnRQaGFzZSIsInR1cm5zU2luY2VQaGFzZUNoYW5nZSIsImV4cGVjdGVkTmV4dE1vdmVzIiwiY29udmVyc2F0aW9uTW9tZW50dW0iLCJyZWZlcmVuY2VSZXNvbHV0aW9uIiwicHJvbm91bnMiLCJlbnRpdHlSZWZlcmVuY2VzIiwiY29udGV4dHVhbFJlZmVyZW5jZXMiLCJhbmFseXplRGlzY291cnNlQ29udGV4dCIsImlucHV0Iiwic2VtYW50aWNDb250ZXh0IiwicHJhZ21hdGljQ29udGV4dCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVUb3BpY1N0YXRlIiwidXBkYXRlQ29udmVyc2F0aW9uRmxvdyIsInVwZGF0ZVJlZmVyZW5jZVJlc29sdXRpb24iLCJ0b3BpY0NvbnRpbnVpdHkiLCJjYWxjdWxhdGVUb3BpY0NvbnRpbnVpdHkiLCJkaXNjb3Vyc2VNYXJrZXJzIiwiZGV0ZWN0RGlzY291cnNlTWFya2VycyIsImV4cGVjdGVkUmVzcG9uc2VUeXBlIiwiZGV0ZXJtaW5lRXhwZWN0ZWRSZXNwb25zZVR5cGUiLCJjb252ZXJzYXRpb25QaGFzZSIsInJlZmVyZW5jZVJlc29sdXRpb25zIiwiaW5wdXRUb3BpY3MiLCJleHRyYWN0VG9waWNzRnJvbUlucHV0IiwibGVuZ3RoIiwibmV3VG9waWMiLCJoYXMiLCJzZXQiLCJnZXQiLCJwdXNoIiwiY2FsY3VsYXRlVG9waWNDb2hlcmVuY2UiLCJ0b3BpY3MiLCJlbnRpdGllcyIsImZvckVhY2giLCJlbnRpdHkiLCJlbnRpdHlUeXBlIiwiaW5mZXJFbnRpdHlUeXBlIiwidG9Mb3dlckNhc2UiLCJpbnRlbnQiLCJuZXdQaGFzZSIsImhhc1RvcGljVHJhbnNpdGlvbiIsInVwZGF0ZUV4cGVjdGVkTmV4dE1vdmVzIiwidXBkYXRlQ29udmVyc2F0aW9uTW9tZW50dW0iLCJwaGFzZSIsIm1vbWVudHVtIiwiTWF0aCIsIm1heCIsIm1pbiIsInJlc29sdmVQcm9ub3VuUmVmZXJlbmNlcyIsInVwZGF0ZUVudGl0eVJlZmVyZW5jZXMiLCJ1cGRhdGVDb250ZXh0dWFsUmVmZXJlbmNlcyIsInByb25vdW4iLCJpbmNsdWRlcyIsInJlY2VudEVudGl0eSIsImZpbmRNb3N0UmVjZW50RW50aXR5IiwicmVjZW50VHVybnMiLCJjb252ZXJzYXRpb25IaXN0b3J5Iiwic2xpY2UiLCJpIiwidHVybiIsIk9iamVjdCIsImtleXMiLCJ2YWx1ZXMiLCJrZXkiLCJlbnRpdHlNZW1vcnkiLCJ2YWx1ZSIsInR5cGUiLCJsYXN0TWVudGlvbmVkIiwiRGF0ZSIsIm5vdyIsImNvbnRleHQiLCJ0b3BpYyIsInJlZmVyZW5jZVR5cGUiLCJvcmlnaW5hbENvbnRleHQiLCJjdXJyZW50TWVudGlvbiIsImNvbnRpbnVpdHkiLCJ0b3BpY0tleXdvcmRzIiwiZ2V0VG9waWNLZXl3b3JkcyIsImlucHV0V29yZHMiLCJzcGxpdCIsIm1hdGNoaW5nS2V5d29yZHMiLCJmaWx0ZXIiLCJ3b3JkIiwidG9waWNLZXl3b3JkTWFwIiwiY29oZXJlbmNlU2NvcmUiLCJlbnRpdHlDb3VudHMiLCJlbnRpdHlTdHIiLCJtYXhFbnRpdHlDb3VudCIsIkFycmF5IiwiZnJvbSIsIm1hcmtlcnMiLCJsb3dlcklucHV0IiwiZGlzY291cnNlTWFya2VyUGF0dGVybnMiLCJlbnRyaWVzIiwibWFya2VyVHlwZSIsInBhdHRlcm5zIiwicGF0dGVybiIsIlNldCIsInJlc3BvbnNlVHlwZSIsImdldERpc2NvdXJzZVN0YXRlIiwicmVzZXREaXNjb3Vyc2VTdGF0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/conversation/discourse-layer.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/conversation/generative-layer.ts":
/*!**************************************************!*\
  !*** ./src/lib/conversation/generative-layer.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GenerativeLayer: () => (/* binding */ GenerativeLayer)\n/* harmony export */ });\n// =============================================================================\n// GENERATIVE LAYER - Dynamic Natural Language Generation\n// =============================================================================\nclass GenerativeLayer {\n    constructor(schemaVocabulary){\n        this.schemaVocabulary = schemaVocabulary;\n        this.defaultStyle = {\n            formality: 'neutral',\n            enthusiasm: 'medium',\n            verbosity: 'moderate',\n            personality: 'helpful'\n        };\n    }\n    /**\n   * Generate dynamic response based on context\n   */ generateResponse(context) {\n        console.log(' Generating dynamic response...');\n        console.log('Response type:', context.responseType);\n        console.log('Conversation phase:', context.discourseContext?.conversationPhase);\n        // Determine generation style based on context\n        const style = this.determineGenerationStyle(context);\n        // Generate response components\n        const components = this.generateResponseComponents(context, style);\n        // Assemble final response\n        const response = this.assembleResponse(components, style);\n        console.log(' Generated response:', response);\n        return response;\n    }\n    /**\n   * Determine generation style based on context\n   */ determineGenerationStyle(context) {\n        let style = {\n            ...this.defaultStyle\n        };\n        // Adjust formality based on conversation phase\n        switch(context.discourseContext?.conversationPhase){\n            case 'opening':\n                style.formality = 'neutral';\n                style.enthusiasm = 'medium';\n                break;\n            case 'exploration':\n                style.formality = 'casual';\n                style.enthusiasm = 'medium';\n                break;\n            case 'deepening':\n                style.formality = 'neutral';\n                style.verbosity = 'detailed';\n                break;\n            case 'transition':\n                style.enthusiasm = 'low';\n                style.verbosity = 'concise';\n                break;\n        }\n        // Adjust based on semantic intent\n        switch(context.semanticContext?.intent){\n            case 'GREETING':\n                style.enthusiasm = 'high';\n                style.personality = 'friendly';\n                break;\n            case 'HELP_REQUEST':\n                style.personality = 'helpful';\n                style.enthusiasm = 'medium';\n                break;\n            case 'INFORMATION_REQUEST':\n            case 'QUESTION':\n                style.personality = 'analytical';\n                style.verbosity = 'detailed';\n                break;\n            case 'GRATITUDE':\n                style.personality = 'friendly';\n                style.enthusiasm = 'medium';\n                break;\n        }\n        // Adjust based on conversation momentum\n        if (context.discourseContext?.conversationFlow?.conversationMomentum > 0.7) {\n            style.enthusiasm = 'high';\n            style.verbosity = 'detailed';\n        } else if (context.discourseContext?.conversationFlow?.conversationMomentum < 0.3) {\n            style.enthusiasm = 'low';\n            style.verbosity = 'concise';\n        }\n        return style;\n    }\n    /**\n   * Generate response components\n   */ generateResponseComponents(context, style) {\n        const components = {\n            opening: '',\n            core: '',\n            followup: '',\n            closing: ''\n        };\n        // Generate opening based on response type and style\n        components.opening = this.generateOpening(context, style);\n        // Generate core content\n        components.core = this.generateCore(context, style);\n        // Generate followup if appropriate\n        components.followup = this.generateFollowup(context, style);\n        // Generate closing if needed\n        components.closing = this.generateClosing(context, style);\n        return components;\n    }\n    /**\n   * Generate opening phrase\n   */ generateOpening(context, style) {\n        const responseType = context.responseType;\n        const conversationPhase = context.discourseContext?.conversationPhase;\n        // Opening patterns based on response type and style\n        const openingPatterns = {\n            'social_response': {\n                'friendly': [\n                    'Hello!',\n                    'Hi there!',\n                    'Hey!',\n                    'Greetings!'\n                ],\n                'helpful': [\n                    'Hello!',\n                    'Hi!',\n                    'Welcome!'\n                ],\n                'analytical': [\n                    'Hello.',\n                    'Greetings.'\n                ],\n                'professional': [\n                    'Good day.',\n                    'Hello.'\n                ]\n            },\n            'acknowledgment_with_followup': {\n                'friendly': [\n                    'That\\'s wonderful!',\n                    'How nice!',\n                    'Great!'\n                ],\n                'helpful': [\n                    'I understand.',\n                    'I see.',\n                    'Got it.'\n                ],\n                'analytical': [\n                    'Noted.',\n                    'Understood.',\n                    'I see.'\n                ],\n                'professional': [\n                    'Acknowledged.',\n                    'Understood.'\n                ]\n            },\n            'informative_answer': {\n                'friendly': [\n                    'Let me help with that!',\n                    'I\\'d be happy to explain!'\n                ],\n                'helpful': [\n                    'I can help with that.',\n                    'Let me assist you.'\n                ],\n                'analytical': [\n                    'Based on my analysis,',\n                    'From my understanding,'\n                ],\n                'professional': [\n                    'I can provide that information.'\n                ]\n            },\n            'supportive_response': {\n                'friendly': [\n                    'I\\'m here to help!',\n                    'I\\'d love to assist!'\n                ],\n                'helpful': [\n                    'I\\'m here to help.',\n                    'I can assist you.'\n                ],\n                'analytical': [\n                    'I can provide assistance.',\n                    'I\\'m available to help.'\n                ],\n                'professional': [\n                    'I\\'m available to assist.'\n                ]\n            },\n            'gracious_acknowledgment': {\n                'friendly': [\n                    'You\\'re so welcome!',\n                    'My pleasure!'\n                ],\n                'helpful': [\n                    'You\\'re welcome!',\n                    'Happy to help!'\n                ],\n                'analytical': [\n                    'You\\'re welcome.',\n                    'Glad I could help.'\n                ],\n                'professional': [\n                    'You\\'re welcome.'\n                ]\n            }\n        };\n        const patterns = openingPatterns[responseType]?.[style.personality] || [\n            ''\n        ];\n        if (patterns.length === 0) return '';\n        // Select pattern based on enthusiasm level\n        let selectedPattern = patterns[0];\n        if (style.enthusiasm === 'high' && patterns.length > 1) {\n            selectedPattern = patterns[Math.min(1, patterns.length - 1)];\n        } else if (style.enthusiasm === 'low') {\n            selectedPattern = patterns[patterns.length - 1];\n        }\n        return selectedPattern;\n    }\n    /**\n   * Generate core content\n   */ generateCore(context, style) {\n        const responseType = context.responseType;\n        const semanticContext = context.semanticContext;\n        const pragmaticContext = context.pragmaticContext;\n        switch(responseType){\n            case 'social_response':\n                return this.generateSocialCore(context, style);\n            case 'acknowledgment_with_followup':\n                return this.generateAcknowledgmentCore(context, style);\n            case 'informative_answer':\n                return this.generateInformativeCore(context, style);\n            case 'supportive_response':\n                return this.generateSupportiveCore(context, style);\n            case 'gracious_acknowledgment':\n                return this.generateGraciousCore(context, style);\n            case 'welcoming_response':\n                return this.generateWelcomingCore(context, style);\n            case 'detailed_explanation':\n                return this.generateDetailedCore(context, style);\n            case 'transitional_response':\n                return this.generateTransitionalCore(context, style);\n            default:\n                return this.generateDefaultCore(context, style);\n        }\n    }\n    /**\n   * Generate social response core\n   */ generateSocialCore(context, style) {\n        const botIdentity = this.getBotIdentityDescription(style);\n        const capabilities = this.getCapabilityDescription(style);\n        if (style.verbosity === 'detailed') {\n            return `${botIdentity} ${capabilities}`;\n        } else if (style.verbosity === 'moderate') {\n            return botIdentity;\n        } else {\n            return \"I'm PrimeBot.\";\n        }\n    }\n    /**\n   * Generate acknowledgment core\n   */ generateAcknowledgmentCore(context, style) {\n        const entities = context.semanticContext?.entities || [];\n        if (entities.length >= 2) {\n            // Entity introduction (e.g., \"My dog's name is Juno\")\n            const entityType = entities[0];\n            const entityName = entities[1];\n            const schemaType = this.schemaVocabulary.inferEntityType(entityType);\n            let core = this.generateEntityAcknowledgment(entityType, entityName, schemaType, style);\n            return core;\n        } else if (entities.length === 1) {\n            // Single entity (e.g., \"My name is Alex\")\n            const entityName = entities[0];\n            return this.generateNameAcknowledgment(entityName, style);\n        }\n        return this.generateGenericAcknowledgment(style);\n    }\n    /**\n   * Generate entity acknowledgment\n   */ generateEntityAcknowledgment(entityType, entityName, schemaType, style) {\n        const acknowledgments = this.getEntityAcknowledgmentTemplates(style);\n        const template = acknowledgments[Math.floor(Math.random() * acknowledgments.length)];\n        let core = template.replace('{entityType}', entityType).replace('{entityName}', entityName);\n        // Add schema-informed context\n        if (schemaType && style.verbosity !== 'concise') {\n            const schemaContext = this.generateSchemaContext(entityType, entityName, schemaType, style);\n            if (schemaContext) {\n                core += ` ${schemaContext}`;\n            }\n        }\n        return core;\n    }\n    /**\n   * Get entity acknowledgment templates\n   */ getEntityAcknowledgmentTemplates(style) {\n        switch(style.personality){\n            case 'friendly':\n                return [\n                    \"It's lovely to know that your {entityType} is named {entityName}!\",\n                    \"What a wonderful name for your {entityType} - {entityName}!\",\n                    \"I love that your {entityType} is called {entityName}!\"\n                ];\n            case 'helpful':\n                return [\n                    \"I understand that your {entityType} is named {entityName}.\",\n                    \"Thank you for telling me about {entityName}, your {entityType}.\",\n                    \"I've noted that your {entityType} is named {entityName}.\"\n                ];\n            case 'analytical':\n                return [\n                    \"I've recorded that your {entityType} has the name {entityName}.\",\n                    \"Entity relationship noted: {entityType} hasName {entityName}.\",\n                    \"I understand the naming relationship for your {entityType}.\"\n                ];\n            case 'professional':\n                return [\n                    \"I acknowledge that your {entityType} is named {entityName}.\",\n                    \"Thank you for providing the name of your {entityType}.\",\n                    \"I have recorded the information about {entityName}.\"\n                ];\n            default:\n                return [\n                    \"I understand that your {entityType} is named {entityName}.\"\n                ];\n        }\n    }\n    /**\n   * Generate schema-informed context\n   */ generateSchemaContext(entityType, entityName, schemaType, style) {\n        const entityInfo = this.schemaVocabulary.getEntityInfo(schemaType);\n        if (!entityInfo) return '';\n        const validProperties = this.schemaVocabulary.getValidProperties(schemaType);\n        switch(schemaType){\n            case 'Animal':\n                if (style.personality === 'friendly') {\n                    return `Tell me more about ${entityName} - what kind of ${entityType} is ${entityName}?`;\n                } else if (style.personality === 'analytical') {\n                    return `As an Animal entity, ${entityName} has properties like species and breed.`;\n                } else {\n                    return `What kind of ${entityType} is ${entityName}?`;\n                }\n            case 'Vehicle':\n                if (style.personality === 'friendly') {\n                    return `I'd love to hear more about ${entityName}! What kind of ${entityType} is it?`;\n                } else {\n                    return `What type of ${entityType} is ${entityName}?`;\n                }\n            case 'Person':\n                if (style.personality === 'friendly') {\n                    return `It's nice to meet ${entityName}! Tell me more about them.`;\n                } else {\n                    return `Tell me more about ${entityName}.`;\n                }\n            default:\n                return `Tell me more about ${entityName}.`;\n        }\n    }\n    /**\n   * Generate name acknowledgment\n   */ generateNameAcknowledgment(name, style) {\n        const templates = this.getNameAcknowledgmentTemplates(style);\n        const template = templates[Math.floor(Math.random() * templates.length)];\n        return template.replace('{name}', name);\n    }\n    /**\n   * Get name acknowledgment templates\n   */ getNameAcknowledgmentTemplates(style) {\n        switch(style.personality){\n            case 'friendly':\n                return [\n                    \"It's wonderful to meet you, {name}!\",\n                    \"Nice to meet you, {name}!\",\n                    \"Hello {name}! Great to meet you!\"\n                ];\n            case 'helpful':\n                return [\n                    \"Nice to meet you, {name}!\",\n                    \"Hello {name}! I'm here to help.\",\n                    \"Welcome, {name}!\"\n                ];\n            case 'analytical':\n                return [\n                    \"Acknowledged, {name}.\",\n                    \"Hello {name}.\",\n                    \"Identity recorded: {name}.\"\n                ];\n            case 'professional':\n                return [\n                    \"Good to meet you, {name}.\",\n                    \"Hello {name}.\",\n                    \"Welcome, {name}.\"\n                ];\n            default:\n                return [\n                    \"Nice to meet you, {name}!\"\n                ];\n        }\n    }\n    /**\n   * Generate informative core\n   */ generateInformativeCore(context, style) {\n        const semanticContext = context.semanticContext;\n        const pragmaticContext = context.pragmaticContext;\n        const currentInput = pragmaticContext.conversationHistory[pragmaticContext.conversationHistory.length - 1]?.text || '';\n        // Always check for semantic queries first for informative answers\n        const queryResult = this.handleSemanticQuery(context, style);\n        if (queryResult) return queryResult;\n        // Generate based on semantic context\n        if (semanticContext?.entities && semanticContext.entities.length > 0) {\n            const entity = semanticContext.entities[0];\n            const entityType = this.schemaVocabulary.inferEntityType(entity);\n            if (entityType) {\n                return this.generateEntityInformation(entity, entityType, style);\n            }\n        }\n        // Enhanced fallback with pronoun resolution and pattern matching\n        return this.handleUnknownQuery(currentInput, pragmaticContext, style);\n    }\n    /**\n   * Handle unknown queries with enhanced pattern matching\n   */ handleUnknownQuery(input, pragmaticContext, style) {\n        const lowerInput = input.toLowerCase();\n        // Enhanced pronoun resolution\n        if (this.containsPronoun(lowerInput)) {\n            const resolvedQuery = this.resolvePronounQuery(input, pragmaticContext);\n            if (resolvedQuery) {\n                return resolvedQuery;\n            }\n        }\n        // Enhanced question pattern matching\n        if (lowerInput.includes('what') && lowerInput.includes('car')) {\n            return \"I don't have information about your car. Could you tell me about your car?\";\n        }\n        if (lowerInput.includes('what') && lowerInput.includes('do')) {\n            return \"I'd be happy to help! Could you tell me more about what you're looking for?\";\n        }\n        if (lowerInput.includes('how') && lowerInput.includes('old')) {\n            return \"I don't have age information stored. Could you share that with me?\";\n        }\n        if (lowerInput.includes('where') && lowerInput.includes('live')) {\n            return \"I don't have location information. Where do you live?\";\n        }\n        // General question patterns\n        if (lowerInput.startsWith('what') || lowerInput.startsWith('how') || lowerInput.startsWith('where') || lowerInput.startsWith('when') || lowerInput.startsWith('why')) {\n            return \"That's a great question! I don't have that specific information yet. Could you tell me more about it?\";\n        }\n        // Possession patterns\n        if (lowerInput.includes('do i have') || lowerInput.includes('is my')) {\n            return \"I don't have that information stored. Could you tell me about it?\";\n        }\n        // Default helpful response\n        return \"I'd like to help with that! Could you provide more details or tell me what you'd like me to know?\";\n    }\n    /**\n   * Check if input contains pronouns\n   */ containsPronoun(input) {\n        const pronouns = [\n            'her',\n            'his',\n            'their',\n            'its',\n            'she',\n            'he',\n            'they',\n            'it'\n        ];\n        return pronouns.some((pronoun)=>input.includes(pronoun));\n    }\n    /**\n   * Resolve pronoun-based queries\n   */ resolvePronounQuery(input, pragmaticContext) {\n        const lowerInput = input.toLowerCase();\n        // Look for recent entity introductions to resolve pronouns\n        const recentHistory = pragmaticContext.conversationHistory.slice(-5);\n        // Find the most recent entity that could match the pronoun\n        for(let i = recentHistory.length - 1; i >= 0; i--){\n            const turn = recentHistory[i];\n            if (turn.intent === 'ENTITY_INTRODUCTION') {\n                const entities = Object.values(turn.entities);\n                // Check for female pronouns\n                if ((lowerInput.includes('her') || lowerInput.includes('she')) && entities.length >= 2) {\n                    const entityType = entities[0];\n                    const entityName = entities[1];\n                    if (this.isFemalePronounEntity(entityType)) {\n                        if (lowerInput.includes('name')) {\n                            return `Her name is ${entityName}.`;\n                        }\n                        return `You're asking about ${entityName}, your ${entityType}.`;\n                    }\n                }\n                // Check for male pronouns\n                if ((lowerInput.includes('his') || lowerInput.includes('he')) && entities.length >= 2) {\n                    const entityType = entities[0];\n                    const entityName = entities[1];\n                    if (this.isMalePronounEntity(entityType)) {\n                        if (lowerInput.includes('name')) {\n                            return `His name is ${entityName}.`;\n                        }\n                        return `You're asking about ${entityName}, your ${entityType}.`;\n                    }\n                }\n                // Generic pronoun resolution\n                if (entities.length >= 2) {\n                    const entityType = entities[0];\n                    const entityName = entities[1];\n                    if (lowerInput.includes('name')) {\n                        return `The name is ${entityName}.`;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    /**\n   * Check if entity type uses female pronouns\n   */ isFemalePronounEntity(entityType) {\n        const femaleEntities = [\n            'wife',\n            'mother',\n            'sister',\n            'daughter',\n            'girlfriend',\n            'aunt',\n            'grandmother',\n            'woman',\n            'girl'\n        ];\n        return femaleEntities.includes(entityType.toLowerCase());\n    }\n    /**\n   * Check if entity type uses male pronouns\n   */ isMalePronounEntity(entityType) {\n        const maleEntities = [\n            'husband',\n            'father',\n            'brother',\n            'son',\n            'boyfriend',\n            'uncle',\n            'grandfather',\n            'man',\n            'boy'\n        ];\n        return maleEntities.includes(entityType.toLowerCase());\n    }\n    /**\n   * Handle semantic queries\n   */ handleSemanticQuery(context, style) {\n        const pragmaticContext = context.pragmaticContext;\n        // Get the CURRENT input, not the last stored input\n        const currentInput = pragmaticContext.conversationHistory[pragmaticContext.conversationHistory.length - 1]?.text || '';\n        console.log(' Handling semantic query for:', currentInput);\n        console.log(' Available entity memory:', Object.fromEntries(pragmaticContext.entityMemory));\n        // Check for bot identity queries\n        if (currentInput.toLowerCase().includes('who are you') || currentInput.toLowerCase().includes('what is your name')) {\n            return this.handleBotIdentityQuery(style);\n        }\n        // Check for user name queries\n        if (currentInput.toLowerCase().includes('what is my name')) {\n            return this.handleNameQuery(pragmaticContext, style);\n        }\n        // Check for entity name queries\n        const entityNameMatch = currentInput.match(/what is my (\\w+)'?s? name/i);\n        if (entityNameMatch) {\n            const entityType = entityNameMatch[1];\n            return this.handleEntityNameQuery(entityType, pragmaticContext, style);\n        }\n        // Check for entity name queries with apostrophe\n        const entityNameMatch2 = currentInput.match(/what is my (\\w+)'s name/i);\n        if (entityNameMatch2) {\n            const entityType = entityNameMatch2[1];\n            return this.handleEntityNameQuery(entityType, pragmaticContext, style);\n        }\n        // Check for \"Who is X?\" queries\n        const whoIsMatch = currentInput.match(/who is (\\w+)/i);\n        if (whoIsMatch) {\n            const entityName = whoIsMatch[1];\n            return this.handleWhoIsQuery(entityName, pragmaticContext, style);\n        }\n        // Check for attribute queries (e.g., \"What color is my hair?\")\n        const attributeMatch = currentInput.match(/what (\\w+) is my (\\w+)/i);\n        if (attributeMatch) {\n            const attribute = attributeMatch[1];\n            const entity = attributeMatch[2];\n            return this.handleAttributeQuery(attribute, entity, pragmaticContext, style);\n        }\n        // Check for general attribute queries (e.g., \"What is my hair color?\")\n        const generalAttributeMatch = currentInput.match(/what is my (\\w+) (\\w+)/i);\n        if (generalAttributeMatch) {\n            const entity = generalAttributeMatch[1];\n            const attribute = generalAttributeMatch[2];\n            return this.handleAttributeQuery(attribute, entity, pragmaticContext, style);\n        }\n        return null;\n    }\n    /**\n   * Handle bot identity queries\n   */ handleBotIdentityQuery(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"I'm PrimeBot, your friendly AI assistant! I use mathematical prime factorization and semantic understanding to have conversations.\";\n            case 'analytical':\n                return \"I am PrimeBot, an AI system that processes information through mathematical prime factorization and semantic analysis using Schema.org vocabulary.\";\n            case 'professional':\n                return \"I am PrimeBot, an AI assistant specializing in semantic understanding and mathematical analysis.\";\n            default:\n                return \"I'm PrimeBot, an AI assistant powered by mathematical prime factorization and semantic understanding.\";\n        }\n    }\n    /**\n   * Handle name queries\n   */ handleNameQuery(pragmaticContext, style) {\n        const context = pragmaticContext.conversationHistory.map((turn)=>turn.text).join(' ').toLowerCase();\n        const nameMatch = context.match(/my name is (\\w+)/i);\n        if (nameMatch) {\n            const name = nameMatch[1];\n            switch(style.personality){\n                case 'friendly':\n                    return `Your name is ${name}! I remember you telling me that.`;\n                case 'analytical':\n                    return `Based on our conversation history, your name is ${name}.`;\n                case 'professional':\n                    return `According to our conversation, your name is ${name}.`;\n                default:\n                    return `Your name is ${name}.`;\n            }\n        } else {\n            switch(style.personality){\n                case 'friendly':\n                    return \"I don't recall you mentioning your name yet. I'd love to know what to call you!\";\n                case 'helpful':\n                    return \"I don't recall you mentioning your name. What is your name?\";\n                case 'analytical':\n                    return \"No name information found in conversation history. Please provide your name.\";\n                default:\n                    return \"I don't recall you mentioning your name. What is your name?\";\n            }\n        }\n    }\n    /**\n   * Handle entity name queries\n   */ handleEntityNameQuery(entityType, pragmaticContext, style) {\n        // First check entity memory for stored relationships\n        for (const [key, entity] of pragmaticContext.entityMemory){\n            if (key === `${entityType}_name` || entity.relationship === 'hasName' && entity.entityType === entityType) {\n                const entityName = this.capitalizeFirstLetter(entity.value);\n                let response = `Your ${entityType} is named ${entityName}.`;\n                const schemaType = this.schemaVocabulary.inferEntityType(entityType);\n                if (schemaType && style.verbosity !== 'concise') {\n                    const contextualNote = this.generateContextualNote(entityType, entityName, schemaType, style);\n                    if (contextualNote) {\n                        response += ` ${contextualNote}`;\n                    }\n                }\n                return response;\n            }\n        }\n        // Fallback to conversation history search\n        const context = pragmaticContext.conversationHistory.map((turn)=>turn.text).join(' ');\n        const entityPattern = new RegExp(`my ${entityType}'?s? name is (\\\\w+)`, 'i');\n        const entityMatch = context.match(entityPattern);\n        if (entityMatch) {\n            const entityName = this.capitalizeFirstLetter(entityMatch[1]);\n            const schemaType = this.schemaVocabulary.inferEntityType(entityType);\n            let response = `Your ${entityType} is named ${entityName}.`;\n            if (schemaType && style.verbosity !== 'concise') {\n                const contextualNote = this.generateContextualNote(entityType, entityName, schemaType, style);\n                if (contextualNote) {\n                    response += ` ${contextualNote}`;\n                }\n            }\n            return response;\n        } else {\n            switch(style.personality){\n                case 'friendly':\n                    return `I don't recall you mentioning your ${entityType}'s name. What is your ${entityType} called?`;\n                case 'helpful':\n                    return `I don't recall you mentioning your ${entityType}'s name. What is your ${entityType}'s name?`;\n                case 'analytical':\n                    return `No naming information found for entity type: ${entityType}. Please provide the name.`;\n                default:\n                    return `I don't recall you mentioning your ${entityType}'s name. What is your ${entityType}'s name?`;\n            }\n        }\n    }\n    /**\n   * Handle \"Who is X?\" queries\n   */ handleWhoIsQuery(entityName, pragmaticContext, style) {\n        // Search through entity memory for relationships involving this name\n        for (const [key, entity] of pragmaticContext.entityMemory){\n            if (entity.value.toLowerCase() === entityName.toLowerCase()) {\n                // Found the entity, determine the relationship\n                if (key.endsWith('_name')) {\n                    const entityType = key.replace('_name', '');\n                    switch(style.personality){\n                        case 'friendly':\n                            return `${entityName} is your ${entityType}! I remember you telling me about them.`;\n                        case 'analytical':\n                            return `Based on our conversation history, ${entityName} is identified as your ${entityType}.`;\n                        case 'professional':\n                            return `According to our conversation, ${entityName} is your ${entityType}.`;\n                        default:\n                            return `${entityName} is your ${entityType}.`;\n                    }\n                } else if (key === 'user_name') {\n                    return `${entityName} is you! That's your name.`;\n                }\n            }\n        }\n        // Entity not found in memory\n        switch(style.personality){\n            case 'friendly':\n                return `I don't recall you mentioning anyone named ${entityName}. Could you tell me more about them?`;\n            case 'helpful':\n                return `I don't have information about ${entityName}. Who is ${entityName}?`;\n            case 'analytical':\n                return `No entity information found for \"${entityName}\" in conversation history.`;\n            default:\n                return `I don't recall you mentioning ${entityName}. Who is ${entityName}?`;\n        }\n    }\n    /**\n   * Handle attribute queries (e.g., \"What color is my hair?\")\n   */ handleAttributeQuery(attribute, entity, pragmaticContext, style) {\n        // Search conversation history for attribute information\n        const context = pragmaticContext.conversationHistory.map((turn)=>turn.text).join(' ').toLowerCase();\n        // Look for patterns like \"my hair is brown\" or \"my car is red\" or \"I have a white truck\"\n        const patterns = [\n            new RegExp(`my ${entity} is ([\\\\w\\\\s]+?)(?:\\\\s|\\\\.|$)`, 'i'),\n            new RegExp(`i have a ([\\\\w\\\\s]+?) ${entity}(?:\\\\s|\\\\.|$)`, 'i'),\n            new RegExp(`${entity} is ([\\\\w\\\\s]+?)(?:\\\\s|\\\\.|$)`, 'i'),\n            new RegExp(`([\\\\w\\\\s]+?) ${entity}(?:\\\\s|\\\\.|$)`, 'i') // More general pattern\n        ];\n        let attributeValue = null;\n        for (const pattern of patterns){\n            const match = context.match(pattern);\n            if (match) {\n                attributeValue = match[1].trim();\n                break;\n            }\n        }\n        if (attributeValue) {\n            const capitalizedValue = this.capitalizeFirstLetter(attributeValue);\n            switch(style.personality){\n                case 'friendly':\n                    return `Your ${entity} is ${capitalizedValue}! I remember you telling me that.`;\n                case 'analytical':\n                    return `Based on conversation history, your ${entity} is ${capitalizedValue}.`;\n                case 'professional':\n                    return `According to our conversation, your ${entity} is ${capitalizedValue}.`;\n                default:\n                    return `Your ${entity} is ${capitalizedValue}.`;\n            }\n        } else {\n            // Check entity memory for stored attributes\n            for (const [key, entityInfo] of pragmaticContext.entityMemory){\n                if (key.includes(entity) && entityInfo.metadata && entityInfo.metadata[attribute]) {\n                    const storedValue = entityInfo.metadata[attribute];\n                    return `Your ${entity} is ${storedValue}.`;\n                }\n            }\n            // No attribute information found\n            switch(style.personality){\n                case 'friendly':\n                    return `I don't recall you mentioning the ${attribute} of your ${entity}. What ${attribute} is your ${entity}?`;\n                case 'helpful':\n                    return `I don't have information about your ${entity}'s ${attribute}. Could you tell me what ${attribute} your ${entity} is?`;\n                case 'analytical':\n                    return `No ${attribute} attribute found for entity: ${entity}. Please provide this information.`;\n                default:\n                    return `I don't have information about your ${entity}'s ${attribute}. What ${attribute} is it?`;\n            }\n        }\n    }\n    /**\n   * Generate contextual note for entities\n   */ generateContextualNote(entityType, entityName, schemaType, style) {\n        switch(schemaType){\n            case 'Animal':\n                if (style.personality === 'friendly') {\n                    return `That's a lovely name for ${entityType === 'Animal' ? 'an animal' : 'a ' + entityType}!`;\n                } else {\n                    return `${entityName} is classified as an Animal entity.`;\n                }\n            case 'Vehicle':\n                return style.personality === 'friendly' ? `${entityName} sounds like a great ${entityType}!` : `${entityName} is classified as a Vehicle entity.`;\n            default:\n                return '';\n        }\n    }\n    /**\n   * Generate entity information\n   */ generateEntityInformation(entity, entityType, style) {\n        const entityInfo = this.schemaVocabulary.getEntityInfo(entityType);\n        if (style.personality === 'analytical' && entityInfo) {\n            return `I'm analyzing \"${entity}\" as ${entityType === 'Animal' ? 'an' : 'a'} ${entityType} entity. This type has properties like ${entityInfo.properties.slice(0, 3).join(', ')}.`;\n        } else if (style.personality === 'friendly') {\n            return `I notice you mentioned \"${entity}\" - I understand that as ${entityType === 'Animal' ? 'an' : 'a'} ${entityType}. That's interesting!`;\n        } else {\n            return `I'm processing information about \"${entity}\" as ${entityType === 'Animal' ? 'an' : 'a'} ${entityType}.`;\n        }\n    }\n    /**\n   * Generate generic informative response\n   */ generateGenericInformativeResponse(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"That's a great question! I'm working through the information to give you a helpful answer.\";\n            case 'analytical':\n                return \"I'm analyzing the semantic relationships and mathematical patterns to provide an accurate response.\";\n            case 'professional':\n                return \"I'm processing your request to provide you with the appropriate information.\";\n            default:\n                return \"I'm analyzing the information to provide you with an answer.\";\n        }\n    }\n    /**\n   * Generate supportive core\n   */ generateSupportiveCore(context, style) {\n        const capabilities = this.getCapabilityDescription(style);\n        switch(style.personality){\n            case 'friendly':\n                return `I can understand relationships between people, animals, places, and things. ${capabilities}`;\n            case 'analytical':\n                return `I process information through semantic analysis and mathematical prime factorization. ${capabilities}`;\n            case 'professional':\n                return `I'm equipped to assist with information processing and semantic understanding. ${capabilities}`;\n            default:\n                return `I can help with understanding relationships and processing information. ${capabilities}`;\n        }\n    }\n    /**\n   * Generate gracious core\n   */ generateGraciousCore(context, style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"I'm so glad I could help with my semantic understanding!\";\n            case 'analytical':\n                return \"I'm pleased that my mathematical analysis was useful.\";\n            case 'professional':\n                return \"I'm glad I could provide the assistance you needed.\";\n            default:\n                return \"I'm glad I could help!\";\n        }\n    }\n    /**\n   * Generate welcoming core\n   */ generateWelcomingCore(context, style) {\n        const botIdentity = this.getBotIdentityDescription(style);\n        const capabilities = this.getCapabilityDescription(style);\n        return `${botIdentity} ${capabilities}`;\n    }\n    /**\n   * Generate detailed core\n   */ generateDetailedCore(context, style) {\n        // For detailed explanations, provide more comprehensive information\n        const informativeCore = this.generateInformativeCore(context, style);\n        const technicalDetails = this.getTechnicalDetails(context, style);\n        return `${informativeCore} ${technicalDetails}`;\n    }\n    /**\n   * Generate transitional core\n   */ generateTransitionalCore(context, style) {\n        const discourseContext = context.discourseContext;\n        if (discourseContext?.topicState?.topicHistory?.length > 0) {\n            const previousTopic = discourseContext.topicState.topicHistory[discourseContext.topicState.topicHistory.length - 1];\n            return `I notice we've moved from discussing ${previousTopic} to a new topic.`;\n        }\n        return \"I'm ready to explore whatever you'd like to discuss.\";\n    }\n    /**\n   * Generate default core\n   */ generateDefaultCore(context, style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"I'm listening and ready to understand what you're telling me!\";\n            case 'analytical':\n                return \"I'm processing the semantic relationships in your message.\";\n            case 'professional':\n                return \"I'm ready to assist with your inquiry.\";\n            default:\n                return \"I'm listening and ready to help.\";\n        }\n    }\n    /**\n   * Generate followup\n   */ generateFollowup(context, style) {\n        const responseType = context.responseType;\n        const conversationPhase = context.discourseContext?.conversationPhase;\n        // Generate followup based on response type and conversation phase\n        if (responseType === 'acknowledgment_with_followup' || responseType === 'welcoming_response' || conversationPhase === 'exploration') {\n            return this.generateContextualFollowup(context, style);\n        }\n        return '';\n    }\n    /**\n   * Generate contextual followup\n   */ generateContextualFollowup(context, style) {\n        const conversationPhase = context.discourseContext?.conversationPhase;\n        switch(conversationPhase){\n            case 'opening':\n                return this.generateOpeningFollowup(style);\n            case 'exploration':\n                return this.generateExplorationFollowup(context, style);\n            case 'deepening':\n                return this.generateDeepeningFollowup(context, style);\n            default:\n                return this.generateGenericFollowup(style);\n        }\n    }\n    /**\n   * Generate opening followup\n   */ generateOpeningFollowup(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"How can I help you today?\";\n            case 'helpful':\n                return \"What can I assist you with?\";\n            case 'analytical':\n                return \"What would you like to explore?\";\n            case 'professional':\n                return \"How may I assist you?\";\n            default:\n                return \"How can I help?\";\n        }\n    }\n    /**\n   * Generate exploration followup\n   */ generateExplorationFollowup(context, style) {\n        const entities = context.semanticContext?.entities || [];\n        if (entities.length > 0) {\n            const entity = entities[entities.length - 1]; // Most recent entity\n            switch(style.personality){\n                case 'friendly':\n                    return `Tell me more about ${entity}!`;\n                case 'analytical':\n                    return `What additional information can you provide about ${entity}?`;\n                case 'professional':\n                    return `Please share more details about ${entity}.`;\n                default:\n                    return `Tell me more about ${entity}.`;\n            }\n        }\n        return this.generateGenericFollowup(style);\n    }\n    /**\n   * Generate deepening followup\n   */ generateDeepeningFollowup(context, style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"What else would you like to explore about this?\";\n            case 'analytical':\n                return \"Are there specific aspects you'd like me to analyze further?\";\n            case 'professional':\n                return \"What additional details would be helpful?\";\n            default:\n                return \"What else would you like to know?\";\n        }\n    }\n    /**\n   * Generate generic followup\n   */ generateGenericFollowup(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"What would you like to discuss?\";\n            case 'analytical':\n                return \"What would you like to analyze?\";\n            case 'professional':\n                return \"What would you like to explore?\";\n            default:\n                return \"What would you like to discuss?\";\n        }\n    }\n    /**\n   * Generate closing\n   */ generateClosing(context, style) {\n        // Only add closing for certain response types and high verbosity\n        if (style.verbosity === 'detailed' && (context.responseType === 'welcoming_response' || context.responseType === 'detailed_explanation')) {\n            switch(style.personality){\n                case 'friendly':\n                    return \"I'm excited to learn more!\";\n                case 'analytical':\n                    return \"I'm ready to process more information.\";\n                case 'professional':\n                    return \"I look forward to assisting you further.\";\n                default:\n                    return \"\";\n            }\n        }\n        return '';\n    }\n    /**\n   * Assemble final response\n   */ assembleResponse(components, style) {\n        const parts = [];\n        if (components.opening) parts.push(components.opening);\n        if (components.core) parts.push(components.core);\n        if (components.followup) parts.push(components.followup);\n        if (components.closing) parts.push(components.closing);\n        return parts.join(' ');\n    }\n    /**\n   * Get bot identity description\n   */ getBotIdentityDescription(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"I'm PrimeBot, your friendly AI assistant powered by mathematical prime factorization and semantic understanding.\";\n            case 'analytical':\n                return \"I'm PrimeBot, an AI system that processes information through mathematical prime factorization and semantic analysis.\";\n            case 'professional':\n                return \"I'm PrimeBot, an AI assistant specializing in semantic understanding and mathematical analysis.\";\n            default:\n                return \"I'm PrimeBot, powered by mathematical prime factorization and semantic understanding.\";\n        }\n    }\n    /**\n   * Get capability description\n   */ getCapabilityDescription(style) {\n        switch(style.verbosity){\n            case 'detailed':\n                return \"I can understand relationships between people, animals, places, and things using Schema.org vocabulary, maintain conversation memory, and provide contextual responses based on mathematical prime resonance.\";\n            case 'moderate':\n                return \"I can understand relationships between entities and maintain conversation context.\";\n            case 'concise':\n                return \"I understand entity relationships and context.\";\n            default:\n                return \"I can help with understanding relationships and processing information.\";\n        }\n    }\n    /**\n   * Get technical details\n   */ getTechnicalDetails(context, style) {\n        if (style.personality !== 'analytical') {\n            return '';\n        }\n        return 'Using mathematical prime factorization and Schema.org semantic relationships for analysis.';\n    }\n    /**\n   * Generate generic acknowledgment\n   */ generateGenericAcknowledgment(style) {\n        switch(style.personality){\n            case 'friendly':\n                return \"That's interesting! I'm learning about what you're telling me.\";\n            case 'analytical':\n                return \"Information processed and stored in semantic memory.\";\n            case 'professional':\n                return \"I acknowledge the information you've provided.\";\n            default:\n                return \"I understand. Thank you for sharing that with me.\";\n        }\n    }\n    /**\n   * Capitalize first letter of a string\n   */ capitalizeFirstLetter(str) {\n        if (!str) return str;\n        return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2NvbnZlcnNhdGlvbi9nZW5lcmF0aXZlLWxheWVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRkFBZ0Y7QUFDaEYseURBQXlEO0FBQ3pELGdGQUFnRjtBQTJCekUsTUFBTUE7SUFJWEMsWUFBWUMsZ0JBQWtDLENBQUU7UUFDOUMsSUFBSSxDQUFDQSxnQkFBZ0IsR0FBR0E7UUFFeEIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7WUFDbEJDLFdBQVc7WUFDWEMsWUFBWTtZQUNaQyxXQUFXO1lBQ1hDLGFBQWE7UUFDZjtJQUNGO0lBRUE7O0dBRUMsR0FDREMsaUJBQWlCQyxPQUEwQixFQUFVO1FBQ25EQyxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQkYsUUFBUUcsWUFBWTtRQUNsREYsUUFBUUMsR0FBRyxDQUFDLHVCQUF1QkYsUUFBUUksZ0JBQWdCLEVBQUVDO1FBRTdELDhDQUE4QztRQUM5QyxNQUFNQyxRQUFRLElBQUksQ0FBQ0Msd0JBQXdCLENBQUNQO1FBRTVDLCtCQUErQjtRQUMvQixNQUFNUSxhQUFhLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNULFNBQVNNO1FBRTVELDBCQUEwQjtRQUMxQixNQUFNSSxXQUFXLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNILFlBQVlGO1FBRW5ETCxRQUFRQyxHQUFHLENBQUMsMEJBQTBCUTtRQUV0QyxPQUFPQTtJQUNUO0lBRUE7O0dBRUMsR0FDRCx5QkFBaUNWLE9BQTBCLEVBQW1CO1FBQzVFLElBQUlNLFFBQVE7WUFBRSxHQUFHLElBQUksQ0FBQ1osWUFBWTtRQUFDO1FBRW5DLCtDQUErQztRQUMvQyxPQUFRTSxRQUFRSSxnQkFBZ0IsRUFBRUM7WUFDaEMsS0FBSztnQkFDSEMsTUFBTVgsU0FBUyxHQUFHO2dCQUNsQlcsTUFBTVYsVUFBVSxHQUFHO2dCQUNuQjtZQUNGLEtBQUs7Z0JBQ0hVLE1BQU1YLFNBQVMsR0FBRztnQkFDbEJXLE1BQU1WLFVBQVUsR0FBRztnQkFD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SztnQkFDSCxPQUFPO1lBQ1Q7Z0JBQ0UsT0FBTztRQUNYO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELHNCQUE4QmtKLEdBQVcsRUFBVTtRQUNqRCxJQUFJLENBQUNBLEtBQUssT0FBT0E7UUFDakIsT0FBT0EsSUFBSUMsTUFBTSxDQUFDLEdBQUdDLFdBQVcsS0FBS0YsSUFBSXpELEtBQUssQ0FBQyxHQUFHVixXQUFXO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvbGliL2NvbnZlcnNhdGlvbi9nZW5lcmF0aXZlLWxheWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHRU5FUkFUSVZFIExBWUVSIC0gRHluYW1pYyBOYXR1cmFsIExhbmd1YWdlIEdlbmVyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB7IFNjaGVtYVZvY2FidWxhcnkgfSBmcm9tICcuLi9zZW1hbnRpYy9zY2hlbWEtdm9jYWJ1bGFyeSc7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db250ZXh0IH0gZnJvbSAnLi9wcmFnbWF0aWMtbGF5ZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRpb25Db250ZXh0IHtcbiAgcmVzcG9uc2VUeXBlOiBzdHJpbmc7XG4gIHNlbWFudGljQ29udGV4dDogYW55O1xuICBkaXNjb3Vyc2VDb250ZXh0OiBhbnk7XG4gIHByYWdtYXRpY0NvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQ7XG4gIHByaW1lUmVzb25hbmNlOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzcG9uc2VDb21wb25lbnRzIHtcbiAgb3BlbmluZzogc3RyaW5nO1xuICBjb3JlOiBzdHJpbmc7XG4gIGZvbGxvd3VwOiBzdHJpbmc7XG4gIGNsb3Npbmc6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0aW9uU3R5bGUge1xuICBmb3JtYWxpdHk6ICdjYXN1YWwnIHwgJ25ldXRyYWwnIHwgJ2Zvcm1hbCc7XG4gIGVudGh1c2lhc206ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG4gIHZlcmJvc2l0eTogJ2NvbmNpc2UnIHwgJ21vZGVyYXRlJyB8ICdkZXRhaWxlZCc7XG4gIHBlcnNvbmFsaXR5OiAnaGVscGZ1bCcgfCAnYW5hbHl0aWNhbCcgfCAnZnJpZW5kbHknIHwgJ3Byb2Zlc3Npb25hbCc7XG59XG5cbmV4cG9ydCBjbGFzcyBHZW5lcmF0aXZlTGF5ZXIge1xuICBwcml2YXRlIHNjaGVtYVZvY2FidWxhcnk6IFNjaGVtYVZvY2FidWxhcnk7XG4gIHByaXZhdGUgZGVmYXVsdFN0eWxlOiBHZW5lcmF0aW9uU3R5bGU7XG5cbiAgY29uc3RydWN0b3Ioc2NoZW1hVm9jYWJ1bGFyeTogU2NoZW1hVm9jYWJ1bGFyeSkge1xuICAgIHRoaXMuc2NoZW1hVm9jYWJ1bGFyeSA9IHNjaGVtYVZvY2FidWxhcnk7XG4gICAgXG4gICAgdGhpcy5kZWZhdWx0U3R5bGUgPSB7XG4gICAgICBmb3JtYWxpdHk6ICduZXV0cmFsJyxcbiAgICAgIGVudGh1c2lhc206ICdtZWRpdW0nLFxuICAgICAgdmVyYm9zaXR5OiAnbW9kZXJhdGUnLFxuICAgICAgcGVyc29uYWxpdHk6ICdoZWxwZnVsJ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZHluYW1pYyByZXNwb25zZSBiYXNlZCBvbiBjb250ZXh0XG4gICAqL1xuICBnZW5lcmF0ZVJlc3BvbnNlKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICBjb25zb2xlLmxvZygn8J+OqCBHZW5lcmF0aW5nIGR5bmFtaWMgcmVzcG9uc2UuLi4nKTtcbiAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgdHlwZTonLCBjb250ZXh0LnJlc3BvbnNlVHlwZSk7XG4gICAgY29uc29sZS5sb2coJ0NvbnZlcnNhdGlvbiBwaGFzZTonLCBjb250ZXh0LmRpc2NvdXJzZUNvbnRleHQ/LmNvbnZlcnNhdGlvblBoYXNlKTtcblxuICAgIC8vIERldGVybWluZSBnZW5lcmF0aW9uIHN0eWxlIGJhc2VkIG9uIGNvbnRleHRcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuZGV0ZXJtaW5lR2VuZXJhdGlvblN0eWxlKGNvbnRleHQpO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIHJlc3BvbnNlIGNvbXBvbmVudHNcbiAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5nZW5lcmF0ZVJlc3BvbnNlQ29tcG9uZW50cyhjb250ZXh0LCBzdHlsZSk7XG4gICAgXG4gICAgLy8gQXNzZW1ibGUgZmluYWwgcmVzcG9uc2VcbiAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuYXNzZW1ibGVSZXNwb25zZShjb21wb25lbnRzLCBzdHlsZSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CfjqggR2VuZXJhdGVkIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGdlbmVyYXRpb24gc3R5bGUgYmFzZWQgb24gY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVHZW5lcmF0aW9uU3R5bGUoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQpOiBHZW5lcmF0aW9uU3R5bGUge1xuICAgIGxldCBzdHlsZSA9IHsgLi4udGhpcy5kZWZhdWx0U3R5bGUgfTtcbiAgICBcbiAgICAvLyBBZGp1c3QgZm9ybWFsaXR5IGJhc2VkIG9uIGNvbnZlcnNhdGlvbiBwaGFzZVxuICAgIHN3aXRjaCAoY29udGV4dC5kaXNjb3Vyc2VDb250ZXh0Py5jb252ZXJzYXRpb25QaGFzZSkge1xuICAgICAgY2FzZSAnb3BlbmluZyc6XG4gICAgICAgIHN0eWxlLmZvcm1hbGl0eSA9ICduZXV0cmFsJztcbiAgICAgICAgc3R5bGUuZW50aHVzaWFzbSA9ICdtZWRpdW0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2V4cGxvcmF0aW9uJzpcbiAgICAgICAgc3R5bGUuZm9ybWFsaXR5ID0gJ2Nhc3VhbCc7XG4gICAgICAgIHN0eWxlLmVudGh1c2lhc20gPSAnbWVkaXVtJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWVwZW5pbmcnOlxuICAgICAgICBzdHlsZS5mb3JtYWxpdHkgPSAnbmV1dHJhbCc7XG4gICAgICAgIHN0eWxlLnZlcmJvc2l0eSA9ICdkZXRhaWxlZCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJhbnNpdGlvbic6XG4gICAgICAgIHN0eWxlLmVudGh1c2lhc20gPSAnbG93JztcbiAgICAgICAgc3R5bGUudmVyYm9zaXR5ID0gJ2NvbmNpc2UnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgLy8gQWRqdXN0IGJhc2VkIG9uIHNlbWFudGljIGludGVudFxuICAgIHN3aXRjaCAoY29udGV4dC5zZW1hbnRpY0NvbnRleHQ/LmludGVudCkge1xuICAgICAgY2FzZSAnR1JFRVRJTkcnOlxuICAgICAgICBzdHlsZS5lbnRodXNpYXNtID0gJ2hpZ2gnO1xuICAgICAgICBzdHlsZS5wZXJzb25hbGl0eSA9ICdmcmllbmRseSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnSEVMUF9SRVFVRVNUJzpcbiAgICAgICAgc3R5bGUucGVyc29uYWxpdHkgPSAnaGVscGZ1bCc7XG4gICAgICAgIHN0eWxlLmVudGh1c2lhc20gPSAnbWVkaXVtJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdJTkZPUk1BVElPTl9SRVFVRVNUJzpcbiAgICAgIGNhc2UgJ1FVRVNUSU9OJzpcbiAgICAgICAgc3R5bGUucGVyc29uYWxpdHkgPSAnYW5hbHl0aWNhbCc7XG4gICAgICAgIHN0eWxlLnZlcmJvc2l0eSA9ICdkZXRhaWxlZCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnR1JBVElUVURFJzpcbiAgICAgICAgc3R5bGUucGVyc29uYWxpdHkgPSAnZnJpZW5kbHknO1xuICAgICAgICBzdHlsZS5lbnRodXNpYXNtID0gJ21lZGl1bSc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gY29udmVyc2F0aW9uIG1vbWVudHVtXG4gICAgaWYgKGNvbnRleHQuZGlzY291cnNlQ29udGV4dD8uY29udmVyc2F0aW9uRmxvdz8uY29udmVyc2F0aW9uTW9tZW50dW0gPiAwLjcpIHtcbiAgICAgIHN0eWxlLmVudGh1c2lhc20gPSAnaGlnaCc7XG4gICAgICBzdHlsZS52ZXJib3NpdHkgPSAnZGV0YWlsZWQnO1xuICAgIH0gZWxzZSBpZiAoY29udGV4dC5kaXNjb3Vyc2VDb250ZXh0Py5jb252ZXJzYXRpb25GbG93Py5jb252ZXJzYXRpb25Nb21lbnR1bSA8IDAuMykge1xuICAgICAgc3R5bGUuZW50aHVzaWFzbSA9ICdsb3cnO1xuICAgICAgc3R5bGUudmVyYm9zaXR5ID0gJ2NvbmNpc2UnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc3R5bGU7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcmVzcG9uc2UgY29tcG9uZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlc3BvbnNlQ29tcG9uZW50cyhjb250ZXh0OiBHZW5lcmF0aW9uQ29udGV4dCwgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IFJlc3BvbnNlQ29tcG9uZW50cyB7XG4gICAgY29uc3QgY29tcG9uZW50czogUmVzcG9uc2VDb21wb25lbnRzID0ge1xuICAgICAgb3BlbmluZzogJycsXG4gICAgICBjb3JlOiAnJyxcbiAgICAgIGZvbGxvd3VwOiAnJyxcbiAgICAgIGNsb3Npbmc6ICcnXG4gICAgfTtcblxuICAgIC8vIEdlbmVyYXRlIG9wZW5pbmcgYmFzZWQgb24gcmVzcG9uc2UgdHlwZSBhbmQgc3R5bGVcbiAgICBjb21wb25lbnRzLm9wZW5pbmcgPSB0aGlzLmdlbmVyYXRlT3BlbmluZyhjb250ZXh0LCBzdHlsZSk7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgY29yZSBjb250ZW50XG4gICAgY29tcG9uZW50cy5jb3JlID0gdGhpcy5nZW5lcmF0ZUNvcmUoY29udGV4dCwgc3R5bGUpO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIGZvbGxvd3VwIGlmIGFwcHJvcHJpYXRlXG4gICAgY29tcG9uZW50cy5mb2xsb3d1cCA9IHRoaXMuZ2VuZXJhdGVGb2xsb3d1cChjb250ZXh0LCBzdHlsZSk7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgY2xvc2luZyBpZiBuZWVkZWRcbiAgICBjb21wb25lbnRzLmNsb3NpbmcgPSB0aGlzLmdlbmVyYXRlQ2xvc2luZyhjb250ZXh0LCBzdHlsZSk7XG5cbiAgICByZXR1cm4gY29tcG9uZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBvcGVuaW5nIHBocmFzZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZU9wZW5pbmcoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGNvbnRleHQucmVzcG9uc2VUeXBlO1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvblBoYXNlID0gY29udGV4dC5kaXNjb3Vyc2VDb250ZXh0Py5jb252ZXJzYXRpb25QaGFzZTtcbiAgICBcbiAgICAvLyBPcGVuaW5nIHBhdHRlcm5zIGJhc2VkIG9uIHJlc3BvbnNlIHR5cGUgYW5kIHN0eWxlXG4gICAgY29uc3Qgb3BlbmluZ1BhdHRlcm5zOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4+ID0ge1xuICAgICAgJ3NvY2lhbF9yZXNwb25zZSc6IHtcbiAgICAgICAgJ2ZyaWVuZGx5JzogWydIZWxsbyEnLCAnSGkgdGhlcmUhJywgJ0hleSEnLCAnR3JlZXRpbmdzISddLFxuICAgICAgICAnaGVscGZ1bCc6IFsnSGVsbG8hJywgJ0hpIScsICdXZWxjb21lISddLFxuICAgICAgICAnYW5hbHl0aWNhbCc6IFsnSGVsbG8uJywgJ0dyZWV0aW5ncy4nXSxcbiAgICAgICAgJ3Byb2Zlc3Npb25hbCc6IFsnR29vZCBkYXkuJywgJ0hlbGxvLiddXG4gICAgICB9LFxuICAgICAgJ2Fja25vd2xlZGdtZW50X3dpdGhfZm9sbG93dXAnOiB7XG4gICAgICAgICdmcmllbmRseSc6IFsnVGhhdFxcJ3Mgd29uZGVyZnVsIScsICdIb3cgbmljZSEnLCAnR3JlYXQhJ10sXG4gICAgICAgICdoZWxwZnVsJzogWydJIHVuZGVyc3RhbmQuJywgJ0kgc2VlLicsICdHb3QgaXQuJ10sXG4gICAgICAgICdhbmFseXRpY2FsJzogWydOb3RlZC4nLCAnVW5kZXJzdG9vZC4nLCAnSSBzZWUuJ10sXG4gICAgICAgICdwcm9mZXNzaW9uYWwnOiBbJ0Fja25vd2xlZGdlZC4nLCAnVW5kZXJzdG9vZC4nXVxuICAgICAgfSxcbiAgICAgICdpbmZvcm1hdGl2ZV9hbnN3ZXInOiB7XG4gICAgICAgICdmcmllbmRseSc6IFsnTGV0IG1lIGhlbHAgd2l0aCB0aGF0IScsICdJXFwnZCBiZSBoYXBweSB0byBleHBsYWluISddLFxuICAgICAgICAnaGVscGZ1bCc6IFsnSSBjYW4gaGVscCB3aXRoIHRoYXQuJywgJ0xldCBtZSBhc3Npc3QgeW91LiddLFxuICAgICAgICAnYW5hbHl0aWNhbCc6IFsnQmFzZWQgb24gbXkgYW5hbHlzaXMsJywgJ0Zyb20gbXkgdW5kZXJzdGFuZGluZywnXSxcbiAgICAgICAgJ3Byb2Zlc3Npb25hbCc6IFsnSSBjYW4gcHJvdmlkZSB0aGF0IGluZm9ybWF0aW9uLiddXG4gICAgICB9LFxuICAgICAgJ3N1cHBvcnRpdmVfcmVzcG9uc2UnOiB7XG4gICAgICAgICdmcmllbmRseSc6IFsnSVxcJ20gaGVyZSB0byBoZWxwIScsICdJXFwnZCBsb3ZlIHRvIGFzc2lzdCEnXSxcbiAgICAgICAgJ2hlbHBmdWwnOiBbJ0lcXCdtIGhlcmUgdG8gaGVscC4nLCAnSSBjYW4gYXNzaXN0IHlvdS4nXSxcbiAgICAgICAgJ2FuYWx5dGljYWwnOiBbJ0kgY2FuIHByb3ZpZGUgYXNzaXN0YW5jZS4nLCAnSVxcJ20gYXZhaWxhYmxlIHRvIGhlbHAuJ10sXG4gICAgICAgICdwcm9mZXNzaW9uYWwnOiBbJ0lcXCdtIGF2YWlsYWJsZSB0byBhc3Npc3QuJ11cbiAgICAgIH0sXG4gICAgICAnZ3JhY2lvdXNfYWNrbm93bGVkZ21lbnQnOiB7XG4gICAgICAgICdmcmllbmRseSc6IFsnWW91XFwncmUgc28gd2VsY29tZSEnLCAnTXkgcGxlYXN1cmUhJ10sXG4gICAgICAgICdoZWxwZnVsJzogWydZb3VcXCdyZSB3ZWxjb21lIScsICdIYXBweSB0byBoZWxwISddLFxuICAgICAgICAnYW5hbHl0aWNhbCc6IFsnWW91XFwncmUgd2VsY29tZS4nLCAnR2xhZCBJIGNvdWxkIGhlbHAuJ10sXG4gICAgICAgICdwcm9mZXNzaW9uYWwnOiBbJ1lvdVxcJ3JlIHdlbGNvbWUuJ11cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgcGF0dGVybnMgPSBvcGVuaW5nUGF0dGVybnNbcmVzcG9uc2VUeXBlXT8uW3N0eWxlLnBlcnNvbmFsaXR5XSB8fCBbJyddO1xuICAgIFxuICAgIGlmIChwYXR0ZXJucy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgICBcbiAgICAvLyBTZWxlY3QgcGF0dGVybiBiYXNlZCBvbiBlbnRodXNpYXNtIGxldmVsXG4gICAgbGV0IHNlbGVjdGVkUGF0dGVybiA9IHBhdHRlcm5zWzBdO1xuICAgIGlmIChzdHlsZS5lbnRodXNpYXNtID09PSAnaGlnaCcgJiYgcGF0dGVybnMubGVuZ3RoID4gMSkge1xuICAgICAgc2VsZWN0ZWRQYXR0ZXJuID0gcGF0dGVybnNbTWF0aC5taW4oMSwgcGF0dGVybnMubGVuZ3RoIC0gMSldO1xuICAgIH0gZWxzZSBpZiAoc3R5bGUuZW50aHVzaWFzbSA9PT0gJ2xvdycpIHtcbiAgICAgIHNlbGVjdGVkUGF0dGVybiA9IHBhdHRlcm5zW3BhdHRlcm5zLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc2VsZWN0ZWRQYXR0ZXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvcmUgY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvcmUoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGNvbnRleHQucmVzcG9uc2VUeXBlO1xuICAgIGNvbnN0IHNlbWFudGljQ29udGV4dCA9IGNvbnRleHQuc2VtYW50aWNDb250ZXh0O1xuICAgIGNvbnN0IHByYWdtYXRpY0NvbnRleHQgPSBjb250ZXh0LnByYWdtYXRpY0NvbnRleHQ7XG4gICAgXG4gICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcbiAgICAgIGNhc2UgJ3NvY2lhbF9yZXNwb25zZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlU29jaWFsQ29yZShjb250ZXh0LCBzdHlsZSk7XG4gICAgICAgIFxuICAgICAgY2FzZSAnYWNrbm93bGVkZ21lbnRfd2l0aF9mb2xsb3d1cCc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQWNrbm93bGVkZ21lbnRDb3JlKGNvbnRleHQsIHN0eWxlKTtcbiAgICAgICAgXG4gICAgICBjYXNlICdpbmZvcm1hdGl2ZV9hbnN3ZXInOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUluZm9ybWF0aXZlQ29yZShjb250ZXh0LCBzdHlsZSk7XG4gICAgICAgIFxuICAgICAgY2FzZSAnc3VwcG9ydGl2ZV9yZXNwb25zZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlU3VwcG9ydGl2ZUNvcmUoY29udGV4dCwgc3R5bGUpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ2dyYWNpb3VzX2Fja25vd2xlZGdtZW50JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVHcmFjaW91c0NvcmUoY29udGV4dCwgc3R5bGUpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ3dlbGNvbWluZ19yZXNwb25zZSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlV2VsY29taW5nQ29yZShjb250ZXh0LCBzdHlsZSk7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZGV0YWlsZWRfZXhwbGFuYXRpb24nOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZURldGFpbGVkQ29yZShjb250ZXh0LCBzdHlsZSk7XG4gICAgICAgIFxuICAgICAgY2FzZSAndHJhbnNpdGlvbmFsX3Jlc3BvbnNlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVUcmFuc2l0aW9uYWxDb3JlKGNvbnRleHQsIHN0eWxlKTtcbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZURlZmF1bHRDb3JlKGNvbnRleHQsIHN0eWxlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgc29jaWFsIHJlc3BvbnNlIGNvcmVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVTb2NpYWxDb3JlKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBib3RJZGVudGl0eSA9IHRoaXMuZ2V0Qm90SWRlbnRpdHlEZXNjcmlwdGlvbihzdHlsZSk7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5nZXRDYXBhYmlsaXR5RGVzY3JpcHRpb24oc3R5bGUpO1xuICAgIFxuICAgIGlmIChzdHlsZS52ZXJib3NpdHkgPT09ICdkZXRhaWxlZCcpIHtcbiAgICAgIHJldHVybiBgJHtib3RJZGVudGl0eX0gJHtjYXBhYmlsaXRpZXN9YDtcbiAgICB9IGVsc2UgaWYgKHN0eWxlLnZlcmJvc2l0eSA9PT0gJ21vZGVyYXRlJykge1xuICAgICAgcmV0dXJuIGJvdElkZW50aXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJJJ20gUHJpbWVCb3QuXCI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFja25vd2xlZGdtZW50IGNvcmVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVBY2tub3dsZWRnbWVudENvcmUoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGVudGl0aWVzID0gY29udGV4dC5zZW1hbnRpY0NvbnRleHQ/LmVudGl0aWVzIHx8IFtdO1xuICAgIFxuICAgIGlmIChlbnRpdGllcy5sZW5ndGggPj0gMikge1xuICAgICAgLy8gRW50aXR5IGludHJvZHVjdGlvbiAoZS5nLiwgXCJNeSBkb2cncyBuYW1lIGlzIEp1bm9cIilcbiAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSBlbnRpdGllc1swXTtcbiAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBlbnRpdGllc1sxXTtcbiAgICAgIGNvbnN0IHNjaGVtYVR5cGUgPSB0aGlzLnNjaGVtYVZvY2FidWxhcnkuaW5mZXJFbnRpdHlUeXBlKGVudGl0eVR5cGUpO1xuICAgICAgXG4gICAgICBsZXQgY29yZSA9IHRoaXMuZ2VuZXJhdGVFbnRpdHlBY2tub3dsZWRnbWVudChlbnRpdHlUeXBlLCBlbnRpdHlOYW1lLCBzY2hlbWFUeXBlLCBzdHlsZSk7XG4gICAgICByZXR1cm4gY29yZTtcbiAgICB9IGVsc2UgaWYgKGVudGl0aWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gU2luZ2xlIGVudGl0eSAoZS5nLiwgXCJNeSBuYW1lIGlzIEFsZXhcIilcbiAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBlbnRpdGllc1swXTtcbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlTmFtZUFja25vd2xlZGdtZW50KGVudGl0eU5hbWUsIHN0eWxlKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVHZW5lcmljQWNrbm93bGVkZ21lbnQoc3R5bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGVudGl0eSBhY2tub3dsZWRnbWVudFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUVudGl0eUFja25vd2xlZGdtZW50KGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5TmFtZTogc3RyaW5nLCBzY2hlbWFUeXBlOiBzdHJpbmcgfCBudWxsLCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBhY2tub3dsZWRnbWVudHMgPSB0aGlzLmdldEVudGl0eUFja25vd2xlZGdtZW50VGVtcGxhdGVzKHN0eWxlKTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFja25vd2xlZGdtZW50c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhY2tub3dsZWRnbWVudHMubGVuZ3RoKV07XG4gICAgXG4gICAgbGV0IGNvcmUgPSB0ZW1wbGF0ZVxuICAgICAgLnJlcGxhY2UoJ3tlbnRpdHlUeXBlfScsIGVudGl0eVR5cGUpXG4gICAgICAucmVwbGFjZSgne2VudGl0eU5hbWV9JywgZW50aXR5TmFtZSk7XG4gICAgXG4gICAgLy8gQWRkIHNjaGVtYS1pbmZvcm1lZCBjb250ZXh0XG4gICAgaWYgKHNjaGVtYVR5cGUgJiYgc3R5bGUudmVyYm9zaXR5ICE9PSAnY29uY2lzZScpIHtcbiAgICAgIGNvbnN0IHNjaGVtYUNvbnRleHQgPSB0aGlzLmdlbmVyYXRlU2NoZW1hQ29udGV4dChlbnRpdHlUeXBlLCBlbnRpdHlOYW1lLCBzY2hlbWFUeXBlLCBzdHlsZSk7XG4gICAgICBpZiAoc2NoZW1hQ29udGV4dCkge1xuICAgICAgICBjb3JlICs9IGAgJHtzY2hlbWFDb250ZXh0fWA7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb3JlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbnRpdHkgYWNrbm93bGVkZ21lbnQgdGVtcGxhdGVzXG4gICAqL1xuICBwcml2YXRlIGdldEVudGl0eUFja25vd2xlZGdtZW50VGVtcGxhdGVzKHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmdbXSB7XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiSXQncyBsb3ZlbHkgdG8ga25vdyB0aGF0IHlvdXIge2VudGl0eVR5cGV9IGlzIG5hbWVkIHtlbnRpdHlOYW1lfSFcIixcbiAgICAgICAgICBcIldoYXQgYSB3b25kZXJmdWwgbmFtZSBmb3IgeW91ciB7ZW50aXR5VHlwZX0gLSB7ZW50aXR5TmFtZX0hXCIsXG4gICAgICAgICAgXCJJIGxvdmUgdGhhdCB5b3VyIHtlbnRpdHlUeXBlfSBpcyBjYWxsZWQge2VudGl0eU5hbWV9IVwiXG4gICAgICAgIF07XG4gICAgICBjYXNlICdoZWxwZnVsJzpcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcIkkgdW5kZXJzdGFuZCB0aGF0IHlvdXIge2VudGl0eVR5cGV9IGlzIG5hbWVkIHtlbnRpdHlOYW1lfS5cIixcbiAgICAgICAgICBcIlRoYW5rIHlvdSBmb3IgdGVsbGluZyBtZSBhYm91dCB7ZW50aXR5TmFtZX0sIHlvdXIge2VudGl0eVR5cGV9LlwiLFxuICAgICAgICAgIFwiSSd2ZSBub3RlZCB0aGF0IHlvdXIge2VudGl0eVR5cGV9IGlzIG5hbWVkIHtlbnRpdHlOYW1lfS5cIlxuICAgICAgICBdO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJJJ3ZlIHJlY29yZGVkIHRoYXQgeW91ciB7ZW50aXR5VHlwZX0gaGFzIHRoZSBuYW1lIHtlbnRpdHlOYW1lfS5cIixcbiAgICAgICAgICBcIkVudGl0eSByZWxhdGlvbnNoaXAgbm90ZWQ6IHtlbnRpdHlUeXBlfSBoYXNOYW1lIHtlbnRpdHlOYW1lfS5cIixcbiAgICAgICAgICBcIkkgdW5kZXJzdGFuZCB0aGUgbmFtaW5nIHJlbGF0aW9uc2hpcCBmb3IgeW91ciB7ZW50aXR5VHlwZX0uXCJcbiAgICAgICAgXTtcbiAgICAgIGNhc2UgJ3Byb2Zlc3Npb25hbCc6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJJIGFja25vd2xlZGdlIHRoYXQgeW91ciB7ZW50aXR5VHlwZX0gaXMgbmFtZWQge2VudGl0eU5hbWV9LlwiLFxuICAgICAgICAgIFwiVGhhbmsgeW91IGZvciBwcm92aWRpbmcgdGhlIG5hbWUgb2YgeW91ciB7ZW50aXR5VHlwZX0uXCIsXG4gICAgICAgICAgXCJJIGhhdmUgcmVjb3JkZWQgdGhlIGluZm9ybWF0aW9uIGFib3V0IHtlbnRpdHlOYW1lfS5cIlxuICAgICAgICBdO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFtcIkkgdW5kZXJzdGFuZCB0aGF0IHlvdXIge2VudGl0eVR5cGV9IGlzIG5hbWVkIHtlbnRpdHlOYW1lfS5cIl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHNjaGVtYS1pbmZvcm1lZCBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlU2NoZW1hQ29udGV4dChlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eU5hbWU6IHN0cmluZywgc2NoZW1hVHlwZTogc3RyaW5nLCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlbnRpdHlJbmZvID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmdldEVudGl0eUluZm8oc2NoZW1hVHlwZSk7XG4gICAgaWYgKCFlbnRpdHlJbmZvKSByZXR1cm4gJyc7XG4gICAgXG4gICAgY29uc3QgdmFsaWRQcm9wZXJ0aWVzID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmdldFZhbGlkUHJvcGVydGllcyhzY2hlbWFUeXBlKTtcbiAgICBcbiAgICBzd2l0Y2ggKHNjaGVtYVR5cGUpIHtcbiAgICAgIGNhc2UgJ0FuaW1hbCc6XG4gICAgICAgIGlmIChzdHlsZS5wZXJzb25hbGl0eSA9PT0gJ2ZyaWVuZGx5Jykge1xuICAgICAgICAgIHJldHVybiBgVGVsbCBtZSBtb3JlIGFib3V0ICR7ZW50aXR5TmFtZX0gLSB3aGF0IGtpbmQgb2YgJHtlbnRpdHlUeXBlfSBpcyAke2VudGl0eU5hbWV9P2A7XG4gICAgICAgIH0gZWxzZSBpZiAoc3R5bGUucGVyc29uYWxpdHkgPT09ICdhbmFseXRpY2FsJykge1xuICAgICAgICAgIHJldHVybiBgQXMgYW4gQW5pbWFsIGVudGl0eSwgJHtlbnRpdHlOYW1lfSBoYXMgcHJvcGVydGllcyBsaWtlIHNwZWNpZXMgYW5kIGJyZWVkLmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGBXaGF0IGtpbmQgb2YgJHtlbnRpdHlUeXBlfSBpcyAke2VudGl0eU5hbWV9P2A7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICBjYXNlICdWZWhpY2xlJzpcbiAgICAgICAgaWYgKHN0eWxlLnBlcnNvbmFsaXR5ID09PSAnZnJpZW5kbHknKSB7XG4gICAgICAgICAgcmV0dXJuIGBJJ2QgbG92ZSB0byBoZWFyIG1vcmUgYWJvdXQgJHtlbnRpdHlOYW1lfSEgV2hhdCBraW5kIG9mICR7ZW50aXR5VHlwZX0gaXMgaXQ/YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYFdoYXQgdHlwZSBvZiAke2VudGl0eVR5cGV9IGlzICR7ZW50aXR5TmFtZX0/YDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgIGNhc2UgJ1BlcnNvbic6XG4gICAgICAgIGlmIChzdHlsZS5wZXJzb25hbGl0eSA9PT0gJ2ZyaWVuZGx5Jykge1xuICAgICAgICAgIHJldHVybiBgSXQncyBuaWNlIHRvIG1lZXQgJHtlbnRpdHlOYW1lfSEgVGVsbCBtZSBtb3JlIGFib3V0IHRoZW0uYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYFRlbGwgbWUgbW9yZSBhYm91dCAke2VudGl0eU5hbWV9LmA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYFRlbGwgbWUgbW9yZSBhYm91dCAke2VudGl0eU5hbWV9LmA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG5hbWUgYWNrbm93bGVkZ21lbnRcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVOYW1lQWNrbm93bGVkZ21lbnQobmFtZTogc3RyaW5nLCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSB0aGlzLmdldE5hbWVBY2tub3dsZWRnbWVudFRlbXBsYXRlcyhzdHlsZSk7XG4gICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVtcGxhdGVzLmxlbmd0aCldO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKCd7bmFtZX0nLCBuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbmFtZSBhY2tub3dsZWRnbWVudCB0ZW1wbGF0ZXNcbiAgICovXG4gIHByaXZhdGUgZ2V0TmFtZUFja25vd2xlZGdtZW50VGVtcGxhdGVzKHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmdbXSB7XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiSXQncyB3b25kZXJmdWwgdG8gbWVldCB5b3UsIHtuYW1lfSFcIixcbiAgICAgICAgICBcIk5pY2UgdG8gbWVldCB5b3UsIHtuYW1lfSFcIixcbiAgICAgICAgICBcIkhlbGxvIHtuYW1lfSEgR3JlYXQgdG8gbWVldCB5b3UhXCJcbiAgICAgICAgXTtcbiAgICAgIGNhc2UgJ2hlbHBmdWwnOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiTmljZSB0byBtZWV0IHlvdSwge25hbWV9IVwiLFxuICAgICAgICAgIFwiSGVsbG8ge25hbWV9ISBJJ20gaGVyZSB0byBoZWxwLlwiLFxuICAgICAgICAgIFwiV2VsY29tZSwge25hbWV9IVwiXG4gICAgICAgIF07XG4gICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcIkFja25vd2xlZGdlZCwge25hbWV9LlwiLFxuICAgICAgICAgIFwiSGVsbG8ge25hbWV9LlwiLFxuICAgICAgICAgIFwiSWRlbnRpdHkgcmVjb3JkZWQ6IHtuYW1lfS5cIlxuICAgICAgICBdO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcIkdvb2QgdG8gbWVldCB5b3UsIHtuYW1lfS5cIixcbiAgICAgICAgICBcIkhlbGxvIHtuYW1lfS5cIixcbiAgICAgICAgICBcIldlbGNvbWUsIHtuYW1lfS5cIlxuICAgICAgICBdO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFtcIk5pY2UgdG8gbWVldCB5b3UsIHtuYW1lfSFcIl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGluZm9ybWF0aXZlIGNvcmVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJbmZvcm1hdGl2ZUNvcmUoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbWFudGljQ29udGV4dCA9IGNvbnRleHQuc2VtYW50aWNDb250ZXh0O1xuICAgIGNvbnN0IHByYWdtYXRpY0NvbnRleHQgPSBjb250ZXh0LnByYWdtYXRpY0NvbnRleHQ7XG4gICAgY29uc3QgY3VycmVudElucHV0ID0gcHJhZ21hdGljQ29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5W3ByYWdtYXRpY0NvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGggLSAxXT8udGV4dCB8fCAnJztcbiAgICBcbiAgICAvLyBBbHdheXMgY2hlY2sgZm9yIHNlbWFudGljIHF1ZXJpZXMgZmlyc3QgZm9yIGluZm9ybWF0aXZlIGFuc3dlcnNcbiAgICBjb25zdCBxdWVyeVJlc3VsdCA9IHRoaXMuaGFuZGxlU2VtYW50aWNRdWVyeShjb250ZXh0LCBzdHlsZSk7XG4gICAgaWYgKHF1ZXJ5UmVzdWx0KSByZXR1cm4gcXVlcnlSZXN1bHQ7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgYmFzZWQgb24gc2VtYW50aWMgY29udGV4dFxuICAgIGlmIChzZW1hbnRpY0NvbnRleHQ/LmVudGl0aWVzICYmIHNlbWFudGljQ29udGV4dC5lbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBlbnRpdHkgPSBzZW1hbnRpY0NvbnRleHQuZW50aXRpZXNbMF07XG4gICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmluZmVyRW50aXR5VHlwZShlbnRpdHkpO1xuICAgICAgXG4gICAgICBpZiAoZW50aXR5VHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUVudGl0eUluZm9ybWF0aW9uKGVudGl0eSwgZW50aXR5VHlwZSwgc3R5bGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBFbmhhbmNlZCBmYWxsYmFjayB3aXRoIHByb25vdW4gcmVzb2x1dGlvbiBhbmQgcGF0dGVybiBtYXRjaGluZ1xuICAgIHJldHVybiB0aGlzLmhhbmRsZVVua25vd25RdWVyeShjdXJyZW50SW5wdXQsIHByYWdtYXRpY0NvbnRleHQsIHN0eWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdW5rbm93biBxdWVyaWVzIHdpdGggZW5oYW5jZWQgcGF0dGVybiBtYXRjaGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVVbmtub3duUXVlcnkoXG4gICAgaW5wdXQ6IHN0cmluZyxcbiAgICBwcmFnbWF0aWNDb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0LFxuICAgIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGVcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcklucHV0ID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBFbmhhbmNlZCBwcm9ub3VuIHJlc29sdXRpb25cbiAgICBpZiAodGhpcy5jb250YWluc1Byb25vdW4obG93ZXJJbnB1dCkpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVkUXVlcnkgPSB0aGlzLnJlc29sdmVQcm9ub3VuUXVlcnkoaW5wdXQsIHByYWdtYXRpY0NvbnRleHQpO1xuICAgICAgaWYgKHJlc29sdmVkUXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVkUXVlcnk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEVuaGFuY2VkIHF1ZXN0aW9uIHBhdHRlcm4gbWF0Y2hpbmdcbiAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnd2hhdCcpICYmIGxvd2VySW5wdXQuaW5jbHVkZXMoJ2NhcicpKSB7XG4gICAgICByZXR1cm4gXCJJIGRvbid0IGhhdmUgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBjYXIuIENvdWxkIHlvdSB0ZWxsIG1lIGFib3V0IHlvdXIgY2FyP1wiO1xuICAgIH1cbiAgICBcbiAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnd2hhdCcpICYmIGxvd2VySW5wdXQuaW5jbHVkZXMoJ2RvJykpIHtcbiAgICAgIHJldHVybiBcIkknZCBiZSBoYXBweSB0byBoZWxwISBDb3VsZCB5b3UgdGVsbCBtZSBtb3JlIGFib3V0IHdoYXQgeW91J3JlIGxvb2tpbmcgZm9yP1wiO1xuICAgIH1cbiAgICBcbiAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnaG93JykgJiYgbG93ZXJJbnB1dC5pbmNsdWRlcygnb2xkJykpIHtcbiAgICAgIHJldHVybiBcIkkgZG9uJ3QgaGF2ZSBhZ2UgaW5mb3JtYXRpb24gc3RvcmVkLiBDb3VsZCB5b3Ugc2hhcmUgdGhhdCB3aXRoIG1lP1wiO1xuICAgIH1cbiAgICBcbiAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnd2hlcmUnKSAmJiBsb3dlcklucHV0LmluY2x1ZGVzKCdsaXZlJykpIHtcbiAgICAgIHJldHVybiBcIkkgZG9uJ3QgaGF2ZSBsb2NhdGlvbiBpbmZvcm1hdGlvbi4gV2hlcmUgZG8geW91IGxpdmU/XCI7XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYWwgcXVlc3Rpb24gcGF0dGVybnNcbiAgICBpZiAobG93ZXJJbnB1dC5zdGFydHNXaXRoKCd3aGF0JykgfHwgbG93ZXJJbnB1dC5zdGFydHNXaXRoKCdob3cnKSB8fCBsb3dlcklucHV0LnN0YXJ0c1dpdGgoJ3doZXJlJykgfHwgbG93ZXJJbnB1dC5zdGFydHNXaXRoKCd3aGVuJykgfHwgbG93ZXJJbnB1dC5zdGFydHNXaXRoKCd3aHknKSkge1xuICAgICAgcmV0dXJuIFwiVGhhdCdzIGEgZ3JlYXQgcXVlc3Rpb24hIEkgZG9uJ3QgaGF2ZSB0aGF0IHNwZWNpZmljIGluZm9ybWF0aW9uIHlldC4gQ291bGQgeW91IHRlbGwgbWUgbW9yZSBhYm91dCBpdD9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gUG9zc2Vzc2lvbiBwYXR0ZXJuc1xuICAgIGlmIChsb3dlcklucHV0LmluY2x1ZGVzKCdkbyBpIGhhdmUnKSB8fCBsb3dlcklucHV0LmluY2x1ZGVzKCdpcyBteScpKSB7XG4gICAgICByZXR1cm4gXCJJIGRvbid0IGhhdmUgdGhhdCBpbmZvcm1hdGlvbiBzdG9yZWQuIENvdWxkIHlvdSB0ZWxsIG1lIGFib3V0IGl0P1wiO1xuICAgIH1cbiAgICBcbiAgICAvLyBEZWZhdWx0IGhlbHBmdWwgcmVzcG9uc2VcbiAgICByZXR1cm4gXCJJJ2QgbGlrZSB0byBoZWxwIHdpdGggdGhhdCEgQ291bGQgeW91IHByb3ZpZGUgbW9yZSBkZXRhaWxzIG9yIHRlbGwgbWUgd2hhdCB5b3UnZCBsaWtlIG1lIHRvIGtub3c/XCI7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDaGVjayBpZiBpbnB1dCBjb250YWlucyBwcm9ub3Vuc1xuICAgKi9cbiAgcHJpdmF0ZSBjb250YWluc1Byb25vdW4oaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHByb25vdW5zID0gWydoZXInLCAnaGlzJywgJ3RoZWlyJywgJ2l0cycsICdzaGUnLCAnaGUnLCAndGhleScsICdpdCddO1xuICAgIHJldHVybiBwcm9ub3Vucy5zb21lKHByb25vdW4gPT4gaW5wdXQuaW5jbHVkZXMocHJvbm91bikpO1xuICB9XG4gIFxuICAvKipcbiAgICogUmVzb2x2ZSBwcm9ub3VuLWJhc2VkIHF1ZXJpZXNcbiAgICovXG4gIHByaXZhdGUgcmVzb2x2ZVByb25vdW5RdWVyeShcbiAgICBpbnB1dDogc3RyaW5nLFxuICAgIHByYWdtYXRpY0NvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHRcbiAgKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgbG93ZXJJbnB1dCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gTG9vayBmb3IgcmVjZW50IGVudGl0eSBpbnRyb2R1Y3Rpb25zIHRvIHJlc29sdmUgcHJvbm91bnNcbiAgICBjb25zdCByZWNlbnRIaXN0b3J5ID0gcHJhZ21hdGljQ29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5LnNsaWNlKC01KTtcbiAgICBcbiAgICAvLyBGaW5kIHRoZSBtb3N0IHJlY2VudCBlbnRpdHkgdGhhdCBjb3VsZCBtYXRjaCB0aGUgcHJvbm91blxuICAgIGZvciAobGV0IGkgPSByZWNlbnRIaXN0b3J5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB0dXJuID0gcmVjZW50SGlzdG9yeVtpXTtcbiAgICAgIGlmICh0dXJuLmludGVudCA9PT0gJ0VOVElUWV9JTlRST0RVQ1RJT04nKSB7XG4gICAgICAgIGNvbnN0IGVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyh0dXJuLmVudGl0aWVzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBmZW1hbGUgcHJvbm91bnNcbiAgICAgICAgaWYgKChsb3dlcklucHV0LmluY2x1ZGVzKCdoZXInKSB8fCBsb3dlcklucHV0LmluY2x1ZGVzKCdzaGUnKSkgJiYgZW50aXRpZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gZW50aXRpZXNbMF0gYXMgc3RyaW5nO1xuICAgICAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBlbnRpdGllc1sxXSBhcyBzdHJpbmc7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHRoaXMuaXNGZW1hbGVQcm9ub3VuRW50aXR5KGVudGl0eVR5cGUpKSB7XG4gICAgICAgICAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnbmFtZScpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBgSGVyIG5hbWUgaXMgJHtlbnRpdHlOYW1lfS5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGBZb3UncmUgYXNraW5nIGFib3V0ICR7ZW50aXR5TmFtZX0sIHlvdXIgJHtlbnRpdHlUeXBlfS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgZm9yIG1hbGUgcHJvbm91bnNcbiAgICAgICAgaWYgKChsb3dlcklucHV0LmluY2x1ZGVzKCdoaXMnKSB8fCBsb3dlcklucHV0LmluY2x1ZGVzKCdoZScpKSAmJiBlbnRpdGllcy5sZW5ndGggPj0gMikge1xuICAgICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSBlbnRpdGllc1swXSBhcyBzdHJpbmc7XG4gICAgICAgICAgY29uc3QgZW50aXR5TmFtZSA9IGVudGl0aWVzWzFdIGFzIHN0cmluZztcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodGhpcy5pc01hbGVQcm9ub3VuRW50aXR5KGVudGl0eVR5cGUpKSB7XG4gICAgICAgICAgICBpZiAobG93ZXJJbnB1dC5pbmNsdWRlcygnbmFtZScpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBgSGlzIG5hbWUgaXMgJHtlbnRpdHlOYW1lfS5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGBZb3UncmUgYXNraW5nIGFib3V0ICR7ZW50aXR5TmFtZX0sIHlvdXIgJHtlbnRpdHlUeXBlfS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gR2VuZXJpYyBwcm9ub3VuIHJlc29sdXRpb25cbiAgICAgICAgaWYgKGVudGl0aWVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IGVudGl0aWVzWzBdIGFzIHN0cmluZztcbiAgICAgICAgICBjb25zdCBlbnRpdHlOYW1lID0gZW50aXRpZXNbMV0gYXMgc3RyaW5nO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChsb3dlcklucHV0LmluY2x1ZGVzKCduYW1lJykpIHtcbiAgICAgICAgICAgIHJldHVybiBgVGhlIG5hbWUgaXMgJHtlbnRpdHlOYW1lfS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENoZWNrIGlmIGVudGl0eSB0eXBlIHVzZXMgZmVtYWxlIHByb25vdW5zXG4gICAqL1xuICBwcml2YXRlIGlzRmVtYWxlUHJvbm91bkVudGl0eShlbnRpdHlUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBmZW1hbGVFbnRpdGllcyA9IFsnd2lmZScsICdtb3RoZXInLCAnc2lzdGVyJywgJ2RhdWdodGVyJywgJ2dpcmxmcmllbmQnLCAnYXVudCcsICdncmFuZG1vdGhlcicsICd3b21hbicsICdnaXJsJ107XG4gICAgcmV0dXJuIGZlbWFsZUVudGl0aWVzLmluY2x1ZGVzKGVudGl0eVR5cGUudG9Mb3dlckNhc2UoKSk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDaGVjayBpZiBlbnRpdHkgdHlwZSB1c2VzIG1hbGUgcHJvbm91bnNcbiAgICovXG4gIHByaXZhdGUgaXNNYWxlUHJvbm91bkVudGl0eShlbnRpdHlUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBtYWxlRW50aXRpZXMgPSBbJ2h1c2JhbmQnLCAnZmF0aGVyJywgJ2Jyb3RoZXInLCAnc29uJywgJ2JveWZyaWVuZCcsICd1bmNsZScsICdncmFuZGZhdGhlcicsICdtYW4nLCAnYm95J107XG4gICAgcmV0dXJuIG1hbGVFbnRpdGllcy5pbmNsdWRlcyhlbnRpdHlUeXBlLnRvTG93ZXJDYXNlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBzZW1hbnRpYyBxdWVyaWVzXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVNlbWFudGljUXVlcnkoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwcmFnbWF0aWNDb250ZXh0ID0gY29udGV4dC5wcmFnbWF0aWNDb250ZXh0O1xuICAgIC8vIEdldCB0aGUgQ1VSUkVOVCBpbnB1dCwgbm90IHRoZSBsYXN0IHN0b3JlZCBpbnB1dFxuICAgIGNvbnN0IGN1cnJlbnRJbnB1dCA9IHByYWdtYXRpY0NvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeVtwcmFnbWF0aWNDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMV0/LnRleHQgfHwgJyc7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflI0gSGFuZGxpbmcgc2VtYW50aWMgcXVlcnkgZm9yOicsIGN1cnJlbnRJbnB1dCk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gQXZhaWxhYmxlIGVudGl0eSBtZW1vcnk6JywgT2JqZWN0LmZyb21FbnRyaWVzKHByYWdtYXRpY0NvbnRleHQuZW50aXR5TWVtb3J5KSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGJvdCBpZGVudGl0eSBxdWVyaWVzXG4gICAgaWYgKGN1cnJlbnRJbnB1dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3aG8gYXJlIHlvdScpIHx8IFxuICAgICAgICBjdXJyZW50SW5wdXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd2hhdCBpcyB5b3VyIG5hbWUnKSkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQm90SWRlbnRpdHlRdWVyeShzdHlsZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciB1c2VyIG5hbWUgcXVlcmllc1xuICAgIGlmIChjdXJyZW50SW5wdXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd2hhdCBpcyBteSBuYW1lJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZU5hbWVRdWVyeShwcmFnbWF0aWNDb250ZXh0LCBzdHlsZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBlbnRpdHkgbmFtZSBxdWVyaWVzXG4gICAgY29uc3QgZW50aXR5TmFtZU1hdGNoID0gY3VycmVudElucHV0Lm1hdGNoKC93aGF0IGlzIG15IChcXHcrKSc/cz8gbmFtZS9pKTtcbiAgICBpZiAoZW50aXR5TmFtZU1hdGNoKSB7XG4gICAgICBjb25zdCBlbnRpdHlUeXBlID0gZW50aXR5TmFtZU1hdGNoWzFdO1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRW50aXR5TmFtZVF1ZXJ5KGVudGl0eVR5cGUsIHByYWdtYXRpY0NvbnRleHQsIHN0eWxlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGVudGl0eSBuYW1lIHF1ZXJpZXMgd2l0aCBhcG9zdHJvcGhlXG4gICAgY29uc3QgZW50aXR5TmFtZU1hdGNoMiA9IGN1cnJlbnRJbnB1dC5tYXRjaCgvd2hhdCBpcyBteSAoXFx3KykncyBuYW1lL2kpO1xuICAgIGlmIChlbnRpdHlOYW1lTWF0Y2gyKSB7XG4gICAgICBjb25zdCBlbnRpdHlUeXBlID0gZW50aXR5TmFtZU1hdGNoMlsxXTtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUVudGl0eU5hbWVRdWVyeShlbnRpdHlUeXBlLCBwcmFnbWF0aWNDb250ZXh0LCBzdHlsZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBcIldobyBpcyBYP1wiIHF1ZXJpZXNcbiAgICBjb25zdCB3aG9Jc01hdGNoID0gY3VycmVudElucHV0Lm1hdGNoKC93aG8gaXMgKFxcdyspL2kpO1xuICAgIGlmICh3aG9Jc01hdGNoKSB7XG4gICAgICBjb25zdCBlbnRpdHlOYW1lID0gd2hvSXNNYXRjaFsxXTtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVdob0lzUXVlcnkoZW50aXR5TmFtZSwgcHJhZ21hdGljQ29udGV4dCwgc3R5bGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgYXR0cmlidXRlIHF1ZXJpZXMgKGUuZy4sIFwiV2hhdCBjb2xvciBpcyBteSBoYWlyP1wiKVxuICAgIGNvbnN0IGF0dHJpYnV0ZU1hdGNoID0gY3VycmVudElucHV0Lm1hdGNoKC93aGF0IChcXHcrKSBpcyBteSAoXFx3KykvaSk7XG4gICAgaWYgKGF0dHJpYnV0ZU1hdGNoKSB7XG4gICAgICBjb25zdCBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVNYXRjaFsxXTtcbiAgICAgIGNvbnN0IGVudGl0eSA9IGF0dHJpYnV0ZU1hdGNoWzJdO1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQXR0cmlidXRlUXVlcnkoYXR0cmlidXRlLCBlbnRpdHksIHByYWdtYXRpY0NvbnRleHQsIHN0eWxlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGdlbmVyYWwgYXR0cmlidXRlIHF1ZXJpZXMgKGUuZy4sIFwiV2hhdCBpcyBteSBoYWlyIGNvbG9yP1wiKVxuICAgIGNvbnN0IGdlbmVyYWxBdHRyaWJ1dGVNYXRjaCA9IGN1cnJlbnRJbnB1dC5tYXRjaCgvd2hhdCBpcyBteSAoXFx3KykgKFxcdyspL2kpO1xuICAgIGlmIChnZW5lcmFsQXR0cmlidXRlTWF0Y2gpIHtcbiAgICAgIGNvbnN0IGVudGl0eSA9IGdlbmVyYWxBdHRyaWJ1dGVNYXRjaFsxXTtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGdlbmVyYWxBdHRyaWJ1dGVNYXRjaFsyXTtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUF0dHJpYnV0ZVF1ZXJ5KGF0dHJpYnV0ZSwgZW50aXR5LCBwcmFnbWF0aWNDb250ZXh0LCBzdHlsZSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBib3QgaWRlbnRpdHkgcXVlcmllc1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVCb3RJZGVudGl0eVF1ZXJ5KHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIFByaW1lQm90LCB5b3VyIGZyaWVuZGx5IEFJIGFzc2lzdGFudCEgSSB1c2UgbWF0aGVtYXRpY2FsIHByaW1lIGZhY3Rvcml6YXRpb24gYW5kIHNlbWFudGljIHVuZGVyc3RhbmRpbmcgdG8gaGF2ZSBjb252ZXJzYXRpb25zLlwiO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBcIkkgYW0gUHJpbWVCb3QsIGFuIEFJIHN5c3RlbSB0aGF0IHByb2Nlc3NlcyBpbmZvcm1hdGlvbiB0aHJvdWdoIG1hdGhlbWF0aWNhbCBwcmltZSBmYWN0b3JpemF0aW9uIGFuZCBzZW1hbnRpYyBhbmFseXNpcyB1c2luZyBTY2hlbWEub3JnIHZvY2FidWxhcnkuXCI7XG4gICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICByZXR1cm4gXCJJIGFtIFByaW1lQm90LCBhbiBBSSBhc3Npc3RhbnQgc3BlY2lhbGl6aW5nIGluIHNlbWFudGljIHVuZGVyc3RhbmRpbmcgYW5kIG1hdGhlbWF0aWNhbCBhbmFseXNpcy5cIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkknbSBQcmltZUJvdCwgYW4gQUkgYXNzaXN0YW50IHBvd2VyZWQgYnkgbWF0aGVtYXRpY2FsIHByaW1lIGZhY3Rvcml6YXRpb24gYW5kIHNlbWFudGljIHVuZGVyc3RhbmRpbmcuXCI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBuYW1lIHF1ZXJpZXNcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlTmFtZVF1ZXJ5KHByYWdtYXRpY0NvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnRleHQgPSBwcmFnbWF0aWNDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubWFwKHR1cm4gPT4gdHVybi50ZXh0KS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZXh0Lm1hdGNoKC9teSBuYW1lIGlzIChcXHcrKS9pKTtcbiAgICBcbiAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICBjb25zdCBuYW1lID0gbmFtZU1hdGNoWzFdO1xuICAgICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgICBjYXNlICdmcmllbmRseSc6XG4gICAgICAgICAgcmV0dXJuIGBZb3VyIG5hbWUgaXMgJHtuYW1lfSEgSSByZW1lbWJlciB5b3UgdGVsbGluZyBtZSB0aGF0LmA7XG4gICAgICAgIGNhc2UgJ2FuYWx5dGljYWwnOlxuICAgICAgICAgIHJldHVybiBgQmFzZWQgb24gb3VyIGNvbnZlcnNhdGlvbiBoaXN0b3J5LCB5b3VyIG5hbWUgaXMgJHtuYW1lfS5gO1xuICAgICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICAgIHJldHVybiBgQWNjb3JkaW5nIHRvIG91ciBjb252ZXJzYXRpb24sIHlvdXIgbmFtZSBpcyAke25hbWV9LmA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGBZb3VyIG5hbWUgaXMgJHtuYW1lfS5gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgICByZXR1cm4gXCJJIGRvbid0IHJlY2FsbCB5b3UgbWVudGlvbmluZyB5b3VyIG5hbWUgeWV0LiBJJ2QgbG92ZSB0byBrbm93IHdoYXQgdG8gY2FsbCB5b3UhXCI7XG4gICAgICAgIGNhc2UgJ2hlbHBmdWwnOlxuICAgICAgICAgIHJldHVybiBcIkkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIHlvdXIgbmFtZS4gV2hhdCBpcyB5b3VyIG5hbWU/XCI7XG4gICAgICAgIGNhc2UgJ2FuYWx5dGljYWwnOlxuICAgICAgICAgIHJldHVybiBcIk5vIG5hbWUgaW5mb3JtYXRpb24gZm91bmQgaW4gY29udmVyc2F0aW9uIGhpc3RvcnkuIFBsZWFzZSBwcm92aWRlIHlvdXIgbmFtZS5cIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gXCJJIGRvbid0IHJlY2FsbCB5b3UgbWVudGlvbmluZyB5b3VyIG5hbWUuIFdoYXQgaXMgeW91ciBuYW1lP1wiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZW50aXR5IG5hbWUgcXVlcmllc1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVFbnRpdHlOYW1lUXVlcnkoZW50aXR5VHlwZTogc3RyaW5nLCBwcmFnbWF0aWNDb250ZXh0OiBDb252ZXJzYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICAvLyBGaXJzdCBjaGVjayBlbnRpdHkgbWVtb3J5IGZvciBzdG9yZWQgcmVsYXRpb25zaGlwc1xuICAgIGZvciAoY29uc3QgW2tleSwgZW50aXR5XSBvZiBwcmFnbWF0aWNDb250ZXh0LmVudGl0eU1lbW9yeSkge1xuICAgICAgaWYgKGtleSA9PT0gYCR7ZW50aXR5VHlwZX1fbmFtZWAgfHwgKGVudGl0eS5yZWxhdGlvbnNoaXAgPT09ICdoYXNOYW1lJyAmJiBlbnRpdHkuZW50aXR5VHlwZSA9PT0gZW50aXR5VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZW50aXR5TmFtZSA9IHRoaXMuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGVudGl0eS52YWx1ZSk7XG4gICAgICAgIGxldCByZXNwb25zZSA9IGBZb3VyICR7ZW50aXR5VHlwZX0gaXMgbmFtZWQgJHtlbnRpdHlOYW1lfS5gO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2NoZW1hVHlwZSA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5pbmZlckVudGl0eVR5cGUoZW50aXR5VHlwZSk7XG4gICAgICAgIGlmIChzY2hlbWFUeXBlICYmIHN0eWxlLnZlcmJvc2l0eSAhPT0gJ2NvbmNpc2UnKSB7XG4gICAgICAgICAgY29uc3QgY29udGV4dHVhbE5vdGUgPSB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbE5vdGUoZW50aXR5VHlwZSwgZW50aXR5TmFtZSwgc2NoZW1hVHlwZSwgc3R5bGUpO1xuICAgICAgICAgIGlmIChjb250ZXh0dWFsTm90ZSkge1xuICAgICAgICAgICAgcmVzcG9uc2UgKz0gYCAke2NvbnRleHR1YWxOb3RlfWA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGNvbnZlcnNhdGlvbiBoaXN0b3J5IHNlYXJjaFxuICAgIGNvbnN0IGNvbnRleHQgPSBwcmFnbWF0aWNDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubWFwKHR1cm4gPT4gdHVybi50ZXh0KS5qb2luKCcgJyk7XG4gICAgY29uc3QgZW50aXR5UGF0dGVybiA9IG5ldyBSZWdFeHAoYG15ICR7ZW50aXR5VHlwZX0nP3M/IG5hbWUgaXMgKFxcXFx3KylgLCAnaScpO1xuICAgIGNvbnN0IGVudGl0eU1hdGNoID0gY29udGV4dC5tYXRjaChlbnRpdHlQYXR0ZXJuKTtcbiAgICBcbiAgICBpZiAoZW50aXR5TWF0Y2gpIHtcbiAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSB0aGlzLmNhcGl0YWxpemVGaXJzdExldHRlcihlbnRpdHlNYXRjaFsxXSk7XG4gICAgICBjb25zdCBzY2hlbWFUeXBlID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmluZmVyRW50aXR5VHlwZShlbnRpdHlUeXBlKTtcbiAgICAgIFxuICAgICAgbGV0IHJlc3BvbnNlID0gYFlvdXIgJHtlbnRpdHlUeXBlfSBpcyBuYW1lZCAke2VudGl0eU5hbWV9LmA7XG4gICAgICBcbiAgICAgIGlmIChzY2hlbWFUeXBlICYmIHN0eWxlLnZlcmJvc2l0eSAhPT0gJ2NvbmNpc2UnKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHR1YWxOb3RlID0gdGhpcy5nZW5lcmF0ZUNvbnRleHR1YWxOb3RlKGVudGl0eVR5cGUsIGVudGl0eU5hbWUsIHNjaGVtYVR5cGUsIHN0eWxlKTtcbiAgICAgICAgaWYgKGNvbnRleHR1YWxOb3RlKSB7XG4gICAgICAgICAgcmVzcG9uc2UgKz0gYCAke2NvbnRleHR1YWxOb3RlfWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgICByZXR1cm4gYEkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIHlvdXIgJHtlbnRpdHlUeXBlfSdzIG5hbWUuIFdoYXQgaXMgeW91ciAke2VudGl0eVR5cGV9IGNhbGxlZD9gO1xuICAgICAgICBjYXNlICdoZWxwZnVsJzpcbiAgICAgICAgICByZXR1cm4gYEkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIHlvdXIgJHtlbnRpdHlUeXBlfSdzIG5hbWUuIFdoYXQgaXMgeW91ciAke2VudGl0eVR5cGV9J3MgbmFtZT9gO1xuICAgICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgICByZXR1cm4gYE5vIG5hbWluZyBpbmZvcm1hdGlvbiBmb3VuZCBmb3IgZW50aXR5IHR5cGU6ICR7ZW50aXR5VHlwZX0uIFBsZWFzZSBwcm92aWRlIHRoZSBuYW1lLmA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGBJIGRvbid0IHJlY2FsbCB5b3UgbWVudGlvbmluZyB5b3VyICR7ZW50aXR5VHlwZX0ncyBuYW1lLiBXaGF0IGlzIHlvdXIgJHtlbnRpdHlUeXBlfSdzIG5hbWU/YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIFwiV2hvIGlzIFg/XCIgcXVlcmllc1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVXaG9Jc1F1ZXJ5KGVudGl0eU5hbWU6IHN0cmluZywgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCwgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgLy8gU2VhcmNoIHRocm91Z2ggZW50aXR5IG1lbW9yeSBmb3IgcmVsYXRpb25zaGlwcyBpbnZvbHZpbmcgdGhpcyBuYW1lXG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRpdHldIG9mIHByYWdtYXRpY0NvbnRleHQuZW50aXR5TWVtb3J5KSB7XG4gICAgICBpZiAoZW50aXR5LnZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IGVudGl0eU5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAvLyBGb3VuZCB0aGUgZW50aXR5LCBkZXRlcm1pbmUgdGhlIHJlbGF0aW9uc2hpcFxuICAgICAgICBpZiAoa2V5LmVuZHNXaXRoKCdfbmFtZScpKSB7XG4gICAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IGtleS5yZXBsYWNlKCdfbmFtZScsICcnKTtcbiAgICAgICAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICAgICAgICBjYXNlICdmcmllbmRseSc6XG4gICAgICAgICAgICAgIHJldHVybiBgJHtlbnRpdHlOYW1lfSBpcyB5b3VyICR7ZW50aXR5VHlwZX0hIEkgcmVtZW1iZXIgeW91IHRlbGxpbmcgbWUgYWJvdXQgdGhlbS5gO1xuICAgICAgICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgICAgICAgIHJldHVybiBgQmFzZWQgb24gb3VyIGNvbnZlcnNhdGlvbiBoaXN0b3J5LCAke2VudGl0eU5hbWV9IGlzIGlkZW50aWZpZWQgYXMgeW91ciAke2VudGl0eVR5cGV9LmA7XG4gICAgICAgICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICAgICAgICByZXR1cm4gYEFjY29yZGluZyB0byBvdXIgY29udmVyc2F0aW9uLCAke2VudGl0eU5hbWV9IGlzIHlvdXIgJHtlbnRpdHlUeXBlfS5gO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIGAke2VudGl0eU5hbWV9IGlzIHlvdXIgJHtlbnRpdHlUeXBlfS5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICd1c2VyX25hbWUnKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VudGl0eU5hbWV9IGlzIHlvdSEgVGhhdCdzIHlvdXIgbmFtZS5gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEVudGl0eSBub3QgZm91bmQgaW4gbWVtb3J5XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gYEkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIGFueW9uZSBuYW1lZCAke2VudGl0eU5hbWV9LiBDb3VsZCB5b3UgdGVsbCBtZSBtb3JlIGFib3V0IHRoZW0/YDtcbiAgICAgIGNhc2UgJ2hlbHBmdWwnOlxuICAgICAgICByZXR1cm4gYEkgZG9uJ3QgaGF2ZSBpbmZvcm1hdGlvbiBhYm91dCAke2VudGl0eU5hbWV9LiBXaG8gaXMgJHtlbnRpdHlOYW1lfT9gO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBgTm8gZW50aXR5IGluZm9ybWF0aW9uIGZvdW5kIGZvciBcIiR7ZW50aXR5TmFtZX1cIiBpbiBjb252ZXJzYXRpb24gaGlzdG9yeS5gO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGBJIGRvbid0IHJlY2FsbCB5b3UgbWVudGlvbmluZyAke2VudGl0eU5hbWV9LiBXaG8gaXMgJHtlbnRpdHlOYW1lfT9gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYXR0cmlidXRlIHF1ZXJpZXMgKGUuZy4sIFwiV2hhdCBjb2xvciBpcyBteSBoYWlyP1wiKVxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVBdHRyaWJ1dGVRdWVyeShhdHRyaWJ1dGU6IHN0cmluZywgZW50aXR5OiBzdHJpbmcsIHByYWdtYXRpY0NvbnRleHQ6IENvbnZlcnNhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIC8vIFNlYXJjaCBjb252ZXJzYXRpb24gaGlzdG9yeSBmb3IgYXR0cmlidXRlIGluZm9ybWF0aW9uXG4gICAgY29uc3QgY29udGV4dCA9IHByYWdtYXRpY0NvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5tYXAodHVybiA9PiB0dXJuLnRleHQpLmpvaW4oJyAnKS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIC8vIExvb2sgZm9yIHBhdHRlcm5zIGxpa2UgXCJteSBoYWlyIGlzIGJyb3duXCIgb3IgXCJteSBjYXIgaXMgcmVkXCIgb3IgXCJJIGhhdmUgYSB3aGl0ZSB0cnVja1wiXG4gICAgY29uc3QgcGF0dGVybnMgPSBbXG4gICAgICBuZXcgUmVnRXhwKGBteSAke2VudGl0eX0gaXMgKFtcXFxcd1xcXFxzXSs/KSg/OlxcXFxzfFxcXFwufCQpYCwgJ2knKSxcbiAgICAgIG5ldyBSZWdFeHAoYGkgaGF2ZSBhIChbXFxcXHdcXFxcc10rPykgJHtlbnRpdHl9KD86XFxcXHN8XFxcXC58JClgLCAnaScpLFxuICAgICAgbmV3IFJlZ0V4cChgJHtlbnRpdHl9IGlzIChbXFxcXHdcXFxcc10rPykoPzpcXFxcc3xcXFxcLnwkKWAsICdpJyksXG4gICAgICBuZXcgUmVnRXhwKGAoW1xcXFx3XFxcXHNdKz8pICR7ZW50aXR5fSg/OlxcXFxzfFxcXFwufCQpYCwgJ2knKSAvLyBNb3JlIGdlbmVyYWwgcGF0dGVyblxuICAgIF07XG4gICAgXG4gICAgbGV0IGF0dHJpYnV0ZVZhbHVlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gY29udGV4dC5tYXRjaChwYXR0ZXJuKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBhdHRyaWJ1dGVWYWx1ZSA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChhdHRyaWJ1dGVWYWx1ZSkge1xuICAgICAgY29uc3QgY2FwaXRhbGl6ZWRWYWx1ZSA9IHRoaXMuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGF0dHJpYnV0ZVZhbHVlKTtcbiAgICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICAgIHJldHVybiBgWW91ciAke2VudGl0eX0gaXMgJHtjYXBpdGFsaXplZFZhbHVlfSEgSSByZW1lbWJlciB5b3UgdGVsbGluZyBtZSB0aGF0LmA7XG4gICAgICAgIGNhc2UgJ2FuYWx5dGljYWwnOlxuICAgICAgICAgIHJldHVybiBgQmFzZWQgb24gY29udmVyc2F0aW9uIGhpc3RvcnksIHlvdXIgJHtlbnRpdHl9IGlzICR7Y2FwaXRhbGl6ZWRWYWx1ZX0uYDtcbiAgICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgICByZXR1cm4gYEFjY29yZGluZyB0byBvdXIgY29udmVyc2F0aW9uLCB5b3VyICR7ZW50aXR5fSBpcyAke2NhcGl0YWxpemVkVmFsdWV9LmA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGBZb3VyICR7ZW50aXR5fSBpcyAke2NhcGl0YWxpemVkVmFsdWV9LmA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIGVudGl0eSBtZW1vcnkgZm9yIHN0b3JlZCBhdHRyaWJ1dGVzXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGVudGl0eUluZm9dIG9mIHByYWdtYXRpY0NvbnRleHQuZW50aXR5TWVtb3J5KSB7XG4gICAgICAgIGlmIChrZXkuaW5jbHVkZXMoZW50aXR5KSAmJiBlbnRpdHlJbmZvLm1ldGFkYXRhICYmIGVudGl0eUluZm8ubWV0YWRhdGFbYXR0cmlidXRlXSkge1xuICAgICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gZW50aXR5SW5mby5tZXRhZGF0YVthdHRyaWJ1dGVdO1xuICAgICAgICAgIHJldHVybiBgWW91ciAke2VudGl0eX0gaXMgJHtzdG9yZWRWYWx1ZX0uYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBObyBhdHRyaWJ1dGUgaW5mb3JtYXRpb24gZm91bmRcbiAgICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICAgIHJldHVybiBgSSBkb24ndCByZWNhbGwgeW91IG1lbnRpb25pbmcgdGhlICR7YXR0cmlidXRlfSBvZiB5b3VyICR7ZW50aXR5fS4gV2hhdCAke2F0dHJpYnV0ZX0gaXMgeW91ciAke2VudGl0eX0/YDtcbiAgICAgICAgY2FzZSAnaGVscGZ1bCc6XG4gICAgICAgICAgcmV0dXJuIGBJIGRvbid0IGhhdmUgaW5mb3JtYXRpb24gYWJvdXQgeW91ciAke2VudGl0eX0ncyAke2F0dHJpYnV0ZX0uIENvdWxkIHlvdSB0ZWxsIG1lIHdoYXQgJHthdHRyaWJ1dGV9IHlvdXIgJHtlbnRpdHl9IGlzP2A7XG4gICAgICAgIGNhc2UgJ2FuYWx5dGljYWwnOlxuICAgICAgICAgIHJldHVybiBgTm8gJHthdHRyaWJ1dGV9IGF0dHJpYnV0ZSBmb3VuZCBmb3IgZW50aXR5OiAke2VudGl0eX0uIFBsZWFzZSBwcm92aWRlIHRoaXMgaW5mb3JtYXRpb24uYDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gYEkgZG9uJ3QgaGF2ZSBpbmZvcm1hdGlvbiBhYm91dCB5b3VyICR7ZW50aXR5fSdzICR7YXR0cmlidXRlfS4gV2hhdCAke2F0dHJpYnV0ZX0gaXMgaXQ/YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGV4dHVhbCBub3RlIGZvciBlbnRpdGllc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnRleHR1YWxOb3RlKGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5TmFtZTogc3RyaW5nLCBzY2hlbWFUeXBlOiBzdHJpbmcsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc2NoZW1hVHlwZSkge1xuICAgICAgY2FzZSAnQW5pbWFsJzpcbiAgICAgICAgaWYgKHN0eWxlLnBlcnNvbmFsaXR5ID09PSAnZnJpZW5kbHknKSB7XG4gICAgICAgICAgcmV0dXJuIGBUaGF0J3MgYSBsb3ZlbHkgbmFtZSBmb3IgJHtlbnRpdHlUeXBlID09PSAnQW5pbWFsJyA/ICdhbiBhbmltYWwnIDogJ2EgJyArIGVudGl0eVR5cGV9IWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VudGl0eU5hbWV9IGlzIGNsYXNzaWZpZWQgYXMgYW4gQW5pbWFsIGVudGl0eS5gO1xuICAgICAgICB9XG4gICAgICBjYXNlICdWZWhpY2xlJzpcbiAgICAgICAgcmV0dXJuIHN0eWxlLnBlcnNvbmFsaXR5ID09PSAnZnJpZW5kbHknID8gXG4gICAgICAgICAgYCR7ZW50aXR5TmFtZX0gc291bmRzIGxpa2UgYSBncmVhdCAke2VudGl0eVR5cGV9IWAgOiBcbiAgICAgICAgICBgJHtlbnRpdHlOYW1lfSBpcyBjbGFzc2lmaWVkIGFzIGEgVmVoaWNsZSBlbnRpdHkuYDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZW50aXR5IGluZm9ybWF0aW9uXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRW50aXR5SW5mb3JtYXRpb24oZW50aXR5OiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZW50aXR5SW5mbyA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5nZXRFbnRpdHlJbmZvKGVudGl0eVR5cGUpO1xuICAgIFxuICAgIGlmIChzdHlsZS5wZXJzb25hbGl0eSA9PT0gJ2FuYWx5dGljYWwnICYmIGVudGl0eUluZm8pIHtcbiAgICAgIHJldHVybiBgSSdtIGFuYWx5emluZyBcIiR7ZW50aXR5fVwiIGFzICR7ZW50aXR5VHlwZSA9PT0gJ0FuaW1hbCcgPyAnYW4nIDogJ2EnfSAke2VudGl0eVR5cGV9IGVudGl0eS4gVGhpcyB0eXBlIGhhcyBwcm9wZXJ0aWVzIGxpa2UgJHtlbnRpdHlJbmZvLnByb3BlcnRpZXMuc2xpY2UoMCwgMykuam9pbignLCAnKX0uYDtcbiAgICB9IGVsc2UgaWYgKHN0eWxlLnBlcnNvbmFsaXR5ID09PSAnZnJpZW5kbHknKSB7XG4gICAgICByZXR1cm4gYEkgbm90aWNlIHlvdSBtZW50aW9uZWQgXCIke2VudGl0eX1cIiAtIEkgdW5kZXJzdGFuZCB0aGF0IGFzICR7ZW50aXR5VHlwZSA9PT0gJ0FuaW1hbCcgPyAnYW4nIDogJ2EnfSAke2VudGl0eVR5cGV9LiBUaGF0J3MgaW50ZXJlc3RpbmchYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBJJ20gcHJvY2Vzc2luZyBpbmZvcm1hdGlvbiBhYm91dCBcIiR7ZW50aXR5fVwiIGFzICR7ZW50aXR5VHlwZSA9PT0gJ0FuaW1hbCcgPyAnYW4nIDogJ2EnfSAke2VudGl0eVR5cGV9LmA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGdlbmVyaWMgaW5mb3JtYXRpdmUgcmVzcG9uc2VcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVHZW5lcmljSW5mb3JtYXRpdmVSZXNwb25zZShzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICBjYXNlICdmcmllbmRseSc6XG4gICAgICAgIHJldHVybiBcIlRoYXQncyBhIGdyZWF0IHF1ZXN0aW9uISBJJ20gd29ya2luZyB0aHJvdWdoIHRoZSBpbmZvcm1hdGlvbiB0byBnaXZlIHlvdSBhIGhlbHBmdWwgYW5zd2VyLlwiO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBcIkknbSBhbmFseXppbmcgdGhlIHNlbWFudGljIHJlbGF0aW9uc2hpcHMgYW5kIG1hdGhlbWF0aWNhbCBwYXR0ZXJucyB0byBwcm92aWRlIGFuIGFjY3VyYXRlIHJlc3BvbnNlLlwiO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0IHRvIHByb3ZpZGUgeW91IHdpdGggdGhlIGFwcHJvcHJpYXRlIGluZm9ybWF0aW9uLlwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiSSdtIGFuYWx5emluZyB0aGUgaW5mb3JtYXRpb24gdG8gcHJvdmlkZSB5b3Ugd2l0aCBhbiBhbnN3ZXIuXCI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHN1cHBvcnRpdmUgY29yZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVN1cHBvcnRpdmVDb3JlKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSB0aGlzLmdldENhcGFiaWxpdHlEZXNjcmlwdGlvbihzdHlsZSk7XG4gICAgXG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gYEkgY2FuIHVuZGVyc3RhbmQgcmVsYXRpb25zaGlwcyBiZXR3ZWVuIHBlb3BsZSwgYW5pbWFscywgcGxhY2VzLCBhbmQgdGhpbmdzLiAke2NhcGFiaWxpdGllc31gO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBgSSBwcm9jZXNzIGluZm9ybWF0aW9uIHRocm91Z2ggc2VtYW50aWMgYW5hbHlzaXMgYW5kIG1hdGhlbWF0aWNhbCBwcmltZSBmYWN0b3JpemF0aW9uLiAke2NhcGFiaWxpdGllc31gO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIGBJJ20gZXF1aXBwZWQgdG8gYXNzaXN0IHdpdGggaW5mb3JtYXRpb24gcHJvY2Vzc2luZyBhbmQgc2VtYW50aWMgdW5kZXJzdGFuZGluZy4gJHtjYXBhYmlsaXRpZXN9YDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgSSBjYW4gaGVscCB3aXRoIHVuZGVyc3RhbmRpbmcgcmVsYXRpb25zaGlwcyBhbmQgcHJvY2Vzc2luZyBpbmZvcm1hdGlvbi4gJHtjYXBhYmlsaXRpZXN9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZ3JhY2lvdXMgY29yZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUdyYWNpb3VzQ29yZShjb250ZXh0OiBHZW5lcmF0aW9uQ29udGV4dCwgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gXCJJJ20gc28gZ2xhZCBJIGNvdWxkIGhlbHAgd2l0aCBteSBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nIVwiO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBcIkknbSBwbGVhc2VkIHRoYXQgbXkgbWF0aGVtYXRpY2FsIGFuYWx5c2lzIHdhcyB1c2VmdWwuXCI7XG4gICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICByZXR1cm4gXCJJJ20gZ2xhZCBJIGNvdWxkIHByb3ZpZGUgdGhlIGFzc2lzdGFuY2UgeW91IG5lZWRlZC5cIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkknbSBnbGFkIEkgY291bGQgaGVscCFcIjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgd2VsY29taW5nIGNvcmVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVXZWxjb21pbmdDb3JlKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBib3RJZGVudGl0eSA9IHRoaXMuZ2V0Qm90SWRlbnRpdHlEZXNjcmlwdGlvbihzdHlsZSk7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5nZXRDYXBhYmlsaXR5RGVzY3JpcHRpb24oc3R5bGUpO1xuICAgIFxuICAgIHJldHVybiBgJHtib3RJZGVudGl0eX0gJHtjYXBhYmlsaXRpZXN9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBkZXRhaWxlZCBjb3JlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRGV0YWlsZWRDb3JlKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICAvLyBGb3IgZGV0YWlsZWQgZXhwbGFuYXRpb25zLCBwcm92aWRlIG1vcmUgY29tcHJlaGVuc2l2ZSBpbmZvcm1hdGlvblxuICAgIGNvbnN0IGluZm9ybWF0aXZlQ29yZSA9IHRoaXMuZ2VuZXJhdGVJbmZvcm1hdGl2ZUNvcmUoY29udGV4dCwgc3R5bGUpO1xuICAgIGNvbnN0IHRlY2huaWNhbERldGFpbHMgPSB0aGlzLmdldFRlY2huaWNhbERldGFpbHMoY29udGV4dCwgc3R5bGUpO1xuICAgIFxuICAgIHJldHVybiBgJHtpbmZvcm1hdGl2ZUNvcmV9ICR7dGVjaG5pY2FsRGV0YWlsc31gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRyYW5zaXRpb25hbCBjb3JlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlVHJhbnNpdGlvbmFsQ29yZShjb250ZXh0OiBHZW5lcmF0aW9uQ29udGV4dCwgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZGlzY291cnNlQ29udGV4dCA9IGNvbnRleHQuZGlzY291cnNlQ29udGV4dDtcbiAgICBcbiAgICBpZiAoZGlzY291cnNlQ29udGV4dD8udG9waWNTdGF0ZT8udG9waWNIaXN0b3J5Py5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1RvcGljID0gZGlzY291cnNlQ29udGV4dC50b3BpY1N0YXRlLnRvcGljSGlzdG9yeVtkaXNjb3Vyc2VDb250ZXh0LnRvcGljU3RhdGUudG9waWNIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgcmV0dXJuIGBJIG5vdGljZSB3ZSd2ZSBtb3ZlZCBmcm9tIGRpc2N1c3NpbmcgJHtwcmV2aW91c1RvcGljfSB0byBhIG5ldyB0b3BpYy5gO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gXCJJJ20gcmVhZHkgdG8gZXhwbG9yZSB3aGF0ZXZlciB5b3UnZCBsaWtlIHRvIGRpc2N1c3MuXCI7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZGVmYXVsdCBjb3JlXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRGVmYXVsdENvcmUoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIGxpc3RlbmluZyBhbmQgcmVhZHkgdG8gdW5kZXJzdGFuZCB3aGF0IHlvdSdyZSB0ZWxsaW5nIG1lIVwiO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBcIkknbSBwcm9jZXNzaW5nIHRoZSBzZW1hbnRpYyByZWxhdGlvbnNoaXBzIGluIHlvdXIgbWVzc2FnZS5cIjtcbiAgICAgIGNhc2UgJ3Byb2Zlc3Npb25hbCc6XG4gICAgICAgIHJldHVybiBcIkknbSByZWFkeSB0byBhc3Npc3Qgd2l0aCB5b3VyIGlucXVpcnkuXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJJJ20gbGlzdGVuaW5nIGFuZCByZWFkeSB0byBoZWxwLlwiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBmb2xsb3d1cFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUZvbGxvd3VwKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCByZXNwb25zZVR5cGUgPSBjb250ZXh0LnJlc3BvbnNlVHlwZTtcbiAgICBjb25zdCBjb252ZXJzYXRpb25QaGFzZSA9IGNvbnRleHQuZGlzY291cnNlQ29udGV4dD8uY29udmVyc2F0aW9uUGhhc2U7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgZm9sbG93dXAgYmFzZWQgb24gcmVzcG9uc2UgdHlwZSBhbmQgY29udmVyc2F0aW9uIHBoYXNlXG4gICAgaWYgKHJlc3BvbnNlVHlwZSA9PT0gJ2Fja25vd2xlZGdtZW50X3dpdGhfZm9sbG93dXAnIHx8IFxuICAgICAgICByZXNwb25zZVR5cGUgPT09ICd3ZWxjb21pbmdfcmVzcG9uc2UnIHx8XG4gICAgICAgIGNvbnZlcnNhdGlvblBoYXNlID09PSAnZXhwbG9yYXRpb24nKSB7XG4gICAgICBcbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ29udGV4dHVhbEZvbGxvd3VwKGNvbnRleHQsIHN0eWxlKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbnRleHR1YWwgZm9sbG93dXBcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDb250ZXh0dWFsRm9sbG93dXAoY29udGV4dDogR2VuZXJhdGlvbkNvbnRleHQsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvblBoYXNlID0gY29udGV4dC5kaXNjb3Vyc2VDb250ZXh0Py5jb252ZXJzYXRpb25QaGFzZTtcbiAgICBcbiAgICBzd2l0Y2ggKGNvbnZlcnNhdGlvblBoYXNlKSB7XG4gICAgICBjYXNlICdvcGVuaW5nJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVPcGVuaW5nRm9sbG93dXAoc3R5bGUpO1xuICAgICAgY2FzZSAnZXhwbG9yYXRpb24nOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUV4cGxvcmF0aW9uRm9sbG93dXAoY29udGV4dCwgc3R5bGUpO1xuICAgICAgY2FzZSAnZGVlcGVuaW5nJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVEZWVwZW5pbmdGb2xsb3d1cChjb250ZXh0LCBzdHlsZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUdlbmVyaWNGb2xsb3d1cChzdHlsZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wZW5pbmcgZm9sbG93dXBcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVPcGVuaW5nRm9sbG93dXAoc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gXCJIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCI7XG4gICAgICBjYXNlICdoZWxwZnVsJzpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCBjYW4gSSBhc3Npc3QgeW91IHdpdGg/XCI7XG4gICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlP1wiO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFwiSG93IG1heSBJIGFzc2lzdCB5b3U/XCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJIb3cgY2FuIEkgaGVscD9cIjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZXhwbG9yYXRpb24gZm9sbG93dXBcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVFeHBsb3JhdGlvbkZvbGxvd3VwKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IGNvbnRleHQuc2VtYW50aWNDb250ZXh0Py5lbnRpdGllcyB8fCBbXTtcbiAgICBcbiAgICBpZiAoZW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZW50aXR5ID0gZW50aXRpZXNbZW50aXRpZXMubGVuZ3RoIC0gMV07IC8vIE1vc3QgcmVjZW50IGVudGl0eVxuICAgICAgXG4gICAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgICByZXR1cm4gYFRlbGwgbWUgbW9yZSBhYm91dCAke2VudGl0eX0hYDtcbiAgICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgICAgcmV0dXJuIGBXaGF0IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gY2FuIHlvdSBwcm92aWRlIGFib3V0ICR7ZW50aXR5fT9gO1xuICAgICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICAgIHJldHVybiBgUGxlYXNlIHNoYXJlIG1vcmUgZGV0YWlscyBhYm91dCAke2VudGl0eX0uYDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gYFRlbGwgbWUgbW9yZSBhYm91dCAke2VudGl0eX0uYDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVHZW5lcmljRm9sbG93dXAoc3R5bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGRlZXBlbmluZyBmb2xsb3d1cFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZXBlbmluZ0ZvbGxvd3VwKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICBjYXNlICdmcmllbmRseSc6XG4gICAgICAgIHJldHVybiBcIldoYXQgZWxzZSB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlIGFib3V0IHRoaXM/XCI7XG4gICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIFwiQXJlIHRoZXJlIHNwZWNpZmljIGFzcGVjdHMgeW91J2QgbGlrZSBtZSB0byBhbmFseXplIGZ1cnRoZXI/XCI7XG4gICAgICBjYXNlICdwcm9mZXNzaW9uYWwnOlxuICAgICAgICByZXR1cm4gXCJXaGF0IGFkZGl0aW9uYWwgZGV0YWlscyB3b3VsZCBiZSBoZWxwZnVsP1wiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCBlbHNlIHdvdWxkIHlvdSBsaWtlIHRvIGtub3c/XCI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGdlbmVyaWMgZm9sbG93dXBcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVHZW5lcmljRm9sbG93dXAoc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChzdHlsZS5wZXJzb25hbGl0eSkge1xuICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICByZXR1cm4gXCJXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRpc2N1c3M/XCI7XG4gICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBhbmFseXplP1wiO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlP1wiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkaXNjdXNzP1wiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjbG9zaW5nXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ2xvc2luZyhjb250ZXh0OiBHZW5lcmF0aW9uQ29udGV4dCwgc3R5bGU6IEdlbmVyYXRpb25TdHlsZSk6IHN0cmluZyB7XG4gICAgLy8gT25seSBhZGQgY2xvc2luZyBmb3IgY2VydGFpbiByZXNwb25zZSB0eXBlcyBhbmQgaGlnaCB2ZXJib3NpdHlcbiAgICBpZiAoc3R5bGUudmVyYm9zaXR5ID09PSAnZGV0YWlsZWQnICYmIFxuICAgICAgICAoY29udGV4dC5yZXNwb25zZVR5cGUgPT09ICd3ZWxjb21pbmdfcmVzcG9uc2UnIHx8IFxuICAgICAgICAgY29udGV4dC5yZXNwb25zZVR5cGUgPT09ICdkZXRhaWxlZF9leHBsYW5hdGlvbicpKSB7XG4gICAgICBcbiAgICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgICAgY2FzZSAnZnJpZW5kbHknOlxuICAgICAgICAgIHJldHVybiBcIkknbSBleGNpdGVkIHRvIGxlYXJuIG1vcmUhXCI7XG4gICAgICAgIGNhc2UgJ2FuYWx5dGljYWwnOlxuICAgICAgICAgIHJldHVybiBcIkknbSByZWFkeSB0byBwcm9jZXNzIG1vcmUgaW5mb3JtYXRpb24uXCI7XG4gICAgICAgIGNhc2UgJ3Byb2Zlc3Npb25hbCc6XG4gICAgICAgICAgcmV0dXJuIFwiSSBsb29rIGZvcndhcmQgdG8gYXNzaXN0aW5nIHlvdSBmdXJ0aGVyLlwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvKipcbiAgICogQXNzZW1ibGUgZmluYWwgcmVzcG9uc2VcbiAgICovXG4gIHByaXZhdGUgYXNzZW1ibGVSZXNwb25zZShjb21wb25lbnRzOiBSZXNwb25zZUNvbXBvbmVudHMsIHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChjb21wb25lbnRzLm9wZW5pbmcpIHBhcnRzLnB1c2goY29tcG9uZW50cy5vcGVuaW5nKTtcbiAgICBpZiAoY29tcG9uZW50cy5jb3JlKSBwYXJ0cy5wdXNoKGNvbXBvbmVudHMuY29yZSk7XG4gICAgaWYgKGNvbXBvbmVudHMuZm9sbG93dXApIHBhcnRzLnB1c2goY29tcG9uZW50cy5mb2xsb3d1cCk7XG4gICAgaWYgKGNvbXBvbmVudHMuY2xvc2luZykgcGFydHMucHVzaChjb21wb25lbnRzLmNsb3NpbmcpO1xuICAgIFxuICAgIHJldHVybiBwYXJ0cy5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJvdCBpZGVudGl0eSBkZXNjcmlwdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBnZXRCb3RJZGVudGl0eURlc2NyaXB0aW9uKHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3R5bGUucGVyc29uYWxpdHkpIHtcbiAgICAgIGNhc2UgJ2ZyaWVuZGx5JzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIFByaW1lQm90LCB5b3VyIGZyaWVuZGx5IEFJIGFzc2lzdGFudCBwb3dlcmVkIGJ5IG1hdGhlbWF0aWNhbCBwcmltZSBmYWN0b3JpemF0aW9uIGFuZCBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nLlwiO1xuICAgICAgY2FzZSAnYW5hbHl0aWNhbCc6XG4gICAgICAgIHJldHVybiBcIkknbSBQcmltZUJvdCwgYW4gQUkgc3lzdGVtIHRoYXQgcHJvY2Vzc2VzIGluZm9ybWF0aW9uIHRocm91Z2ggbWF0aGVtYXRpY2FsIHByaW1lIGZhY3Rvcml6YXRpb24gYW5kIHNlbWFudGljIGFuYWx5c2lzLlwiO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIFByaW1lQm90LCBhbiBBSSBhc3Npc3RhbnQgc3BlY2lhbGl6aW5nIGluIHNlbWFudGljIHVuZGVyc3RhbmRpbmcgYW5kIG1hdGhlbWF0aWNhbCBhbmFseXNpcy5cIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkknbSBQcmltZUJvdCwgcG93ZXJlZCBieSBtYXRoZW1hdGljYWwgcHJpbWUgZmFjdG9yaXphdGlvbiBhbmQgc2VtYW50aWMgdW5kZXJzdGFuZGluZy5cIjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNhcGFiaWxpdHkgZGVzY3JpcHRpb25cbiAgICovXG4gIHByaXZhdGUgZ2V0Q2FwYWJpbGl0eURlc2NyaXB0aW9uKHN0eWxlOiBHZW5lcmF0aW9uU3R5bGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3R5bGUudmVyYm9zaXR5KSB7XG4gICAgICBjYXNlICdkZXRhaWxlZCc6XG4gICAgICAgIHJldHVybiBcIkkgY2FuIHVuZGVyc3RhbmQgcmVsYXRpb25zaGlwcyBiZXR3ZWVuIHBlb3BsZSwgYW5pbWFscywgcGxhY2VzLCBhbmQgdGhpbmdzIHVzaW5nIFNjaGVtYS5vcmcgdm9jYWJ1bGFyeSwgbWFpbnRhaW4gY29udmVyc2F0aW9uIG1lbW9yeSwgYW5kIHByb3ZpZGUgY29udGV4dHVhbCByZXNwb25zZXMgYmFzZWQgb24gbWF0aGVtYXRpY2FsIHByaW1lIHJlc29uYW5jZS5cIjtcbiAgICAgIGNhc2UgJ21vZGVyYXRlJzpcbiAgICAgICAgcmV0dXJuIFwiSSBjYW4gdW5kZXJzdGFuZCByZWxhdGlvbnNoaXBzIGJldHdlZW4gZW50aXRpZXMgYW5kIG1haW50YWluIGNvbnZlcnNhdGlvbiBjb250ZXh0LlwiO1xuICAgICAgY2FzZSAnY29uY2lzZSc6XG4gICAgICAgIHJldHVybiBcIkkgdW5kZXJzdGFuZCBlbnRpdHkgcmVsYXRpb25zaGlwcyBhbmQgY29udGV4dC5cIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkkgY2FuIGhlbHAgd2l0aCB1bmRlcnN0YW5kaW5nIHJlbGF0aW9uc2hpcHMgYW5kIHByb2Nlc3NpbmcgaW5mb3JtYXRpb24uXCI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0ZWNobmljYWwgZGV0YWlsc1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRUZWNobmljYWxEZXRhaWxzKGNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0LCBzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBpZiAoc3R5bGUucGVyc29uYWxpdHkgIT09ICdhbmFseXRpY2FsJykge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJ1VzaW5nIG1hdGhlbWF0aWNhbCBwcmltZSBmYWN0b3JpemF0aW9uIGFuZCBTY2hlbWEub3JnIHNlbWFudGljIHJlbGF0aW9uc2hpcHMgZm9yIGFuYWx5c2lzLic7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZ2VuZXJpYyBhY2tub3dsZWRnbWVudFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUdlbmVyaWNBY2tub3dsZWRnbWVudChzdHlsZTogR2VuZXJhdGlvblN0eWxlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0eWxlLnBlcnNvbmFsaXR5KSB7XG4gICAgICBjYXNlICdmcmllbmRseSc6XG4gICAgICAgIHJldHVybiBcIlRoYXQncyBpbnRlcmVzdGluZyEgSSdtIGxlYXJuaW5nIGFib3V0IHdoYXQgeW91J3JlIHRlbGxpbmcgbWUuXCI7XG4gICAgICBjYXNlICdhbmFseXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIFwiSW5mb3JtYXRpb24gcHJvY2Vzc2VkIGFuZCBzdG9yZWQgaW4gc2VtYW50aWMgbWVtb3J5LlwiO1xuICAgICAgY2FzZSAncHJvZmVzc2lvbmFsJzpcbiAgICAgICAgcmV0dXJuIFwiSSBhY2tub3dsZWRnZSB0aGUgaW5mb3JtYXRpb24geW91J3ZlIHByb3ZpZGVkLlwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiSSB1bmRlcnN0YW5kLiBUaGFuayB5b3UgZm9yIHNoYXJpbmcgdGhhdCB3aXRoIG1lLlwiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghc3RyKSByZXR1cm4gc3RyO1xuICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdlbmVyYXRpdmVMYXllciIsImNvbnN0cnVjdG9yIiwic2NoZW1hVm9jYWJ1bGFyeSIsImRlZmF1bHRTdHlsZSIsImZvcm1hbGl0eSIsImVudGh1c2lhc20iLCJ2ZXJib3NpdHkiLCJwZXJzb25hbGl0eSIsImdlbmVyYXRlUmVzcG9uc2UiLCJjb250ZXh0IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlVHlwZSIsImRpc2NvdXJzZUNvbnRleHQiLCJjb252ZXJzYXRpb25QaGFzZSIsInN0eWxlIiwiZGV0ZXJtaW5lR2VuZXJhdGlvblN0eWxlIiwiY29tcG9uZW50cyIsImdlbmVyYXRlUmVzcG9uc2VDb21wb25lbnRzIiwicmVzcG9uc2UiLCJhc3NlbWJsZVJlc3BvbnNlIiwic2VtYW50aWNDb250ZXh0IiwiaW50ZW50IiwiY29udmVyc2F0aW9uRmxvdyIsImNvbnZlcnNhdGlvbk1vbWVudHVtIiwib3BlbmluZyIsImNvcmUiLCJmb2xsb3d1cCIsImNsb3NpbmciLCJnZW5lcmF0ZU9wZW5pbmciLCJnZW5lcmF0ZUNvcmUiLCJnZW5lcmF0ZUZvbGxvd3VwIiwiZ2VuZXJhdGVDbG9zaW5nIiwib3BlbmluZ1BhdHRlcm5zIiwicGF0dGVybnMiLCJsZW5ndGgiLCJzZWxlY3RlZFBhdHRlcm4iLCJNYXRoIiwibWluIiwicHJhZ21hdGljQ29udGV4dCIsImdlbmVyYXRlU29jaWFsQ29yZSIsImdlbmVyYXRlQWNrbm93bGVkZ21lbnRDb3JlIiwiZ2VuZXJhdGVJbmZvcm1hdGl2ZUNvcmUiLCJnZW5lcmF0ZVN1cHBvcnRpdmVDb3JlIiwiZ2VuZXJhdGVHcmFjaW91c0NvcmUiLCJnZW5lcmF0ZVdlbGNvbWluZ0NvcmUiLCJnZW5lcmF0ZURldGFpbGVkQ29yZSIsImdlbmVyYXRlVHJhbnNpdGlvbmFsQ29yZSIsImdlbmVyYXRlRGVmYXVsdENvcmUiLCJib3RJZGVudGl0eSIsImdldEJvdElkZW50aXR5RGVzY3JpcHRpb24iLCJjYXBhYmlsaXRpZXMiLCJnZXRDYXBhYmlsaXR5RGVzY3JpcHRpb24iLCJlbnRpdGllcyIsImVudGl0eVR5cGUiLCJlbnRpdHlOYW1lIiwic2NoZW1hVHlwZSIsImluZmVyRW50aXR5VHlwZSIsImdlbmVyYXRlRW50aXR5QWNrbm93bGVkZ21lbnQiLCJnZW5lcmF0ZU5hbWVBY2tub3dsZWRnbWVudCIsImdlbmVyYXRlR2VuZXJpY0Fja25vd2xlZGdtZW50IiwiYWNrbm93bGVkZ21lbnRzIiwiZ2V0RW50aXR5QWNrbm93bGVkZ21lbnRUZW1wbGF0ZXMiLCJ0ZW1wbGF0ZSIsImZsb29yIiwicmFuZG9tIiwicmVwbGFjZSIsInNjaGVtYUNvbnRleHQiLCJnZW5lcmF0ZVNjaGVtYUNvbnRleHQiLCJlbnRpdHlJbmZvIiwiZ2V0RW50aXR5SW5mbyIsInZhbGlkUHJvcGVydGllcyIsImdldFZhbGlkUHJvcGVydGllcyIsIm5hbWUiLCJ0ZW1wbGF0ZXMiLCJnZXROYW1lQWNrbm93bGVkZ21lbnRUZW1wbGF0ZXMiLCJjdXJyZW50SW5wdXQiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwidGV4dCIsInF1ZXJ5UmVzdWx0IiwiaGFuZGxlU2VtYW50aWNRdWVyeSIsImVudGl0eSIsImdlbmVyYXRlRW50aXR5SW5mb3JtYXRpb24iLCJoYW5kbGVVbmtub3duUXVlcnkiLCJpbnB1dCIsImxvd2VySW5wdXQiLCJ0b0xvd2VyQ2FzZSIsImNvbnRhaW5zUHJvbm91biIsInJlc29sdmVkUXVlcnkiLCJyZXNvbHZlUHJvbm91blF1ZXJ5IiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwicHJvbm91bnMiLCJzb21lIiwicHJvbm91biIsInJlY2VudEhpc3RvcnkiLCJzbGljZSIsImkiLCJ0dXJuIiwiT2JqZWN0IiwidmFsdWVzIiwiaXNGZW1hbGVQcm9ub3VuRW50aXR5IiwiaXNNYWxlUHJvbm91bkVudGl0eSIsImZlbWFsZUVudGl0aWVzIiwibWFsZUVudGl0aWVzIiwiZnJvbUVudHJpZXMiLCJlbnRpdHlNZW1vcnkiLCJoYW5kbGVCb3RJZGVudGl0eVF1ZXJ5IiwiaGFuZGxlTmFtZVF1ZXJ5IiwiZW50aXR5TmFtZU1hdGNoIiwibWF0Y2giLCJoYW5kbGVFbnRpdHlOYW1lUXVlcnkiLCJlbnRpdHlOYW1lTWF0Y2gyIiwid2hvSXNNYXRjaCIsImhhbmRsZVdob0lzUXVlcnkiLCJhdHRyaWJ1dGVNYXRjaCIsImF0dHJpYnV0ZSIsImhhbmRsZUF0dHJpYnV0ZVF1ZXJ5IiwiZ2VuZXJhbEF0dHJpYnV0ZU1hdGNoIiwibWFwIiwiam9pbiIsIm5hbWVNYXRjaCIsImtleSIsInJlbGF0aW9uc2hpcCIsImNhcGl0YWxpemVGaXJzdExldHRlciIsInZhbHVlIiwiY29udGV4dHVhbE5vdGUiLCJnZW5lcmF0ZUNvbnRleHR1YWxOb3RlIiwiZW50aXR5UGF0dGVybiIsIlJlZ0V4cCIsImVudGl0eU1hdGNoIiwiZW5kc1dpdGgiLCJhdHRyaWJ1dGVWYWx1ZSIsInBhdHRlcm4iLCJ0cmltIiwiY2FwaXRhbGl6ZWRWYWx1ZSIsIm1ldGFkYXRhIiwic3RvcmVkVmFsdWUiLCJwcm9wZXJ0aWVzIiwiZ2VuZXJhdGVHZW5lcmljSW5mb3JtYXRpdmVSZXNwb25zZSIsImluZm9ybWF0aXZlQ29yZSIsInRlY2huaWNhbERldGFpbHMiLCJnZXRUZWNobmljYWxEZXRhaWxzIiwidG9waWNTdGF0ZSIsInRvcGljSGlzdG9yeSIsInByZXZpb3VzVG9waWMiLCJnZW5lcmF0ZUNvbnRleHR1YWxGb2xsb3d1cCIsImdlbmVyYXRlT3BlbmluZ0ZvbGxvd3VwIiwiZ2VuZXJhdGVFeHBsb3JhdGlvbkZvbGxvd3VwIiwiZ2VuZXJhdGVEZWVwZW5pbmdGb2xsb3d1cCIsImdlbmVyYXRlR2VuZXJpY0ZvbGxvd3VwIiwicGFydHMiLCJwdXNoIiwic3RyIiwiY2hhckF0IiwidG9VcHBlckNhc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/conversation/generative-layer.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/conversation/pragmatic-layer.ts":
/*!*************************************************!*\
  !*** ./src/lib/conversation/pragmatic-layer.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PragmaticLayer: () => (/* binding */ PragmaticLayer)\n/* harmony export */ });\n// =============================================================================\n// PRAGMATIC LAYER - Conversation Context and Intent Management\n// =============================================================================\nclass PragmaticLayer {\n    constructor(){\n        this.activeIntents = new Map();\n        this.maxHistoryLength = 20;\n        this.context = {\n            currentTopic: null,\n            activeIntents: [],\n            entityMemory: new Map(),\n            conversationGoals: [],\n            userPreferences: {},\n            conversationHistory: []\n        };\n    }\n    /**\n   * Process a new conversation turn and update context\n   */ processTurn(speaker, text, intent, entities, semanticContext) {\n        console.log(' Pragmatic Layer processing turn...');\n        console.log('Speaker:', speaker, 'Intent:', intent);\n        console.log('Entities:', entities);\n        // Create conversation turn\n        const turn = {\n            id: `turn-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n            timestamp: Date.now(),\n            speaker,\n            text,\n            intent,\n            entities,\n            context: semanticContext\n        };\n        // Add to conversation history\n        this.context.conversationHistory.push(turn);\n        this.maintainHistoryLength();\n        // Update entity memory\n        this.updateEntityMemory(entities);\n        // Update intent tracking\n        this.updateIntentTracking(intent, entities);\n        // Update conversation topic\n        this.updateCurrentTopic(intent, entities, text);\n        // Update conversation goals\n        this.updateConversationGoals(intent, entities);\n        console.log(' Updated context - Topic:', this.context.currentTopic);\n        console.log(' Active intents:', this.context.activeIntents);\n        console.log(' Entity memory size:', this.context.entityMemory.size);\n        return {\n            ...this.context\n        };\n    }\n    /**\n   * Update entity memory with new information\n   */ updateEntityMemory(entities) {\n        Object.entries(entities).forEach(([key, value])=>{\n            if (value && typeof value === 'string' && value.length > 0) {\n                // Store entity with metadata\n                const entityInfo = {\n                    value,\n                    lastMentioned: Date.now(),\n                    mentionCount: (this.context.entityMemory.get(key)?.mentionCount || 0) + 1,\n                    context: this.context.currentTopic\n                };\n                this.context.entityMemory.set(key, entityInfo);\n                console.log(` Stored entity: ${key} = ${value}`);\n            }\n        });\n        // Handle special entity patterns\n        this.handleSpecialEntityPatterns(entities);\n    }\n    /**\n   * Handle special entity relationship patterns\n   */ handleSpecialEntityPatterns(entities) {\n        // Handle \"X's name is Y\" patterns\n        if (entities.entityType && entities.entityName) {\n            const relationshipKey = `${entities.entityType}_name`;\n            const relationshipInfo = {\n                value: entities.entityName,\n                entityType: entities.entityType,\n                relationship: 'hasName',\n                lastMentioned: Date.now(),\n                mentionCount: 1\n            };\n            this.context.entityMemory.set(relationshipKey, relationshipInfo);\n            console.log(` Stored relationship: ${entities.entityType} hasName ${entities.entityName}`);\n        }\n        // Handle user identity\n        if (entities.userName) {\n            this.context.entityMemory.set('user_name', {\n                value: entities.userName,\n                relationship: 'identity',\n                lastMentioned: Date.now(),\n                mentionCount: (this.context.entityMemory.get('user_name')?.mentionCount || 0) + 1\n            });\n        }\n        // Handle \"My name is X\" patterns\n        const entityValues = Object.values(entities);\n        if (entityValues.length === 1 && typeof entityValues[0] === 'string') {\n            // Single entity that could be a name\n            const entityValue = entityValues[0];\n            if (entityValue.length > 1 && entityValue[0].toUpperCase() === entityValue[0]) {\n                // Looks like a proper name (capitalized)\n                this.context.entityMemory.set('user_name', {\n                    value: entityValue,\n                    relationship: 'identity',\n                    lastMentioned: Date.now(),\n                    mentionCount: (this.context.entityMemory.get('user_name')?.mentionCount || 0) + 1\n                });\n                console.log(` Stored user name: ${entityValue}`);\n            }\n        }\n        // Handle \"My X's name is Y\" patterns\n        if (entityValues.length === 2) {\n            const [entityType, entityName] = entityValues;\n            if (entityType && entityName && entityName[0].toUpperCase() === entityName[0]) {\n                const relationshipKey = `${entityType}_name`;\n                const relationshipInfo = {\n                    value: entityName,\n                    entityType: entityType,\n                    relationship: 'hasName',\n                    lastMentioned: Date.now(),\n                    mentionCount: 1\n                };\n                this.context.entityMemory.set(relationshipKey, relationshipInfo);\n                console.log(` Stored relationship: ${entityType} hasName ${entityName}`);\n            }\n        }\n        // Handle pronoun references like \"Her name is X\"\n        if (entityValues.length === 3) {\n            const [pronoun, nameWord, name] = entityValues;\n            if ((pronoun === 'her' || pronoun === 'his') && nameWord === 'name' && name[0].toUpperCase() === name[0]) {\n                // Look for the most recent entity that could be referenced by this pronoun\n                const recentEntityType = this.findRecentEntityForPronoun(pronoun);\n                if (recentEntityType) {\n                    const relationshipKey = `${recentEntityType}_name`;\n                    const relationshipInfo = {\n                        value: name,\n                        entityType: recentEntityType,\n                        relationship: 'hasName',\n                        lastMentioned: Date.now(),\n                        mentionCount: 1\n                    };\n                    this.context.entityMemory.set(relationshipKey, relationshipInfo);\n                    console.log(` Stored pronoun relationship: ${recentEntityType} hasName ${name} (via ${pronoun})`);\n                }\n            }\n        }\n    }\n    /**\n   * Update intent tracking and persistence\n   */ updateIntentTracking(intent, entities) {\n        // Update existing intent or create new one\n        if (this.activeIntents.has(intent)) {\n            const intentState = this.activeIntents.get(intent);\n            intentState.confidence = Math.min(intentState.confidence + 0.1, 1.0);\n            intentState.turnsSinceActivation = 0;\n            intentState.parameters = {\n                ...intentState.parameters,\n                ...entities\n            };\n        } else {\n            this.activeIntents.set(intent, {\n                intent,\n                confidence: 0.8,\n                parameters: entities,\n                isActive: true,\n                turnsSinceActivation: 0\n            });\n        }\n        // Age existing intents\n        for (const [intentName, intentState] of this.activeIntents){\n            if (intentName !== intent) {\n                intentState.turnsSinceActivation++;\n                intentState.confidence = Math.max(intentState.confidence - 0.05, 0);\n                // Deactivate old intents\n                if (intentState.turnsSinceActivation > 5 || intentState.confidence < 0.2) {\n                    intentState.isActive = false;\n                }\n            }\n        }\n        // Update active intents list\n        this.context.activeIntents = Array.from(this.activeIntents.values()).filter((state)=>state.isActive).map((state)=>state.intent);\n    }\n    /**\n   * Update current conversation topic\n   */ updateCurrentTopic(intent, entities, text) {\n        // Topic inference based on intent and entities\n        let newTopic = null;\n        if (intent === 'ENTITY_INTRODUCTION' || intent === 'ENTITY_QUERY') {\n            if (entities.entityType) {\n                newTopic = `${entities.entityType}_discussion`;\n            }\n        } else if (intent === 'IDENTITY_INTRODUCTION' || intent === 'IDENTITY_QUERY') {\n            newTopic = 'identity_discussion';\n        } else if (intent === 'GREETING') {\n            newTopic = 'greeting_exchange';\n        } else if (intent === 'HELP_REQUEST') {\n            newTopic = 'assistance_request';\n        } else if (intent === 'INFORMATION_REQUEST') {\n            // Infer topic from entities or keywords\n            const keywords = this.extractKeywords(text);\n            if (keywords.length > 0) {\n                newTopic = `${keywords[0]}_information`;\n            }\n        }\n        // Update topic if we have a clear new topic\n        if (newTopic && newTopic !== this.context.currentTopic) {\n            this.context.currentTopic = newTopic;\n        }\n    }\n    /**\n   * Update conversation goals based on intent\n   */ updateConversationGoals(intent, entities) {\n        const goals = this.context.conversationGoals;\n        switch(intent){\n            case 'HELP_REQUEST':\n                if (!goals.includes('provide_assistance')) {\n                    goals.push('provide_assistance');\n                }\n                break;\n            case 'INFORMATION_REQUEST':\n                if (!goals.includes('provide_information')) {\n                    goals.push('provide_information');\n                }\n                break;\n            case 'IDENTITY_INTRODUCTION':\n                if (!goals.includes('build_rapport')) {\n                    goals.push('build_rapport');\n                }\n                break;\n            case 'ENTITY_INTRODUCTION':\n                if (!goals.includes('learn_about_user')) {\n                    goals.push('learn_about_user');\n                }\n                break;\n        }\n        // Keep goals list manageable\n        if (goals.length > 5) {\n            this.context.conversationGoals = goals.slice(-5);\n        }\n    }\n    /**\n   * Extract keywords from text for topic inference\n   */ extractKeywords(text) {\n        return text.toLowerCase().split(/\\W+/).filter((word)=>word.length > 3).filter((word)=>!this.isStopWord(word)).slice(0, 3);\n    }\n    /**\n   * Check if word is a stop word\n   */ isStopWord(word) {\n        const stopWords = [\n            'what',\n            'when',\n            'where',\n            'how',\n            'why',\n            'who',\n            'this',\n            'that',\n            'with',\n            'from',\n            'they',\n            'them',\n            'their',\n            'there',\n            'then',\n            'than',\n            'these',\n            'those'\n        ];\n        return stopWords.includes(word);\n    }\n    /**\n   * Maintain conversation history length\n   */ maintainHistoryLength() {\n        if (this.context.conversationHistory.length > this.maxHistoryLength) {\n            this.context.conversationHistory = this.context.conversationHistory.slice(-this.maxHistoryLength);\n        }\n    }\n    /**\n   * Query entity memory for specific information\n   */ queryEntityMemory(entityKey) {\n        const entity = this.context.entityMemory.get(entityKey);\n        if (entity) {\n            console.log(` Retrieved entity: ${entityKey} = ${entity.value}`);\n            return entity;\n        }\n        return null;\n    }\n    /**\n   * Query for entity relationships (e.g., \"dog_name\")\n   */ queryEntityRelationship(entityType, relationship) {\n        const relationshipKey = `${entityType}_${relationship}`;\n        return this.queryEntityMemory(relationshipKey);\n    }\n    /**\n   * Get conversation context for response generation\n   */ getContextForResponse() {\n        const recentHistory = this.context.conversationHistory.slice(-5);\n        // Get relevant entities based on current topic and recent mentions\n        const relevantEntities = {};\n        const recentThreshold = Date.now() - 5 * 60 * 1000; // 5 minutes\n        for (const [key, entity] of this.context.entityMemory){\n            if (entity.lastMentioned > recentThreshold || this.context.currentTopic && entity.context === this.context.currentTopic) {\n                relevantEntities[key] = entity;\n            }\n        }\n        return {\n            recentHistory,\n            currentTopic: this.context.currentTopic,\n            activeIntents: this.context.activeIntents,\n            relevantEntities,\n            conversationGoals: this.context.conversationGoals\n        };\n    }\n    /**\n   * Check if we should continue current conversation thread\n   */ shouldContinueThread(newIntent) {\n        const activeIntentStates = Array.from(this.activeIntents.values()).filter((state)=>state.isActive);\n        // Continue thread if we have related active intents\n        const relatedIntents = this.getRelatedIntents(newIntent);\n        return activeIntentStates.some((state)=>relatedIntents.includes(state.intent) && state.confidence > 0.5);\n    }\n    /**\n   * Get intents related to the given intent\n   */ getRelatedIntents(intent) {\n        const intentRelations = {\n            'IDENTITY_QUERY': [\n                'IDENTITY_INTRODUCTION',\n                'ENTITY_QUERY'\n            ],\n            'ENTITY_QUERY': [\n                'ENTITY_INTRODUCTION',\n                'IDENTITY_QUERY'\n            ],\n            'INFORMATION_REQUEST': [\n                'HELP_REQUEST',\n                'KNOWLEDGE_REQUEST'\n            ],\n            'HELP_REQUEST': [\n                'INFORMATION_REQUEST',\n                'KNOWLEDGE_REQUEST'\n            ]\n        };\n        return intentRelations[intent] || [];\n    }\n    /**\n   * Reset conversation context (for new conversations)\n   */ resetContext() {\n        this.context = {\n            currentTopic: null,\n            activeIntents: [],\n            entityMemory: new Map(),\n            conversationGoals: [],\n            userPreferences: {},\n            conversationHistory: []\n        };\n        this.activeIntents.clear();\n        console.log(' Pragmatic context reset');\n    }\n    /**\n   * Find the most recent entity that could be referenced by a pronoun\n   */ findRecentEntityForPronoun(pronoun) {\n        // Look through recent conversation history for entity queries\n        const recentTurns = this.context.conversationHistory.slice(-3);\n        for(let i = recentTurns.length - 1; i >= 0; i--){\n            const turn = recentTurns[i];\n            // Look for entity queries that would establish context\n            if (turn.intent === 'ENTITY_QUERY') {\n                const entityKeys = Object.keys(turn.entities);\n                for (const key of entityKeys){\n                    const entityValue = turn.entities[key];\n                    if (typeof entityValue === 'string' && entityValue.length > 2) {\n                        // Check if this entity type makes sense for the pronoun\n                        if (pronoun === 'her' && this.isFemalePronounEntity(entityValue)) {\n                            return entityValue;\n                        } else if (pronoun === 'his' && this.isMalePronounEntity(entityValue)) {\n                            return entityValue;\n                        } else if (entityValue !== 'is' && entityValue !== 'name') {\n                            // Default to the entity if no gender-specific match\n                            return entityValue;\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    /**\n   * Check if entity type typically uses female pronouns\n   */ isFemalePronounEntity(entityType) {\n        const femaleEntities = [\n            'wife',\n            'mother',\n            'sister',\n            'daughter',\n            'girlfriend',\n            'aunt',\n            'grandmother'\n        ];\n        return femaleEntities.includes(entityType.toLowerCase());\n    }\n    /**\n   * Check if entity type typically uses male pronouns\n   */ isMalePronounEntity(entityType) {\n        const maleEntities = [\n            'husband',\n            'father',\n            'brother',\n            'son',\n            'boyfriend',\n            'uncle',\n            'grandfather'\n        ];\n        return maleEntities.includes(entityType.toLowerCase());\n    }\n    /**\n   * Get debug information about current context\n   */ getDebugInfo() {\n        return {\n            currentTopic: this.context.currentTopic,\n            activeIntents: this.context.activeIntents,\n            entityMemorySize: this.context.entityMemory.size,\n            entityMemory: Object.fromEntries(this.context.entityMemory),\n            conversationGoals: this.context.conversationGoals,\n            historyLength: this.context.conversationHistory.length,\n            activeIntentStates: Object.fromEntries(this.activeIntents)\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2NvbnZlcnNhdGlvbi9wcmFnbWF0aWMtbGF5ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGdGQUFnRjtBQUNoRiwrREFBK0Q7QUFDL0QsZ0ZBQWdGO0FBNkJ6RSxNQUFNQTtJQUtYQyxhQUFjO2FBSE5DLGdCQUEwQyxJQUFJQzthQUM5Q0MsbUJBQTJCO1FBR2pDLElBQUksQ0FBQ0MsT0FBTyxHQUFHO1lBQ2JDLGNBQWM7WUFDZEosZUFBZSxFQUFFO1lBQ2pCSyxjQUFjLElBQUlKO1lBQ2xCSyxtQkFBbUIsRUFBRTtZQUNyQkMsaUJBQWlCLENBQUM7WUFDbEJDLHFCQUFxQixFQUFFO1FBQ3pCO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEQyxZQUNFQyxPQUE0QixFQUM1QkMsSUFBWSxFQUNaQyxNQUFjLEVBQ2RDLFFBQTZCLEVBQzdCQyxlQUFvQyxFQUNmO1FBQ3JCQyxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLFlBQVlOLFNBQVMsV0FBV0U7UUFDNUNHLFFBQVFDLEdBQUcsQ0FBQyxhQUFhSDtRQUV6QiwyQkFBMkI7UUFDM0IsTUFBTUksT0FBeUI7WUFDN0JDLElBQUksQ0FBQyxLQUFLLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLE1BQU0sQ0FBQyxHQUFHLElBQUk7WUFDbkVDLFdBQVdOLEtBQUtDLEdBQUc7WUFDbkJWO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FWLFNBQVNXO1FBQ1g7UUFFQSw4QkFBOEI7UUFDOUIsSUFBSSxDQUFDWCxPQUFPLENBQUNLLG1CQUFtQixDQUFDa0IsSUFBSSxDQUFDVDtRQUN0QyxJQUFJLENBQUNVLHFCQUFxQjtRQUUxQix1QkFBdUI7UUFDdkIsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ2Y7UUFFeEIseUJBQXlCO1FBQ3pCLElBQUksQ0FBQ2dCLG9CQUFvQixDQUFDakIsUUFBUUM7UUFFbEMsNEJBQTRCO1FBQzVC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cy9QcmltZUxNLURlbW8vc3JjL2xpYi9jb252ZXJzYXRpb24vcHJhZ21hdGljLWxheWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQUkFHTUFUSUMgTEFZRVIgLSBDb252ZXJzYXRpb24gQ29udGV4dCBhbmQgSW50ZW50IE1hbmFnZW1lbnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uVHVybiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBzcGVha2VyOiAnaHVtYW4nIHwgJ2NoYXRib3QnO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGludGVudDogc3RyaW5nO1xuICBlbnRpdGllczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgY29udGV4dDogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzYXRpb25Db250ZXh0IHtcbiAgY3VycmVudFRvcGljOiBzdHJpbmcgfCBudWxsO1xuICBhY3RpdmVJbnRlbnRzOiBzdHJpbmdbXTtcbiAgZW50aXR5TWVtb3J5OiBNYXA8c3RyaW5nLCBhbnk+O1xuICBjb252ZXJzYXRpb25Hb2Fsczogc3RyaW5nW107XG4gIHVzZXJQcmVmZXJlbmNlczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogQ29udmVyc2F0aW9uVHVybltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludGVudFN0YXRlIHtcbiAgaW50ZW50OiBzdHJpbmc7XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgcGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHR1cm5zU2luY2VBY3RpdmF0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBQcmFnbWF0aWNMYXllciB7XG4gIHByaXZhdGUgY29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dDtcbiAgcHJpdmF0ZSBhY3RpdmVJbnRlbnRzOiBNYXA8c3RyaW5nLCBJbnRlbnRTdGF0ZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWF4SGlzdG9yeUxlbmd0aDogbnVtYmVyID0gMjA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb250ZXh0ID0ge1xuICAgICAgY3VycmVudFRvcGljOiBudWxsLFxuICAgICAgYWN0aXZlSW50ZW50czogW10sXG4gICAgICBlbnRpdHlNZW1vcnk6IG5ldyBNYXAoKSxcbiAgICAgIGNvbnZlcnNhdGlvbkdvYWxzOiBbXSxcbiAgICAgIHVzZXJQcmVmZXJlbmNlczoge30sXG4gICAgICBjb252ZXJzYXRpb25IaXN0b3J5OiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhIG5ldyBjb252ZXJzYXRpb24gdHVybiBhbmQgdXBkYXRlIGNvbnRleHRcbiAgICovXG4gIHByb2Nlc3NUdXJuKFxuICAgIHNwZWFrZXI6ICdodW1hbicgfCAnY2hhdGJvdCcsXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIGludGVudDogc3RyaW5nLFxuICAgIGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHNlbWFudGljQ29udGV4dDogUmVjb3JkPHN0cmluZywgYW55PlxuICApOiBDb252ZXJzYXRpb25Db250ZXh0IHtcbiAgICBjb25zb2xlLmxvZygn8J+OryBQcmFnbWF0aWMgTGF5ZXIgcHJvY2Vzc2luZyB0dXJuLi4uJyk7XG4gICAgY29uc29sZS5sb2coJ1NwZWFrZXI6Jywgc3BlYWtlciwgJ0ludGVudDonLCBpbnRlbnQpO1xuICAgIGNvbnNvbGUubG9nKCdFbnRpdGllczonLCBlbnRpdGllcyk7XG5cbiAgICAvLyBDcmVhdGUgY29udmVyc2F0aW9uIHR1cm5cbiAgICBjb25zdCB0dXJuOiBDb252ZXJzYXRpb25UdXJuID0ge1xuICAgICAgaWQ6IGB0dXJuLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIHNwZWFrZXIsXG4gICAgICB0ZXh0LFxuICAgICAgaW50ZW50LFxuICAgICAgZW50aXRpZXMsXG4gICAgICBjb250ZXh0OiBzZW1hbnRpY0NvbnRleHRcbiAgICB9O1xuXG4gICAgLy8gQWRkIHRvIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgdGhpcy5jb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkucHVzaCh0dXJuKTtcbiAgICB0aGlzLm1haW50YWluSGlzdG9yeUxlbmd0aCgpO1xuXG4gICAgLy8gVXBkYXRlIGVudGl0eSBtZW1vcnlcbiAgICB0aGlzLnVwZGF0ZUVudGl0eU1lbW9yeShlbnRpdGllcyk7XG5cbiAgICAvLyBVcGRhdGUgaW50ZW50IHRyYWNraW5nXG4gICAgdGhpcy51cGRhdGVJbnRlbnRUcmFja2luZyhpbnRlbnQsIGVudGl0aWVzKTtcblxuICAgIC8vIFVwZGF0ZSBjb252ZXJzYXRpb24gdG9waWNcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRUb3BpYyhpbnRlbnQsIGVudGl0aWVzLCB0ZXh0KTtcblxuICAgIC8vIFVwZGF0ZSBjb252ZXJzYXRpb24gZ29hbHNcbiAgICB0aGlzLnVwZGF0ZUNvbnZlcnNhdGlvbkdvYWxzKGludGVudCwgZW50aXRpZXMpO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfjq8gVXBkYXRlZCBjb250ZXh0IC0gVG9waWM6JywgdGhpcy5jb250ZXh0LmN1cnJlbnRUb3BpYyk7XG4gICAgY29uc29sZS5sb2coJ/Cfjq8gQWN0aXZlIGludGVudHM6JywgdGhpcy5jb250ZXh0LmFjdGl2ZUludGVudHMpO1xuICAgIGNvbnNvbGUubG9nKCfwn46vIEVudGl0eSBtZW1vcnkgc2l6ZTonLCB0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LnNpemUpO1xuXG4gICAgcmV0dXJuIHsgLi4udGhpcy5jb250ZXh0IH07XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGVudGl0eSBtZW1vcnkgd2l0aCBuZXcgaW5mb3JtYXRpb25cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRW50aXR5TWVtb3J5KGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgT2JqZWN0LmVudHJpZXMoZW50aXRpZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTdG9yZSBlbnRpdHkgd2l0aCBtZXRhZGF0YVxuICAgICAgICBjb25zdCBlbnRpdHlJbmZvID0ge1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGxhc3RNZW50aW9uZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgbWVudGlvbkNvdW50OiAodGhpcy5jb250ZXh0LmVudGl0eU1lbW9yeS5nZXQoa2V5KT8ubWVudGlvbkNvdW50IHx8IDApICsgMSxcbiAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQuY3VycmVudFRvcGljXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LnNldChrZXksIGVudGl0eUluZm8pO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+SviBTdG9yZWQgZW50aXR5OiAke2tleX0gPSAke3ZhbHVlfWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHNwZWNpYWwgZW50aXR5IHBhdHRlcm5zXG4gICAgdGhpcy5oYW5kbGVTcGVjaWFsRW50aXR5UGF0dGVybnMoZW50aXRpZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBzcGVjaWFsIGVudGl0eSByZWxhdGlvbnNoaXAgcGF0dGVybnNcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlU3BlY2lhbEVudGl0eVBhdHRlcm5zKGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgLy8gSGFuZGxlIFwiWCdzIG5hbWUgaXMgWVwiIHBhdHRlcm5zXG4gICAgaWYgKGVudGl0aWVzLmVudGl0eVR5cGUgJiYgZW50aXRpZXMuZW50aXR5TmFtZSkge1xuICAgICAgY29uc3QgcmVsYXRpb25zaGlwS2V5ID0gYCR7ZW50aXRpZXMuZW50aXR5VHlwZX1fbmFtZWA7XG4gICAgICBjb25zdCByZWxhdGlvbnNoaXBJbmZvID0ge1xuICAgICAgICB2YWx1ZTogZW50aXRpZXMuZW50aXR5TmFtZSxcbiAgICAgICAgZW50aXR5VHlwZTogZW50aXRpZXMuZW50aXR5VHlwZSxcbiAgICAgICAgcmVsYXRpb25zaGlwOiAnaGFzTmFtZScsXG4gICAgICAgIGxhc3RNZW50aW9uZWQ6IERhdGUubm93KCksXG4gICAgICAgIG1lbnRpb25Db3VudDogMVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy5jb250ZXh0LmVudGl0eU1lbW9yeS5zZXQocmVsYXRpb25zaGlwS2V5LCByZWxhdGlvbnNoaXBJbmZvKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SXIFN0b3JlZCByZWxhdGlvbnNoaXA6ICR7ZW50aXRpZXMuZW50aXR5VHlwZX0gaGFzTmFtZSAke2VudGl0aWVzLmVudGl0eU5hbWV9YCk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHVzZXIgaWRlbnRpdHlcbiAgICBpZiAoZW50aXRpZXMudXNlck5hbWUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5lbnRpdHlNZW1vcnkuc2V0KCd1c2VyX25hbWUnLCB7XG4gICAgICAgIHZhbHVlOiBlbnRpdGllcy51c2VyTmFtZSxcbiAgICAgICAgcmVsYXRpb25zaGlwOiAnaWRlbnRpdHknLFxuICAgICAgICBsYXN0TWVudGlvbmVkOiBEYXRlLm5vdygpLFxuICAgICAgICBtZW50aW9uQ291bnQ6ICh0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LmdldCgndXNlcl9uYW1lJyk/Lm1lbnRpb25Db3VudCB8fCAwKSArIDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgXCJNeSBuYW1lIGlzIFhcIiBwYXR0ZXJuc1xuICAgIGNvbnN0IGVudGl0eVZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZW50aXRpZXMpO1xuICAgIGlmIChlbnRpdHlWYWx1ZXMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBlbnRpdHlWYWx1ZXNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTaW5nbGUgZW50aXR5IHRoYXQgY291bGQgYmUgYSBuYW1lXG4gICAgICBjb25zdCBlbnRpdHlWYWx1ZSA9IGVudGl0eVZhbHVlc1swXSBhcyBzdHJpbmc7XG4gICAgICBpZiAoZW50aXR5VmFsdWUubGVuZ3RoID4gMSAmJiBlbnRpdHlWYWx1ZVswXS50b1VwcGVyQ2FzZSgpID09PSBlbnRpdHlWYWx1ZVswXSkge1xuICAgICAgICAvLyBMb29rcyBsaWtlIGEgcHJvcGVyIG5hbWUgKGNhcGl0YWxpemVkKVxuICAgICAgICB0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LnNldCgndXNlcl9uYW1lJywge1xuICAgICAgICAgIHZhbHVlOiBlbnRpdHlWYWx1ZSxcbiAgICAgICAgICByZWxhdGlvbnNoaXA6ICdpZGVudGl0eScsXG4gICAgICAgICAgbGFzdE1lbnRpb25lZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtZW50aW9uQ291bnQ6ICh0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LmdldCgndXNlcl9uYW1lJyk/Lm1lbnRpb25Db3VudCB8fCAwKSArIDFcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5GkIFN0b3JlZCB1c2VyIG5hbWU6ICR7ZW50aXR5VmFsdWV9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBcIk15IFgncyBuYW1lIGlzIFlcIiBwYXR0ZXJuc1xuICAgIGlmIChlbnRpdHlWYWx1ZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICBjb25zdCBbZW50aXR5VHlwZSwgZW50aXR5TmFtZV0gPSBlbnRpdHlWYWx1ZXMgYXMgW3N0cmluZywgc3RyaW5nXTtcbiAgICAgIGlmIChlbnRpdHlUeXBlICYmIGVudGl0eU5hbWUgJiYgZW50aXR5TmFtZVswXS50b1VwcGVyQ2FzZSgpID09PSBlbnRpdHlOYW1lWzBdKSB7XG4gICAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcEtleSA9IGAke2VudGl0eVR5cGV9X25hbWVgO1xuICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBJbmZvID0ge1xuICAgICAgICAgIHZhbHVlOiBlbnRpdHlOYW1lLFxuICAgICAgICAgIGVudGl0eVR5cGU6IGVudGl0eVR5cGUsXG4gICAgICAgICAgcmVsYXRpb25zaGlwOiAnaGFzTmFtZScsXG4gICAgICAgICAgbGFzdE1lbnRpb25lZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtZW50aW9uQ291bnQ6IDFcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGV4dC5lbnRpdHlNZW1vcnkuc2V0KHJlbGF0aW9uc2hpcEtleSwgcmVsYXRpb25zaGlwSW5mbyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SXIFN0b3JlZCByZWxhdGlvbnNoaXA6ICR7ZW50aXR5VHlwZX0gaGFzTmFtZSAke2VudGl0eU5hbWV9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBwcm9ub3VuIHJlZmVyZW5jZXMgbGlrZSBcIkhlciBuYW1lIGlzIFhcIlxuICAgIGlmIChlbnRpdHlWYWx1ZXMubGVuZ3RoID09PSAzKSB7XG4gICAgICBjb25zdCBbcHJvbm91biwgbmFtZVdvcmQsIG5hbWVdID0gZW50aXR5VmFsdWVzIGFzIFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXTtcbiAgICAgIGlmICgocHJvbm91biA9PT0gJ2hlcicgfHwgcHJvbm91biA9PT0gJ2hpcycpICYmIG5hbWVXb3JkID09PSAnbmFtZScgJiYgbmFtZVswXS50b1VwcGVyQ2FzZSgpID09PSBuYW1lWzBdKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIHRoZSBtb3N0IHJlY2VudCBlbnRpdHkgdGhhdCBjb3VsZCBiZSByZWZlcmVuY2VkIGJ5IHRoaXMgcHJvbm91blxuICAgICAgICBjb25zdCByZWNlbnRFbnRpdHlUeXBlID0gdGhpcy5maW5kUmVjZW50RW50aXR5Rm9yUHJvbm91bihwcm9ub3VuKTtcbiAgICAgICAgaWYgKHJlY2VudEVudGl0eVR5cGUpIHtcbiAgICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBLZXkgPSBgJHtyZWNlbnRFbnRpdHlUeXBlfV9uYW1lYDtcbiAgICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBJbmZvID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5hbWUsXG4gICAgICAgICAgICBlbnRpdHlUeXBlOiByZWNlbnRFbnRpdHlUeXBlLFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwOiAnaGFzTmFtZScsXG4gICAgICAgICAgICBsYXN0TWVudGlvbmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbWVudGlvbkNvdW50OiAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LnNldChyZWxhdGlvbnNoaXBLZXksIHJlbGF0aW9uc2hpcEluZm8pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SXIFN0b3JlZCBwcm9ub3VuIHJlbGF0aW9uc2hpcDogJHtyZWNlbnRFbnRpdHlUeXBlfSBoYXNOYW1lICR7bmFtZX0gKHZpYSAke3Byb25vdW59KWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBpbnRlbnQgdHJhY2tpbmcgYW5kIHBlcnNpc3RlbmNlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUludGVudFRyYWNraW5nKGludGVudDogc3RyaW5nLCBlbnRpdGllczogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpbnRlbnQgb3IgY3JlYXRlIG5ldyBvbmVcbiAgICBpZiAodGhpcy5hY3RpdmVJbnRlbnRzLmhhcyhpbnRlbnQpKSB7XG4gICAgICBjb25zdCBpbnRlbnRTdGF0ZSA9IHRoaXMuYWN0aXZlSW50ZW50cy5nZXQoaW50ZW50KSE7XG4gICAgICBpbnRlbnRTdGF0ZS5jb25maWRlbmNlID0gTWF0aC5taW4oaW50ZW50U3RhdGUuY29uZmlkZW5jZSArIDAuMSwgMS4wKTtcbiAgICAgIGludGVudFN0YXRlLnR1cm5zU2luY2VBY3RpdmF0aW9uID0gMDtcbiAgICAgIGludGVudFN0YXRlLnBhcmFtZXRlcnMgPSB7IC4uLmludGVudFN0YXRlLnBhcmFtZXRlcnMsIC4uLmVudGl0aWVzIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0aXZlSW50ZW50cy5zZXQoaW50ZW50LCB7XG4gICAgICAgIGludGVudCxcbiAgICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgICBwYXJhbWV0ZXJzOiBlbnRpdGllcyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHR1cm5zU2luY2VBY3RpdmF0aW9uOiAwXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZ2UgZXhpc3RpbmcgaW50ZW50c1xuICAgIGZvciAoY29uc3QgW2ludGVudE5hbWUsIGludGVudFN0YXRlXSBvZiB0aGlzLmFjdGl2ZUludGVudHMpIHtcbiAgICAgIGlmIChpbnRlbnROYW1lICE9PSBpbnRlbnQpIHtcbiAgICAgICAgaW50ZW50U3RhdGUudHVybnNTaW5jZUFjdGl2YXRpb24rKztcbiAgICAgICAgaW50ZW50U3RhdGUuY29uZmlkZW5jZSA9IE1hdGgubWF4KGludGVudFN0YXRlLmNvbmZpZGVuY2UgLSAwLjA1LCAwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERlYWN0aXZhdGUgb2xkIGludGVudHNcbiAgICAgICAgaWYgKGludGVudFN0YXRlLnR1cm5zU2luY2VBY3RpdmF0aW9uID4gNSB8fCBpbnRlbnRTdGF0ZS5jb25maWRlbmNlIDwgMC4yKSB7XG4gICAgICAgICAgaW50ZW50U3RhdGUuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBhY3RpdmUgaW50ZW50cyBsaXN0XG4gICAgdGhpcy5jb250ZXh0LmFjdGl2ZUludGVudHMgPSBBcnJheS5mcm9tKHRoaXMuYWN0aXZlSW50ZW50cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoc3RhdGUgPT4gc3RhdGUuaXNBY3RpdmUpXG4gICAgICAubWFwKHN0YXRlID0+IHN0YXRlLmludGVudCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGN1cnJlbnQgY29udmVyc2F0aW9uIHRvcGljXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUN1cnJlbnRUb3BpYyhpbnRlbnQ6IHN0cmluZywgZW50aXRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFRvcGljIGluZmVyZW5jZSBiYXNlZCBvbiBpbnRlbnQgYW5kIGVudGl0aWVzXG4gICAgbGV0IG5ld1RvcGljOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGlmIChpbnRlbnQgPT09ICdFTlRJVFlfSU5UUk9EVUNUSU9OJyB8fCBpbnRlbnQgPT09ICdFTlRJVFlfUVVFUlknKSB7XG4gICAgICBpZiAoZW50aXRpZXMuZW50aXR5VHlwZSkge1xuICAgICAgICBuZXdUb3BpYyA9IGAke2VudGl0aWVzLmVudGl0eVR5cGV9X2Rpc2N1c3Npb25gO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaW50ZW50ID09PSAnSURFTlRJVFlfSU5UUk9EVUNUSU9OJyB8fCBpbnRlbnQgPT09ICdJREVOVElUWV9RVUVSWScpIHtcbiAgICAgIG5ld1RvcGljID0gJ2lkZW50aXR5X2Rpc2N1c3Npb24nO1xuICAgIH0gZWxzZSBpZiAoaW50ZW50ID09PSAnR1JFRVRJTkcnKSB7XG4gICAgICBuZXdUb3BpYyA9ICdncmVldGluZ19leGNoYW5nZSc7XG4gICAgfSBlbHNlIGlmIChpbnRlbnQgPT09ICdIRUxQX1JFUVVFU1QnKSB7XG4gICAgICBuZXdUb3BpYyA9ICdhc3Npc3RhbmNlX3JlcXVlc3QnO1xuICAgIH0gZWxzZSBpZiAoaW50ZW50ID09PSAnSU5GT1JNQVRJT05fUkVRVUVTVCcpIHtcbiAgICAgIC8vIEluZmVyIHRvcGljIGZyb20gZW50aXRpZXMgb3Iga2V5d29yZHNcbiAgICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0S2V5d29yZHModGV4dCk7XG4gICAgICBpZiAoa2V5d29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBuZXdUb3BpYyA9IGAke2tleXdvcmRzWzBdfV9pbmZvcm1hdGlvbmA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRvcGljIGlmIHdlIGhhdmUgYSBjbGVhciBuZXcgdG9waWNcbiAgICBpZiAobmV3VG9waWMgJiYgbmV3VG9waWMgIT09IHRoaXMuY29udGV4dC5jdXJyZW50VG9waWMpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jdXJyZW50VG9waWMgPSBuZXdUb3BpYztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGNvbnZlcnNhdGlvbiBnb2FscyBiYXNlZCBvbiBpbnRlbnRcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ29udmVyc2F0aW9uR29hbHMoaW50ZW50OiBzdHJpbmcsIGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogdm9pZCB7XG4gICAgY29uc3QgZ29hbHMgPSB0aGlzLmNvbnRleHQuY29udmVyc2F0aW9uR29hbHM7XG5cbiAgICBzd2l0Y2ggKGludGVudCkge1xuICAgICAgY2FzZSAnSEVMUF9SRVFVRVNUJzpcbiAgICAgICAgaWYgKCFnb2Fscy5pbmNsdWRlcygncHJvdmlkZV9hc3Npc3RhbmNlJykpIHtcbiAgICAgICAgICBnb2Fscy5wdXNoKCdwcm92aWRlX2Fzc2lzdGFuY2UnKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgY2FzZSAnSU5GT1JNQVRJT05fUkVRVUVTVCc6XG4gICAgICAgIGlmICghZ29hbHMuaW5jbHVkZXMoJ3Byb3ZpZGVfaW5mb3JtYXRpb24nKSkge1xuICAgICAgICAgIGdvYWxzLnB1c2goJ3Byb3ZpZGVfaW5mb3JtYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgY2FzZSAnSURFTlRJVFlfSU5UUk9EVUNUSU9OJzpcbiAgICAgICAgaWYgKCFnb2Fscy5pbmNsdWRlcygnYnVpbGRfcmFwcG9ydCcpKSB7XG4gICAgICAgICAgZ29hbHMucHVzaCgnYnVpbGRfcmFwcG9ydCcpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgICBjYXNlICdFTlRJVFlfSU5UUk9EVUNUSU9OJzpcbiAgICAgICAgaWYgKCFnb2Fscy5pbmNsdWRlcygnbGVhcm5fYWJvdXRfdXNlcicpKSB7XG4gICAgICAgICAgZ29hbHMucHVzaCgnbGVhcm5fYWJvdXRfdXNlcicpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIEtlZXAgZ29hbHMgbGlzdCBtYW5hZ2VhYmxlXG4gICAgaWYgKGdvYWxzLmxlbmd0aCA+IDUpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jb252ZXJzYXRpb25Hb2FscyA9IGdvYWxzLnNsaWNlKC01KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBrZXl3b3JkcyBmcm9tIHRleHQgZm9yIHRvcGljIGluZmVyZW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KC9cXFcrLylcbiAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDMpXG4gICAgICAuZmlsdGVyKHdvcmQgPT4gIXRoaXMuaXNTdG9wV29yZCh3b3JkKSlcbiAgICAgIC5zbGljZSgwLCAzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3b3JkIGlzIGEgc3RvcCB3b3JkXG4gICAqL1xuICBwcml2YXRlIGlzU3RvcFdvcmQod29yZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RvcFdvcmRzID0gWyd3aGF0JywgJ3doZW4nLCAnd2hlcmUnLCAnaG93JywgJ3doeScsICd3aG8nLCAndGhpcycsICd0aGF0JywgJ3dpdGgnLCAnZnJvbScsICd0aGV5JywgJ3RoZW0nLCAndGhlaXInLCAndGhlcmUnLCAndGhlbicsICd0aGFuJywgJ3RoZXNlJywgJ3Rob3NlJ107XG4gICAgcmV0dXJuIHN0b3BXb3Jkcy5pbmNsdWRlcyh3b3JkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWludGFpbiBjb252ZXJzYXRpb24gaGlzdG9yeSBsZW5ndGhcbiAgICovXG4gIHByaXZhdGUgbWFpbnRhaW5IaXN0b3J5TGVuZ3RoKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGggPiB0aGlzLm1heEhpc3RvcnlMZW5ndGgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5ID0gdGhpcy5jb250ZXh0LmNvbnZlcnNhdGlvbkhpc3Rvcnkuc2xpY2UoLXRoaXMubWF4SGlzdG9yeUxlbmd0aCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJ5IGVudGl0eSBtZW1vcnkgZm9yIHNwZWNpZmljIGluZm9ybWF0aW9uXG4gICAqL1xuICBxdWVyeUVudGl0eU1lbW9yeShlbnRpdHlLZXk6IHN0cmluZyk6IGFueSB8IG51bGwge1xuICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuY29udGV4dC5lbnRpdHlNZW1vcnkuZ2V0KGVudGl0eUtleSk7XG4gICAgaWYgKGVudGl0eSkge1xuICAgICAgY29uc29sZS5sb2coYPCflI0gUmV0cmlldmVkIGVudGl0eTogJHtlbnRpdHlLZXl9ID0gJHtlbnRpdHkudmFsdWV9YCk7XG4gICAgICByZXR1cm4gZW50aXR5O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSBmb3IgZW50aXR5IHJlbGF0aW9uc2hpcHMgKGUuZy4sIFwiZG9nX25hbWVcIilcbiAgICovXG4gIHF1ZXJ5RW50aXR5UmVsYXRpb25zaGlwKGVudGl0eVR5cGU6IHN0cmluZywgcmVsYXRpb25zaGlwOiBzdHJpbmcpOiBhbnkgfCBudWxsIHtcbiAgICBjb25zdCByZWxhdGlvbnNoaXBLZXkgPSBgJHtlbnRpdHlUeXBlfV8ke3JlbGF0aW9uc2hpcH1gO1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5RW50aXR5TWVtb3J5KHJlbGF0aW9uc2hpcEtleSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnZlcnNhdGlvbiBjb250ZXh0IGZvciByZXNwb25zZSBnZW5lcmF0aW9uXG4gICAqL1xuICBnZXRDb250ZXh0Rm9yUmVzcG9uc2UoKToge1xuICAgIHJlY2VudEhpc3Rvcnk6IENvbnZlcnNhdGlvblR1cm5bXTtcbiAgICBjdXJyZW50VG9waWM6IHN0cmluZyB8IG51bGw7XG4gICAgYWN0aXZlSW50ZW50czogc3RyaW5nW107XG4gICAgcmVsZXZhbnRFbnRpdGllczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBjb252ZXJzYXRpb25Hb2Fsczogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IHJlY2VudEhpc3RvcnkgPSB0aGlzLmNvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtNSk7XG4gICAgXG4gICAgLy8gR2V0IHJlbGV2YW50IGVudGl0aWVzIGJhc2VkIG9uIGN1cnJlbnQgdG9waWMgYW5kIHJlY2VudCBtZW50aW9uc1xuICAgIGNvbnN0IHJlbGV2YW50RW50aXRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBjb25zdCByZWNlbnRUaHJlc2hvbGQgPSBEYXRlLm5vdygpIC0gKDUgKiA2MCAqIDEwMDApOyAvLyA1IG1pbnV0ZXNcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudGl0eV0gb2YgdGhpcy5jb250ZXh0LmVudGl0eU1lbW9yeSkge1xuICAgICAgaWYgKGVudGl0eS5sYXN0TWVudGlvbmVkID4gcmVjZW50VGhyZXNob2xkIHx8IFxuICAgICAgICAgICh0aGlzLmNvbnRleHQuY3VycmVudFRvcGljICYmIGVudGl0eS5jb250ZXh0ID09PSB0aGlzLmNvbnRleHQuY3VycmVudFRvcGljKSkge1xuICAgICAgICByZWxldmFudEVudGl0aWVzW2tleV0gPSBlbnRpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2VudEhpc3RvcnksXG4gICAgICBjdXJyZW50VG9waWM6IHRoaXMuY29udGV4dC5jdXJyZW50VG9waWMsXG4gICAgICBhY3RpdmVJbnRlbnRzOiB0aGlzLmNvbnRleHQuYWN0aXZlSW50ZW50cyxcbiAgICAgIHJlbGV2YW50RW50aXRpZXMsXG4gICAgICBjb252ZXJzYXRpb25Hb2FsczogdGhpcy5jb250ZXh0LmNvbnZlcnNhdGlvbkdvYWxzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3ZSBzaG91bGQgY29udGludWUgY3VycmVudCBjb252ZXJzYXRpb24gdGhyZWFkXG4gICAqL1xuICBzaG91bGRDb250aW51ZVRocmVhZChuZXdJbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFjdGl2ZUludGVudFN0YXRlcyA9IEFycmF5LmZyb20odGhpcy5hY3RpdmVJbnRlbnRzLnZhbHVlcygpKVxuICAgICAgLmZpbHRlcihzdGF0ZSA9PiBzdGF0ZS5pc0FjdGl2ZSk7XG4gICAgXG4gICAgLy8gQ29udGludWUgdGhyZWFkIGlmIHdlIGhhdmUgcmVsYXRlZCBhY3RpdmUgaW50ZW50c1xuICAgIGNvbnN0IHJlbGF0ZWRJbnRlbnRzID0gdGhpcy5nZXRSZWxhdGVkSW50ZW50cyhuZXdJbnRlbnQpO1xuICAgIHJldHVybiBhY3RpdmVJbnRlbnRTdGF0ZXMuc29tZShzdGF0ZSA9PiBcbiAgICAgIHJlbGF0ZWRJbnRlbnRzLmluY2x1ZGVzKHN0YXRlLmludGVudCkgJiYgc3RhdGUuY29uZmlkZW5jZSA+IDAuNVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGludGVudHMgcmVsYXRlZCB0byB0aGUgZ2l2ZW4gaW50ZW50XG4gICAqL1xuICBwcml2YXRlIGdldFJlbGF0ZWRJbnRlbnRzKGludGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGludGVudFJlbGF0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAgICAgJ0lERU5USVRZX1FVRVJZJzogWydJREVOVElUWV9JTlRST0RVQ1RJT04nLCAnRU5USVRZX1FVRVJZJ10sXG4gICAgICAnRU5USVRZX1FVRVJZJzogWydFTlRJVFlfSU5UUk9EVUNUSU9OJywgJ0lERU5USVRZX1FVRVJZJ10sXG4gICAgICAnSU5GT1JNQVRJT05fUkVRVUVTVCc6IFsnSEVMUF9SRVFVRVNUJywgJ0tOT1dMRURHRV9SRVFVRVNUJ10sXG4gICAgICAnSEVMUF9SRVFVRVNUJzogWydJTkZPUk1BVElPTl9SRVFVRVNUJywgJ0tOT1dMRURHRV9SRVFVRVNUJ11cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBpbnRlbnRSZWxhdGlvbnNbaW50ZW50XSB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBjb252ZXJzYXRpb24gY29udGV4dCAoZm9yIG5ldyBjb252ZXJzYXRpb25zKVxuICAgKi9cbiAgcmVzZXRDb250ZXh0KCk6IHZvaWQge1xuICAgIHRoaXMuY29udGV4dCA9IHtcbiAgICAgIGN1cnJlbnRUb3BpYzogbnVsbCxcbiAgICAgIGFjdGl2ZUludGVudHM6IFtdLFxuICAgICAgZW50aXR5TWVtb3J5OiBuZXcgTWFwKCksXG4gICAgICBjb252ZXJzYXRpb25Hb2FsczogW10sXG4gICAgICB1c2VyUHJlZmVyZW5jZXM6IHt9LFxuICAgICAgY29udmVyc2F0aW9uSGlzdG9yeTogW11cbiAgICB9O1xuICAgIHRoaXMuYWN0aXZlSW50ZW50cy5jbGVhcigpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFByYWdtYXRpYyBjb250ZXh0IHJlc2V0Jyk7XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgbW9zdCByZWNlbnQgZW50aXR5IHRoYXQgY291bGQgYmUgcmVmZXJlbmNlZCBieSBhIHByb25vdW5cbiAgICovXG4gIHByaXZhdGUgZmluZFJlY2VudEVudGl0eUZvclByb25vdW4ocHJvbm91bjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8gTG9vayB0aHJvdWdoIHJlY2VudCBjb252ZXJzYXRpb24gaGlzdG9yeSBmb3IgZW50aXR5IHF1ZXJpZXNcbiAgICBjb25zdCByZWNlbnRUdXJucyA9IHRoaXMuY29udGV4dC5jb252ZXJzYXRpb25IaXN0b3J5LnNsaWNlKC0zKTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gcmVjZW50VHVybnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHR1cm4gPSByZWNlbnRUdXJuc1tpXTtcbiAgICAgIFxuICAgICAgLy8gTG9vayBmb3IgZW50aXR5IHF1ZXJpZXMgdGhhdCB3b3VsZCBlc3RhYmxpc2ggY29udGV4dFxuICAgICAgaWYgKHR1cm4uaW50ZW50ID09PSAnRU5USVRZX1FVRVJZJykge1xuICAgICAgICBjb25zdCBlbnRpdHlLZXlzID0gT2JqZWN0LmtleXModHVybi5lbnRpdGllcyk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGVudGl0eUtleXMpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlWYWx1ZSA9IHR1cm4uZW50aXRpZXNba2V5XTtcbiAgICAgICAgICBpZiAodHlwZW9mIGVudGl0eVZhbHVlID09PSAnc3RyaW5nJyAmJiBlbnRpdHlWYWx1ZS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGVudGl0eSB0eXBlIG1ha2VzIHNlbnNlIGZvciB0aGUgcHJvbm91blxuICAgICAgICAgICAgaWYgKHByb25vdW4gPT09ICdoZXInICYmIHRoaXMuaXNGZW1hbGVQcm9ub3VuRW50aXR5KGVudGl0eVZhbHVlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZW50aXR5VmFsdWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb25vdW4gPT09ICdoaXMnICYmIHRoaXMuaXNNYWxlUHJvbm91bkVudGl0eShlbnRpdHlWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eVZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRpdHlWYWx1ZSAhPT0gJ2lzJyAmJiBlbnRpdHlWYWx1ZSAhPT0gJ25hbWUnKSB7XG4gICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gdGhlIGVudGl0eSBpZiBubyBnZW5kZXItc3BlY2lmaWMgbWF0Y2hcbiAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENoZWNrIGlmIGVudGl0eSB0eXBlIHR5cGljYWxseSB1c2VzIGZlbWFsZSBwcm9ub3Vuc1xuICAgKi9cbiAgcHJpdmF0ZSBpc0ZlbWFsZVByb25vdW5FbnRpdHkoZW50aXR5VHlwZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZmVtYWxlRW50aXRpZXMgPSBbJ3dpZmUnLCAnbW90aGVyJywgJ3Npc3RlcicsICdkYXVnaHRlcicsICdnaXJsZnJpZW5kJywgJ2F1bnQnLCAnZ3JhbmRtb3RoZXInXTtcbiAgICByZXR1cm4gZmVtYWxlRW50aXRpZXMuaW5jbHVkZXMoZW50aXR5VHlwZS50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENoZWNrIGlmIGVudGl0eSB0eXBlIHR5cGljYWxseSB1c2VzIG1hbGUgcHJvbm91bnNcbiAgICovXG4gIHByaXZhdGUgaXNNYWxlUHJvbm91bkVudGl0eShlbnRpdHlUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBtYWxlRW50aXRpZXMgPSBbJ2h1c2JhbmQnLCAnZmF0aGVyJywgJ2Jyb3RoZXInLCAnc29uJywgJ2JveWZyaWVuZCcsICd1bmNsZScsICdncmFuZGZhdGhlciddO1xuICAgIHJldHVybiBtYWxlRW50aXRpZXMuaW5jbHVkZXMoZW50aXR5VHlwZS50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVidWcgaW5mb3JtYXRpb24gYWJvdXQgY3VycmVudCBjb250ZXh0XG4gICAqL1xuICBnZXREZWJ1Z0luZm8oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFRvcGljOiB0aGlzLmNvbnRleHQuY3VycmVudFRvcGljLFxuICAgICAgYWN0aXZlSW50ZW50czogdGhpcy5jb250ZXh0LmFjdGl2ZUludGVudHMsXG4gICAgICBlbnRpdHlNZW1vcnlTaXplOiB0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5LnNpemUsXG4gICAgICBlbnRpdHlNZW1vcnk6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmNvbnRleHQuZW50aXR5TWVtb3J5KSxcbiAgICAgIGNvbnZlcnNhdGlvbkdvYWxzOiB0aGlzLmNvbnRleHQuY29udmVyc2F0aW9uR29hbHMsXG4gICAgICBoaXN0b3J5TGVuZ3RoOiB0aGlzLmNvbnRleHQuY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGgsXG4gICAgICBhY3RpdmVJbnRlbnRTdGF0ZXM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmFjdGl2ZUludGVudHMpXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlByYWdtYXRpY0xheWVyIiwiY29uc3RydWN0b3IiLCJhY3RpdmVJbnRlbnRzIiwiTWFwIiwibWF4SGlzdG9yeUxlbmd0aCIsImNvbnRleHQiLCJjdXJyZW50VG9waWMiLCJlbnRpdHlNZW1vcnkiLCJjb252ZXJzYXRpb25Hb2FscyIsInVzZXJQcmVmZXJlbmNlcyIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJwcm9jZXNzVHVybiIsInNwZWFrZXIiLCJ0ZXh0IiwiaW50ZW50IiwiZW50aXRpZXMiLCJzZW1hbnRpY0NvbnRleHQiLCJjb25zb2xlIiwibG9nIiwidHVybiIsImlkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRpbWVzdGFtcCIsInB1c2giLCJtYWludGFpbkhpc3RvcnlMZW5ndGgiLCJ1cGRhdGVFbnRpdHlNZW1vcnkiLCJ1cGRhdGVJbnRlbnRUcmFja2luZyIsInVwZGF0ZUN1cnJlbnRUb3BpYyIsInVwZGF0ZUNvbnZlcnNhdGlvbkdvYWxzIiwic2l6ZSIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJsZW5ndGgiLCJlbnRpdHlJbmZvIiwibGFzdE1lbnRpb25lZCIsIm1lbnRpb25Db3VudCIsImdldCIsInNldCIsImhhbmRsZVNwZWNpYWxFbnRpdHlQYXR0ZXJucyIsImVudGl0eVR5cGUiLCJlbnRpdHlOYW1lIiwicmVsYXRpb25zaGlwS2V5IiwicmVsYXRpb25zaGlwSW5mbyIsInJlbGF0aW9uc2hpcCIsInVzZXJOYW1lIiwiZW50aXR5VmFsdWVzIiwidmFsdWVzIiwiZW50aXR5VmFsdWUiLCJ0b1VwcGVyQ2FzZSIsInByb25vdW4iLCJuYW1lV29yZCIsIm5hbWUiLCJyZWNlbnRFbnRpdHlUeXBlIiwiZmluZFJlY2VudEVudGl0eUZvclByb25vdW4iLCJoYXMiLCJpbnRlbnRTdGF0ZSIsImNvbmZpZGVuY2UiLCJtaW4iLCJ0dXJuc1NpbmNlQWN0aXZhdGlvbiIsInBhcmFtZXRlcnMiLCJpc0FjdGl2ZSIsImludGVudE5hbWUiLCJtYXgiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJzdGF0ZSIsIm1hcCIsIm5ld1RvcGljIiwia2V5d29yZHMiLCJleHRyYWN0S2V5d29yZHMiLCJnb2FscyIsImluY2x1ZGVzIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0Iiwid29yZCIsImlzU3RvcFdvcmQiLCJzdG9wV29yZHMiLCJxdWVyeUVudGl0eU1lbW9yeSIsImVudGl0eUtleSIsImVudGl0eSIsInF1ZXJ5RW50aXR5UmVsYXRpb25zaGlwIiwiZ2V0Q29udGV4dEZvclJlc3BvbnNlIiwicmVjZW50SGlzdG9yeSIsInJlbGV2YW50RW50aXRpZXMiLCJyZWNlbnRUaHJlc2hvbGQiLCJzaG91bGRDb250aW51ZVRocmVhZCIsIm5ld0ludGVudCIsImFjdGl2ZUludGVudFN0YXRlcyIsInJlbGF0ZWRJbnRlbnRzIiwiZ2V0UmVsYXRlZEludGVudHMiLCJzb21lIiwiaW50ZW50UmVsYXRpb25zIiwicmVzZXRDb250ZXh0IiwiY2xlYXIiLCJyZWNlbnRUdXJucyIsImkiLCJlbnRpdHlLZXlzIiwia2V5cyIsImlzRmVtYWxlUHJvbm91bkVudGl0eSIsImlzTWFsZVByb25vdW5FbnRpdHkiLCJmZW1hbGVFbnRpdGllcyIsIm1hbGVFbnRpdGllcyIsImdldERlYnVnSW5mbyIsImVudGl0eU1lbW9yeVNpemUiLCJmcm9tRW50cmllcyIsImhpc3RvcnlMZW5ndGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/conversation/pragmatic-layer.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/core/prime-math.ts":
/*!************************************!*\
  !*** ./src/lib/core/prime-math.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrimeMath: () => (/* binding */ PrimeMath)\n/* harmony export */ });\n// =============================================================================\n// PRIME MATHEMATICS UTILITIES\n// =============================================================================\nclass PrimeMath {\n    static{\n        this.primes = [];\n    }\n    static generatePrimes(n) {\n        if (this.primes.length >= n) return this.primes.slice(0, n);\n        const primes = [\n            2\n        ];\n        let num = 3;\n        while(primes.length < n){\n            let isPrime = true;\n            for(let i = 0; i < primes.length && primes[i] * primes[i] <= num; i++){\n                if (num % primes[i] === 0) {\n                    isPrime = false;\n                    break;\n                }\n            }\n            if (isPrime) primes.push(num);\n            num += 2;\n        }\n        this.primes = primes;\n        return primes;\n    }\n    static embeddingsToPrimes(embeddings, threshold = 0.02) {\n        const primes = this.generatePrimes(embeddings.length);\n        const primeFactors = {};\n        embeddings.forEach((value, index)=>{\n            if (Math.abs(value) > threshold) {\n                const prime = primes[index % primes.length];\n                const weight = Math.floor(Math.abs(value) * 1000) + 1;\n                primeFactors[prime] = (primeFactors[prime] || 0) + weight;\n            }\n        });\n        return primeFactors;\n    }\n    static calculateCoherence(primes1, primes2) {\n        const sharedFactors = {};\n        Object.keys(primes1).forEach((primeStr)=>{\n            const prime = parseInt(primeStr);\n            if (primes2[prime]) {\n                sharedFactors[prime] = Math.sqrt(primes1[prime] * primes2[prime]);\n            }\n        });\n        const sharedMagnitude = this.calculateMagnitude(sharedFactors);\n        const totalMagnitude = Math.sqrt(this.calculateMagnitude(primes1) * this.calculateMagnitude(primes2));\n        return totalMagnitude > 0 ? sharedMagnitude / totalMagnitude : 0;\n    }\n    static calculateMagnitude(primes) {\n        return Math.sqrt(Object.values(primes).reduce((sum, weight)=>sum + weight * weight, 0));\n    }\n    static combineFactors(primes1, primes2, ratio = 0.5) {\n        const combined = {};\n        // Combine from first set\n        Object.entries(primes1).forEach(([primeStr, weight])=>{\n            const prime = parseInt(primeStr);\n            combined[prime] = Math.floor(weight * ratio);\n        });\n        // Combine from second set\n        Object.entries(primes2).forEach(([primeStr, weight])=>{\n            const prime = parseInt(primeStr);\n            combined[prime] = (combined[prime] || 0) + Math.floor(weight * (1 - ratio));\n        });\n        return combined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN2QlcsUUFBUSxDQUFDcEIsTUFBTSxHQUFHRixLQUFLSSxLQUFLLENBQUNELFNBQVNrQjtRQUN4QztRQUVBLDBCQUEwQjtRQUMxQlosT0FBT2MsT0FBTyxDQUFDaEIsU0FBU1YsT0FBTyxDQUFDLENBQUMsQ0FBQ2MsVUFBVVIsT0FBTztZQUNqRCxNQUFNRCxRQUFRVSxTQUFTRDtZQUN2QlcsUUFBUSxDQUFDcEIsTUFBTSxHQUFHLENBQUNvQixRQUFRLENBQUNwQixNQUFNLElBQUksS0FBS0YsS0FBS0ksS0FBSyxDQUFDRCxTQUFVLEtBQUlrQixLQUFJO1FBQzFFO1FBRUEsT0FBT0M7SUFDVDtBQUNGIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2xpYi9jb3JlL3ByaW1lLW1hdGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBSSU1FIE1BVEhFTUFUSUNTIFVUSUxJVElFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFByaW1lTWF0aCB7XG4gIHByaXZhdGUgc3RhdGljIHByaW1lczogbnVtYmVyW10gPSBbXTtcblxuICBzdGF0aWMgZ2VuZXJhdGVQcmltZXMobjogbnVtYmVyKTogbnVtYmVyW10ge1xuICAgIGlmICh0aGlzLnByaW1lcy5sZW5ndGggPj0gbikgcmV0dXJuIHRoaXMucHJpbWVzLnNsaWNlKDAsIG4pO1xuICAgIFxuICAgIGNvbnN0IHByaW1lcyA9IFsyXTtcbiAgICBsZXQgbnVtID0gMztcbiAgICB3aGlsZSAocHJpbWVzLmxlbmd0aCA8IG4pIHtcbiAgICAgIGxldCBpc1ByaW1lID0gdHJ1ZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJpbWVzLmxlbmd0aCAmJiBwcmltZXNbaV0gKiBwcmltZXNbaV0gPD0gbnVtOyBpKyspIHtcbiAgICAgICAgaWYgKG51bSAlIHByaW1lc1tpXSA9PT0gMCkge1xuICAgICAgICAgIGlzUHJpbWUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzUHJpbWUpIHByaW1lcy5wdXNoKG51bSk7XG4gICAgICBudW0gKz0gMjtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5wcmltZXMgPSBwcmltZXM7XG4gICAgcmV0dXJuIHByaW1lcztcbiAgfVxuXG4gIHN0YXRpYyBlbWJlZGRpbmdzVG9QcmltZXMoZW1iZWRkaW5nczogbnVtYmVyW10sIHRocmVzaG9sZDogbnVtYmVyID0gMC4wMik6IFJlY29yZDxudW1iZXIsIG51bWJlcj4ge1xuICAgIGNvbnN0IHByaW1lcyA9IHRoaXMuZ2VuZXJhdGVQcmltZXMoZW1iZWRkaW5ncy5sZW5ndGgpO1xuICAgIGNvbnN0IHByaW1lRmFjdG9yczogUmVjb3JkPG51bWJlciwgbnVtYmVyPiA9IHt9O1xuICAgIFxuICAgIGVtYmVkZGluZ3MuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoTWF0aC5hYnModmFsdWUpID4gdGhyZXNob2xkKSB7XG4gICAgICAgIGNvbnN0IHByaW1lID0gcHJpbWVzW2luZGV4ICUgcHJpbWVzLmxlbmd0aF07XG4gICAgICAgIGNvbnN0IHdlaWdodCA9IE1hdGguZmxvb3IoTWF0aC5hYnModmFsdWUpICogMTAwMCkgKyAxO1xuICAgICAgICBwcmltZUZhY3RvcnNbcHJpbWVdID0gKHByaW1lRmFjdG9yc1twcmltZV0gfHwgMCkgKyB3ZWlnaHQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHByaW1lRmFjdG9ycztcbiAgfVxuXG4gIHN0YXRpYyBjYWxjdWxhdGVDb2hlcmVuY2UocHJpbWVzMTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiwgcHJpbWVzMjogUmVjb3JkPG51bWJlciwgbnVtYmVyPik6IG51bWJlciB7XG4gICAgY29uc3Qgc2hhcmVkRmFjdG9yczogUmVjb3JkPG51bWJlciwgbnVtYmVyPiA9IHt9O1xuICAgIE9iamVjdC5rZXlzKHByaW1lczEpLmZvckVhY2gocHJpbWVTdHIgPT4ge1xuICAgICAgY29uc3QgcHJpbWUgPSBwYXJzZUludChwcmltZVN0cik7XG4gICAgICBpZiAocHJpbWVzMltwcmltZV0pIHtcbiAgICAgICAgc2hhcmVkRmFjdG9yc1twcmltZV0gPSBNYXRoLnNxcnQocHJpbWVzMVtwcmltZV0gKiBwcmltZXMyW3ByaW1lXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgc2hhcmVkTWFnbml0dWRlID0gdGhpcy5jYWxjdWxhdGVNYWduaXR1ZGUoc2hhcmVkRmFjdG9ycyk7XG4gICAgY29uc3QgdG90YWxNYWduaXR1ZGUgPSBNYXRoLnNxcnQoXG4gICAgICB0aGlzLmNhbGN1bGF0ZU1hZ25pdHVkZShwcmltZXMxKSAqIHRoaXMuY2FsY3VsYXRlTWFnbml0dWRlKHByaW1lczIpXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gdG90YWxNYWduaXR1ZGUgPiAwID8gc2hhcmVkTWFnbml0dWRlIC8gdG90YWxNYWduaXR1ZGUgOiAwO1xuICB9XG5cbiAgc3RhdGljIGNhbGN1bGF0ZU1hZ25pdHVkZShwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj4pOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICBPYmplY3QudmFsdWVzKHByaW1lcykucmVkdWNlKChzdW0sIHdlaWdodCkgPT4gc3VtICsgd2VpZ2h0ICogd2VpZ2h0LCAwKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgY29tYmluZUZhY3RvcnMocHJpbWVzMTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiwgcHJpbWVzMjogUmVjb3JkPG51bWJlciwgbnVtYmVyPiwgcmF0aW86IG51bWJlciA9IDAuNSk6IFJlY29yZDxudW1iZXIsIG51bWJlcj4ge1xuICAgIGNvbnN0IGNvbWJpbmVkOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgLy8gQ29tYmluZSBmcm9tIGZpcnN0IHNldFxuICAgIE9iamVjdC5lbnRyaWVzKHByaW1lczEpLmZvckVhY2goKFtwcmltZVN0ciwgd2VpZ2h0XSkgPT4ge1xuICAgICAgY29uc3QgcHJpbWUgPSBwYXJzZUludChwcmltZVN0cik7XG4gICAgICBjb21iaW5lZFtwcmltZV0gPSBNYXRoLmZsb29yKHdlaWdodCAqIHJhdGlvKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDb21iaW5lIGZyb20gc2Vjb25kIHNldFxuICAgIE9iamVjdC5lbnRyaWVzKHByaW1lczIpLmZvckVhY2goKFtwcmltZVN0ciwgd2VpZ2h0XSkgPT4ge1xuICAgICAgY29uc3QgcHJpbWUgPSBwYXJzZUludChwcmltZVN0cik7XG4gICAgICBjb21iaW5lZFtwcmltZV0gPSAoY29tYmluZWRbcHJpbWVdIHx8IDApICsgTWF0aC5mbG9vcih3ZWlnaHQgKiAoMSAtIHJhdGlvKSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGNvbWJpbmVkO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUHJpbWVNYXRoIiwicHJpbWVzIiwiZ2VuZXJhdGVQcmltZXMiLCJuIiwibGVuZ3RoIiwic2xpY2UiLCJudW0iLCJpc1ByaW1lIiwiaSIsInB1c2giLCJlbWJlZGRpbmdzVG9QcmltZXMiLCJlbWJlZGRpbmdzIiwidGhyZXNob2xkIiwicHJpbWVGYWN0b3JzIiwiZm9yRWFjaCIsInZhbHVlIiwiaW5kZXgiLCJNYXRoIiwiYWJzIiwicHJpbWUiLCJ3ZWlnaHQiLCJmbG9vciIsImNhbGN1bGF0ZUNvaGVyZW5jZSIsInByaW1lczEiLCJwcmltZXMyIiwic2hhcmVkRmFjdG9ycyIsIk9iamVjdCIsImtleXMiLCJwcmltZVN0ciIsInBhcnNlSW50Iiwic3FydCIsInNoYXJlZE1hZ25pdHVkZSIsImNhbGN1bGF0ZU1hZ25pdHVkZSIsInRvdGFsTWFnbml0dWRlIiwidmFsdWVzIiwicmVkdWNlIiwic3VtIiwiY29tYmluZUZhY3RvcnMiLCJyYXRpbyIsImNvbWJpbmVkIiwiZW50cmllcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/core/prime-math.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/core/prime-resonance.ts":
/*!*****************************************!*\
  !*** ./src/lib/core/prime-resonance.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrimeResonanceEngine: () => (/* binding */ PrimeResonanceEngine)\n/* harmony export */ });\n// =============================================================================\n// PRIME RESONANCE ENGINE\n// =============================================================================\nclass PrimeResonanceEngine {\n    /**\n   * Find words with highest mathematical resonance to input prime factors\n   * This replaces embedding-based similarity with direct prime-to-prime comparison\n   */ findMostResonantWords(inputPrimes, vocabularyPrimes, count = 3) {\n        console.log(' Finding resonant words using direct prime comparison...');\n        console.log('Input primes:', this.formatPrimes(inputPrimes));\n        const resonanceResults = [];\n        for (const [word, wordPrimes] of vocabularyPrimes){\n            const resonance = this.calculatePrimeResonance(inputPrimes, wordPrimes);\n            const sharedPrimes = this.findSharedPrimes(inputPrimes, wordPrimes);\n            const harmonicMatches = this.findHarmonicMatches(inputPrimes, wordPrimes);\n            const coherenceScore = this.calculateCoherenceScore(inputPrimes, wordPrimes);\n            resonanceResults.push({\n                word,\n                resonance,\n                sharedPrimes,\n                harmonicMatches,\n                coherenceScore\n            });\n        }\n        // Sort by resonance score (highest first)\n        const sorted = resonanceResults.sort((a, b)=>b.resonance - a.resonance).slice(0, count * 2) // Get more candidates for filtering\n        .filter((result)=>result.resonance > 0); // Only meaningful resonance\n        console.log('Top resonance results:', sorted.slice(0, 5).map((r)=>`${r.word}: ${r.resonance.toFixed(1)} (shared: ${r.sharedPrimes.length}, harmonic: ${r.harmonicMatches.length})`));\n        return sorted.slice(0, count);\n    }\n    /**\n   * Calculate mathematical resonance between two prime factorizations\n   * Uses shared prime factors and their weight relationships\n   */ calculatePrimeResonance(primes1, primes2) {\n        let resonance = 0;\n        // Direct shared prime resonance (strongest signal)\n        for (const [prime, weight1] of Object.entries(primes1)){\n            const primeNum = parseInt(prime);\n            const weight2 = primes2[primeNum];\n            if (weight2) {\n                // Geometric mean of weights for shared primes\n                resonance += Math.sqrt(weight1 * weight2);\n            }\n        }\n        // Harmonic resonance (weaker but meaningful)\n        const harmonicResonance = this.calculateHarmonicResonance(primes1, primes2);\n        resonance += harmonicResonance * 0.3; // Weight harmonic matches less\n        return resonance;\n    }\n    /**\n   * Find prime numbers that appear in both factorizations\n   */ findSharedPrimes(primes1, primes2) {\n        const shared = [];\n        for (const prime of Object.keys(primes1)){\n            const primeNum = parseInt(prime);\n            if (primes2[primeNum]) {\n                shared.push(primeNum);\n            }\n        }\n        return shared.sort((a, b)=>a - b);\n    }\n    /**\n   * Find harmonic relationships between prime factorizations\n   * Looks for mathematical relationships like 2x, 3x, x+2, x-2\n   */ findHarmonicMatches(primes1, primes2) {\n        const harmonics = [];\n        for (const [prime1Str] of Object.entries(primes1)){\n            const prime1 = parseInt(prime1Str);\n            // Check for harmonic relationships\n            const harmonicCandidates = [\n                prime1 * 2,\n                prime1 * 3,\n                prime1 + 2,\n                prime1 - 2,\n                Math.floor(prime1 / 2),\n                Math.floor(prime1 / 3) // Third (if divisible)\n            ].filter((p)=>p > 1 && Number.isInteger(p));\n            for (const harmonic of harmonicCandidates){\n                if (primes2[harmonic]) {\n                    harmonics.push(harmonic);\n                }\n            }\n        }\n        return [\n            ...new Set(harmonics)\n        ].sort((a, b)=>a - b);\n    }\n    /**\n   * Calculate harmonic resonance between prime factorizations\n   */ calculateHarmonicResonance(primes1, primes2) {\n        let harmonicResonance = 0;\n        for (const [prime1Str, weight1] of Object.entries(primes1)){\n            const prime1 = parseInt(prime1Str);\n            // Check harmonic relationships\n            const harmonics = [\n                prime1 * 2,\n                prime1 + 2,\n                prime1 - 2\n            ];\n            for (const harmonic of harmonics){\n                const weight2 = primes2[harmonic];\n                if (weight2) {\n                    // Weaker resonance for harmonic matches\n                    harmonicResonance += Math.sqrt(weight1 * weight2) * 0.5;\n                }\n            }\n        }\n        return harmonicResonance;\n    }\n    /**\n   * Calculate mathematical coherence score between prime factorizations\n   * Similar to the existing coherence calculation but optimized for resonance\n   */ calculateCoherenceScore(primes1, primes2) {\n        const sharedFactors = {};\n        // Find shared prime factors\n        for (const [primeStr, weight1] of Object.entries(primes1)){\n            const prime = parseInt(primeStr);\n            const weight2 = primes2[prime];\n            if (weight2) {\n                sharedFactors[prime] = Math.sqrt(weight1 * weight2);\n            }\n        }\n        // Calculate coherence as ratio of shared to total magnitude\n        const sharedMagnitude = this.calculateMagnitude(sharedFactors);\n        const totalMagnitude = Math.sqrt(this.calculateMagnitude(primes1) * this.calculateMagnitude(primes2));\n        return totalMagnitude > 0 ? sharedMagnitude / totalMagnitude : 0;\n    }\n    /**\n   * Calculate magnitude of prime factorization\n   */ calculateMagnitude(primes) {\n        return Math.sqrt(Object.values(primes).reduce((sum, weight)=>sum + weight * weight, 0));\n    }\n    /**\n   * Format prime factorization for logging\n   */ formatPrimes(primes) {\n        const entries = Object.entries(primes).sort(([, a], [, b])=>b - a).slice(0, 5).map(([prime, weight])=>`${prime}:${Math.floor(weight)}`);\n        return `{${entries.join(', ')}}`;\n    }\n    /**\n   * Get contextual weighting based on conversation history\n   * Boosts resonance for words that appear in recent context\n   */ applyContextualWeighting(results, conversationContext, contextWeight = 1.5) {\n        const contextWords = conversationContext.join(' ').toLowerCase().split(/\\W+/).filter((word)=>word.length > 2);\n        return results.map((result)=>{\n            let boostedResonance = result.resonance;\n            // Boost resonance if word appears in conversation context\n            if (contextWords.includes(result.word.toLowerCase())) {\n                boostedResonance *= contextWeight;\n                console.log(` Context boost for \"${result.word}\": ${result.resonance.toFixed(1)}  ${boostedResonance.toFixed(1)}`);\n            }\n            return {\n                ...result,\n                resonance: boostedResonance\n            };\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQztJQUVBOzs7R0FHQyxHQUNEQyx5QkFDRUMsT0FBK0IsRUFDL0JDLG1CQUE2QixFQUM3QkMsZ0JBQXdCLEdBQUcsRUFDSDtRQUN4QixNQUFNQyxlQUFlRixvQkFDbEJILElBQUksQ0FBQyxLQUNMTSxXQUFXLEdBQ1hDLEtBQUssQ0FBQyxPQUNOaEQsTUFBTSxDQUFDaEIsQ0FBQUEsT0FBUUEsS0FBS3FCLE1BQU0sR0FBRztRQUVoQyxPQUFPc0MsUUFBUXpDLEdBQUcsQ0FBQ0QsQ0FBQUE7WUFDakIsSUFBSWdELG1CQUFtQmhELE9BQU9mLFNBQVM7WUFFdkMsMERBQTBEO1lBQzFELElBQUk0RCxhQUFhSSxRQUFRLENBQUNqRCxPQUFPakIsSUFBSSxDQUFDK0QsV0FBVyxLQUFLO2dCQUNwREUsb0JBQW9CSjtnQkFDcEJqRSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQkFBc0IsRUFBRW9CLE9BQU9qQixJQUFJLENBQUMsR0FBRyxFQUFFaUIsT0FBT2YsU0FBUyxDQUFDa0IsT0FBTyxDQUFDLEdBQUcsR0FBRyxFQUFFNkMsaUJBQWlCN0MsT0FBTyxDQUFDLElBQUk7WUFDdEg7WUFFQSxPQUFPO2dCQUNMLEdBQUdILE1BQU07Z0JBQ1RmLFdBQVcrRDtZQUNiO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2xpYi9jb3JlL3ByaW1lLXJlc29uYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUFJJTUUgUkVTT05BTkNFIEVOR0lORVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBQcmltZVJlc29uYW5jZVJlc3VsdCB7XG4gIHdvcmQ6IHN0cmluZztcbiAgcmVzb25hbmNlOiBudW1iZXI7XG4gIHNoYXJlZFByaW1lczogbnVtYmVyW107XG4gIGhhcm1vbmljTWF0Y2hlczogbnVtYmVyW107XG4gIGNvaGVyZW5jZVNjb3JlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBQcmltZVJlc29uYW5jZUVuZ2luZSB7XG4gIFxuICAvKipcbiAgICogRmluZCB3b3JkcyB3aXRoIGhpZ2hlc3QgbWF0aGVtYXRpY2FsIHJlc29uYW5jZSB0byBpbnB1dCBwcmltZSBmYWN0b3JzXG4gICAqIFRoaXMgcmVwbGFjZXMgZW1iZWRkaW5nLWJhc2VkIHNpbWlsYXJpdHkgd2l0aCBkaXJlY3QgcHJpbWUtdG8tcHJpbWUgY29tcGFyaXNvblxuICAgKi9cbiAgZmluZE1vc3RSZXNvbmFudFdvcmRzKFxuICAgIGlucHV0UHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LFxuICAgIHZvY2FidWxhcnlQcmltZXM6IE1hcDxzdHJpbmcsIFJlY29yZDxudW1iZXIsIG51bWJlcj4+LFxuICAgIGNvdW50OiBudW1iZXIgPSAzXG4gICk6IFByaW1lUmVzb25hbmNlUmVzdWx0W10ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SiIEZpbmRpbmcgcmVzb25hbnQgd29yZHMgdXNpbmcgZGlyZWN0IHByaW1lIGNvbXBhcmlzb24uLi4nKTtcbiAgICBjb25zb2xlLmxvZygnSW5wdXQgcHJpbWVzOicsIHRoaXMuZm9ybWF0UHJpbWVzKGlucHV0UHJpbWVzKSk7XG4gICAgXG4gICAgY29uc3QgcmVzb25hbmNlUmVzdWx0czogUHJpbWVSZXNvbmFuY2VSZXN1bHRbXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgW3dvcmQsIHdvcmRQcmltZXNdIG9mIHZvY2FidWxhcnlQcmltZXMpIHtcbiAgICAgIGNvbnN0IHJlc29uYW5jZSA9IHRoaXMuY2FsY3VsYXRlUHJpbWVSZXNvbmFuY2UoaW5wdXRQcmltZXMsIHdvcmRQcmltZXMpO1xuICAgICAgY29uc3Qgc2hhcmVkUHJpbWVzID0gdGhpcy5maW5kU2hhcmVkUHJpbWVzKGlucHV0UHJpbWVzLCB3b3JkUHJpbWVzKTtcbiAgICAgIGNvbnN0IGhhcm1vbmljTWF0Y2hlcyA9IHRoaXMuZmluZEhhcm1vbmljTWF0Y2hlcyhpbnB1dFByaW1lcywgd29yZFByaW1lcyk7XG4gICAgICBjb25zdCBjb2hlcmVuY2VTY29yZSA9IHRoaXMuY2FsY3VsYXRlQ29oZXJlbmNlU2NvcmUoaW5wdXRQcmltZXMsIHdvcmRQcmltZXMpO1xuICAgICAgXG4gICAgICByZXNvbmFuY2VSZXN1bHRzLnB1c2goe1xuICAgICAgICB3b3JkLFxuICAgICAgICByZXNvbmFuY2UsXG4gICAgICAgIHNoYXJlZFByaW1lcyxcbiAgICAgICAgaGFybW9uaWNNYXRjaGVzLFxuICAgICAgICBjb2hlcmVuY2VTY29yZVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNvcnQgYnkgcmVzb25hbmNlIHNjb3JlIChoaWdoZXN0IGZpcnN0KVxuICAgIGNvbnN0IHNvcnRlZCA9IHJlc29uYW5jZVJlc3VsdHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnJlc29uYW5jZSAtIGEucmVzb25hbmNlKVxuICAgICAgLnNsaWNlKDAsIGNvdW50ICogMikgLy8gR2V0IG1vcmUgY2FuZGlkYXRlcyBmb3IgZmlsdGVyaW5nXG4gICAgICAuZmlsdGVyKHJlc3VsdCA9PiByZXN1bHQucmVzb25hbmNlID4gMCk7IC8vIE9ubHkgbWVhbmluZ2Z1bCByZXNvbmFuY2VcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVG9wIHJlc29uYW5jZSByZXN1bHRzOicsIHNvcnRlZC5zbGljZSgwLCA1KS5tYXAociA9PiBcbiAgICAgIGAke3Iud29yZH06ICR7ci5yZXNvbmFuY2UudG9GaXhlZCgxKX0gKHNoYXJlZDogJHtyLnNoYXJlZFByaW1lcy5sZW5ndGh9LCBoYXJtb25pYzogJHtyLmhhcm1vbmljTWF0Y2hlcy5sZW5ndGh9KWBcbiAgICApKTtcbiAgICBcbiAgICByZXR1cm4gc29ydGVkLnNsaWNlKDAsIGNvdW50KTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBtYXRoZW1hdGljYWwgcmVzb25hbmNlIGJldHdlZW4gdHdvIHByaW1lIGZhY3Rvcml6YXRpb25zXG4gICAqIFVzZXMgc2hhcmVkIHByaW1lIGZhY3RvcnMgYW5kIHRoZWlyIHdlaWdodCByZWxhdGlvbnNoaXBzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVByaW1lUmVzb25hbmNlKFxuICAgIHByaW1lczE6IFJlY29yZDxudW1iZXIsIG51bWJlcj4sXG4gICAgcHJpbWVzMjogUmVjb3JkPG51bWJlciwgbnVtYmVyPlxuICApOiBudW1iZXIge1xuICAgIGxldCByZXNvbmFuY2UgPSAwO1xuICAgIFxuICAgIC8vIERpcmVjdCBzaGFyZWQgcHJpbWUgcmVzb25hbmNlIChzdHJvbmdlc3Qgc2lnbmFsKVxuICAgIGZvciAoY29uc3QgW3ByaW1lLCB3ZWlnaHQxXSBvZiBPYmplY3QuZW50cmllcyhwcmltZXMxKSkge1xuICAgICAgY29uc3QgcHJpbWVOdW0gPSBwYXJzZUludChwcmltZSk7XG4gICAgICBjb25zdCB3ZWlnaHQyID0gcHJpbWVzMltwcmltZU51bV07XG4gICAgICBcbiAgICAgIGlmICh3ZWlnaHQyKSB7XG4gICAgICAgIC8vIEdlb21ldHJpYyBtZWFuIG9mIHdlaWdodHMgZm9yIHNoYXJlZCBwcmltZXNcbiAgICAgICAgcmVzb25hbmNlICs9IE1hdGguc3FydCh3ZWlnaHQxICogd2VpZ2h0Mik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhhcm1vbmljIHJlc29uYW5jZSAod2Vha2VyIGJ1dCBtZWFuaW5nZnVsKVxuICAgIGNvbnN0IGhhcm1vbmljUmVzb25hbmNlID0gdGhpcy5jYWxjdWxhdGVIYXJtb25pY1Jlc29uYW5jZShwcmltZXMxLCBwcmltZXMyKTtcbiAgICByZXNvbmFuY2UgKz0gaGFybW9uaWNSZXNvbmFuY2UgKiAwLjM7IC8vIFdlaWdodCBoYXJtb25pYyBtYXRjaGVzIGxlc3NcbiAgICBcbiAgICByZXR1cm4gcmVzb25hbmNlO1xuICB9XG4gIFxuICAvKipcbiAgICogRmluZCBwcmltZSBudW1iZXJzIHRoYXQgYXBwZWFyIGluIGJvdGggZmFjdG9yaXphdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZmluZFNoYXJlZFByaW1lcyhcbiAgICBwcmltZXMxOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LFxuICAgIHByaW1lczI6IFJlY29yZDxudW1iZXIsIG51bWJlcj5cbiAgKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IHNoYXJlZDogbnVtYmVyW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHByaW1lIG9mIE9iamVjdC5rZXlzKHByaW1lczEpKSB7XG4gICAgICBjb25zdCBwcmltZU51bSA9IHBhcnNlSW50KHByaW1lKTtcbiAgICAgIGlmIChwcmltZXMyW3ByaW1lTnVtXSkge1xuICAgICAgICBzaGFyZWQucHVzaChwcmltZU51bSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzaGFyZWQuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICB9XG4gIFxuICAvKipcbiAgICogRmluZCBoYXJtb25pYyByZWxhdGlvbnNoaXBzIGJldHdlZW4gcHJpbWUgZmFjdG9yaXphdGlvbnNcbiAgICogTG9va3MgZm9yIG1hdGhlbWF0aWNhbCByZWxhdGlvbnNoaXBzIGxpa2UgMngsIDN4LCB4KzIsIHgtMlxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kSGFybW9uaWNNYXRjaGVzKFxuICAgIHByaW1lczE6IFJlY29yZDxudW1iZXIsIG51bWJlcj4sXG4gICAgcHJpbWVzMjogUmVjb3JkPG51bWJlciwgbnVtYmVyPlxuICApOiBudW1iZXJbXSB7XG4gICAgY29uc3QgaGFybW9uaWNzOiBudW1iZXJbXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgW3ByaW1lMVN0cl0gb2YgT2JqZWN0LmVudHJpZXMocHJpbWVzMSkpIHtcbiAgICAgIGNvbnN0IHByaW1lMSA9IHBhcnNlSW50KHByaW1lMVN0cik7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBoYXJtb25pYyByZWxhdGlvbnNoaXBzXG4gICAgICBjb25zdCBoYXJtb25pY0NhbmRpZGF0ZXMgPSBbXG4gICAgICAgIHByaW1lMSAqIDIsICAgIC8vIERvdWJsZVxuICAgICAgICBwcmltZTEgKiAzLCAgICAvLyBUcmlwbGVcbiAgICAgICAgcHJpbWUxICsgMiwgICAgLy8gTmV4dCBwcmltZSBnYXBcbiAgICAgICAgcHJpbWUxIC0gMiwgICAgLy8gUHJldmlvdXMgcHJpbWUgZ2FwXG4gICAgICAgIE1hdGguZmxvb3IocHJpbWUxIC8gMiksIC8vIEhhbGYgKGlmIGV2ZW4pXG4gICAgICAgIE1hdGguZmxvb3IocHJpbWUxIC8gMykgIC8vIFRoaXJkIChpZiBkaXZpc2libGUpXG4gICAgICBdLmZpbHRlcihwID0+IHAgPiAxICYmIE51bWJlci5pc0ludGVnZXIocCkpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGhhcm1vbmljIG9mIGhhcm1vbmljQ2FuZGlkYXRlcykge1xuICAgICAgICBpZiAocHJpbWVzMltoYXJtb25pY10pIHtcbiAgICAgICAgICBoYXJtb25pY3MucHVzaChoYXJtb25pYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KGhhcm1vbmljcyldLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBoYXJtb25pYyByZXNvbmFuY2UgYmV0d2VlbiBwcmltZSBmYWN0b3JpemF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVIYXJtb25pY1Jlc29uYW5jZShcbiAgICBwcmltZXMxOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LFxuICAgIHByaW1lczI6IFJlY29yZDxudW1iZXIsIG51bWJlcj5cbiAgKTogbnVtYmVyIHtcbiAgICBsZXQgaGFybW9uaWNSZXNvbmFuY2UgPSAwO1xuICAgIFxuICAgIGZvciAoY29uc3QgW3ByaW1lMVN0ciwgd2VpZ2h0MV0gb2YgT2JqZWN0LmVudHJpZXMocHJpbWVzMSkpIHtcbiAgICAgIGNvbnN0IHByaW1lMSA9IHBhcnNlSW50KHByaW1lMVN0cik7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGhhcm1vbmljIHJlbGF0aW9uc2hpcHNcbiAgICAgIGNvbnN0IGhhcm1vbmljcyA9IFtwcmltZTEgKiAyLCBwcmltZTEgKyAyLCBwcmltZTEgLSAyXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBoYXJtb25pYyBvZiBoYXJtb25pY3MpIHtcbiAgICAgICAgY29uc3Qgd2VpZ2h0MiA9IHByaW1lczJbaGFybW9uaWNdO1xuICAgICAgICBpZiAod2VpZ2h0Mikge1xuICAgICAgICAgIC8vIFdlYWtlciByZXNvbmFuY2UgZm9yIGhhcm1vbmljIG1hdGNoZXNcbiAgICAgICAgICBoYXJtb25pY1Jlc29uYW5jZSArPSBNYXRoLnNxcnQod2VpZ2h0MSAqIHdlaWdodDIpICogMC41O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBoYXJtb25pY1Jlc29uYW5jZTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBtYXRoZW1hdGljYWwgY29oZXJlbmNlIHNjb3JlIGJldHdlZW4gcHJpbWUgZmFjdG9yaXphdGlvbnNcbiAgICogU2ltaWxhciB0byB0aGUgZXhpc3RpbmcgY29oZXJlbmNlIGNhbGN1bGF0aW9uIGJ1dCBvcHRpbWl6ZWQgZm9yIHJlc29uYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb2hlcmVuY2VTY29yZShcbiAgICBwcmltZXMxOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+LFxuICAgIHByaW1lczI6IFJlY29yZDxudW1iZXIsIG51bWJlcj5cbiAgKTogbnVtYmVyIHtcbiAgICBjb25zdCBzaGFyZWRGYWN0b3JzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgLy8gRmluZCBzaGFyZWQgcHJpbWUgZmFjdG9yc1xuICAgIGZvciAoY29uc3QgW3ByaW1lU3RyLCB3ZWlnaHQxXSBvZiBPYmplY3QuZW50cmllcyhwcmltZXMxKSkge1xuICAgICAgY29uc3QgcHJpbWUgPSBwYXJzZUludChwcmltZVN0cik7XG4gICAgICBjb25zdCB3ZWlnaHQyID0gcHJpbWVzMltwcmltZV07XG4gICAgICBcbiAgICAgIGlmICh3ZWlnaHQyKSB7XG4gICAgICAgIHNoYXJlZEZhY3RvcnNbcHJpbWVdID0gTWF0aC5zcXJ0KHdlaWdodDEgKiB3ZWlnaHQyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGNvaGVyZW5jZSBhcyByYXRpbyBvZiBzaGFyZWQgdG8gdG90YWwgbWFnbml0dWRlXG4gICAgY29uc3Qgc2hhcmVkTWFnbml0dWRlID0gdGhpcy5jYWxjdWxhdGVNYWduaXR1ZGUoc2hhcmVkRmFjdG9ycyk7XG4gICAgY29uc3QgdG90YWxNYWduaXR1ZGUgPSBNYXRoLnNxcnQoXG4gICAgICB0aGlzLmNhbGN1bGF0ZU1hZ25pdHVkZShwcmltZXMxKSAqIHRoaXMuY2FsY3VsYXRlTWFnbml0dWRlKHByaW1lczIpXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gdG90YWxNYWduaXR1ZGUgPiAwID8gc2hhcmVkTWFnbml0dWRlIC8gdG90YWxNYWduaXR1ZGUgOiAwO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2FsY3VsYXRlIG1hZ25pdHVkZSBvZiBwcmltZSBmYWN0b3JpemF0aW9uXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZU1hZ25pdHVkZShwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj4pOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICBPYmplY3QudmFsdWVzKHByaW1lcykucmVkdWNlKChzdW0sIHdlaWdodCkgPT4gc3VtICsgd2VpZ2h0ICogd2VpZ2h0LCAwKVxuICAgICk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBGb3JtYXQgcHJpbWUgZmFjdG9yaXphdGlvbiBmb3IgbG9nZ2luZ1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRQcmltZXMocHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTogc3RyaW5nIHtcbiAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocHJpbWVzKVxuICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVxuICAgICAgLnNsaWNlKDAsIDUpXG4gICAgICAubWFwKChbcHJpbWUsIHdlaWdodF0pID0+IGAke3ByaW1lfToke01hdGguZmxvb3Iod2VpZ2h0KX1gKTtcbiAgICBcbiAgICByZXR1cm4gYHske2VudHJpZXMuam9pbignLCAnKX19YDtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCBjb250ZXh0dWFsIHdlaWdodGluZyBiYXNlZCBvbiBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgKiBCb29zdHMgcmVzb25hbmNlIGZvciB3b3JkcyB0aGF0IGFwcGVhciBpbiByZWNlbnQgY29udGV4dFxuICAgKi9cbiAgYXBwbHlDb250ZXh0dWFsV2VpZ2h0aW5nKFxuICAgIHJlc3VsdHM6IFByaW1lUmVzb25hbmNlUmVzdWx0W10sXG4gICAgY29udmVyc2F0aW9uQ29udGV4dDogc3RyaW5nW10sXG4gICAgY29udGV4dFdlaWdodDogbnVtYmVyID0gMS41XG4gICk6IFByaW1lUmVzb25hbmNlUmVzdWx0W10ge1xuICAgIGNvbnN0IGNvbnRleHRXb3JkcyA9IGNvbnZlcnNhdGlvbkNvbnRleHRcbiAgICAgIC5qb2luKCcgJylcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoL1xcVysvKVxuICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMik7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHMubWFwKHJlc3VsdCA9PiB7XG4gICAgICBsZXQgYm9vc3RlZFJlc29uYW5jZSA9IHJlc3VsdC5yZXNvbmFuY2U7XG4gICAgICBcbiAgICAgIC8vIEJvb3N0IHJlc29uYW5jZSBpZiB3b3JkIGFwcGVhcnMgaW4gY29udmVyc2F0aW9uIGNvbnRleHRcbiAgICAgIGlmIChjb250ZXh0V29yZHMuaW5jbHVkZXMocmVzdWx0LndvcmQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgYm9vc3RlZFJlc29uYW5jZSAqPSBjb250ZXh0V2VpZ2h0O1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBDb250ZXh0IGJvb3N0IGZvciBcIiR7cmVzdWx0LndvcmR9XCI6ICR7cmVzdWx0LnJlc29uYW5jZS50b0ZpeGVkKDEpfSDihpIgJHtib29zdGVkUmVzb25hbmNlLnRvRml4ZWQoMSl9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgcmVzb25hbmNlOiBib29zdGVkUmVzb25hbmNlXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUHJpbWVSZXNvbmFuY2VFbmdpbmUiLCJmaW5kTW9zdFJlc29uYW50V29yZHMiLCJpbnB1dFByaW1lcyIsInZvY2FidWxhcnlQcmltZXMiLCJjb3VudCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtYXRQcmltZXMiLCJyZXNvbmFuY2VSZXN1bHRzIiwid29yZCIsIndvcmRQcmltZXMiLCJyZXNvbmFuY2UiLCJjYWxjdWxhdGVQcmltZVJlc29uYW5jZSIsInNoYXJlZFByaW1lcyIsImZpbmRTaGFyZWRQcmltZXMiLCJoYXJtb25pY01hdGNoZXMiLCJmaW5kSGFybW9uaWNNYXRjaGVzIiwiY29oZXJlbmNlU2NvcmUiLCJjYWxjdWxhdGVDb2hlcmVuY2VTY29yZSIsInB1c2giLCJzb3J0ZWQiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImZpbHRlciIsInJlc3VsdCIsIm1hcCIsInIiLCJ0b0ZpeGVkIiwibGVuZ3RoIiwicHJpbWVzMSIsInByaW1lczIiLCJwcmltZSIsIndlaWdodDEiLCJPYmplY3QiLCJlbnRyaWVzIiwicHJpbWVOdW0iLCJwYXJzZUludCIsIndlaWdodDIiLCJNYXRoIiwic3FydCIsImhhcm1vbmljUmVzb25hbmNlIiwiY2FsY3VsYXRlSGFybW9uaWNSZXNvbmFuY2UiLCJzaGFyZWQiLCJrZXlzIiwiaGFybW9uaWNzIiwicHJpbWUxU3RyIiwicHJpbWUxIiwiaGFybW9uaWNDYW5kaWRhdGVzIiwiZmxvb3IiLCJwIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiaGFybW9uaWMiLCJTZXQiLCJzaGFyZWRGYWN0b3JzIiwicHJpbWVTdHIiLCJzaGFyZWRNYWduaXR1ZGUiLCJjYWxjdWxhdGVNYWduaXR1ZGUiLCJ0b3RhbE1hZ25pdHVkZSIsInByaW1lcyIsInZhbHVlcyIsInJlZHVjZSIsInN1bSIsIndlaWdodCIsImpvaW4iLCJhcHBseUNvbnRleHR1YWxXZWlnaHRpbmciLCJyZXN1bHRzIiwiY29udmVyc2F0aW9uQ29udGV4dCIsImNvbnRleHRXZWlnaHQiLCJjb250ZXh0V29yZHMiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0IiwiYm9vc3RlZFJlc29uYW5jZSIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/core/prime-resonance.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/core/primelm-models.ts":
/*!****************************************!*\
  !*** ./src/lib/core/primelm-models.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrimeCore: () => (/* binding */ PrimeCore)\n/* harmony export */ });\n/* harmony import */ var _xenova_transformers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @xenova/transformers */ \"@xenova/transformers\");\n/* harmony import */ var _semantic_knowledge_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../semantic/knowledge-bootstrap */ \"(ssr)/./src/lib/semantic/knowledge-bootstrap.ts\");\n/* harmony import */ var _prime_resonance__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prime-resonance */ \"(ssr)/./src/lib/core/prime-resonance.ts\");\n/* harmony import */ var _prime_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prime-math */ \"(ssr)/./src/lib/core/prime-math.ts\");\n/* harmony import */ var _semantic_semantic_layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../semantic/semantic-layer */ \"(ssr)/./src/lib/semantic/semantic-layer.ts\");\n/* harmony import */ var _conversation_pragmatic_layer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../conversation/pragmatic-layer */ \"(ssr)/./src/lib/conversation/pragmatic-layer.ts\");\n/* harmony import */ var _semantic_schema_vocabulary__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../semantic/schema-vocabulary */ \"(ssr)/./src/lib/semantic/schema-vocabulary.ts\");\n/* harmony import */ var _conversation_discourse_layer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../conversation/discourse-layer */ \"(ssr)/./src/lib/conversation/discourse-layer.ts\");\n/* harmony import */ var _conversation_generative_layer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../conversation/generative-layer */ \"(ssr)/./src/lib/conversation/generative-layer.ts\");\n/* harmony import */ var _memory_episodic_memory__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../memory/episodic-memory */ \"(ssr)/./src/lib/memory/episodic-memory.ts\");\n/* harmony import */ var _memory_emotional_intelligence__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../memory/emotional-intelligence */ \"(ssr)/./src/lib/memory/emotional-intelligence.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_xenova_transformers__WEBPACK_IMPORTED_MODULE_0__]);\n_xenova_transformers__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n// =============================================================================\n// PRIME CORE IMPLEMENTATION\n// =============================================================================\nclass PrimeCore {\n    constructor(){\n        this.embeddingPipeline = null;\n        this.isInitialized = false;\n        this.knowledgeBase = null;\n        // Initialize human user\n        this.humanUser = {\n            identity: {\n                id: 'human-001',\n                name: 'Human',\n                type: 'human',\n                embeddings: [],\n                primeFactors: {},\n                personality: {\n                    traits: [\n                        'curious',\n                        'conversational'\n                    ],\n                    communicationStyle: 'direct',\n                    interests: []\n                }\n            },\n            conversationState: {\n                embeddings: [],\n                primeFactors: {},\n                context: [],\n                turnCount: 0\n            },\n            preferences: {\n                topics: [],\n                responseLength: 'medium'\n            }\n        };\n        // Initialize chatbot user\n        this.chatbotUser = {\n            identity: {\n                id: 'chatbot-001',\n                name: 'PrimeBot',\n                type: 'chatbot',\n                embeddings: [],\n                primeFactors: {},\n                personality: {\n                    traits: [\n                        'helpful',\n                        'analytical',\n                        'mathematical'\n                    ],\n                    communicationStyle: 'thoughtful',\n                    interests: [\n                        'mathematics',\n                        'conversation',\n                        'learning'\n                    ]\n                }\n            },\n            conversationState: {\n                embeddings: [],\n                primeFactors: {},\n                context: [],\n                turnCount: 0\n            },\n            preferences: {\n                topics: [\n                    'mathematics',\n                    'prime numbers',\n                    'conversation'\n                ],\n                responseLength: 'medium'\n            }\n        };\n        // Initialize embeddings model\n        this.embeddingsModel = {\n            vocabulary: new Map(),\n            concepts: new Map(),\n            relationships: new Map()\n        };\n        // Initialize semantic layer\n        this.semanticLayer = new _semantic_semantic_layer__WEBPACK_IMPORTED_MODULE_4__.SemanticLayer();\n        // Initialize pragmatic layer\n        this.pragmaticLayer = new _conversation_pragmatic_layer__WEBPACK_IMPORTED_MODULE_5__.PragmaticLayer();\n        // Initialize schema vocabulary\n        this.schemaVocabulary = new _semantic_schema_vocabulary__WEBPACK_IMPORTED_MODULE_6__.SchemaVocabulary();\n        // Initialize discourse layer\n        this.discourseLayer = new _conversation_discourse_layer__WEBPACK_IMPORTED_MODULE_7__.DiscourseLayer(this.schemaVocabulary);\n        // Initialize generative layer\n        this.generativeLayer = new _conversation_generative_layer__WEBPACK_IMPORTED_MODULE_8__.GenerativeLayer(this.schemaVocabulary);\n        // Initialize Phase 3 layers\n        this.episodicMemoryLayer = new _memory_episodic_memory__WEBPACK_IMPORTED_MODULE_9__.EpisodicMemoryLayer();\n        this.emotionalIntelligenceLayer = new _memory_emotional_intelligence__WEBPACK_IMPORTED_MODULE_10__.EmotionalIntelligenceLayer();\n    // Embeddings model starts empty - no hardcoded data\n    }\n    async initialize() {\n        try {\n            console.log(' Initializing PrimeLM Core...');\n            // Load embedding pipeline\n            this.embeddingPipeline = await (0,_xenova_transformers__WEBPACK_IMPORTED_MODULE_0__.pipeline)('feature-extraction', 'Xenova/all-MiniLM-L6-v2');\n            // Bootstrap chatbot knowledge\n            await this.bootstrapChatbotKnowledge();\n            this.isInitialized = true;\n            console.log(' PrimeLM Core initialized successfully');\n        } catch (error) {\n            console.error(' Failed to initialize PrimeLM Core:', error);\n            throw error;\n        }\n    }\n    async bootstrapChatbotKnowledge() {\n        if (!this.embeddingPipeline) {\n            throw new Error('Embedding pipeline not initialized');\n        }\n        try {\n            const knowledgeBootstrap = new _semantic_knowledge_bootstrap__WEBPACK_IMPORTED_MODULE_1__.KnowledgeBootstrap(this.embeddingPipeline);\n            this.knowledgeBase = await knowledgeBootstrap.bootstrapFromTokenizer();\n            // Populate embeddings model with bootstrapped knowledge\n            this.embeddingsModel.vocabulary = this.knowledgeBase.conceptEmbeddings;\n            this.embeddingsModel.concepts = this.knowledgeBase.conceptEmbeddings;\n            this.embeddingsModel.relationships = this.knowledgeBase.semanticClusters;\n            // Update chatbot identity with accumulated knowledge\n            this.populateChatbotIdentity();\n        } catch (error) {\n            console.error(' Knowledge bootstrap failed:', error);\n            throw new Error(`Knowledge bootstrap failed: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n    populateChatbotIdentity() {\n        if (!this.knowledgeBase) return;\n        // Accumulate prime factors from all vocabulary\n        const identityPrimes = {};\n        const allEmbeddings = [];\n        for (const vocabularyEntry of this.knowledgeBase.vocabulary.values()){\n            // Add prime factors to chatbot identity\n            Object.entries(vocabularyEntry.primeFactors).forEach(([prime, weight])=>{\n                const primeNum = parseInt(prime);\n                identityPrimes[primeNum] = (identityPrimes[primeNum] || 0) + weight;\n            });\n            allEmbeddings.push(vocabularyEntry.embedding);\n        }\n        // Calculate centroid embedding for chatbot identity\n        if (allEmbeddings.length > 0) {\n            const centroidEmbedding = this.calculateCentroidEmbedding(allEmbeddings);\n            this.chatbotUser.identity.embeddings = centroidEmbedding;\n            this.chatbotUser.identity.primeFactors = identityPrimes;\n        }\n    }\n    calculateCentroidEmbedding(embeddings) {\n        if (embeddings.length === 0) return new Array(384).fill(0);\n        const centroid = new Array(embeddings[0].length).fill(0);\n        embeddings.forEach((embedding)=>{\n            embedding.forEach((value, index)=>{\n                centroid[index] += value;\n            });\n        });\n        return centroid.map((value)=>value / embeddings.length);\n    }\n    async processConversation(input) {\n        if (!this.isInitialized || !this.embeddingPipeline) {\n            throw new Error('PrimeCore not initialized');\n        }\n        console.log(` Processing input: \"${input}\"`);\n        // 1. Generate embeddings for input\n        const inputEmbeddings = await this.generateEmbeddings(input);\n        // 2. Convert to primes through human user model\n        const inputPrimes = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.embeddingsToPrimes(inputEmbeddings);\n        // 3. Update human user state\n        this.updateUserState(this.humanUser, input, inputEmbeddings, inputPrimes);\n        // 4. Generate response through mathematical translation\n        const responsePrimes = this.generateResponsePrimes(inputPrimes);\n        // 5. Convert response primes to text through chatbot user model\n        const responseText = await this.generateResponseText(responsePrimes);\n        // 6. Update chatbot user state\n        const responseEmbeddings = await this.generateEmbeddings(responseText);\n        this.updateUserState(this.chatbotUser, responseText, responseEmbeddings, responsePrimes);\n        console.log(` Generated response: \"${responseText}\"`);\n        return responseText;\n    }\n    async generateEmbeddings(text) {\n        if (!this.embeddingPipeline) {\n            throw new Error('Embedding pipeline not initialized');\n        }\n        const result = await this.embeddingPipeline(text);\n        return Array.from(result.data);\n    }\n    updateUserState(user, text, embeddings, primes) {\n        user.conversationState.embeddings = embeddings;\n        user.conversationState.primeFactors = primes;\n        user.conversationState.context.push(text);\n        user.conversationState.turnCount++;\n        // Keep context manageable\n        if (user.conversationState.context.length > 10) {\n            user.conversationState.context = user.conversationState.context.slice(-10);\n        }\n        // Update identity embeddings (evolving representation)\n        if (user.identity.embeddings.length === 0) {\n            user.identity.embeddings = [\n                ...embeddings\n            ];\n            user.identity.primeFactors = {\n                ...primes\n            };\n        } else {\n            // Blend with existing identity\n            user.identity.embeddings = user.identity.embeddings.map((val, idx)=>val * 0.9 + embeddings[idx] * 0.1);\n            user.identity.primeFactors = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.combineFactors(user.identity.primeFactors, primes, 0.9);\n        }\n        // Update embeddings model with real concepts from conversation\n        this.updateEmbeddingsModel(text, embeddings);\n    }\n    updateEmbeddingsModel(text, embeddings) {\n        // Extract key words/concepts from text\n        const words = text.toLowerCase().split(/\\W+/).filter((word)=>word.length > 2);\n        words.forEach((word)=>{\n            // Add to vocabulary with real embeddings\n            this.embeddingsModel.vocabulary.set(word, [\n                ...embeddings\n            ]);\n            // Add as concept if it's significant\n            if (word.length > 4) {\n                this.embeddingsModel.concepts.set(word, [\n                    ...embeddings\n                ]);\n            }\n        });\n        // Build relationships between concepts\n        if (words.length > 1) {\n            words.forEach((word, index)=>{\n                const relatedWords = words.filter((_, i)=>i !== index);\n                this.embeddingsModel.relationships.set(word, relatedWords);\n            });\n        }\n    }\n    generateResponsePrimes(inputPrimes) {\n        // Calculate coherence with chatbot's current state\n        const coherence = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateCoherence(inputPrimes, this.chatbotUser.conversationState.primeFactors);\n        console.log(` Coherence score: ${(coherence * 100).toFixed(1)}%`);\n        let responsePrimes;\n        if (coherence > 0.1) {\n            // High coherence: amplify resonance\n            responsePrimes = this.amplifyResonance(inputPrimes);\n        } else {\n            // Low coherence: create harmonic response\n            responsePrimes = this.createHarmonic(inputPrimes);\n        }\n        // Add chatbot personality factors\n        responsePrimes = this.addPersonalityFactors(responsePrimes);\n        return responsePrimes;\n    }\n    amplifyResonance(inputPrimes) {\n        const amplified = {};\n        // Amplify existing factors\n        Object.entries(inputPrimes).forEach(([primeStr, weight])=>{\n            const prime = parseInt(primeStr);\n            amplified[prime] = Math.floor(weight * 1.3);\n        });\n        // Add resonant harmonics\n        const primes = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.generatePrimes(100);\n        amplified[primes[10]] = 8; // Understanding\n        amplified[primes[15]] = 6; // Response\n        return amplified;\n    }\n    createHarmonic(inputPrimes) {\n        const harmonic = {};\n        // Create harmonic response from top input factors\n        const topFactors = Object.entries(inputPrimes).sort(([, a], [, b])=>b - a).slice(0, 5);\n        topFactors.forEach(([primeStr, weight])=>{\n            const prime = parseInt(primeStr);\n            const harmonicPrime = prime + 2;\n            harmonic[harmonicPrime] = Math.floor(weight * 0.7);\n        });\n        // Add base response factors\n        const primes = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.generatePrimes(50);\n        harmonic[primes[5]] = 10; // Help\n        harmonic[primes[8]] = 8; // Knowledge\n        return harmonic;\n    }\n    addPersonalityFactors(primes) {\n        const enhanced = {\n            ...primes\n        };\n        const personalityPrimes = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.generatePrimes(30);\n        // Add chatbot personality traits\n        enhanced[personalityPrimes[12]] = 5; // Helpful\n        enhanced[personalityPrimes[18]] = 4; // Analytical\n        enhanced[personalityPrimes[22]] = 3; // Mathematical\n        return enhanced;\n    }\n    async generateResponseText(primes) {\n        console.log(' Generating response text using Phase 3: Full 8-Layer Architecture...');\n        console.log('Knowledge base available:', !!this.knowledgeBase);\n        if (!this.knowledgeBase) {\n            console.log(' No knowledge base available');\n            throw new Error('No knowledge base available - bootstrap failed');\n        }\n        // Get the most recent user input for analysis\n        const lastUserInput = this.humanUser.conversationState.context[this.humanUser.conversationState.context.length - 1];\n        // 1. Analyze semantic context\n        const semanticContext = this.semanticLayer.analyzeSemanticContext(lastUserInput);\n        // 2. Get pragmatic context\n        const pragmaticResponseContext = this.pragmaticLayer.getContextForResponse();\n        // Convert to ConversationContext format for compatibility\n        const pragmaticContext = {\n            currentTopic: pragmaticResponseContext.currentTopic,\n            activeIntents: pragmaticResponseContext.activeIntents,\n            entityMemory: new Map(Object.entries(pragmaticResponseContext.relevantEntities)),\n            conversationGoals: pragmaticResponseContext.conversationGoals,\n            userPreferences: {},\n            conversationHistory: pragmaticResponseContext.recentHistory\n        };\n        // 3. Update pragmatic layer with current input\n        this.pragmaticLayer.processTurn('human', lastUserInput, semanticContext.intent, semanticContext.entities.reduce((acc, entity, index)=>{\n            acc[`entity_${index}`] = entity;\n            return acc;\n        }, {}), semanticContext);\n        // 4. Get updated pragmatic context after processing\n        const updatedPragmaticContext = this.pragmaticLayer.getContextForResponse();\n        // Convert to ConversationContext format for compatibility\n        const pragmaticContextForGeneration = {\n            currentTopic: updatedPragmaticContext.currentTopic,\n            activeIntents: updatedPragmaticContext.activeIntents,\n            entityMemory: new Map(Object.entries(updatedPragmaticContext.relevantEntities)),\n            conversationGoals: updatedPragmaticContext.conversationGoals,\n            userPreferences: {},\n            conversationHistory: updatedPragmaticContext.recentHistory\n        };\n        // 5. Analyze discourse context\n        const discourseContext = this.discourseLayer.analyzeDiscourseContext(lastUserInput, semanticContext, pragmaticContextForGeneration);\n        // 6. PHASE 3: Analyze emotional context\n        const emotionalContext = this.emotionalIntelligenceLayer.analyzeEmotionalContent(lastUserInput, {\n            conversationHistory: pragmaticContextForGeneration.conversationHistory,\n            currentTopic: pragmaticContextForGeneration.currentTopic\n        });\n        // 7. PHASE 3: Store episodic memory\n        const episodeId = this.episodicMemoryLayer.storeEpisode('conversation', {\n            summary: `User said: \"${lastUserInput}\"`,\n            details: {\n                intent: semanticContext.intent,\n                entities: semanticContext.entities,\n                emotionalState: emotionalContext.userEmotion\n            },\n            participants: [\n                'human',\n                'chatbot'\n            ],\n            context: discourseContext.conversationPhase || 'general'\n        }, {\n            valence: emotionalContext.userEmotion.valence,\n            arousal: emotionalContext.userEmotion.arousal,\n            dominance: emotionalContext.userEmotion.dominance,\n            emotions: [\n                emotionalContext.userEmotion.primary,\n                ...emotionalContext.userEmotion.secondary\n            ]\n        }, emotionalContext.empathyLevel);\n        // 8. PHASE 3: Generate emotional response strategy\n        const emotionalResponse = this.emotionalIntelligenceLayer.generateEmotionalResponse(emotionalContext, '' // Will be filled after generation\n        );\n        // 9. Generate response using Generative Layer with Phase 3 enhancements\n        const generationContext = {\n            responseType: discourseContext.expectedResponseType,\n            semanticContext: semanticContext,\n            discourseContext: discourseContext,\n            pragmaticContext: pragmaticContextForGeneration,\n            primeResonance: primes\n        };\n        let generatedResponse = this.generativeLayer.generateResponse(generationContext);\n        // 10. PHASE 3: Enhance response with emotional intelligence\n        if (generatedResponse) {\n            generatedResponse = this.enhanceResponseWithEmotionalIntelligence(generatedResponse, emotionalResponse, emotionalContext);\n        }\n        if (generatedResponse) {\n            console.log(' Generated dynamic response:', generatedResponse);\n            return generatedResponse;\n        }\n        console.log('Vocabulary size:', this.knowledgeBase.vocabulary.size);\n        console.log('Vocabulary primes available:', this.knowledgeBase.vocabularyPrimes.size);\n        // Use prime resonance engine for direct prime-to-prime comparison\n        const resonanceEngine = new _prime_resonance__WEBPACK_IMPORTED_MODULE_2__.PrimeResonanceEngine();\n        // Find words with highest mathematical resonance to response primes\n        const resonantWords = resonanceEngine.findMostResonantWords(primes, this.knowledgeBase.vocabularyPrimes, 5 // Get more candidates for semantic enhancement\n        );\n        // Apply contextual weighting based on conversation history\n        const contextualWords = resonanceEngine.applyContextualWeighting(resonantWords, this.humanUser.conversationState.context, 1.5);\n        // Enhance resonance with semantic awareness\n        const semanticWords = this.semanticLayer.enhanceResonanceWithSemantics(contextualWords.map((w)=>({\n                word: w.word,\n                resonance: w.resonance\n            })), semanticContext);\n        console.log('Resonant words found:', semanticWords.map((w)=>`${w.word}: ${w.resonance.toFixed(1)}`));\n        if (semanticWords.length > 0) {\n            // Convert back to PrimeResonanceResult format for compatibility\n            const enhancedResonantWords = contextualWords.map((original)=>{\n                const enhanced = semanticWords.find((s)=>s.word === original.word);\n                return {\n                    ...original,\n                    resonance: enhanced ? enhanced.resonance : original.resonance\n                };\n            }).sort((a, b)=>b.resonance - a.resonance);\n            const response = this.generateSemanticResonanceResponse(enhancedResonantWords, semanticContext, primes);\n            console.log('Generated semantic-resonance response:', response);\n            return response;\n        }\n        // Fallback to basic conversational response\n        console.log('No resonant words found, using basic response');\n        return this.generateBasicResponse(primes);\n    }\n    primesToEmbeddings(primes) {\n        // Convert prime factorization back to embedding space\n        const embeddings = new Array(384).fill(0);\n        const primeList = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.generatePrimes(384);\n        Object.entries(primes).forEach(([prime, weight])=>{\n            const primeNum = parseInt(prime);\n            const index = primeList.indexOf(primeNum);\n            if (index !== -1) {\n                embeddings[index] = weight / 1000; // Reverse the scaling\n            }\n        });\n        return embeddings;\n    }\n    findClosestConcept(embeddings) {\n        let closestConcept = null;\n        let highestSimilarity = -1;\n        for (const [concept, conceptEmbeddings] of this.embeddingsModel.concepts){\n            const similarity = this.calculateCosineSimilarity(embeddings, conceptEmbeddings);\n            if (similarity > highestSimilarity) {\n                highestSimilarity = similarity;\n                closestConcept = concept;\n            }\n        }\n        return highestSimilarity > 0.3 ? closestConcept : null;\n    }\n    calculateCosineSimilarity(a, b) {\n        const dotProduct = a.reduce((sum, val, i)=>sum + val * b[i], 0);\n        const magnitudeA = Math.sqrt(a.reduce((sum, val)=>sum + val * val, 0));\n        const magnitudeB = Math.sqrt(b.reduce((sum, val)=>sum + val * val, 0));\n        return magnitudeA && magnitudeB ? dotProduct / (magnitudeA * magnitudeB) : 0;\n    }\n    async generateTextFromConcept(concept, primes) {\n        // Use the concept to generate contextual response\n        const magnitude = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateMagnitude(primes);\n        const conceptVariations = this.getConceptVariations(concept);\n        // Select variation based on magnitude\n        const variationIndex = Math.floor(magnitude / 10) % conceptVariations.length;\n        return conceptVariations[variationIndex];\n    }\n    getConceptVariations(concept) {\n        // Generate variations based on learned concepts\n        const variations = {};\n        // Build variations from existing vocabulary\n        for (const [vocab] of this.embeddingsModel.vocabulary){\n            if (!variations[concept]) variations[concept] = [];\n            variations[concept].push(`I understand you're interested in ${vocab}. Let me help with that.`);\n        }\n        return variations[concept] || [\n            `I'm processing information related to ${concept}.`\n        ];\n    }\n    findMostSimilarConcepts(embeddings, count) {\n        const similarities = [];\n        for (const [concept, conceptEmbeddings] of this.embeddingsModel.concepts){\n            const similarity = this.calculateCosineSimilarity(embeddings, conceptEmbeddings);\n            similarities.push({\n                concept,\n                similarity\n            });\n        }\n        const sorted = similarities.sort((a, b)=>b.similarity - a.similarity);\n        console.log('Top similarities:', sorted.slice(0, 5).map((s)=>`${s.concept}: ${s.similarity.toFixed(3)}`));\n        // Lower threshold to 0.01 to find more matches\n        const filtered = sorted.slice(0, count).filter((item)=>item.similarity > 0.01);\n        console.log('Filtered similar concepts:', filtered.map((s)=>`${s.concept}: ${s.similarity.toFixed(3)}`));\n        return filtered.map((item)=>item.concept);\n    }\n    generateSemanticResonanceResponse(resonantWords, semanticContext, primes) {\n        console.log(' Generating semantic-enhanced resonance response...');\n        console.log('Intent:', semanticContext.intent);\n        console.log('Semantic boosts:', semanticContext.semanticBoosts);\n        const primaryWord = resonantWords[0];\n        // Use semantic context to enhance response generation\n        switch(semanticContext.intent){\n            case 'GREETING':\n                if (primaryWord.word === 'hello' || semanticContext.semanticBoosts.includes('hello')) {\n                    return \"Hello! I'm PrimeBot. How can I help you today?\";\n                }\n                return \"Hello! Nice to meet you. I'm PrimeBot, powered by mathematical prime factorization.\";\n            case 'IDENTITY_INTRODUCTION':\n                if (semanticContext.entities.length > 0) {\n                    const name = semanticContext.entities[0];\n                    return `Nice to meet you, ${name}! I'm PrimeBot. How can I assist you today?`;\n                }\n                return \"Nice to meet you! I'm PrimeBot. What's your name?\";\n            case 'ENTITY_INTRODUCTION':\n                if (semanticContext.entities.length >= 2) {\n                    const entityType = semanticContext.entities[0];\n                    const entityName = semanticContext.entities[1];\n                    return `Nice to know that your ${entityType} is named ${entityName}! Tell me more about ${entityName}.`;\n                }\n                return \"That's interesting! Tell me more about that.\";\n            case 'IDENTITY_QUERY':\n                const context = this.humanUser.conversationState.context.join(' ').toLowerCase();\n                const nameMatch = context.match(/my name is (\\w+)/i);\n                if (nameMatch) {\n                    return `Based on our conversation, your name is ${nameMatch[1]}. Is that correct?`;\n                }\n                return \"I don't recall you mentioning your name. What is your name?\";\n            case 'HELP_REQUEST':\n                return \"I'm here to help! What would you like to know or discuss?\";\n            case 'GRATITUDE':\n                return \"You're welcome! I'm glad I could help.\";\n            case 'POSITIVE_FEEDBACK':\n                return \"That's wonderful! Is there anything else I can help you with?\";\n            case 'INFORMATION_REQUEST':\n            case 'QUESTION':\n                if (primaryWord && primaryWord.resonance > 1000) {\n                    return `I'm analyzing the concept of \"${primaryWord.word}\" to answer your question. What specifically would you like to know?`;\n                }\n                return \"That's a great question! I'm processing the mathematical patterns to provide you with an answer.\";\n            case 'KNOWLEDGE_REQUEST':\n                return \"I process information through mathematical analysis. What would you like me to understand?\";\n            default:\n                // Fall back to resonance-based response with semantic enhancement\n                if (primaryWord) {\n                    // Check if the primary word is semantically boosted\n                    if (semanticContext.semanticBoosts.includes(primaryWord.word)) {\n                        return `I notice you're particularly interested in \"${primaryWord.word}\". The mathematical resonance is strong here. Tell me more about what you'd like to explore!`;\n                    }\n                    // Use high resonance for confident responses\n                    if (primaryWord.resonance > 2000) {\n                        return `The concept of \"${primaryWord.word}\" resonates powerfully with my understanding. How can I help you explore this further?`;\n                    }\n                    return `I'm processing the mathematical patterns related to \"${primaryWord.word}\". What would you like to know about this?`;\n                }\n                return \"I'm analyzing the semantic and mathematical patterns in your message. Could you tell me more?\";\n        }\n    }\n    generateResonanceBasedResponse(resonantWords, primes) {\n        const primaryWord = resonantWords[0];\n        const magnitude = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateMagnitude(primes);\n        console.log(' Generating response for primary resonant word:', primaryWord.word);\n        console.log(' Resonance score:', primaryWord.resonance.toFixed(1));\n        console.log(' Shared primes:', primaryWord.sharedPrimes);\n        console.log(' Harmonic matches:', primaryWord.harmonicMatches);\n        // Check for greeting patterns\n        if (primaryWord.word === 'hello' || primaryWord.word === 'hi') {\n            return \"Hello! I'm PrimeBot. How can I help you today?\";\n        }\n        // Check for help/assistance patterns\n        if (primaryWord.word === 'help' || primaryWord.word === 'assist') {\n            return \"I'm here to help! What would you like to know or discuss?\";\n        }\n        // Check for gratitude patterns\n        if (primaryWord.word === 'thanks' || primaryWord.word === 'thank') {\n            return \"You're welcome! I'm glad I could help.\";\n        }\n        // Check for positive feedback\n        if (primaryWord.word === 'good' || primaryWord.word === 'great') {\n            return \"That's wonderful! Is there anything else I can help you with?\";\n        }\n        // Check for name/identity questions\n        if (primaryWord.word === 'name' || resonantWords.some((w)=>w.word === 'name')) {\n            // Check if user mentioned their name in context\n            const context = this.humanUser.conversationState.context.join(' ').toLowerCase();\n            if (context.includes('alex') || context.includes('my name is')) {\n                return \"Nice to meet you, Alex! I'm PrimeBot. How can I assist you today?\";\n            }\n            return \"I'm PrimeBot, an AI assistant powered by mathematical prime factorization. What's your name?\";\n        }\n        // Check for understanding/knowledge requests\n        if (primaryWord.word === 'understand' || primaryWord.word === 'know') {\n            return \"I process information through mathematical analysis. What would you like me to understand?\";\n        }\n        // Check for question patterns\n        if (primaryWord.word === 'what' || resonantWords.some((w)=>w.word === 'what')) {\n            const context = this.humanUser.conversationState.context.join(' ').toLowerCase();\n            if (context.includes('what is my name') || context.includes('my name')) {\n                return \"Based on our conversation, your name is Alex. Is that correct?\";\n            }\n            return \"That's a great question! I'm processing the mathematical patterns to provide you with an answer.\";\n        }\n        // Use mathematical resonance for contextual responses\n        if (primaryWord.sharedPrimes.length > 0) {\n            const sharedPrimeCount = primaryWord.sharedPrimes.length;\n            const harmonicCount = primaryWord.harmonicMatches.length;\n            if (sharedPrimeCount >= 3) {\n                return `I sense strong mathematical resonance with \"${primaryWord.word}\". Our prime factors align beautifully. What would you like to explore about this?`;\n            } else if (harmonicCount > 0) {\n                return `I detect harmonic relationships with \"${primaryWord.word}\". There's an interesting mathematical connection here. Tell me more!`;\n            }\n        }\n        // High resonance response\n        if (primaryWord.resonance > 100) {\n            return `The concept of \"${primaryWord.word}\" resonates strongly with my mathematical understanding. How can I help you with this?`;\n        }\n        // Multiple resonant words response\n        if (resonantWords.length > 1) {\n            const secondWord = resonantWords[1];\n            return `I'm processing the mathematical relationship between \"${primaryWord.word}\" and \"${secondWord.word}\". What specifically interests you about these concepts?`;\n        }\n        // Default resonance-based response\n        return `I'm analyzing the prime factorization patterns related to \"${primaryWord.word}\". Could you tell me more about what you'd like to know?`;\n    }\n    generateConceptBasedResponse(concepts, primes) {\n        const magnitude = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateMagnitude(primes);\n        const primaryConcept = concepts[0];\n        const relatedConcepts = this.embeddingsModel.relationships.get(primaryConcept) || [];\n        console.log(' Generating response for primary concept:', primaryConcept);\n        console.log(' Related concepts:', relatedConcepts);\n        // Check for greeting patterns\n        if (primaryConcept === 'hello' || primaryConcept === 'hi') {\n            return \"Hello! I'm PrimeBot. How can I help you today?\";\n        }\n        // Check for help/assistance patterns\n        if (primaryConcept === 'help' || primaryConcept === 'assist') {\n            return \"I'm here to help! What would you like to know or discuss?\";\n        }\n        // Check for gratitude patterns\n        if (primaryConcept === 'thanks' || primaryConcept === 'thank') {\n            return \"You're welcome! I'm glad I could help.\";\n        }\n        // Check for positive feedback\n        if (primaryConcept === 'good' || primaryConcept === 'great') {\n            return \"That's wonderful! Is there anything else I can help you with?\";\n        }\n        // Check for name/identity questions\n        if (primaryConcept === 'name' || concepts.includes('name')) {\n            // Check if user mentioned their name in context\n            const context = this.humanUser.conversationState.context.join(' ').toLowerCase();\n            if (context.includes('alex') || context.includes('my name is')) {\n                return \"Nice to meet you, Alex! I'm PrimeBot. How can I assist you today?\";\n            }\n            return \"I'm PrimeBot, an AI assistant powered by mathematical prime factorization. What's your name?\";\n        }\n        // Check for understanding/knowledge requests\n        if (primaryConcept === 'understand' || primaryConcept === 'know') {\n            return \"I process information through mathematical analysis. What would you like me to understand?\";\n        }\n        // Check for question patterns\n        if (primaryConcept === 'what' || concepts.includes('what')) {\n            const context = this.humanUser.conversationState.context.join(' ').toLowerCase();\n            if (context.includes('what is my name') || context.includes('my name')) {\n                return \"Based on our conversation, your name is Alex. Is that correct?\";\n            }\n            return \"That's a great question! I'm processing the mathematical patterns to provide you with an answer.\";\n        }\n        // Use semantic relationships for contextual responses\n        if (relatedConcepts.length > 0) {\n            const relatedConcept = relatedConcepts[Math.floor(magnitude) % relatedConcepts.length];\n            // Create more natural relationship responses\n            if (primaryConcept === 'count' && relatedConcepts.includes('number')) {\n                return \"I see you're working with numbers and counting. How can I help you with mathematical calculations?\";\n            }\n            if (primaryConcept === 'play' && relatedConcepts.includes('work')) {\n                return \"I understand the balance between work and play. What would you like to explore or discuss?\";\n            }\n            return `I notice you're interested in ${primaryConcept}. In my understanding, this connects to ${relatedConcept}. What specifically would you like to know?`;\n        }\n        // Enhanced default response with concept awareness\n        return `I'm processing the concept of \"${primaryConcept}\" through my mathematical framework. Could you tell me more about what you'd like to explore?`;\n    }\n    generateBasicResponse(primes) {\n        const magnitude = _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateMagnitude(primes);\n        const primeCount = Object.keys(primes).length;\n        const dominantPrime = Object.entries(primes).sort(([, a], [, b])=>b - a)[0];\n        // Mathematical analysis-based responses\n        if (magnitude > 1000) {\n            return \"I detect strong mathematical patterns in your message. The prime factorization suggests complex semantic content. How can I help you explore this further?\";\n        } else if (magnitude > 500) {\n            return \"I'm analyzing the mathematical structure of your input. The prime resonance indicates meaningful content. What would you like to discuss?\";\n        } else if (primeCount > 5) {\n            return \"I notice rich mathematical diversity in the prime factors. This suggests multifaceted meaning. Tell me more about what interests you.\";\n        } else if (dominantPrime && parseInt(dominantPrime[0]) > 100) {\n            return `The dominant prime factor ${dominantPrime[0]} suggests sophisticated semantic content. I'm ready to engage with your ideas.`;\n        }\n        // Contextual responses based on conversation state\n        const conversationLength = this.humanUser.conversationState.turnCount;\n        if (conversationLength === 1) {\n            return \"Welcome! I'm PrimeLM, processing your input through mathematical prime factorization. What would you like to explore together?\";\n        } else if (conversationLength < 5) {\n            return \"I'm building our conversational context through mathematical analysis. What aspects would you like to delve deeper into?\";\n        }\n        // Adaptive responses based on mathematical properties\n        const responses = [\n            \"I'm processing the mathematical relationships in your message. Could you elaborate on what interests you most?\",\n            \"The prime factorization reveals interesting patterns. What specific aspects would you like to explore?\",\n            \"I'm analyzing the semantic-mathematical bridge in your input. How can I assist you further?\",\n            \"The mathematical coherence suggests meaningful content. What would you like to focus on?\",\n            \"I'm translating your input through prime mathematics. What direction shall we take our conversation?\"\n        ];\n        return responses[Math.floor(magnitude) % responses.length];\n    }\n    /**\n   * PHASE 3: Enhance response with emotional intelligence\n   */ enhanceResponseWithEmotionalIntelligence(response, emotionalResponse, emotionalContext) {\n        console.log(' Enhancing response with emotional intelligence...');\n        console.log('Emotional strategy:', emotionalResponse.empathyStrategy);\n        console.log('Support level:', emotionalResponse.supportLevel);\n        console.log('Tonal adjustments:', emotionalResponse.tonalAdjustments);\n        let enhancedResponse = response;\n        // Apply tonal adjustments based on emotional context\n        const { warmth, formality, enthusiasm, patience } = emotionalResponse.tonalAdjustments;\n        // High warmth: Add empathetic phrases\n        if (warmth > 0.7) {\n            if (!enhancedResponse.includes('understand') && !enhancedResponse.includes('feel')) {\n                enhancedResponse = `I understand how you feel. ${enhancedResponse}`;\n            }\n        }\n        // Low formality: Make more casual\n        if (formality < 0.4) {\n            enhancedResponse = enhancedResponse.replace(/\\. /g, '! ');\n        }\n        // High enthusiasm: Add excitement\n        if (enthusiasm > 0.7) {\n            if (!enhancedResponse.includes('!')) {\n                enhancedResponse = enhancedResponse.replace(/\\.$/, '!');\n            }\n        }\n        // High patience: Add reassuring language\n        if (patience > 0.8) {\n            if (emotionalContext.supportNeeded === 'high') {\n                enhancedResponse += ' Take your time, and let me know if you need anything else.';\n            }\n        }\n        // Apply empathy strategy enhancements\n        switch(emotionalResponse.empathyStrategy){\n            case 'emotional_validation':\n                if (!enhancedResponse.includes('valid') && !enhancedResponse.includes('understand')) {\n                    enhancedResponse = `Your feelings are completely valid. ${enhancedResponse}`;\n                }\n                break;\n            case 'reassurance_and_safety':\n                if (emotionalContext.userEmotion.primary === 'fear' || emotionalContext.userEmotion.primary === 'anxiety') {\n                    enhancedResponse += ' You\\'re safe here to share whatever you\\'re feeling.';\n                }\n                break;\n            case 'gentle_encouragement':\n                if (!enhancedResponse.includes('great') && !enhancedResponse.includes('wonderful')) {\n                    enhancedResponse = `You\\'re doing great by sharing this. ${enhancedResponse}`;\n                }\n                break;\n        }\n        // Store enhanced response in episodic memory\n        this.episodicMemoryLayer.storeEpisode('conversation', {\n            summary: `Bot responded: \"${enhancedResponse}\"`,\n            details: {\n                originalResponse: response,\n                emotionalEnhancements: {\n                    strategy: emotionalResponse.empathyStrategy,\n                    tonalAdjustments: emotionalResponse.tonalAdjustments\n                }\n            },\n            participants: [\n                'chatbot',\n                'human'\n            ],\n            context: 'response_generation'\n        }, emotionalResponse.responseEmotion, 0.6 // Moderate importance for bot responses\n        );\n        console.log(' Enhanced response:', enhancedResponse);\n        return enhancedResponse;\n    }\n    getDebugInfo() {\n        return {\n            humanUser: {\n                identity: this.humanUser.identity,\n                conversationState: {\n                    ...this.humanUser.conversationState,\n                    primeCount: Object.keys(this.humanUser.conversationState.primeFactors).length\n                }\n            },\n            chatbotUser: {\n                identity: this.chatbotUser.identity,\n                conversationState: {\n                    ...this.chatbotUser.conversationState,\n                    primeCount: Object.keys(this.chatbotUser.conversationState.primeFactors).length\n                }\n            },\n            coherence: _prime_math__WEBPACK_IMPORTED_MODULE_3__.PrimeMath.calculateCoherence(this.humanUser.conversationState.primeFactors, this.chatbotUser.conversationState.primeFactors),\n            episodicMemory: {\n                totalEpisodes: this.episodicMemoryLayer.getMemoryStats().totalEpisodes,\n                personalityTraits: this.episodicMemoryLayer.getPersonalityInsights().traits\n            }\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLEdBQUdELGFBQWE7Z0JBQ3RFRSxtQkFBbUIsSUFBSSxDQUFDbk8sbUJBQW1CLENBQUNvTyxzQkFBc0IsR0FBR3hQLE1BQU07WUFDN0U7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvbGliL2NvcmUvcHJpbWVsbS1tb2RlbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGlwZWxpbmUsIFBpcGVsaW5lIH0gZnJvbSAnQHhlbm92YS90cmFuc2Zvcm1lcnMnO1xuaW1wb3J0IHsgS25vd2xlZGdlQm9vdHN0cmFwLCBLbm93bGVkZ2VCYXNlIH0gZnJvbSAnLi4vc2VtYW50aWMva25vd2xlZGdlLWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBQcmltZVJlc29uYW5jZUVuZ2luZSwgUHJpbWVSZXNvbmFuY2VSZXN1bHQgfSBmcm9tICcuL3ByaW1lLXJlc29uYW5jZSc7XG5pbXBvcnQgeyBQcmltZU1hdGggfSBmcm9tICcuL3ByaW1lLW1hdGgnO1xuaW1wb3J0IHsgU2VtYW50aWNMYXllciwgU2VtYW50aWNDb250ZXh0IH0gZnJvbSAnLi4vc2VtYW50aWMvc2VtYW50aWMtbGF5ZXInO1xuaW1wb3J0IHsgUHJhZ21hdGljTGF5ZXIsIENvbnZlcnNhdGlvbkNvbnRleHQgfSBmcm9tICcuLi9jb252ZXJzYXRpb24vcHJhZ21hdGljLWxheWVyJztcbmltcG9ydCB7IFNjaGVtYVZvY2FidWxhcnkgfSBmcm9tICcuLi9zZW1hbnRpYy9zY2hlbWEtdm9jYWJ1bGFyeSc7XG5pbXBvcnQgeyBEaXNjb3Vyc2VMYXllciB9IGZyb20gJy4uL2NvbnZlcnNhdGlvbi9kaXNjb3Vyc2UtbGF5ZXInO1xuaW1wb3J0IHsgR2VuZXJhdGl2ZUxheWVyLCBHZW5lcmF0aW9uQ29udGV4dCB9IGZyb20gJy4uL2NvbnZlcnNhdGlvbi9nZW5lcmF0aXZlLWxheWVyJztcbmltcG9ydCB7IENvbnZlcnNhdGlvblN0YXRlTWFuYWdlciwgQ29udmVyc2F0aW9uVHVybiB9IGZyb20gJy4uL2NvbnZlcnNhdGlvbi9jb252ZXJzYXRpb24tc3RhdGUnO1xuaW1wb3J0IHsgR3JhY2VmdWxFcnJvckhhbmRsZXIsIGNyZWF0ZUVycm9yQ29udGV4dCwgc2FmZUFzeW5jIH0gZnJvbSAnLi4vc3lzdGVtL2Vycm9yLWhhbmRsaW5nJztcbmltcG9ydCB7IEVwaXNvZGljTWVtb3J5TGF5ZXIgfSBmcm9tICcuLi9tZW1vcnkvZXBpc29kaWMtbWVtb3J5JztcbmltcG9ydCB7IEVtb3Rpb25hbEludGVsbGlnZW5jZUxheWVyIH0gZnJvbSAnLi4vbWVtb3J5L2Vtb3Rpb25hbC1pbnRlbGxpZ2VuY2UnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09SRSBNT0RFTCBJTlRFUkZBQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIElkZW50aXR5TW9kZWwge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6ICdodW1hbicgfCAnY2hhdGJvdCc7XG4gIGVtYmVkZGluZ3M6IG51bWJlcltdO1xuICBwcmltZUZhY3RvcnM6IFJlY29yZDxudW1iZXIsIG51bWJlcj47XG4gIHBlcnNvbmFsaXR5OiB7XG4gICAgdHJhaXRzOiBzdHJpbmdbXTtcbiAgICBjb21tdW5pY2F0aW9uU3R5bGU6IHN0cmluZztcbiAgICBpbnRlcmVzdHM6IHN0cmluZ1tdO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJNb2RlbCB7XG4gIGlkZW50aXR5OiBJZGVudGl0eU1vZGVsO1xuICBjb252ZXJzYXRpb25TdGF0ZToge1xuICAgIGVtYmVkZGluZ3M6IG51bWJlcltdO1xuICAgIHByaW1lRmFjdG9yczogUmVjb3JkPG51bWJlciwgbnVtYmVyPjtcbiAgICBjb250ZXh0OiBzdHJpbmdbXTtcbiAgICB0dXJuQ291bnQ6IG51bWJlcjtcbiAgfTtcbiAgcHJlZmVyZW5jZXM6IHtcbiAgICB0b3BpY3M6IHN0cmluZ1tdO1xuICAgIHJlc3BvbnNlTGVuZ3RoOiAnc2hvcnQnIHwgJ21lZGl1bScgfCAnbG9uZyc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkaW5nc01vZGVsIHtcbiAgdm9jYWJ1bGFyeTogTWFwPHN0cmluZywgbnVtYmVyW10+O1xuICBjb25jZXB0czogTWFwPHN0cmluZywgbnVtYmVyW10+O1xuICByZWxhdGlvbnNoaXBzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XG59XG5cblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUFJJTUUgQ09SRSBJTVBMRU1FTlRBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFByaW1lQ29yZSB7XG4gIHByaXZhdGUgZW1iZWRkaW5nUGlwZWxpbmU6IGFueSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBrbm93bGVkZ2VCYXNlOiBLbm93bGVkZ2VCYXNlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2VtYW50aWNMYXllcjogU2VtYW50aWNMYXllcjtcbiAgcHJpdmF0ZSBwcmFnbWF0aWNMYXllcjogUHJhZ21hdGljTGF5ZXI7XG4gIHByaXZhdGUgc2NoZW1hVm9jYWJ1bGFyeTogU2NoZW1hVm9jYWJ1bGFyeTtcbiAgcHJpdmF0ZSBkaXNjb3Vyc2VMYXllcjogRGlzY291cnNlTGF5ZXI7XG4gIHByaXZhdGUgZ2VuZXJhdGl2ZUxheWVyOiBHZW5lcmF0aXZlTGF5ZXI7XG4gIHByaXZhdGUgZXBpc29kaWNNZW1vcnlMYXllcjogRXBpc29kaWNNZW1vcnlMYXllcjtcbiAgcHJpdmF0ZSBlbW90aW9uYWxJbnRlbGxpZ2VuY2VMYXllcjogRW1vdGlvbmFsSW50ZWxsaWdlbmNlTGF5ZXI7XG4gIFxuICBodW1hblVzZXI6IFVzZXJNb2RlbDtcbiAgY2hhdGJvdFVzZXI6IFVzZXJNb2RlbDtcbiAgZW1iZWRkaW5nc01vZGVsOiBFbWJlZGRpbmdzTW9kZWw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBodW1hbiB1c2VyXG4gICAgdGhpcy5odW1hblVzZXIgPSB7XG4gICAgICBpZGVudGl0eToge1xuICAgICAgICBpZDogJ2h1bWFuLTAwMScsXG4gICAgICAgIG5hbWU6ICdIdW1hbicsXG4gICAgICAgIHR5cGU6ICdodW1hbicsXG4gICAgICAgIGVtYmVkZGluZ3M6IFtdLFxuICAgICAgICBwcmltZUZhY3RvcnM6IHt9LFxuICAgICAgICBwZXJzb25hbGl0eToge1xuICAgICAgICAgIHRyYWl0czogWydjdXJpb3VzJywgJ2NvbnZlcnNhdGlvbmFsJ10sXG4gICAgICAgICAgY29tbXVuaWNhdGlvblN0eWxlOiAnZGlyZWN0JyxcbiAgICAgICAgICBpbnRlcmVzdHM6IFtdXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb252ZXJzYXRpb25TdGF0ZToge1xuICAgICAgICBlbWJlZGRpbmdzOiBbXSxcbiAgICAgICAgcHJpbWVGYWN0b3JzOiB7fSxcbiAgICAgICAgY29udGV4dDogW10sXG4gICAgICAgIHR1cm5Db3VudDogMFxuICAgICAgfSxcbiAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgIHRvcGljczogW10sXG4gICAgICAgIHJlc3BvbnNlTGVuZ3RoOiAnbWVkaXVtJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBJbml0aWFsaXplIGNoYXRib3QgdXNlclxuICAgIHRoaXMuY2hhdGJvdFVzZXIgPSB7XG4gICAgICBpZGVudGl0eToge1xuICAgICAgICBpZDogJ2NoYXRib3QtMDAxJyxcbiAgICAgICAgbmFtZTogJ1ByaW1lQm90JyxcbiAgICAgICAgdHlwZTogJ2NoYXRib3QnLFxuICAgICAgICBlbWJlZGRpbmdzOiBbXSxcbiAgICAgICAgcHJpbWVGYWN0b3JzOiB7fSxcbiAgICAgICAgcGVyc29uYWxpdHk6IHtcbiAgICAgICAgICB0cmFpdHM6IFsnaGVscGZ1bCcsICdhbmFseXRpY2FsJywgJ21hdGhlbWF0aWNhbCddLFxuICAgICAgICAgIGNvbW11bmljYXRpb25TdHlsZTogJ3Rob3VnaHRmdWwnLFxuICAgICAgICAgIGludGVyZXN0czogWydtYXRoZW1hdGljcycsICdjb252ZXJzYXRpb24nLCAnbGVhcm5pbmcnXVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udmVyc2F0aW9uU3RhdGU6IHtcbiAgICAgICAgZW1iZWRkaW5nczogW10sXG4gICAgICAgIHByaW1lRmFjdG9yczoge30sXG4gICAgICAgIGNvbnRleHQ6IFtdLFxuICAgICAgICB0dXJuQ291bnQ6IDBcbiAgICAgIH0sXG4gICAgICBwcmVmZXJlbmNlczoge1xuICAgICAgICB0b3BpY3M6IFsnbWF0aGVtYXRpY3MnLCAncHJpbWUgbnVtYmVycycsICdjb252ZXJzYXRpb24nXSxcbiAgICAgICAgcmVzcG9uc2VMZW5ndGg6ICdtZWRpdW0nXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEluaXRpYWxpemUgZW1iZWRkaW5ncyBtb2RlbFxuICAgIHRoaXMuZW1iZWRkaW5nc01vZGVsID0ge1xuICAgICAgdm9jYWJ1bGFyeTogbmV3IE1hcCgpLFxuICAgICAgY29uY2VwdHM6IG5ldyBNYXAoKSxcbiAgICAgIHJlbGF0aW9uc2hpcHM6IG5ldyBNYXAoKVxuICAgIH07XG5cbiAgICAvLyBJbml0aWFsaXplIHNlbWFudGljIGxheWVyXG4gICAgdGhpcy5zZW1hbnRpY0xheWVyID0gbmV3IFNlbWFudGljTGF5ZXIoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHByYWdtYXRpYyBsYXllclxuICAgIHRoaXMucHJhZ21hdGljTGF5ZXIgPSBuZXcgUHJhZ21hdGljTGF5ZXIoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHNjaGVtYSB2b2NhYnVsYXJ5XG4gICAgdGhpcy5zY2hlbWFWb2NhYnVsYXJ5ID0gbmV3IFNjaGVtYVZvY2FidWxhcnkoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGRpc2NvdXJzZSBsYXllclxuICAgIHRoaXMuZGlzY291cnNlTGF5ZXIgPSBuZXcgRGlzY291cnNlTGF5ZXIodGhpcy5zY2hlbWFWb2NhYnVsYXJ5KTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGdlbmVyYXRpdmUgbGF5ZXJcbiAgICB0aGlzLmdlbmVyYXRpdmVMYXllciA9IG5ldyBHZW5lcmF0aXZlTGF5ZXIodGhpcy5zY2hlbWFWb2NhYnVsYXJ5KTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIFBoYXNlIDMgbGF5ZXJzXG4gICAgdGhpcy5lcGlzb2RpY01lbW9yeUxheWVyID0gbmV3IEVwaXNvZGljTWVtb3J5TGF5ZXIoKTtcbiAgICB0aGlzLmVtb3Rpb25hbEludGVsbGlnZW5jZUxheWVyID0gbmV3IEVtb3Rpb25hbEludGVsbGlnZW5jZUxheWVyKCk7XG5cbiAgICAvLyBFbWJlZGRpbmdzIG1vZGVsIHN0YXJ0cyBlbXB0eSAtIG5vIGhhcmRjb2RlZCBkYXRhXG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+agCBJbml0aWFsaXppbmcgUHJpbWVMTSBDb3JlLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgZW1iZWRkaW5nIHBpcGVsaW5lXG4gICAgICB0aGlzLmVtYmVkZGluZ1BpcGVsaW5lID0gYXdhaXQgcGlwZWxpbmUoXG4gICAgICAgICdmZWF0dXJlLWV4dHJhY3Rpb24nLFxuICAgICAgICAnWGVub3ZhL2FsbC1NaW5pTE0tTDYtdjInXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBCb290c3RyYXAgY2hhdGJvdCBrbm93bGVkZ2VcbiAgICAgIGF3YWl0IHRoaXMuYm9vdHN0cmFwQ2hhdGJvdEtub3dsZWRnZSgpO1xuICAgICAgXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBQcmltZUxNIENvcmUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBpbml0aWFsaXplIFByaW1lTE0gQ29yZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGJvb3RzdHJhcENoYXRib3RLbm93bGVkZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmVtYmVkZGluZ1BpcGVsaW5lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtYmVkZGluZyBwaXBlbGluZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qga25vd2xlZGdlQm9vdHN0cmFwID0gbmV3IEtub3dsZWRnZUJvb3RzdHJhcCh0aGlzLmVtYmVkZGluZ1BpcGVsaW5lKTtcbiAgICAgIHRoaXMua25vd2xlZGdlQmFzZSA9IGF3YWl0IGtub3dsZWRnZUJvb3RzdHJhcC5ib290c3RyYXBGcm9tVG9rZW5pemVyKCk7XG4gICAgICBcbiAgICAgIC8vIFBvcHVsYXRlIGVtYmVkZGluZ3MgbW9kZWwgd2l0aCBib290c3RyYXBwZWQga25vd2xlZGdlXG4gICAgICB0aGlzLmVtYmVkZGluZ3NNb2RlbC52b2NhYnVsYXJ5ID0gdGhpcy5rbm93bGVkZ2VCYXNlLmNvbmNlcHRFbWJlZGRpbmdzO1xuICAgICAgdGhpcy5lbWJlZGRpbmdzTW9kZWwuY29uY2VwdHMgPSB0aGlzLmtub3dsZWRnZUJhc2UuY29uY2VwdEVtYmVkZGluZ3M7XG4gICAgICB0aGlzLmVtYmVkZGluZ3NNb2RlbC5yZWxhdGlvbnNoaXBzID0gdGhpcy5rbm93bGVkZ2VCYXNlLnNlbWFudGljQ2x1c3RlcnM7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBjaGF0Ym90IGlkZW50aXR5IHdpdGggYWNjdW11bGF0ZWQga25vd2xlZGdlXG4gICAgICB0aGlzLnBvcHVsYXRlQ2hhdGJvdElkZW50aXR5KCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEtub3dsZWRnZSBib290c3RyYXAgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgS25vd2xlZGdlIGJvb3RzdHJhcCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcG9wdWxhdGVDaGF0Ym90SWRlbnRpdHkoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmtub3dsZWRnZUJhc2UpIHJldHVybjtcbiAgICBcbiAgICAvLyBBY2N1bXVsYXRlIHByaW1lIGZhY3RvcnMgZnJvbSBhbGwgdm9jYWJ1bGFyeVxuICAgIGNvbnN0IGlkZW50aXR5UHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgY29uc3QgYWxsRW1iZWRkaW5nczogbnVtYmVyW11bXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3Qgdm9jYWJ1bGFyeUVudHJ5IG9mIHRoaXMua25vd2xlZGdlQmFzZS52b2NhYnVsYXJ5LnZhbHVlcygpKSB7XG4gICAgICAvLyBBZGQgcHJpbWUgZmFjdG9ycyB0byBjaGF0Ym90IGlkZW50aXR5XG4gICAgICBPYmplY3QuZW50cmllcyh2b2NhYnVsYXJ5RW50cnkucHJpbWVGYWN0b3JzKS5mb3JFYWNoKChbcHJpbWUsIHdlaWdodF0pID0+IHtcbiAgICAgICAgY29uc3QgcHJpbWVOdW0gPSBwYXJzZUludChwcmltZSk7XG4gICAgICAgIGlkZW50aXR5UHJpbWVzW3ByaW1lTnVtXSA9IChpZGVudGl0eVByaW1lc1twcmltZU51bV0gfHwgMCkgKyB3ZWlnaHQ7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgYWxsRW1iZWRkaW5ncy5wdXNoKHZvY2FidWxhcnlFbnRyeS5lbWJlZGRpbmcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgY2VudHJvaWQgZW1iZWRkaW5nIGZvciBjaGF0Ym90IGlkZW50aXR5XG4gICAgaWYgKGFsbEVtYmVkZGluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2VudHJvaWRFbWJlZGRpbmcgPSB0aGlzLmNhbGN1bGF0ZUNlbnRyb2lkRW1iZWRkaW5nKGFsbEVtYmVkZGluZ3MpO1xuICAgICAgdGhpcy5jaGF0Ym90VXNlci5pZGVudGl0eS5lbWJlZGRpbmdzID0gY2VudHJvaWRFbWJlZGRpbmc7XG4gICAgICB0aGlzLmNoYXRib3RVc2VyLmlkZW50aXR5LnByaW1lRmFjdG9ycyA9IGlkZW50aXR5UHJpbWVzO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQ2VudHJvaWRFbWJlZGRpbmcoZW1iZWRkaW5nczogbnVtYmVyW11bXSk6IG51bWJlcltdIHtcbiAgICBpZiAoZW1iZWRkaW5ncy5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQXJyYXkoMzg0KS5maWxsKDApO1xuICAgIFxuICAgIGNvbnN0IGNlbnRyb2lkID0gbmV3IEFycmF5KGVtYmVkZGluZ3NbMF0ubGVuZ3RoKS5maWxsKDApO1xuICAgIFxuICAgIGVtYmVkZGluZ3MuZm9yRWFjaChlbWJlZGRpbmcgPT4ge1xuICAgICAgZW1iZWRkaW5nLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICBjZW50cm9pZFtpbmRleF0gKz0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gY2VudHJvaWQubWFwKHZhbHVlID0+IHZhbHVlIC8gZW1iZWRkaW5ncy5sZW5ndGgpO1xuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc0NvbnZlcnNhdGlvbihpbnB1dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCB8fCAhdGhpcy5lbWJlZGRpbmdQaXBlbGluZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmltZUNvcmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCflKwgUHJvY2Vzc2luZyBpbnB1dDogXCIke2lucHV0fVwiYCk7XG5cbiAgICAvLyAxLiBHZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciBpbnB1dFxuICAgIGNvbnN0IGlucHV0RW1iZWRkaW5ncyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVFbWJlZGRpbmdzKGlucHV0KTtcbiAgICBcbiAgICAvLyAyLiBDb252ZXJ0IHRvIHByaW1lcyB0aHJvdWdoIGh1bWFuIHVzZXIgbW9kZWxcbiAgICBjb25zdCBpbnB1dFByaW1lcyA9IFByaW1lTWF0aC5lbWJlZGRpbmdzVG9QcmltZXMoaW5wdXRFbWJlZGRpbmdzKTtcbiAgICBcbiAgICAvLyAzLiBVcGRhdGUgaHVtYW4gdXNlciBzdGF0ZVxuICAgIHRoaXMudXBkYXRlVXNlclN0YXRlKHRoaXMuaHVtYW5Vc2VyLCBpbnB1dCwgaW5wdXRFbWJlZGRpbmdzLCBpbnB1dFByaW1lcyk7XG4gICAgXG4gICAgLy8gNC4gR2VuZXJhdGUgcmVzcG9uc2UgdGhyb3VnaCBtYXRoZW1hdGljYWwgdHJhbnNsYXRpb25cbiAgICBjb25zdCByZXNwb25zZVByaW1lcyA9IHRoaXMuZ2VuZXJhdGVSZXNwb25zZVByaW1lcyhpbnB1dFByaW1lcyk7XG4gICAgXG4gICAgLy8gNS4gQ29udmVydCByZXNwb25zZSBwcmltZXMgdG8gdGV4dCB0aHJvdWdoIGNoYXRib3QgdXNlciBtb2RlbFxuICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVSZXNwb25zZVRleHQocmVzcG9uc2VQcmltZXMpO1xuICAgIFxuICAgIC8vIDYuIFVwZGF0ZSBjaGF0Ym90IHVzZXIgc3RhdGVcbiAgICBjb25zdCByZXNwb25zZUVtYmVkZGluZ3MgPSBhd2FpdCB0aGlzLmdlbmVyYXRlRW1iZWRkaW5ncyhyZXNwb25zZVRleHQpO1xuICAgIHRoaXMudXBkYXRlVXNlclN0YXRlKHRoaXMuY2hhdGJvdFVzZXIsIHJlc3BvbnNlVGV4dCwgcmVzcG9uc2VFbWJlZGRpbmdzLCByZXNwb25zZVByaW1lcyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYOKchSBHZW5lcmF0ZWQgcmVzcG9uc2U6IFwiJHtyZXNwb25zZVRleHR9XCJgKTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2VUZXh0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUVtYmVkZGluZ3ModGV4dDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghdGhpcy5lbWJlZGRpbmdQaXBlbGluZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWJlZGRpbmcgcGlwZWxpbmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZW1iZWRkaW5nUGlwZWxpbmUodGV4dCk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20ocmVzdWx0LmRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVVc2VyU3RhdGUodXNlcjogVXNlck1vZGVsLCB0ZXh0OiBzdHJpbmcsIGVtYmVkZGluZ3M6IG51bWJlcltdLCBwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj4pOiB2b2lkIHtcbiAgICB1c2VyLmNvbnZlcnNhdGlvblN0YXRlLmVtYmVkZGluZ3MgPSBlbWJlZGRpbmdzO1xuICAgIHVzZXIuY29udmVyc2F0aW9uU3RhdGUucHJpbWVGYWN0b3JzID0gcHJpbWVzO1xuICAgIHVzZXIuY29udmVyc2F0aW9uU3RhdGUuY29udGV4dC5wdXNoKHRleHQpO1xuICAgIHVzZXIuY29udmVyc2F0aW9uU3RhdGUudHVybkNvdW50Kys7XG4gICAgXG4gICAgLy8gS2VlcCBjb250ZXh0IG1hbmFnZWFibGVcbiAgICBpZiAodXNlci5jb252ZXJzYXRpb25TdGF0ZS5jb250ZXh0Lmxlbmd0aCA+IDEwKSB7XG4gICAgICB1c2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQgPSB1c2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQuc2xpY2UoLTEwKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGlkZW50aXR5IGVtYmVkZGluZ3MgKGV2b2x2aW5nIHJlcHJlc2VudGF0aW9uKVxuICAgIGlmICh1c2VyLmlkZW50aXR5LmVtYmVkZGluZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB1c2VyLmlkZW50aXR5LmVtYmVkZGluZ3MgPSBbLi4uZW1iZWRkaW5nc107XG4gICAgICB1c2VyLmlkZW50aXR5LnByaW1lRmFjdG9ycyA9IHsgLi4ucHJpbWVzIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJsZW5kIHdpdGggZXhpc3RpbmcgaWRlbnRpdHlcbiAgICAgIHVzZXIuaWRlbnRpdHkuZW1iZWRkaW5ncyA9IHVzZXIuaWRlbnRpdHkuZW1iZWRkaW5ncy5tYXAoKHZhbCwgaWR4KSA9PiBcbiAgICAgICAgdmFsICogMC45ICsgZW1iZWRkaW5nc1tpZHhdICogMC4xXG4gICAgICApO1xuICAgICAgdXNlci5pZGVudGl0eS5wcmltZUZhY3RvcnMgPSBQcmltZU1hdGguY29tYmluZUZhY3RvcnMoXG4gICAgICAgIHVzZXIuaWRlbnRpdHkucHJpbWVGYWN0b3JzLCBcbiAgICAgICAgcHJpbWVzLCBcbiAgICAgICAgMC45XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgZW1iZWRkaW5ncyBtb2RlbCB3aXRoIHJlYWwgY29uY2VwdHMgZnJvbSBjb252ZXJzYXRpb25cbiAgICB0aGlzLnVwZGF0ZUVtYmVkZGluZ3NNb2RlbCh0ZXh0LCBlbWJlZGRpbmdzKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRW1iZWRkaW5nc01vZGVsKHRleHQ6IHN0cmluZywgZW1iZWRkaW5nczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICAvLyBFeHRyYWN0IGtleSB3b3Jkcy9jb25jZXB0cyBmcm9tIHRleHRcbiAgICBjb25zdCB3b3JkcyA9IHRleHQudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxXKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMik7XG4gICAgXG4gICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgIC8vIEFkZCB0byB2b2NhYnVsYXJ5IHdpdGggcmVhbCBlbWJlZGRpbmdzXG4gICAgICB0aGlzLmVtYmVkZGluZ3NNb2RlbC52b2NhYnVsYXJ5LnNldCh3b3JkLCBbLi4uZW1iZWRkaW5nc10pO1xuICAgICAgXG4gICAgICAvLyBBZGQgYXMgY29uY2VwdCBpZiBpdCdzIHNpZ25pZmljYW50XG4gICAgICBpZiAod29yZC5sZW5ndGggPiA0KSB7XG4gICAgICAgIHRoaXMuZW1iZWRkaW5nc01vZGVsLmNvbmNlcHRzLnNldCh3b3JkLCBbLi4uZW1iZWRkaW5nc10pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEJ1aWxkIHJlbGF0aW9uc2hpcHMgYmV0d2VlbiBjb25jZXB0c1xuICAgIGlmICh3b3Jkcy5sZW5ndGggPiAxKSB7XG4gICAgICB3b3Jkcy5mb3JFYWNoKCh3b3JkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCByZWxhdGVkV29yZHMgPSB3b3Jkcy5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KTtcbiAgICAgICAgdGhpcy5lbWJlZGRpbmdzTW9kZWwucmVsYXRpb25zaGlwcy5zZXQod29yZCwgcmVsYXRlZFdvcmRzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZXNwb25zZVByaW1lcyhpbnB1dFByaW1lczogUmVjb3JkPG51bWJlciwgbnVtYmVyPik6IFJlY29yZDxudW1iZXIsIG51bWJlcj4ge1xuICAgIC8vIENhbGN1bGF0ZSBjb2hlcmVuY2Ugd2l0aCBjaGF0Ym90J3MgY3VycmVudCBzdGF0ZVxuICAgIGNvbnN0IGNvaGVyZW5jZSA9IFByaW1lTWF0aC5jYWxjdWxhdGVDb2hlcmVuY2UoXG4gICAgICBpbnB1dFByaW1lcywgXG4gICAgICB0aGlzLmNoYXRib3RVc2VyLmNvbnZlcnNhdGlvblN0YXRlLnByaW1lRmFjdG9yc1xuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfp64gQ29oZXJlbmNlIHNjb3JlOiAkeyhjb2hlcmVuY2UgKiAxMDApLnRvRml4ZWQoMSl9JWApO1xuICAgIFxuICAgIGxldCByZXNwb25zZVByaW1lczogUmVjb3JkPG51bWJlciwgbnVtYmVyPjtcbiAgICBcbiAgICBpZiAoY29oZXJlbmNlID4gMC4xKSB7XG4gICAgICAvLyBIaWdoIGNvaGVyZW5jZTogYW1wbGlmeSByZXNvbmFuY2VcbiAgICAgIHJlc3BvbnNlUHJpbWVzID0gdGhpcy5hbXBsaWZ5UmVzb25hbmNlKGlucHV0UHJpbWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG93IGNvaGVyZW5jZTogY3JlYXRlIGhhcm1vbmljIHJlc3BvbnNlXG4gICAgICByZXNwb25zZVByaW1lcyA9IHRoaXMuY3JlYXRlSGFybW9uaWMoaW5wdXRQcmltZXMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgY2hhdGJvdCBwZXJzb25hbGl0eSBmYWN0b3JzXG4gICAgcmVzcG9uc2VQcmltZXMgPSB0aGlzLmFkZFBlcnNvbmFsaXR5RmFjdG9ycyhyZXNwb25zZVByaW1lcyk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlUHJpbWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBhbXBsaWZ5UmVzb25hbmNlKGlucHV0UHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiB7XG4gICAgY29uc3QgYW1wbGlmaWVkOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgLy8gQW1wbGlmeSBleGlzdGluZyBmYWN0b3JzXG4gICAgT2JqZWN0LmVudHJpZXMoaW5wdXRQcmltZXMpLmZvckVhY2goKFtwcmltZVN0ciwgd2VpZ2h0XSkgPT4ge1xuICAgICAgY29uc3QgcHJpbWUgPSBwYXJzZUludChwcmltZVN0cik7XG4gICAgICBhbXBsaWZpZWRbcHJpbWVdID0gTWF0aC5mbG9vcih3ZWlnaHQgKiAxLjMpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCByZXNvbmFudCBoYXJtb25pY3NcbiAgICBjb25zdCBwcmltZXMgPSBQcmltZU1hdGguZ2VuZXJhdGVQcmltZXMoMTAwKTtcbiAgICBhbXBsaWZpZWRbcHJpbWVzWzEwXV0gPSA4OyAvLyBVbmRlcnN0YW5kaW5nXG4gICAgYW1wbGlmaWVkW3ByaW1lc1sxNV1dID0gNjsgLy8gUmVzcG9uc2VcbiAgICBcbiAgICByZXR1cm4gYW1wbGlmaWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVIYXJtb25pYyhpbnB1dFByaW1lczogUmVjb3JkPG51bWJlciwgbnVtYmVyPik6IFJlY29yZDxudW1iZXIsIG51bWJlcj4ge1xuICAgIGNvbnN0IGhhcm1vbmljOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgLy8gQ3JlYXRlIGhhcm1vbmljIHJlc3BvbnNlIGZyb20gdG9wIGlucHV0IGZhY3RvcnNcbiAgICBjb25zdCB0b3BGYWN0b3JzID0gT2JqZWN0LmVudHJpZXMoaW5wdXRQcmltZXMpXG4gICAgICAuc29ydCgoWyxhXSwgWyxiXSkgPT4gYiAtIGEpXG4gICAgICAuc2xpY2UoMCwgNSk7XG4gICAgXG4gICAgdG9wRmFjdG9ycy5mb3JFYWNoKChbcHJpbWVTdHIsIHdlaWdodF0pID0+IHtcbiAgICAgIGNvbnN0IHByaW1lID0gcGFyc2VJbnQocHJpbWVTdHIpO1xuICAgICAgY29uc3QgaGFybW9uaWNQcmltZSA9IHByaW1lICsgMjtcbiAgICAgIGhhcm1vbmljW2hhcm1vbmljUHJpbWVdID0gTWF0aC5mbG9vcih3ZWlnaHQgKiAwLjcpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCBiYXNlIHJlc3BvbnNlIGZhY3RvcnNcbiAgICBjb25zdCBwcmltZXMgPSBQcmltZU1hdGguZ2VuZXJhdGVQcmltZXMoNTApO1xuICAgIGhhcm1vbmljW3ByaW1lc1s1XV0gPSAxMDsgLy8gSGVscFxuICAgIGhhcm1vbmljW3ByaW1lc1s4XV0gPSA4OyAgLy8gS25vd2xlZGdlXG4gICAgXG4gICAgcmV0dXJuIGhhcm1vbmljO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRQZXJzb25hbGl0eUZhY3RvcnMocHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiB7XG4gICAgY29uc3QgZW5oYW5jZWQgPSB7IC4uLnByaW1lcyB9O1xuICAgIGNvbnN0IHBlcnNvbmFsaXR5UHJpbWVzID0gUHJpbWVNYXRoLmdlbmVyYXRlUHJpbWVzKDMwKTtcbiAgICBcbiAgICAvLyBBZGQgY2hhdGJvdCBwZXJzb25hbGl0eSB0cmFpdHNcbiAgICBlbmhhbmNlZFtwZXJzb25hbGl0eVByaW1lc1sxMl1dID0gNTsgLy8gSGVscGZ1bFxuICAgIGVuaGFuY2VkW3BlcnNvbmFsaXR5UHJpbWVzWzE4XV0gPSA0OyAvLyBBbmFseXRpY2FsXG4gICAgZW5oYW5jZWRbcGVyc29uYWxpdHlQcmltZXNbMjJdXSA9IDM7IC8vIE1hdGhlbWF0aWNhbFxuICAgIFxuICAgIHJldHVybiBlbmhhbmNlZDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVSZXNwb25zZVRleHQocHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBHZW5lcmF0aW5nIHJlc3BvbnNlIHRleHQgdXNpbmcgUGhhc2UgMzogRnVsbCA4LUxheWVyIEFyY2hpdGVjdHVyZS4uLicpO1xuICAgIGNvbnNvbGUubG9nKCdLbm93bGVkZ2UgYmFzZSBhdmFpbGFibGU6JywgISF0aGlzLmtub3dsZWRnZUJhc2UpO1xuICAgIFxuICAgIGlmICghdGhpcy5rbm93bGVkZ2VCYXNlKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIE5vIGtub3dsZWRnZSBiYXNlIGF2YWlsYWJsZScpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBrbm93bGVkZ2UgYmFzZSBhdmFpbGFibGUgLSBib290c3RyYXAgZmFpbGVkJyk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBtb3N0IHJlY2VudCB1c2VyIGlucHV0IGZvciBhbmFseXNpc1xuICAgIGNvbnN0IGxhc3RVc2VySW5wdXQgPSB0aGlzLmh1bWFuVXNlci5jb252ZXJzYXRpb25TdGF0ZS5jb250ZXh0W3RoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQubGVuZ3RoIC0gMV07XG4gICAgXG4gICAgLy8gMS4gQW5hbHl6ZSBzZW1hbnRpYyBjb250ZXh0XG4gICAgY29uc3Qgc2VtYW50aWNDb250ZXh0ID0gdGhpcy5zZW1hbnRpY0xheWVyLmFuYWx5emVTZW1hbnRpY0NvbnRleHQobGFzdFVzZXJJbnB1dCk7XG4gICAgXG4gICAgLy8gMi4gR2V0IHByYWdtYXRpYyBjb250ZXh0XG4gICAgY29uc3QgcHJhZ21hdGljUmVzcG9uc2VDb250ZXh0ID0gdGhpcy5wcmFnbWF0aWNMYXllci5nZXRDb250ZXh0Rm9yUmVzcG9uc2UoKTtcbiAgICBcbiAgICAvLyBDb252ZXJ0IHRvIENvbnZlcnNhdGlvbkNvbnRleHQgZm9ybWF0IGZvciBjb21wYXRpYmlsaXR5XG4gICAgY29uc3QgcHJhZ21hdGljQ29udGV4dDogQ29udmVyc2F0aW9uQ29udGV4dCA9IHtcbiAgICAgIGN1cnJlbnRUb3BpYzogcHJhZ21hdGljUmVzcG9uc2VDb250ZXh0LmN1cnJlbnRUb3BpYyxcbiAgICAgIGFjdGl2ZUludGVudHM6IHByYWdtYXRpY1Jlc3BvbnNlQ29udGV4dC5hY3RpdmVJbnRlbnRzLFxuICAgICAgZW50aXR5TWVtb3J5OiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHByYWdtYXRpY1Jlc3BvbnNlQ29udGV4dC5yZWxldmFudEVudGl0aWVzKSksXG4gICAgICBjb252ZXJzYXRpb25Hb2FsczogcHJhZ21hdGljUmVzcG9uc2VDb250ZXh0LmNvbnZlcnNhdGlvbkdvYWxzLFxuICAgICAgdXNlclByZWZlcmVuY2VzOiB7fSxcbiAgICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHByYWdtYXRpY1Jlc3BvbnNlQ29udGV4dC5yZWNlbnRIaXN0b3J5XG4gICAgfTtcbiAgICBcbiAgICAvLyAzLiBVcGRhdGUgcHJhZ21hdGljIGxheWVyIHdpdGggY3VycmVudCBpbnB1dFxuICAgIHRoaXMucHJhZ21hdGljTGF5ZXIucHJvY2Vzc1R1cm4oXG4gICAgICAnaHVtYW4nLFxuICAgICAgbGFzdFVzZXJJbnB1dCxcbiAgICAgIHNlbWFudGljQ29udGV4dC5pbnRlbnQsXG4gICAgICBzZW1hbnRpY0NvbnRleHQuZW50aXRpZXMucmVkdWNlKChhY2MsIGVudGl0eSwgaW5kZXgpID0+IHtcbiAgICAgICAgYWNjW2BlbnRpdHlfJHtpbmRleH1gXSA9IGVudGl0eTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pLFxuICAgICAgc2VtYW50aWNDb250ZXh0XG4gICAgKTtcbiAgICBcbiAgICAvLyA0LiBHZXQgdXBkYXRlZCBwcmFnbWF0aWMgY29udGV4dCBhZnRlciBwcm9jZXNzaW5nXG4gICAgY29uc3QgdXBkYXRlZFByYWdtYXRpY0NvbnRleHQgPSB0aGlzLnByYWdtYXRpY0xheWVyLmdldENvbnRleHRGb3JSZXNwb25zZSgpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgdG8gQ29udmVyc2F0aW9uQ29udGV4dCBmb3JtYXQgZm9yIGNvbXBhdGliaWxpdHlcbiAgICBjb25zdCBwcmFnbWF0aWNDb250ZXh0Rm9yR2VuZXJhdGlvbjogQ29udmVyc2F0aW9uQ29udGV4dCA9IHtcbiAgICAgIGN1cnJlbnRUb3BpYzogdXBkYXRlZFByYWdtYXRpY0NvbnRleHQuY3VycmVudFRvcGljLFxuICAgICAgYWN0aXZlSW50ZW50czogdXBkYXRlZFByYWdtYXRpY0NvbnRleHQuYWN0aXZlSW50ZW50cyxcbiAgICAgIGVudGl0eU1lbW9yeTogbmV3IE1hcChPYmplY3QuZW50cmllcyh1cGRhdGVkUHJhZ21hdGljQ29udGV4dC5yZWxldmFudEVudGl0aWVzKSksXG4gICAgICBjb252ZXJzYXRpb25Hb2FsczogdXBkYXRlZFByYWdtYXRpY0NvbnRleHQuY29udmVyc2F0aW9uR29hbHMsXG4gICAgICB1c2VyUHJlZmVyZW5jZXM6IHt9LFxuICAgICAgY29udmVyc2F0aW9uSGlzdG9yeTogdXBkYXRlZFByYWdtYXRpY0NvbnRleHQucmVjZW50SGlzdG9yeVxuICAgIH07XG4gICAgXG4gICAgLy8gNS4gQW5hbHl6ZSBkaXNjb3Vyc2UgY29udGV4dFxuICAgIGNvbnN0IGRpc2NvdXJzZUNvbnRleHQgPSB0aGlzLmRpc2NvdXJzZUxheWVyLmFuYWx5emVEaXNjb3Vyc2VDb250ZXh0KFxuICAgICAgbGFzdFVzZXJJbnB1dCxcbiAgICAgIHNlbWFudGljQ29udGV4dCxcbiAgICAgIHByYWdtYXRpY0NvbnRleHRGb3JHZW5lcmF0aW9uXG4gICAgKTtcbiAgICBcbiAgICAvLyA2LiBQSEFTRSAzOiBBbmFseXplIGVtb3Rpb25hbCBjb250ZXh0XG4gICAgY29uc3QgZW1vdGlvbmFsQ29udGV4dCA9IHRoaXMuZW1vdGlvbmFsSW50ZWxsaWdlbmNlTGF5ZXIuYW5hbHl6ZUVtb3Rpb25hbENvbnRlbnQoXG4gICAgICBsYXN0VXNlcklucHV0LFxuICAgICAge1xuICAgICAgICBjb252ZXJzYXRpb25IaXN0b3J5OiBwcmFnbWF0aWNDb250ZXh0Rm9yR2VuZXJhdGlvbi5jb252ZXJzYXRpb25IaXN0b3J5LFxuICAgICAgICBjdXJyZW50VG9waWM6IHByYWdtYXRpY0NvbnRleHRGb3JHZW5lcmF0aW9uLmN1cnJlbnRUb3BpY1xuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgLy8gNy4gUEhBU0UgMzogU3RvcmUgZXBpc29kaWMgbWVtb3J5XG4gICAgY29uc3QgZXBpc29kZUlkID0gdGhpcy5lcGlzb2RpY01lbW9yeUxheWVyLnN0b3JlRXBpc29kZShcbiAgICAgICdjb252ZXJzYXRpb24nLFxuICAgICAge1xuICAgICAgICBzdW1tYXJ5OiBgVXNlciBzYWlkOiBcIiR7bGFzdFVzZXJJbnB1dH1cImAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBpbnRlbnQ6IHNlbWFudGljQ29udGV4dC5pbnRlbnQsXG4gICAgICAgICAgZW50aXRpZXM6IHNlbWFudGljQ29udGV4dC5lbnRpdGllcyxcbiAgICAgICAgICBlbW90aW9uYWxTdGF0ZTogZW1vdGlvbmFsQ29udGV4dC51c2VyRW1vdGlvblxuICAgICAgICB9LFxuICAgICAgICBwYXJ0aWNpcGFudHM6IFsnaHVtYW4nLCAnY2hhdGJvdCddLFxuICAgICAgICBjb250ZXh0OiBkaXNjb3Vyc2VDb250ZXh0LmNvbnZlcnNhdGlvblBoYXNlIHx8ICdnZW5lcmFsJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdmFsZW5jZTogZW1vdGlvbmFsQ29udGV4dC51c2VyRW1vdGlvbi52YWxlbmNlLFxuICAgICAgICBhcm91c2FsOiBlbW90aW9uYWxDb250ZXh0LnVzZXJFbW90aW9uLmFyb3VzYWwsXG4gICAgICAgIGRvbWluYW5jZTogZW1vdGlvbmFsQ29udGV4dC51c2VyRW1vdGlvbi5kb21pbmFuY2UsXG4gICAgICAgIGVtb3Rpb25zOiBbZW1vdGlvbmFsQ29udGV4dC51c2VyRW1vdGlvbi5wcmltYXJ5LCAuLi5lbW90aW9uYWxDb250ZXh0LnVzZXJFbW90aW9uLnNlY29uZGFyeV1cbiAgICAgIH0sXG4gICAgICBlbW90aW9uYWxDb250ZXh0LmVtcGF0aHlMZXZlbFxuICAgICk7XG4gICAgXG4gICAgLy8gOC4gUEhBU0UgMzogR2VuZXJhdGUgZW1vdGlvbmFsIHJlc3BvbnNlIHN0cmF0ZWd5XG4gICAgY29uc3QgZW1vdGlvbmFsUmVzcG9uc2UgPSB0aGlzLmVtb3Rpb25hbEludGVsbGlnZW5jZUxheWVyLmdlbmVyYXRlRW1vdGlvbmFsUmVzcG9uc2UoXG4gICAgICBlbW90aW9uYWxDb250ZXh0LFxuICAgICAgJycgLy8gV2lsbCBiZSBmaWxsZWQgYWZ0ZXIgZ2VuZXJhdGlvblxuICAgICk7XG4gICAgXG4gICAgLy8gOS4gR2VuZXJhdGUgcmVzcG9uc2UgdXNpbmcgR2VuZXJhdGl2ZSBMYXllciB3aXRoIFBoYXNlIDMgZW5oYW5jZW1lbnRzXG4gICAgY29uc3QgZ2VuZXJhdGlvbkNvbnRleHQ6IEdlbmVyYXRpb25Db250ZXh0ID0ge1xuICAgICAgcmVzcG9uc2VUeXBlOiBkaXNjb3Vyc2VDb250ZXh0LmV4cGVjdGVkUmVzcG9uc2VUeXBlLFxuICAgICAgc2VtYW50aWNDb250ZXh0OiBzZW1hbnRpY0NvbnRleHQsXG4gICAgICBkaXNjb3Vyc2VDb250ZXh0OiBkaXNjb3Vyc2VDb250ZXh0LFxuICAgICAgcHJhZ21hdGljQ29udGV4dDogcHJhZ21hdGljQ29udGV4dEZvckdlbmVyYXRpb24sXG4gICAgICBwcmltZVJlc29uYW5jZTogcHJpbWVzXG4gICAgfTtcbiAgICBcbiAgICBsZXQgZ2VuZXJhdGVkUmVzcG9uc2UgPSB0aGlzLmdlbmVyYXRpdmVMYXllci5nZW5lcmF0ZVJlc3BvbnNlKGdlbmVyYXRpb25Db250ZXh0KTtcbiAgICBcbiAgICAvLyAxMC4gUEhBU0UgMzogRW5oYW5jZSByZXNwb25zZSB3aXRoIGVtb3Rpb25hbCBpbnRlbGxpZ2VuY2VcbiAgICBpZiAoZ2VuZXJhdGVkUmVzcG9uc2UpIHtcbiAgICAgIGdlbmVyYXRlZFJlc3BvbnNlID0gdGhpcy5lbmhhbmNlUmVzcG9uc2VXaXRoRW1vdGlvbmFsSW50ZWxsaWdlbmNlKFxuICAgICAgICBnZW5lcmF0ZWRSZXNwb25zZSxcbiAgICAgICAgZW1vdGlvbmFsUmVzcG9uc2UsXG4gICAgICAgIGVtb3Rpb25hbENvbnRleHRcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIGlmIChnZW5lcmF0ZWRSZXNwb25zZSkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjqggR2VuZXJhdGVkIGR5bmFtaWMgcmVzcG9uc2U6JywgZ2VuZXJhdGVkUmVzcG9uc2UpO1xuICAgICAgcmV0dXJuIGdlbmVyYXRlZFJlc3BvbnNlO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdWb2NhYnVsYXJ5IHNpemU6JywgdGhpcy5rbm93bGVkZ2VCYXNlLnZvY2FidWxhcnkuc2l6ZSk7XG4gICAgY29uc29sZS5sb2coJ1ZvY2FidWxhcnkgcHJpbWVzIGF2YWlsYWJsZTonLCB0aGlzLmtub3dsZWRnZUJhc2Uudm9jYWJ1bGFyeVByaW1lcy5zaXplKTtcblxuICAgIC8vIFVzZSBwcmltZSByZXNvbmFuY2UgZW5naW5lIGZvciBkaXJlY3QgcHJpbWUtdG8tcHJpbWUgY29tcGFyaXNvblxuICAgIGNvbnN0IHJlc29uYW5jZUVuZ2luZSA9IG5ldyBQcmltZVJlc29uYW5jZUVuZ2luZSgpO1xuICAgIFxuICAgIC8vIEZpbmQgd29yZHMgd2l0aCBoaWdoZXN0IG1hdGhlbWF0aWNhbCByZXNvbmFuY2UgdG8gcmVzcG9uc2UgcHJpbWVzXG4gICAgY29uc3QgcmVzb25hbnRXb3JkcyA9IHJlc29uYW5jZUVuZ2luZS5maW5kTW9zdFJlc29uYW50V29yZHMoXG4gICAgICBwcmltZXMsXG4gICAgICB0aGlzLmtub3dsZWRnZUJhc2Uudm9jYWJ1bGFyeVByaW1lcyxcbiAgICAgIDUgLy8gR2V0IG1vcmUgY2FuZGlkYXRlcyBmb3Igc2VtYW50aWMgZW5oYW5jZW1lbnRcbiAgICApO1xuICAgIFxuICAgIC8vIEFwcGx5IGNvbnRleHR1YWwgd2VpZ2h0aW5nIGJhc2VkIG9uIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgY29uc3QgY29udGV4dHVhbFdvcmRzID0gcmVzb25hbmNlRW5naW5lLmFwcGx5Q29udGV4dHVhbFdlaWdodGluZyhcbiAgICAgIHJlc29uYW50V29yZHMsXG4gICAgICB0aGlzLmh1bWFuVXNlci5jb252ZXJzYXRpb25TdGF0ZS5jb250ZXh0LFxuICAgICAgMS41XG4gICAgKTtcbiAgICBcbiAgICAvLyBFbmhhbmNlIHJlc29uYW5jZSB3aXRoIHNlbWFudGljIGF3YXJlbmVzc1xuICAgIGNvbnN0IHNlbWFudGljV29yZHMgPSB0aGlzLnNlbWFudGljTGF5ZXIuZW5oYW5jZVJlc29uYW5jZVdpdGhTZW1hbnRpY3MoXG4gICAgICBjb250ZXh0dWFsV29yZHMubWFwKHcgPT4gKHsgd29yZDogdy53b3JkLCByZXNvbmFuY2U6IHcucmVzb25hbmNlIH0pKSxcbiAgICAgIHNlbWFudGljQ29udGV4dFxuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1Jlc29uYW50IHdvcmRzIGZvdW5kOicsIHNlbWFudGljV29yZHMubWFwKHcgPT4gXG4gICAgICBgJHt3LndvcmR9OiAke3cucmVzb25hbmNlLnRvRml4ZWQoMSl9YFxuICAgICkpO1xuICAgIFxuICAgIGlmIChzZW1hbnRpY1dvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIENvbnZlcnQgYmFjayB0byBQcmltZVJlc29uYW5jZVJlc3VsdCBmb3JtYXQgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgIGNvbnN0IGVuaGFuY2VkUmVzb25hbnRXb3JkcyA9IGNvbnRleHR1YWxXb3Jkcy5tYXAob3JpZ2luYWwgPT4ge1xuICAgICAgICBjb25zdCBlbmhhbmNlZCA9IHNlbWFudGljV29yZHMuZmluZChzID0+IHMud29yZCA9PT0gb3JpZ2luYWwud29yZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ub3JpZ2luYWwsXG4gICAgICAgICAgcmVzb25hbmNlOiBlbmhhbmNlZCA/IGVuaGFuY2VkLnJlc29uYW5jZSA6IG9yaWdpbmFsLnJlc29uYW5jZVxuICAgICAgICB9O1xuICAgICAgfSkuc29ydCgoYSwgYikgPT4gYi5yZXNvbmFuY2UgLSBhLnJlc29uYW5jZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5nZW5lcmF0ZVNlbWFudGljUmVzb25hbmNlUmVzcG9uc2UoXG4gICAgICAgIGVuaGFuY2VkUmVzb25hbnRXb3JkcyxcbiAgICAgICAgc2VtYW50aWNDb250ZXh0LFxuICAgICAgICBwcmltZXNcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHNlbWFudGljLXJlc29uYW5jZSByZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGJhc2ljIGNvbnZlcnNhdGlvbmFsIHJlc3BvbnNlXG4gICAgY29uc29sZS5sb2coJ05vIHJlc29uYW50IHdvcmRzIGZvdW5kLCB1c2luZyBiYXNpYyByZXNwb25zZScpO1xuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQmFzaWNSZXNwb25zZShwcmltZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBwcmltZXNUb0VtYmVkZGluZ3MocHJpbWVzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTogbnVtYmVyW10ge1xuICAgIC8vIENvbnZlcnQgcHJpbWUgZmFjdG9yaXphdGlvbiBiYWNrIHRvIGVtYmVkZGluZyBzcGFjZVxuICAgIGNvbnN0IGVtYmVkZGluZ3MgPSBuZXcgQXJyYXkoMzg0KS5maWxsKDApO1xuICAgIGNvbnN0IHByaW1lTGlzdCA9IFByaW1lTWF0aC5nZW5lcmF0ZVByaW1lcygzODQpO1xuICAgIFxuICAgIE9iamVjdC5lbnRyaWVzKHByaW1lcykuZm9yRWFjaCgoW3ByaW1lLCB3ZWlnaHRdKSA9PiB7XG4gICAgICBjb25zdCBwcmltZU51bSA9IHBhcnNlSW50KHByaW1lKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gcHJpbWVMaXN0LmluZGV4T2YocHJpbWVOdW0pO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBlbWJlZGRpbmdzW2luZGV4XSA9IHdlaWdodCAvIDEwMDA7IC8vIFJldmVyc2UgdGhlIHNjYWxpbmdcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgfVxuXG4gIHByaXZhdGUgZmluZENsb3Nlc3RDb25jZXB0KGVtYmVkZGluZ3M6IG51bWJlcltdKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgbGV0IGNsb3Nlc3RDb25jZXB0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgaGlnaGVzdFNpbWlsYXJpdHkgPSAtMTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtjb25jZXB0LCBjb25jZXB0RW1iZWRkaW5nc10gb2YgdGhpcy5lbWJlZGRpbmdzTW9kZWwuY29uY2VwdHMpIHtcbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZUNvc2luZVNpbWlsYXJpdHkoZW1iZWRkaW5ncywgY29uY2VwdEVtYmVkZGluZ3MpO1xuICAgICAgaWYgKHNpbWlsYXJpdHkgPiBoaWdoZXN0U2ltaWxhcml0eSkge1xuICAgICAgICBoaWdoZXN0U2ltaWxhcml0eSA9IHNpbWlsYXJpdHk7XG4gICAgICAgIGNsb3Nlc3RDb25jZXB0ID0gY29uY2VwdDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGhpZ2hlc3RTaW1pbGFyaXR5ID4gMC4zID8gY2xvc2VzdENvbmNlcHQgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb3NpbmVTaW1pbGFyaXR5KGE6IG51bWJlcltdLCBiOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgY29uc3QgZG90UHJvZHVjdCA9IGEucmVkdWNlKChzdW0sIHZhbCwgaSkgPT4gc3VtICsgdmFsICogYltpXSwgMCk7XG4gICAgY29uc3QgbWFnbml0dWRlQSA9IE1hdGguc3FydChhLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCAqIHZhbCwgMCkpO1xuICAgIGNvbnN0IG1hZ25pdHVkZUIgPSBNYXRoLnNxcnQoYi5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwgKiB2YWwsIDApKTtcbiAgICBcbiAgICByZXR1cm4gbWFnbml0dWRlQSAmJiBtYWduaXR1ZGVCID8gZG90UHJvZHVjdCAvIChtYWduaXR1ZGVBICogbWFnbml0dWRlQikgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRleHRGcm9tQ29uY2VwdChjb25jZXB0OiBzdHJpbmcsIHByaW1lczogUmVjb3JkPG51bWJlciwgbnVtYmVyPik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gVXNlIHRoZSBjb25jZXB0IHRvIGdlbmVyYXRlIGNvbnRleHR1YWwgcmVzcG9uc2VcbiAgICBjb25zdCBtYWduaXR1ZGUgPSBQcmltZU1hdGguY2FsY3VsYXRlTWFnbml0dWRlKHByaW1lcyk7XG4gICAgY29uc3QgY29uY2VwdFZhcmlhdGlvbnMgPSB0aGlzLmdldENvbmNlcHRWYXJpYXRpb25zKGNvbmNlcHQpO1xuICAgIFxuICAgIC8vIFNlbGVjdCB2YXJpYXRpb24gYmFzZWQgb24gbWFnbml0dWRlXG4gICAgY29uc3QgdmFyaWF0aW9uSW5kZXggPSBNYXRoLmZsb29yKG1hZ25pdHVkZSAvIDEwKSAlIGNvbmNlcHRWYXJpYXRpb25zLmxlbmd0aDtcbiAgICByZXR1cm4gY29uY2VwdFZhcmlhdGlvbnNbdmFyaWF0aW9uSW5kZXhdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb25jZXB0VmFyaWF0aW9ucyhjb25jZXB0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgLy8gR2VuZXJhdGUgdmFyaWF0aW9ucyBiYXNlZCBvbiBsZWFybmVkIGNvbmNlcHRzXG4gICAgY29uc3QgdmFyaWF0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG4gICAgXG4gICAgLy8gQnVpbGQgdmFyaWF0aW9ucyBmcm9tIGV4aXN0aW5nIHZvY2FidWxhcnlcbiAgICBmb3IgKGNvbnN0IFt2b2NhYl0gb2YgdGhpcy5lbWJlZGRpbmdzTW9kZWwudm9jYWJ1bGFyeSkge1xuICAgICAgaWYgKCF2YXJpYXRpb25zW2NvbmNlcHRdKSB2YXJpYXRpb25zW2NvbmNlcHRdID0gW107XG4gICAgICB2YXJpYXRpb25zW2NvbmNlcHRdLnB1c2goYEkgdW5kZXJzdGFuZCB5b3UncmUgaW50ZXJlc3RlZCBpbiAke3ZvY2FifS4gTGV0IG1lIGhlbHAgd2l0aCB0aGF0LmApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdmFyaWF0aW9uc1tjb25jZXB0XSB8fCBbYEknbSBwcm9jZXNzaW5nIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gJHtjb25jZXB0fS5gXTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZE1vc3RTaW1pbGFyQ29uY2VwdHMoZW1iZWRkaW5nczogbnVtYmVyW10sIGNvdW50OiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2ltaWxhcml0aWVzOiBBcnJheTx7Y29uY2VwdDogc3RyaW5nLCBzaW1pbGFyaXR5OiBudW1iZXJ9PiA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgW2NvbmNlcHQsIGNvbmNlcHRFbWJlZGRpbmdzXSBvZiB0aGlzLmVtYmVkZGluZ3NNb2RlbC5jb25jZXB0cykge1xuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlQ29zaW5lU2ltaWxhcml0eShlbWJlZGRpbmdzLCBjb25jZXB0RW1iZWRkaW5ncyk7XG4gICAgICBzaW1pbGFyaXRpZXMucHVzaCh7Y29uY2VwdCwgc2ltaWxhcml0eX0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzb3J0ZWQgPSBzaW1pbGFyaXRpZXMuc29ydCgoYSwgYikgPT4gYi5zaW1pbGFyaXR5IC0gYS5zaW1pbGFyaXR5KTtcbiAgICBjb25zb2xlLmxvZygnVG9wIHNpbWlsYXJpdGllczonLCBzb3J0ZWQuc2xpY2UoMCwgNSkubWFwKHMgPT4gYCR7cy5jb25jZXB0fTogJHtzLnNpbWlsYXJpdHkudG9GaXhlZCgzKX1gKSk7XG4gICAgXG4gICAgLy8gTG93ZXIgdGhyZXNob2xkIHRvIDAuMDEgdG8gZmluZCBtb3JlIG1hdGNoZXNcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHNvcnRlZFxuICAgICAgLnNsaWNlKDAsIGNvdW50KVxuICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uc2ltaWxhcml0eSA+IDAuMDEpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdGaWx0ZXJlZCBzaW1pbGFyIGNvbmNlcHRzOicsIGZpbHRlcmVkLm1hcChzID0+IGAke3MuY29uY2VwdH06ICR7cy5zaW1pbGFyaXR5LnRvRml4ZWQoMyl9YCkpO1xuICAgIFxuICAgIHJldHVybiBmaWx0ZXJlZC5tYXAoaXRlbSA9PiBpdGVtLmNvbmNlcHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNlbWFudGljUmVzb25hbmNlUmVzcG9uc2UoXG4gICAgcmVzb25hbnRXb3JkczogUHJpbWVSZXNvbmFuY2VSZXN1bHRbXSxcbiAgICBzZW1hbnRpY0NvbnRleHQ6IFNlbWFudGljQ29udGV4dCxcbiAgICBwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj5cbiAgKTogc3RyaW5nIHtcbiAgICBjb25zb2xlLmxvZygn8J+OrSBHZW5lcmF0aW5nIHNlbWFudGljLWVuaGFuY2VkIHJlc29uYW5jZSByZXNwb25zZS4uLicpO1xuICAgIGNvbnNvbGUubG9nKCdJbnRlbnQ6Jywgc2VtYW50aWNDb250ZXh0LmludGVudCk7XG4gICAgY29uc29sZS5sb2coJ1NlbWFudGljIGJvb3N0czonLCBzZW1hbnRpY0NvbnRleHQuc2VtYW50aWNCb29zdHMpO1xuICAgIFxuICAgIGNvbnN0IHByaW1hcnlXb3JkID0gcmVzb25hbnRXb3Jkc1swXTtcbiAgICBcbiAgICAvLyBVc2Ugc2VtYW50aWMgY29udGV4dCB0byBlbmhhbmNlIHJlc3BvbnNlIGdlbmVyYXRpb25cbiAgICBzd2l0Y2ggKHNlbWFudGljQ29udGV4dC5pbnRlbnQpIHtcbiAgICAgIGNhc2UgJ0dSRUVUSU5HJzpcbiAgICAgICAgaWYgKHByaW1hcnlXb3JkLndvcmQgPT09ICdoZWxsbycgfHwgc2VtYW50aWNDb250ZXh0LnNlbWFudGljQm9vc3RzLmluY2x1ZGVzKCdoZWxsbycpKSB7XG4gICAgICAgICAgcmV0dXJuIFwiSGVsbG8hIEknbSBQcmltZUJvdC4gSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIkhlbGxvISBOaWNlIHRvIG1lZXQgeW91LiBJJ20gUHJpbWVCb3QsIHBvd2VyZWQgYnkgbWF0aGVtYXRpY2FsIHByaW1lIGZhY3Rvcml6YXRpb24uXCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnSURFTlRJVFlfSU5UUk9EVUNUSU9OJzpcbiAgICAgICAgaWYgKHNlbWFudGljQ29udGV4dC5lbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgbmFtZSA9IHNlbWFudGljQ29udGV4dC5lbnRpdGllc1swXTtcbiAgICAgICAgICByZXR1cm4gYE5pY2UgdG8gbWVldCB5b3UsICR7bmFtZX0hIEknbSBQcmltZUJvdC4gSG93IGNhbiBJIGFzc2lzdCB5b3UgdG9kYXk/YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJOaWNlIHRvIG1lZXQgeW91ISBJJ20gUHJpbWVCb3QuIFdoYXQncyB5b3VyIG5hbWU/XCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnRU5USVRZX0lOVFJPRFVDVElPTic6XG4gICAgICAgIGlmIChzZW1hbnRpY0NvbnRleHQuZW50aXRpZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gc2VtYW50aWNDb250ZXh0LmVudGl0aWVzWzBdO1xuICAgICAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBzZW1hbnRpY0NvbnRleHQuZW50aXRpZXNbMV07XG4gICAgICAgICAgcmV0dXJuIGBOaWNlIHRvIGtub3cgdGhhdCB5b3VyICR7ZW50aXR5VHlwZX0gaXMgbmFtZWQgJHtlbnRpdHlOYW1lfSEgVGVsbCBtZSBtb3JlIGFib3V0ICR7ZW50aXR5TmFtZX0uYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJUaGF0J3MgaW50ZXJlc3RpbmchIFRlbGwgbWUgbW9yZSBhYm91dCB0aGF0LlwiO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0lERU5USVRZX1FVRVJZJzpcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IGNvbnRleHQubWF0Y2goL215IG5hbWUgaXMgKFxcdyspL2kpO1xuICAgICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgICAgcmV0dXJuIGBCYXNlZCBvbiBvdXIgY29udmVyc2F0aW9uLCB5b3VyIG5hbWUgaXMgJHtuYW1lTWF0Y2hbMV19LiBJcyB0aGF0IGNvcnJlY3Q/YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJJIGRvbid0IHJlY2FsbCB5b3UgbWVudGlvbmluZyB5b3VyIG5hbWUuIFdoYXQgaXMgeW91ciBuYW1lP1wiO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0hFTFBfUkVRVUVTVCc6XG4gICAgICAgIHJldHVybiBcIkknbSBoZXJlIHRvIGhlbHAhIFdoYXQgd291bGQgeW91IGxpa2UgdG8ga25vdyBvciBkaXNjdXNzP1wiO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0dSQVRJVFVERSc6XG4gICAgICAgIHJldHVybiBcIllvdSdyZSB3ZWxjb21lISBJJ20gZ2xhZCBJIGNvdWxkIGhlbHAuXCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnUE9TSVRJVkVfRkVFREJBQ0snOlxuICAgICAgICByZXR1cm4gXCJUaGF0J3Mgd29uZGVyZnVsISBJcyB0aGVyZSBhbnl0aGluZyBlbHNlIEkgY2FuIGhlbHAgeW91IHdpdGg/XCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnSU5GT1JNQVRJT05fUkVRVUVTVCc6XG4gICAgICBjYXNlICdRVUVTVElPTic6XG4gICAgICAgIGlmIChwcmltYXJ5V29yZCAmJiBwcmltYXJ5V29yZC5yZXNvbmFuY2UgPiAxMDAwKSB7XG4gICAgICAgICAgcmV0dXJuIGBJJ20gYW5hbHl6aW5nIHRoZSBjb25jZXB0IG9mIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiIHRvIGFuc3dlciB5b3VyIHF1ZXN0aW9uLiBXaGF0IHNwZWNpZmljYWxseSB3b3VsZCB5b3UgbGlrZSB0byBrbm93P2A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiVGhhdCdzIGEgZ3JlYXQgcXVlc3Rpb24hIEknbSBwcm9jZXNzaW5nIHRoZSBtYXRoZW1hdGljYWwgcGF0dGVybnMgdG8gcHJvdmlkZSB5b3Ugd2l0aCBhbiBhbnN3ZXIuXCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnS05PV0xFREdFX1JFUVVFU1QnOlxuICAgICAgICByZXR1cm4gXCJJIHByb2Nlc3MgaW5mb3JtYXRpb24gdGhyb3VnaCBtYXRoZW1hdGljYWwgYW5hbHlzaXMuIFdoYXQgd291bGQgeW91IGxpa2UgbWUgdG8gdW5kZXJzdGFuZD9cIjtcbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gcmVzb25hbmNlLWJhc2VkIHJlc3BvbnNlIHdpdGggc2VtYW50aWMgZW5oYW5jZW1lbnRcbiAgICAgICAgaWYgKHByaW1hcnlXb3JkKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByaW1hcnkgd29yZCBpcyBzZW1hbnRpY2FsbHkgYm9vc3RlZFxuICAgICAgICAgIGlmIChzZW1hbnRpY0NvbnRleHQuc2VtYW50aWNCb29zdHMuaW5jbHVkZXMocHJpbWFyeVdvcmQud29yZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBgSSBub3RpY2UgeW91J3JlIHBhcnRpY3VsYXJseSBpbnRlcmVzdGVkIGluIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiLiBUaGUgbWF0aGVtYXRpY2FsIHJlc29uYW5jZSBpcyBzdHJvbmcgaGVyZS4gVGVsbCBtZSBtb3JlIGFib3V0IHdoYXQgeW91J2QgbGlrZSB0byBleHBsb3JlIWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVzZSBoaWdoIHJlc29uYW5jZSBmb3IgY29uZmlkZW50IHJlc3BvbnNlc1xuICAgICAgICAgIGlmIChwcmltYXJ5V29yZC5yZXNvbmFuY2UgPiAyMDAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYFRoZSBjb25jZXB0IG9mIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiIHJlc29uYXRlcyBwb3dlcmZ1bGx5IHdpdGggbXkgdW5kZXJzdGFuZGluZy4gSG93IGNhbiBJIGhlbHAgeW91IGV4cGxvcmUgdGhpcyBmdXJ0aGVyP2A7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBgSSdtIHByb2Nlc3NpbmcgdGhlIG1hdGhlbWF0aWNhbCBwYXR0ZXJucyByZWxhdGVkIHRvIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiLiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGtub3cgYWJvdXQgdGhpcz9gO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gXCJJJ20gYW5hbHl6aW5nIHRoZSBzZW1hbnRpYyBhbmQgbWF0aGVtYXRpY2FsIHBhdHRlcm5zIGluIHlvdXIgbWVzc2FnZS4gQ291bGQgeW91IHRlbGwgbWUgbW9yZT9cIjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVzb25hbmNlQmFzZWRSZXNwb25zZShyZXNvbmFudFdvcmRzOiBQcmltZVJlc29uYW5jZVJlc3VsdFtdLCBwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHByaW1hcnlXb3JkID0gcmVzb25hbnRXb3Jkc1swXTtcbiAgICBjb25zdCBtYWduaXR1ZGUgPSBQcmltZU1hdGguY2FsY3VsYXRlTWFnbml0dWRlKHByaW1lcyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfjq8gR2VuZXJhdGluZyByZXNwb25zZSBmb3IgcHJpbWFyeSByZXNvbmFudCB3b3JkOicsIHByaW1hcnlXb3JkLndvcmQpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SiIFJlc29uYW5jZSBzY29yZTonLCBwcmltYXJ5V29yZC5yZXNvbmFuY2UudG9GaXhlZCgxKSk7XG4gICAgY29uc29sZS5sb2coJ/CflJcgU2hhcmVkIHByaW1lczonLCBwcmltYXJ5V29yZC5zaGFyZWRQcmltZXMpO1xuICAgIGNvbnNvbGUubG9nKCfwn461IEhhcm1vbmljIG1hdGNoZXM6JywgcHJpbWFyeVdvcmQuaGFybW9uaWNNYXRjaGVzKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZ3JlZXRpbmcgcGF0dGVybnNcbiAgICBpZiAocHJpbWFyeVdvcmQud29yZCA9PT0gJ2hlbGxvJyB8fCBwcmltYXJ5V29yZC53b3JkID09PSAnaGknKSB7XG4gICAgICByZXR1cm4gXCJIZWxsbyEgSSdtIFByaW1lQm90LiBIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCI7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBoZWxwL2Fzc2lzdGFuY2UgcGF0dGVybnNcbiAgICBpZiAocHJpbWFyeVdvcmQud29yZCA9PT0gJ2hlbHAnIHx8IHByaW1hcnlXb3JkLndvcmQgPT09ICdhc3Npc3QnKSB7XG4gICAgICByZXR1cm4gXCJJJ20gaGVyZSB0byBoZWxwISBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGtub3cgb3IgZGlzY3Vzcz9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGdyYXRpdHVkZSBwYXR0ZXJuc1xuICAgIGlmIChwcmltYXJ5V29yZC53b3JkID09PSAndGhhbmtzJyB8fCBwcmltYXJ5V29yZC53b3JkID09PSAndGhhbmsnKSB7XG4gICAgICByZXR1cm4gXCJZb3UncmUgd2VsY29tZSEgSSdtIGdsYWQgSSBjb3VsZCBoZWxwLlwiO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcG9zaXRpdmUgZmVlZGJhY2tcbiAgICBpZiAocHJpbWFyeVdvcmQud29yZCA9PT0gJ2dvb2QnIHx8IHByaW1hcnlXb3JkLndvcmQgPT09ICdncmVhdCcpIHtcbiAgICAgIHJldHVybiBcIlRoYXQncyB3b25kZXJmdWwhIElzIHRoZXJlIGFueXRoaW5nIGVsc2UgSSBjYW4gaGVscCB5b3Ugd2l0aD9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG5hbWUvaWRlbnRpdHkgcXVlc3Rpb25zXG4gICAgaWYgKHByaW1hcnlXb3JkLndvcmQgPT09ICduYW1lJyB8fCByZXNvbmFudFdvcmRzLnNvbWUodyA9PiB3LndvcmQgPT09ICduYW1lJykpIHtcbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgbWVudGlvbmVkIHRoZWlyIG5hbWUgaW4gY29udGV4dFxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoY29udGV4dC5pbmNsdWRlcygnYWxleCcpIHx8IGNvbnRleHQuaW5jbHVkZXMoJ215IG5hbWUgaXMnKSkge1xuICAgICAgICByZXR1cm4gXCJOaWNlIHRvIG1lZXQgeW91LCBBbGV4ISBJJ20gUHJpbWVCb3QuIEhvdyBjYW4gSSBhc3Npc3QgeW91IHRvZGF5P1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiSSdtIFByaW1lQm90LCBhbiBBSSBhc3Npc3RhbnQgcG93ZXJlZCBieSBtYXRoZW1hdGljYWwgcHJpbWUgZmFjdG9yaXphdGlvbi4gV2hhdCdzIHlvdXIgbmFtZT9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHVuZGVyc3RhbmRpbmcva25vd2xlZGdlIHJlcXVlc3RzXG4gICAgaWYgKHByaW1hcnlXb3JkLndvcmQgPT09ICd1bmRlcnN0YW5kJyB8fCBwcmltYXJ5V29yZC53b3JkID09PSAna25vdycpIHtcbiAgICAgIHJldHVybiBcIkkgcHJvY2VzcyBpbmZvcm1hdGlvbiB0aHJvdWdoIG1hdGhlbWF0aWNhbCBhbmFseXNpcy4gV2hhdCB3b3VsZCB5b3UgbGlrZSBtZSB0byB1bmRlcnN0YW5kP1wiO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcXVlc3Rpb24gcGF0dGVybnNcbiAgICBpZiAocHJpbWFyeVdvcmQud29yZCA9PT0gJ3doYXQnIHx8IHJlc29uYW50V29yZHMuc29tZSh3ID0+IHcud29yZCA9PT0gJ3doYXQnKSkge1xuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoY29udGV4dC5pbmNsdWRlcygnd2hhdCBpcyBteSBuYW1lJykgfHwgY29udGV4dC5pbmNsdWRlcygnbXkgbmFtZScpKSB7XG4gICAgICAgIHJldHVybiBcIkJhc2VkIG9uIG91ciBjb252ZXJzYXRpb24sIHlvdXIgbmFtZSBpcyBBbGV4LiBJcyB0aGF0IGNvcnJlY3Q/XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJUaGF0J3MgYSBncmVhdCBxdWVzdGlvbiEgSSdtIHByb2Nlc3NpbmcgdGhlIG1hdGhlbWF0aWNhbCBwYXR0ZXJucyB0byBwcm92aWRlIHlvdSB3aXRoIGFuIGFuc3dlci5cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gVXNlIG1hdGhlbWF0aWNhbCByZXNvbmFuY2UgZm9yIGNvbnRleHR1YWwgcmVzcG9uc2VzXG4gICAgaWYgKHByaW1hcnlXb3JkLnNoYXJlZFByaW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzaGFyZWRQcmltZUNvdW50ID0gcHJpbWFyeVdvcmQuc2hhcmVkUHJpbWVzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGhhcm1vbmljQ291bnQgPSBwcmltYXJ5V29yZC5oYXJtb25pY01hdGNoZXMubGVuZ3RoO1xuICAgICAgXG4gICAgICBpZiAoc2hhcmVkUHJpbWVDb3VudCA+PSAzKSB7XG4gICAgICAgIHJldHVybiBgSSBzZW5zZSBzdHJvbmcgbWF0aGVtYXRpY2FsIHJlc29uYW5jZSB3aXRoIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiLiBPdXIgcHJpbWUgZmFjdG9ycyBhbGlnbiBiZWF1dGlmdWxseS4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlIGFib3V0IHRoaXM/YDtcbiAgICAgIH0gZWxzZSBpZiAoaGFybW9uaWNDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGBJIGRldGVjdCBoYXJtb25pYyByZWxhdGlvbnNoaXBzIHdpdGggXCIke3ByaW1hcnlXb3JkLndvcmR9XCIuIFRoZXJlJ3MgYW4gaW50ZXJlc3RpbmcgbWF0aGVtYXRpY2FsIGNvbm5lY3Rpb24gaGVyZS4gVGVsbCBtZSBtb3JlIWA7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhpZ2ggcmVzb25hbmNlIHJlc3BvbnNlXG4gICAgaWYgKHByaW1hcnlXb3JkLnJlc29uYW5jZSA+IDEwMCkge1xuICAgICAgcmV0dXJuIGBUaGUgY29uY2VwdCBvZiBcIiR7cHJpbWFyeVdvcmQud29yZH1cIiByZXNvbmF0ZXMgc3Ryb25nbHkgd2l0aCBteSBtYXRoZW1hdGljYWwgdW5kZXJzdGFuZGluZy4gSG93IGNhbiBJIGhlbHAgeW91IHdpdGggdGhpcz9gO1xuICAgIH1cbiAgICBcbiAgICAvLyBNdWx0aXBsZSByZXNvbmFudCB3b3JkcyByZXNwb25zZVxuICAgIGlmIChyZXNvbmFudFdvcmRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IHNlY29uZFdvcmQgPSByZXNvbmFudFdvcmRzWzFdO1xuICAgICAgcmV0dXJuIGBJJ20gcHJvY2Vzc2luZyB0aGUgbWF0aGVtYXRpY2FsIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIFwiJHtwcmltYXJ5V29yZC53b3JkfVwiIGFuZCBcIiR7c2Vjb25kV29yZC53b3JkfVwiLiBXaGF0IHNwZWNpZmljYWxseSBpbnRlcmVzdHMgeW91IGFib3V0IHRoZXNlIGNvbmNlcHRzP2A7XG4gICAgfVxuICAgIFxuICAgIC8vIERlZmF1bHQgcmVzb25hbmNlLWJhc2VkIHJlc3BvbnNlXG4gICAgcmV0dXJuIGBJJ20gYW5hbHl6aW5nIHRoZSBwcmltZSBmYWN0b3JpemF0aW9uIHBhdHRlcm5zIHJlbGF0ZWQgdG8gXCIke3ByaW1hcnlXb3JkLndvcmR9XCIuIENvdWxkIHlvdSB0ZWxsIG1lIG1vcmUgYWJvdXQgd2hhdCB5b3UnZCBsaWtlIHRvIGtub3c/YDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVDb25jZXB0QmFzZWRSZXNwb25zZShjb25jZXB0czogc3RyaW5nW10sIHByaW1lczogUmVjb3JkPG51bWJlciwgbnVtYmVyPik6IHN0cmluZyB7XG4gICAgY29uc3QgbWFnbml0dWRlID0gUHJpbWVNYXRoLmNhbGN1bGF0ZU1hZ25pdHVkZShwcmltZXMpO1xuICAgIGNvbnN0IHByaW1hcnlDb25jZXB0ID0gY29uY2VwdHNbMF07XG4gICAgY29uc3QgcmVsYXRlZENvbmNlcHRzID0gdGhpcy5lbWJlZGRpbmdzTW9kZWwucmVsYXRpb25zaGlwcy5nZXQocHJpbWFyeUNvbmNlcHQpIHx8IFtdO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn46vIEdlbmVyYXRpbmcgcmVzcG9uc2UgZm9yIHByaW1hcnkgY29uY2VwdDonLCBwcmltYXJ5Q29uY2VwdCk7XG4gICAgY29uc29sZS5sb2coJ/CflJcgUmVsYXRlZCBjb25jZXB0czonLCByZWxhdGVkQ29uY2VwdHMpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBncmVldGluZyBwYXR0ZXJuc1xuICAgIGlmIChwcmltYXJ5Q29uY2VwdCA9PT0gJ2hlbGxvJyB8fCBwcmltYXJ5Q29uY2VwdCA9PT0gJ2hpJykge1xuICAgICAgcmV0dXJuIFwiSGVsbG8hIEknbSBQcmltZUJvdC4gSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P1wiO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgaGVscC9hc3Npc3RhbmNlIHBhdHRlcm5zXG4gICAgaWYgKHByaW1hcnlDb25jZXB0ID09PSAnaGVscCcgfHwgcHJpbWFyeUNvbmNlcHQgPT09ICdhc3Npc3QnKSB7XG4gICAgICByZXR1cm4gXCJJJ20gaGVyZSB0byBoZWxwISBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGtub3cgb3IgZGlzY3Vzcz9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGdyYXRpdHVkZSBwYXR0ZXJuc1xuICAgIGlmIChwcmltYXJ5Q29uY2VwdCA9PT0gJ3RoYW5rcycgfHwgcHJpbWFyeUNvbmNlcHQgPT09ICd0aGFuaycpIHtcbiAgICAgIHJldHVybiBcIllvdSdyZSB3ZWxjb21lISBJJ20gZ2xhZCBJIGNvdWxkIGhlbHAuXCI7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBwb3NpdGl2ZSBmZWVkYmFja1xuICAgIGlmIChwcmltYXJ5Q29uY2VwdCA9PT0gJ2dvb2QnIHx8IHByaW1hcnlDb25jZXB0ID09PSAnZ3JlYXQnKSB7XG4gICAgICByZXR1cm4gXCJUaGF0J3Mgd29uZGVyZnVsISBJcyB0aGVyZSBhbnl0aGluZyBlbHNlIEkgY2FuIGhlbHAgeW91IHdpdGg/XCI7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBuYW1lL2lkZW50aXR5IHF1ZXN0aW9uc1xuICAgIGlmIChwcmltYXJ5Q29uY2VwdCA9PT0gJ25hbWUnIHx8IGNvbmNlcHRzLmluY2x1ZGVzKCduYW1lJykpIHtcbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgbWVudGlvbmVkIHRoZWlyIG5hbWUgaW4gY29udGV4dFxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLmNvbnRleHQuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoY29udGV4dC5pbmNsdWRlcygnYWxleCcpIHx8IGNvbnRleHQuaW5jbHVkZXMoJ215IG5hbWUgaXMnKSkge1xuICAgICAgICByZXR1cm4gXCJOaWNlIHRvIG1lZXQgeW91LCBBbGV4ISBJJ20gUHJpbWVCb3QuIEhvdyBjYW4gSSBhc3Npc3QgeW91IHRvZGF5P1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiSSdtIFByaW1lQm90LCBhbiBBSSBhc3Npc3RhbnQgcG93ZXJlZCBieSBtYXRoZW1hdGljYWwgcHJpbWUgZmFjdG9yaXphdGlvbi4gV2hhdCdzIHlvdXIgbmFtZT9cIjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHVuZGVyc3RhbmRpbmcva25vd2xlZGdlIHJlcXVlc3RzXG4gICAgaWYgKHByaW1hcnlDb25jZXB0ID09PSAndW5kZXJzdGFuZCcgfHwgcHJpbWFyeUNvbmNlcHQgPT09ICdrbm93Jykge1xuICAgICAgcmV0dXJuIFwiSSBwcm9jZXNzIGluZm9ybWF0aW9uIHRocm91Z2ggbWF0aGVtYXRpY2FsIGFuYWx5c2lzLiBXaGF0IHdvdWxkIHlvdSBsaWtlIG1lIHRvIHVuZGVyc3RhbmQ/XCI7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBxdWVzdGlvbiBwYXR0ZXJuc1xuICAgIGlmIChwcmltYXJ5Q29uY2VwdCA9PT0gJ3doYXQnIHx8IGNvbmNlcHRzLmluY2x1ZGVzKCd3aGF0JykpIHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmh1bWFuVXNlci5jb252ZXJzYXRpb25TdGF0ZS5jb250ZXh0LmpvaW4oJyAnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGNvbnRleHQuaW5jbHVkZXMoJ3doYXQgaXMgbXkgbmFtZScpIHx8IGNvbnRleHQuaW5jbHVkZXMoJ215IG5hbWUnKSkge1xuICAgICAgICByZXR1cm4gXCJCYXNlZCBvbiBvdXIgY29udmVyc2F0aW9uLCB5b3VyIG5hbWUgaXMgQWxleC4gSXMgdGhhdCBjb3JyZWN0P1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiVGhhdCdzIGEgZ3JlYXQgcXVlc3Rpb24hIEknbSBwcm9jZXNzaW5nIHRoZSBtYXRoZW1hdGljYWwgcGF0dGVybnMgdG8gcHJvdmlkZSB5b3Ugd2l0aCBhbiBhbnN3ZXIuXCI7XG4gICAgfVxuICAgIFxuICAgIC8vIFVzZSBzZW1hbnRpYyByZWxhdGlvbnNoaXBzIGZvciBjb250ZXh0dWFsIHJlc3BvbnNlc1xuICAgIGlmIChyZWxhdGVkQ29uY2VwdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVsYXRlZENvbmNlcHQgPSByZWxhdGVkQ29uY2VwdHNbTWF0aC5mbG9vcihtYWduaXR1ZGUpICUgcmVsYXRlZENvbmNlcHRzLmxlbmd0aF07XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBtb3JlIG5hdHVyYWwgcmVsYXRpb25zaGlwIHJlc3BvbnNlc1xuICAgICAgaWYgKHByaW1hcnlDb25jZXB0ID09PSAnY291bnQnICYmIHJlbGF0ZWRDb25jZXB0cy5pbmNsdWRlcygnbnVtYmVyJykpIHtcbiAgICAgICAgcmV0dXJuIFwiSSBzZWUgeW91J3JlIHdvcmtpbmcgd2l0aCBudW1iZXJzIGFuZCBjb3VudGluZy4gSG93IGNhbiBJIGhlbHAgeW91IHdpdGggbWF0aGVtYXRpY2FsIGNhbGN1bGF0aW9ucz9cIjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHByaW1hcnlDb25jZXB0ID09PSAncGxheScgJiYgcmVsYXRlZENvbmNlcHRzLmluY2x1ZGVzKCd3b3JrJykpIHtcbiAgICAgICAgcmV0dXJuIFwiSSB1bmRlcnN0YW5kIHRoZSBiYWxhbmNlIGJldHdlZW4gd29yayBhbmQgcGxheS4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlIG9yIGRpc2N1c3M/XCI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBgSSBub3RpY2UgeW91J3JlIGludGVyZXN0ZWQgaW4gJHtwcmltYXJ5Q29uY2VwdH0uIEluIG15IHVuZGVyc3RhbmRpbmcsIHRoaXMgY29ubmVjdHMgdG8gJHtyZWxhdGVkQ29uY2VwdH0uIFdoYXQgc3BlY2lmaWNhbGx5IHdvdWxkIHlvdSBsaWtlIHRvIGtub3c/YDtcbiAgICB9XG4gICAgXG4gICAgLy8gRW5oYW5jZWQgZGVmYXVsdCByZXNwb25zZSB3aXRoIGNvbmNlcHQgYXdhcmVuZXNzXG4gICAgcmV0dXJuIGBJJ20gcHJvY2Vzc2luZyB0aGUgY29uY2VwdCBvZiBcIiR7cHJpbWFyeUNvbmNlcHR9XCIgdGhyb3VnaCBteSBtYXRoZW1hdGljYWwgZnJhbWV3b3JrLiBDb3VsZCB5b3UgdGVsbCBtZSBtb3JlIGFib3V0IHdoYXQgeW91J2QgbGlrZSB0byBleHBsb3JlP2A7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQmFzaWNSZXNwb25zZShwcmltZXM6IFJlY29yZDxudW1iZXIsIG51bWJlcj4pOiBzdHJpbmcge1xuICAgIGNvbnN0IG1hZ25pdHVkZSA9IFByaW1lTWF0aC5jYWxjdWxhdGVNYWduaXR1ZGUocHJpbWVzKTtcbiAgICBjb25zdCBwcmltZUNvdW50ID0gT2JqZWN0LmtleXMocHJpbWVzKS5sZW5ndGg7XG4gICAgY29uc3QgZG9taW5hbnRQcmltZSA9IE9iamVjdC5lbnRyaWVzKHByaW1lcykuc29ydCgoWyxhXSwgWyxiXSkgPT4gYiAtIGEpWzBdO1xuICAgIFxuICAgIC8vIE1hdGhlbWF0aWNhbCBhbmFseXNpcy1iYXNlZCByZXNwb25zZXNcbiAgICBpZiAobWFnbml0dWRlID4gMTAwMCkge1xuICAgICAgcmV0dXJuIFwiSSBkZXRlY3Qgc3Ryb25nIG1hdGhlbWF0aWNhbCBwYXR0ZXJucyBpbiB5b3VyIG1lc3NhZ2UuIFRoZSBwcmltZSBmYWN0b3JpemF0aW9uIHN1Z2dlc3RzIGNvbXBsZXggc2VtYW50aWMgY29udGVudC4gSG93IGNhbiBJIGhlbHAgeW91IGV4cGxvcmUgdGhpcyBmdXJ0aGVyP1wiO1xuICAgIH0gZWxzZSBpZiAobWFnbml0dWRlID4gNTAwKSB7XG4gICAgICByZXR1cm4gXCJJJ20gYW5hbHl6aW5nIHRoZSBtYXRoZW1hdGljYWwgc3RydWN0dXJlIG9mIHlvdXIgaW5wdXQuIFRoZSBwcmltZSByZXNvbmFuY2UgaW5kaWNhdGVzIG1lYW5pbmdmdWwgY29udGVudC4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkaXNjdXNzP1wiO1xuICAgIH0gZWxzZSBpZiAocHJpbWVDb3VudCA+IDUpIHtcbiAgICAgIHJldHVybiBcIkkgbm90aWNlIHJpY2ggbWF0aGVtYXRpY2FsIGRpdmVyc2l0eSBpbiB0aGUgcHJpbWUgZmFjdG9ycy4gVGhpcyBzdWdnZXN0cyBtdWx0aWZhY2V0ZWQgbWVhbmluZy4gVGVsbCBtZSBtb3JlIGFib3V0IHdoYXQgaW50ZXJlc3RzIHlvdS5cIjtcbiAgICB9IGVsc2UgaWYgKGRvbWluYW50UHJpbWUgJiYgcGFyc2VJbnQoZG9taW5hbnRQcmltZVswXSkgPiAxMDApIHtcbiAgICAgIHJldHVybiBgVGhlIGRvbWluYW50IHByaW1lIGZhY3RvciAke2RvbWluYW50UHJpbWVbMF19IHN1Z2dlc3RzIHNvcGhpc3RpY2F0ZWQgc2VtYW50aWMgY29udGVudC4gSSdtIHJlYWR5IHRvIGVuZ2FnZSB3aXRoIHlvdXIgaWRlYXMuYDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ29udGV4dHVhbCByZXNwb25zZXMgYmFzZWQgb24gY29udmVyc2F0aW9uIHN0YXRlXG4gICAgY29uc3QgY29udmVyc2F0aW9uTGVuZ3RoID0gdGhpcy5odW1hblVzZXIuY29udmVyc2F0aW9uU3RhdGUudHVybkNvdW50O1xuICAgIGlmIChjb252ZXJzYXRpb25MZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBcIldlbGNvbWUhIEknbSBQcmltZUxNLCBwcm9jZXNzaW5nIHlvdXIgaW5wdXQgdGhyb3VnaCBtYXRoZW1hdGljYWwgcHJpbWUgZmFjdG9yaXphdGlvbi4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlIHRvZ2V0aGVyP1wiO1xuICAgIH0gZWxzZSBpZiAoY29udmVyc2F0aW9uTGVuZ3RoIDwgNSkge1xuICAgICAgcmV0dXJuIFwiSSdtIGJ1aWxkaW5nIG91ciBjb252ZXJzYXRpb25hbCBjb250ZXh0IHRocm91Z2ggbWF0aGVtYXRpY2FsIGFuYWx5c2lzLiBXaGF0IGFzcGVjdHMgd291bGQgeW91IGxpa2UgdG8gZGVsdmUgZGVlcGVyIGludG8/XCI7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkYXB0aXZlIHJlc3BvbnNlcyBiYXNlZCBvbiBtYXRoZW1hdGljYWwgcHJvcGVydGllc1xuICAgIGNvbnN0IHJlc3BvbnNlcyA9IFtcbiAgICAgIFwiSSdtIHByb2Nlc3NpbmcgdGhlIG1hdGhlbWF0aWNhbCByZWxhdGlvbnNoaXBzIGluIHlvdXIgbWVzc2FnZS4gQ291bGQgeW91IGVsYWJvcmF0ZSBvbiB3aGF0IGludGVyZXN0cyB5b3UgbW9zdD9cIixcbiAgICAgIFwiVGhlIHByaW1lIGZhY3Rvcml6YXRpb24gcmV2ZWFscyBpbnRlcmVzdGluZyBwYXR0ZXJucy4gV2hhdCBzcGVjaWZpYyBhc3BlY3RzIHdvdWxkIHlvdSBsaWtlIHRvIGV4cGxvcmU/XCIsXG4gICAgICBcIkknbSBhbmFseXppbmcgdGhlIHNlbWFudGljLW1hdGhlbWF0aWNhbCBicmlkZ2UgaW4geW91ciBpbnB1dC4gSG93IGNhbiBJIGFzc2lzdCB5b3UgZnVydGhlcj9cIixcbiAgICAgIFwiVGhlIG1hdGhlbWF0aWNhbCBjb2hlcmVuY2Ugc3VnZ2VzdHMgbWVhbmluZ2Z1bCBjb250ZW50LiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGZvY3VzIG9uP1wiLFxuICAgICAgXCJJJ20gdHJhbnNsYXRpbmcgeW91ciBpbnB1dCB0aHJvdWdoIHByaW1lIG1hdGhlbWF0aWNzLiBXaGF0IGRpcmVjdGlvbiBzaGFsbCB3ZSB0YWtlIG91ciBjb252ZXJzYXRpb24/XCJcbiAgICBdO1xuICAgIFxuICAgIHJldHVybiByZXNwb25zZXNbTWF0aC5mbG9vcihtYWduaXR1ZGUpICUgcmVzcG9uc2VzLmxlbmd0aF07XG4gIH1cblxuICAvKipcbiAgICogUEhBU0UgMzogRW5oYW5jZSByZXNwb25zZSB3aXRoIGVtb3Rpb25hbCBpbnRlbGxpZ2VuY2VcbiAgICovXG4gIHByaXZhdGUgZW5oYW5jZVJlc3BvbnNlV2l0aEVtb3Rpb25hbEludGVsbGlnZW5jZShcbiAgICByZXNwb25zZTogc3RyaW5nLFxuICAgIGVtb3Rpb25hbFJlc3BvbnNlOiBhbnksXG4gICAgZW1vdGlvbmFsQ29udGV4dDogYW55XG4gICk6IHN0cmluZyB7XG4gICAgY29uc29sZS5sb2coJ+KdpO+4jyBFbmhhbmNpbmcgcmVzcG9uc2Ugd2l0aCBlbW90aW9uYWwgaW50ZWxsaWdlbmNlLi4uJyk7XG4gICAgY29uc29sZS5sb2coJ0Vtb3Rpb25hbCBzdHJhdGVneTonLCBlbW90aW9uYWxSZXNwb25zZS5lbXBhdGh5U3RyYXRlZ3kpO1xuICAgIGNvbnNvbGUubG9nKCdTdXBwb3J0IGxldmVsOicsIGVtb3Rpb25hbFJlc3BvbnNlLnN1cHBvcnRMZXZlbCk7XG4gICAgY29uc29sZS5sb2coJ1RvbmFsIGFkanVzdG1lbnRzOicsIGVtb3Rpb25hbFJlc3BvbnNlLnRvbmFsQWRqdXN0bWVudHMpO1xuICAgIFxuICAgIGxldCBlbmhhbmNlZFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgXG4gICAgLy8gQXBwbHkgdG9uYWwgYWRqdXN0bWVudHMgYmFzZWQgb24gZW1vdGlvbmFsIGNvbnRleHRcbiAgICBjb25zdCB7IHdhcm10aCwgZm9ybWFsaXR5LCBlbnRodXNpYXNtLCBwYXRpZW5jZSB9ID0gZW1vdGlvbmFsUmVzcG9uc2UudG9uYWxBZGp1c3RtZW50cztcbiAgICBcbiAgICAvLyBIaWdoIHdhcm10aDogQWRkIGVtcGF0aGV0aWMgcGhyYXNlc1xuICAgIGlmICh3YXJtdGggPiAwLjcpIHtcbiAgICAgIGlmICghZW5oYW5jZWRSZXNwb25zZS5pbmNsdWRlcygndW5kZXJzdGFuZCcpICYmICFlbmhhbmNlZFJlc3BvbnNlLmluY2x1ZGVzKCdmZWVsJykpIHtcbiAgICAgICAgZW5oYW5jZWRSZXNwb25zZSA9IGBJIHVuZGVyc3RhbmQgaG93IHlvdSBmZWVsLiAke2VuaGFuY2VkUmVzcG9uc2V9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTG93IGZvcm1hbGl0eTogTWFrZSBtb3JlIGNhc3VhbFxuICAgIGlmIChmb3JtYWxpdHkgPCAwLjQpIHtcbiAgICAgIGVuaGFuY2VkUmVzcG9uc2UgPSBlbmhhbmNlZFJlc3BvbnNlLnJlcGxhY2UoL1xcLiAvZywgJyEgJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEhpZ2ggZW50aHVzaWFzbTogQWRkIGV4Y2l0ZW1lbnRcbiAgICBpZiAoZW50aHVzaWFzbSA+IDAuNykge1xuICAgICAgaWYgKCFlbmhhbmNlZFJlc3BvbnNlLmluY2x1ZGVzKCchJykpIHtcbiAgICAgICAgZW5oYW5jZWRSZXNwb25zZSA9IGVuaGFuY2VkUmVzcG9uc2UucmVwbGFjZSgvXFwuJC8sICchJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhpZ2ggcGF0aWVuY2U6IEFkZCByZWFzc3VyaW5nIGxhbmd1YWdlXG4gICAgaWYgKHBhdGllbmNlID4gMC44KSB7XG4gICAgICBpZiAoZW1vdGlvbmFsQ29udGV4dC5zdXBwb3J0TmVlZGVkID09PSAnaGlnaCcpIHtcbiAgICAgICAgZW5oYW5jZWRSZXNwb25zZSArPSAnIFRha2UgeW91ciB0aW1lLCBhbmQgbGV0IG1lIGtub3cgaWYgeW91IG5lZWQgYW55dGhpbmcgZWxzZS4nO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBlbXBhdGh5IHN0cmF0ZWd5IGVuaGFuY2VtZW50c1xuICAgIHN3aXRjaCAoZW1vdGlvbmFsUmVzcG9uc2UuZW1wYXRoeVN0cmF0ZWd5KSB7XG4gICAgICBjYXNlICdlbW90aW9uYWxfdmFsaWRhdGlvbic6XG4gICAgICAgIGlmICghZW5oYW5jZWRSZXNwb25zZS5pbmNsdWRlcygndmFsaWQnKSAmJiAhZW5oYW5jZWRSZXNwb25zZS5pbmNsdWRlcygndW5kZXJzdGFuZCcpKSB7XG4gICAgICAgICAgZW5oYW5jZWRSZXNwb25zZSA9IGBZb3VyIGZlZWxpbmdzIGFyZSBjb21wbGV0ZWx5IHZhbGlkLiAke2VuaGFuY2VkUmVzcG9uc2V9YDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdyZWFzc3VyYW5jZV9hbmRfc2FmZXR5JzpcbiAgICAgICAgaWYgKGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb24ucHJpbWFyeSA9PT0gJ2ZlYXInIHx8IGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb24ucHJpbWFyeSA9PT0gJ2FueGlldHknKSB7XG4gICAgICAgICAgZW5oYW5jZWRSZXNwb25zZSArPSAnIFlvdVxcJ3JlIHNhZmUgaGVyZSB0byBzaGFyZSB3aGF0ZXZlciB5b3VcXCdyZSBmZWVsaW5nLic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZ2VudGxlX2VuY291cmFnZW1lbnQnOlxuICAgICAgICBpZiAoIWVuaGFuY2VkUmVzcG9uc2UuaW5jbHVkZXMoJ2dyZWF0JykgJiYgIWVuaGFuY2VkUmVzcG9uc2UuaW5jbHVkZXMoJ3dvbmRlcmZ1bCcpKSB7XG4gICAgICAgICAgZW5oYW5jZWRSZXNwb25zZSA9IGBZb3VcXCdyZSBkb2luZyBncmVhdCBieSBzaGFyaW5nIHRoaXMuICR7ZW5oYW5jZWRSZXNwb25zZX1gO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdG9yZSBlbmhhbmNlZCByZXNwb25zZSBpbiBlcGlzb2RpYyBtZW1vcnlcbiAgICB0aGlzLmVwaXNvZGljTWVtb3J5TGF5ZXIuc3RvcmVFcGlzb2RlKFxuICAgICAgJ2NvbnZlcnNhdGlvbicsXG4gICAgICB7XG4gICAgICAgIHN1bW1hcnk6IGBCb3QgcmVzcG9uZGVkOiBcIiR7ZW5oYW5jZWRSZXNwb25zZX1cImAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBvcmlnaW5hbFJlc3BvbnNlOiByZXNwb25zZSxcbiAgICAgICAgICBlbW90aW9uYWxFbmhhbmNlbWVudHM6IHtcbiAgICAgICAgICAgIHN0cmF0ZWd5OiBlbW90aW9uYWxSZXNwb25zZS5lbXBhdGh5U3RyYXRlZ3ksXG4gICAgICAgICAgICB0b25hbEFkanVzdG1lbnRzOiBlbW90aW9uYWxSZXNwb25zZS50b25hbEFkanVzdG1lbnRzXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXJ0aWNpcGFudHM6IFsnY2hhdGJvdCcsICdodW1hbiddLFxuICAgICAgICBjb250ZXh0OiAncmVzcG9uc2VfZ2VuZXJhdGlvbidcbiAgICAgIH0sXG4gICAgICBlbW90aW9uYWxSZXNwb25zZS5yZXNwb25zZUVtb3Rpb24sXG4gICAgICAwLjYgLy8gTW9kZXJhdGUgaW1wb3J0YW5jZSBmb3IgYm90IHJlc3BvbnNlc1xuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KdpO+4jyBFbmhhbmNlZCByZXNwb25zZTonLCBlbmhhbmNlZFJlc3BvbnNlKTtcbiAgICByZXR1cm4gZW5oYW5jZWRSZXNwb25zZTtcbiAgfVxuXG4gIGdldERlYnVnSW5mbygpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBodW1hblVzZXI6IHtcbiAgICAgICAgaWRlbnRpdHk6IHRoaXMuaHVtYW5Vc2VyLmlkZW50aXR5LFxuICAgICAgICBjb252ZXJzYXRpb25TdGF0ZToge1xuICAgICAgICAgIC4uLnRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLFxuICAgICAgICAgIHByaW1lQ291bnQ6IE9iamVjdC5rZXlzKHRoaXMuaHVtYW5Vc2VyLmNvbnZlcnNhdGlvblN0YXRlLnByaW1lRmFjdG9ycykubGVuZ3RoXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGF0Ym90VXNlcjoge1xuICAgICAgICBpZGVudGl0eTogdGhpcy5jaGF0Ym90VXNlci5pZGVudGl0eSxcbiAgICAgICAgY29udmVyc2F0aW9uU3RhdGU6IHtcbiAgICAgICAgICAuLi50aGlzLmNoYXRib3RVc2VyLmNvbnZlcnNhdGlvblN0YXRlLFxuICAgICAgICAgIHByaW1lQ291bnQ6IE9iamVjdC5rZXlzKHRoaXMuY2hhdGJvdFVzZXIuY29udmVyc2F0aW9uU3RhdGUucHJpbWVGYWN0b3JzKS5sZW5ndGhcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvaGVyZW5jZTogUHJpbWVNYXRoLmNhbGN1bGF0ZUNvaGVyZW5jZShcbiAgICAgICAgdGhpcy5odW1hblVzZXIuY29udmVyc2F0aW9uU3RhdGUucHJpbWVGYWN0b3JzLFxuICAgICAgICB0aGlzLmNoYXRib3RVc2VyLmNvbnZlcnNhdGlvblN0YXRlLnByaW1lRmFjdG9yc1xuICAgICAgKSxcbiAgICAgIGVwaXNvZGljTWVtb3J5OiB7XG4gICAgICAgIHRvdGFsRXBpc29kZXM6IHRoaXMuZXBpc29kaWNNZW1vcnlMYXllci5nZXRNZW1vcnlTdGF0cygpLnRvdGFsRXBpc29kZXMsXG4gICAgICAgIHBlcnNvbmFsaXR5VHJhaXRzOiB0aGlzLmVwaXNvZGljTWVtb3J5TGF5ZXIuZ2V0UGVyc29uYWxpdHlJbnNpZ2h0cygpLnRyYWl0c1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwaXBlbGluZSIsIktub3dsZWRnZUJvb3RzdHJhcCIsIlByaW1lUmVzb25hbmNlRW5naW5lIiwiUHJpbWVNYXRoIiwiU2VtYW50aWNMYXllciIsIlByYWdtYXRpY0xheWVyIiwiU2NoZW1hVm9jYWJ1bGFyeSIsIkRpc2NvdXJzZUxheWVyIiwiR2VuZXJhdGl2ZUxheWVyIiwiRXBpc29kaWNNZW1vcnlMYXllciIsIkVtb3Rpb25hbEludGVsbGlnZW5jZUxheWVyIiwiUHJpbWVDb3JlIiwiY29uc3RydWN0b3IiLCJlbWJlZGRpbmdQaXBlbGluZSIsImlzSW5pdGlhbGl6ZWQiLCJrbm93bGVkZ2VCYXNlIiwiaHVtYW5Vc2VyIiwiaWRlbnRpdHkiLCJpZCIsIm5hbWUiLCJ0eXBlIiwiZW1iZWRkaW5ncyIsInByaW1lRmFjdG9ycyIsInBlcnNvbmFsaXR5IiwidHJhaXRzIiwiY29tbXVuaWNhdGlvblN0eWxlIiwiaW50ZXJlc3RzIiwiY29udmVyc2F0aW9uU3RhdGUiLCJjb250ZXh0IiwidHVybkNvdW50IiwicHJlZmVyZW5jZXMiLCJ0b3BpY3MiLCJyZXNwb25zZUxlbmd0aCIsImNoYXRib3RVc2VyIiwiZW1iZWRkaW5nc01vZGVsIiwidm9jYWJ1bGFyeSIsIk1hcCIsImNvbmNlcHRzIiwicmVsYXRpb25zaGlwcyIsInNlbWFudGljTGF5ZXIiLCJwcmFnbWF0aWNMYXllciIsInNjaGVtYVZvY2FidWxhcnkiLCJkaXNjb3Vyc2VMYXllciIsImdlbmVyYXRpdmVMYXllciIsImVwaXNvZGljTWVtb3J5TGF5ZXIiLCJlbW90aW9uYWxJbnRlbGxpZ2VuY2VMYXllciIsImluaXRpYWxpemUiLCJjb25zb2xlIiwibG9nIiwiYm9vdHN0cmFwQ2hhdGJvdEtub3dsZWRnZSIsImVycm9yIiwiRXJyb3IiLCJrbm93bGVkZ2VCb290c3RyYXAiLCJib290c3RyYXBGcm9tVG9rZW5pemVyIiwiY29uY2VwdEVtYmVkZGluZ3MiLCJzZW1hbnRpY0NsdXN0ZXJzIiwicG9wdWxhdGVDaGF0Ym90SWRlbnRpdHkiLCJtZXNzYWdlIiwiU3RyaW5nIiwiaWRlbnRpdHlQcmltZXMiLCJhbGxFbWJlZGRpbmdzIiwidm9jYWJ1bGFyeUVudHJ5IiwidmFsdWVzIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJwcmltZSIsIndlaWdodCIsInByaW1lTnVtIiwicGFyc2VJbnQiLCJwdXNoIiwiZW1iZWRkaW5nIiwibGVuZ3RoIiwiY2VudHJvaWRFbWJlZGRpbmciLCJjYWxjdWxhdGVDZW50cm9pZEVtYmVkZGluZyIsIkFycmF5IiwiZmlsbCIsImNlbnRyb2lkIiwidmFsdWUiLCJpbmRleCIsIm1hcCIsInByb2Nlc3NDb252ZXJzYXRpb24iLCJpbnB1dCIsImlucHV0RW1iZWRkaW5ncyIsImdlbmVyYXRlRW1iZWRkaW5ncyIsImlucHV0UHJpbWVzIiwiZW1iZWRkaW5nc1RvUHJpbWVzIiwidXBkYXRlVXNlclN0YXRlIiwicmVzcG9uc2VQcmltZXMiLCJnZW5lcmF0ZVJlc3BvbnNlUHJpbWVzIiwicmVzcG9uc2VUZXh0IiwiZ2VuZXJhdGVSZXNwb25zZVRleHQiLCJyZXNwb25zZUVtYmVkZGluZ3MiLCJ0ZXh0IiwicmVzdWx0IiwiZnJvbSIsImRhdGEiLCJ1c2VyIiwicHJpbWVzIiwic2xpY2UiLCJ2YWwiLCJpZHgiLCJjb21iaW5lRmFjdG9ycyIsInVwZGF0ZUVtYmVkZGluZ3NNb2RlbCIsIndvcmRzIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsImZpbHRlciIsIndvcmQiLCJzZXQiLCJyZWxhdGVkV29yZHMiLCJfIiwiaSIsImNvaGVyZW5jZSIsImNhbGN1bGF0ZUNvaGVyZW5jZSIsInRvRml4ZWQiLCJhbXBsaWZ5UmVzb25hbmNlIiwiY3JlYXRlSGFybW9uaWMiLCJhZGRQZXJzb25hbGl0eUZhY3RvcnMiLCJhbXBsaWZpZWQiLCJwcmltZVN0ciIsIk1hdGgiLCJmbG9vciIsImdlbmVyYXRlUHJpbWVzIiwiaGFybW9uaWMiLCJ0b3BGYWN0b3JzIiwic29ydCIsImEiLCJiIiwiaGFybW9uaWNQcmltZSIsImVuaGFuY2VkIiwicGVyc29uYWxpdHlQcmltZXMiLCJsYXN0VXNlcklucHV0Iiwic2VtYW50aWNDb250ZXh0IiwiYW5hbHl6ZVNlbWFudGljQ29udGV4dCIsInByYWdtYXRpY1Jlc3BvbnNlQ29udGV4dCIsImdldENvbnRleHRGb3JSZXNwb25zZSIsInByYWdtYXRpY0NvbnRleHQiLCJjdXJyZW50VG9waWMiLCJhY3RpdmVJbnRlbnRzIiwiZW50aXR5TWVtb3J5IiwicmVsZXZhbnRFbnRpdGllcyIsImNvbnZlcnNhdGlvbkdvYWxzIiwidXNlclByZWZlcmVuY2VzIiwiY29udmVyc2F0aW9uSGlzdG9yeSIsInJlY2VudEhpc3RvcnkiLCJwcm9jZXNzVHVybiIsImludGVudCIsImVudGl0aWVzIiwicmVkdWNlIiwiYWNjIiwiZW50aXR5IiwidXBkYXRlZFByYWdtYXRpY0NvbnRleHQiLCJwcmFnbWF0aWNDb250ZXh0Rm9yR2VuZXJhdGlvbiIsImRpc2NvdXJzZUNvbnRleHQiLCJhbmFseXplRGlzY291cnNlQ29udGV4dCIsImVtb3Rpb25hbENvbnRleHQiLCJhbmFseXplRW1vdGlvbmFsQ29udGVudCIsImVwaXNvZGVJZCIsInN0b3JlRXBpc29kZSIsInN1bW1hcnkiLCJkZXRhaWxzIiwiZW1vdGlvbmFsU3RhdGUiLCJ1c2VyRW1vdGlvbiIsInBhcnRpY2lwYW50cyIsImNvbnZlcnNhdGlvblBoYXNlIiwidmFsZW5jZSIsImFyb3VzYWwiLCJkb21pbmFuY2UiLCJlbW90aW9ucyIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJlbXBhdGh5TGV2ZWwiLCJlbW90aW9uYWxSZXNwb25zZSIsImdlbmVyYXRlRW1vdGlvbmFsUmVzcG9uc2UiLCJnZW5lcmF0aW9uQ29udGV4dCIsInJlc3BvbnNlVHlwZSIsImV4cGVjdGVkUmVzcG9uc2VUeXBlIiwicHJpbWVSZXNvbmFuY2UiLCJnZW5lcmF0ZWRSZXNwb25zZSIsImdlbmVyYXRlUmVzcG9uc2UiLCJlbmhhbmNlUmVzcG9uc2VXaXRoRW1vdGlvbmFsSW50ZWxsaWdlbmNlIiwic2l6ZSIsInZvY2FidWxhcnlQcmltZXMiLCJyZXNvbmFuY2VFbmdpbmUiLCJyZXNvbmFudFdvcmRzIiwiZmluZE1vc3RSZXNvbmFudFdvcmRzIiwiY29udGV4dHVhbFdvcmRzIiwiYXBwbHlDb250ZXh0dWFsV2VpZ2h0aW5nIiwic2VtYW50aWNXb3JkcyIsImVuaGFuY2VSZXNvbmFuY2VXaXRoU2VtYW50aWNzIiwidyIsInJlc29uYW5jZSIsImVuaGFuY2VkUmVzb25hbnRXb3JkcyIsIm9yaWdpbmFsIiwiZmluZCIsInMiLCJyZXNwb25zZSIsImdlbmVyYXRlU2VtYW50aWNSZXNvbmFuY2VSZXNwb25zZSIsImdlbmVyYXRlQmFzaWNSZXNwb25zZSIsInByaW1lc1RvRW1iZWRkaW5ncyIsInByaW1lTGlzdCIsImluZGV4T2YiLCJmaW5kQ2xvc2VzdENvbmNlcHQiLCJjbG9zZXN0Q29uY2VwdCIsImhpZ2hlc3RTaW1pbGFyaXR5IiwiY29uY2VwdCIsInNpbWlsYXJpdHkiLCJjYWxjdWxhdGVDb3NpbmVTaW1pbGFyaXR5IiwiZG90UHJvZHVjdCIsInN1bSIsIm1hZ25pdHVkZUEiLCJzcXJ0IiwibWFnbml0dWRlQiIsImdlbmVyYXRlVGV4dEZyb21Db25jZXB0IiwibWFnbml0dWRlIiwiY2FsY3VsYXRlTWFnbml0dWRlIiwiY29uY2VwdFZhcmlhdGlvbnMiLCJnZXRDb25jZXB0VmFyaWF0aW9ucyIsInZhcmlhdGlvbkluZGV4IiwidmFyaWF0aW9ucyIsInZvY2FiIiwiZmluZE1vc3RTaW1pbGFyQ29uY2VwdHMiLCJjb3VudCIsInNpbWlsYXJpdGllcyIsInNvcnRlZCIsImZpbHRlcmVkIiwiaXRlbSIsInNlbWFudGljQm9vc3RzIiwicHJpbWFyeVdvcmQiLCJpbmNsdWRlcyIsImVudGl0eVR5cGUiLCJlbnRpdHlOYW1lIiwiam9pbiIsIm5hbWVNYXRjaCIsIm1hdGNoIiwiZ2VuZXJhdGVSZXNvbmFuY2VCYXNlZFJlc3BvbnNlIiwic2hhcmVkUHJpbWVzIiwiaGFybW9uaWNNYXRjaGVzIiwic29tZSIsInNoYXJlZFByaW1lQ291bnQiLCJoYXJtb25pY0NvdW50Iiwic2Vjb25kV29yZCIsImdlbmVyYXRlQ29uY2VwdEJhc2VkUmVzcG9uc2UiLCJwcmltYXJ5Q29uY2VwdCIsInJlbGF0ZWRDb25jZXB0cyIsImdldCIsInJlbGF0ZWRDb25jZXB0IiwicHJpbWVDb3VudCIsImtleXMiLCJkb21pbmFudFByaW1lIiwiY29udmVyc2F0aW9uTGVuZ3RoIiwicmVzcG9uc2VzIiwiZW1wYXRoeVN0cmF0ZWd5Iiwic3VwcG9ydExldmVsIiwidG9uYWxBZGp1c3RtZW50cyIsImVuaGFuY2VkUmVzcG9uc2UiLCJ3YXJtdGgiLCJmb3JtYWxpdHkiLCJlbnRodXNpYXNtIiwicGF0aWVuY2UiLCJyZXBsYWNlIiwic3VwcG9ydE5lZWRlZCIsIm9yaWdpbmFsUmVzcG9uc2UiLCJlbW90aW9uYWxFbmhhbmNlbWVudHMiLCJzdHJhdGVneSIsInJlc3BvbnNlRW1vdGlvbiIsImdldERlYnVnSW5mbyIsImVwaXNvZGljTWVtb3J5IiwidG90YWxFcGlzb2RlcyIsImdldE1lbW9yeVN0YXRzIiwicGVyc29uYWxpdHlUcmFpdHMiLCJnZXRQZXJzb25hbGl0eUluc2lnaHRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/core/primelm-models.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/memory/emotional-intelligence.ts":
/*!**************************************************!*\
  !*** ./src/lib/memory/emotional-intelligence.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmotionalIntelligenceLayer: () => (/* binding */ EmotionalIntelligenceLayer)\n/* harmony export */ });\n// =============================================================================\n// EMOTIONAL INTELLIGENCE LAYER - Emotion Detection, Empathy, Social Awareness\n// =============================================================================\nclass EmotionalIntelligenceLayer {\n    constructor(){\n        this.emotionLexicon = new Map();\n        this.emotionalPatterns = new Map();\n        this.empathyStrategies = new Map();\n        this.socialCues = new Map();\n        this.conversationMoodHistory = [];\n        this.initializeEmotionLexicon();\n        this.initializeEmpathyStrategies();\n        this.initializeSocialCues();\n    }\n    /**\n   * Analyze emotional content of text input\n   */ analyzeEmotionalContent(text, context) {\n        console.log(' Analyzing emotional content:', text);\n        const userEmotion = this.detectEmotion(text);\n        const socialCues = this.detectSocialCues(text);\n        const conversationMood = this.assessConversationMood(text, context);\n        const empathyLevel = this.calculateEmpathyLevel(userEmotion, context);\n        const supportNeeded = this.assessSupportNeeded(userEmotion, socialCues);\n        // Update emotional history\n        this.updateEmotionalHistory(userEmotion);\n        this.updateConversationMood(conversationMood);\n        const emotionalContext = {\n            userEmotion,\n            conversationMood,\n            emotionalHistory: this.getRecentEmotionalHistory(),\n            socialCues,\n            empathyLevel,\n            supportNeeded\n        };\n        console.log(' Emotional analysis complete:', {\n            emotion: userEmotion.primary,\n            mood: conversationMood,\n            empathy: empathyLevel,\n            support: supportNeeded\n        });\n        return emotionalContext;\n    }\n    /**\n   * Generate emotionally intelligent response\n   */ generateEmotionalResponse(emotionalContext, responseContent) {\n        console.log(' Generating emotional response...');\n        const responseEmotion = this.determineResponseEmotion(emotionalContext);\n        const empathyStrategy = this.selectEmpathyStrategy(emotionalContext);\n        const supportLevel = this.determineSupportLevel(emotionalContext);\n        const tonalAdjustments = this.calculateTonalAdjustments(emotionalContext);\n        const suggestedPhrases = this.generateSuggestedPhrases(emotionalContext, empathyStrategy);\n        const emotionalResponse = {\n            responseEmotion,\n            empathyStrategy,\n            supportLevel,\n            tonalAdjustments,\n            suggestedPhrases\n        };\n        console.log(' Emotional response generated:', {\n            strategy: empathyStrategy,\n            support: supportLevel,\n            warmth: tonalAdjustments.warmth\n        });\n        return emotionalResponse;\n    }\n    /**\n   * Provide social awareness insights\n   */ provideSocialAwarenessInsights(emotionalContext, conversationHistory) {\n        const relationshipDynamics = this.analyzeRelationshipDynamics(conversationHistory);\n        const communicationStyle = this.identifyCommunicationStyle(emotionalContext, conversationHistory);\n        const culturalConsiderations = this.assessCulturalConsiderations(emotionalContext);\n        const appropriateResponses = this.suggestAppropriateResponses(emotionalContext);\n        const boundaryRespect = this.assessBoundaryRespect(emotionalContext, conversationHistory);\n        return {\n            relationshipDynamics,\n            communicationStyle,\n            culturalConsiderations,\n            appropriateResponses,\n            boundaryRespect\n        };\n    }\n    /**\n   * Detect emotion from text\n   */ detectEmotion(text) {\n        const lowerText = text.toLowerCase();\n        let detectedEmotions = [];\n        // Check emotion lexicon\n        for (const [emotionWord, emotionState] of this.emotionLexicon){\n            if (lowerText.includes(emotionWord)) {\n                detectedEmotions.push({\n                    emotion: emotionState.primary,\n                    confidence: 0.8\n                });\n            }\n        }\n        // Pattern-based emotion detection\n        const emotionPatterns = [\n            {\n                pattern: /(!+|excited|amazing|wonderful|fantastic)/i,\n                emotion: 'joy',\n                confidence: 0.7\n            },\n            {\n                pattern: /(sad|depressed|down|upset|disappointed)/i,\n                emotion: 'sadness',\n                confidence: 0.8\n            },\n            {\n                pattern: /(angry|mad|furious|annoyed|frustrated)/i,\n                emotion: 'anger',\n                confidence: 0.8\n            },\n            {\n                pattern: /(scared|afraid|worried|anxious|nervous)/i,\n                emotion: 'fear',\n                confidence: 0.7\n            },\n            {\n                pattern: /(surprised|shocked|amazed|wow)/i,\n                emotion: 'surprise',\n                confidence: 0.6\n            },\n            {\n                pattern: /(disgusted|gross|yuck|eww)/i,\n                emotion: 'disgust',\n                confidence: 0.7\n            },\n            {\n                pattern: /(love|adore|cherish|treasure)/i,\n                emotion: 'love',\n                confidence: 0.8\n            },\n            {\n                pattern: /(hate|despise|loathe|detest)/i,\n                emotion: 'hate',\n                confidence: 0.8\n            },\n            {\n                pattern: /(curious|interested|intrigued|wondering)/i,\n                emotion: 'curiosity',\n                confidence: 0.6\n            },\n            {\n                pattern: /(confused|puzzled|bewildered|lost)/i,\n                emotion: 'confusion',\n                confidence: 0.7\n            },\n            {\n                pattern: /(grateful|thankful|appreciative)/i,\n                emotion: 'gratitude',\n                confidence: 0.8\n            },\n            {\n                pattern: /(proud|accomplished|achieved)/i,\n                emotion: 'pride',\n                confidence: 0.7\n            },\n            {\n                pattern: /(embarrassed|ashamed|humiliated)/i,\n                emotion: 'shame',\n                confidence: 0.7\n            },\n            {\n                pattern: /(lonely|isolated|alone)/i,\n                emotion: 'loneliness',\n                confidence: 0.8\n            },\n            {\n                pattern: /(hopeful|optimistic|positive)/i,\n                emotion: 'hope',\n                confidence: 0.7\n            },\n            {\n                pattern: /(hopeless|pessimistic|despair)/i,\n                emotion: 'despair',\n                confidence: 0.8\n            },\n            {\n                pattern: /(devastated|destroyed|crushed)/i,\n                emotion: 'devastated',\n                confidence: 0.9\n            }\n        ];\n        emotionPatterns.forEach(({ pattern, emotion, confidence })=>{\n            if (pattern.test(text)) {\n                detectedEmotions.push({\n                    emotion,\n                    confidence\n                });\n            }\n        });\n        // Contextual emotion detection\n        const contextualEmotions = this.detectContextualEmotions(text);\n        detectedEmotions.push(...contextualEmotions);\n        // Default to neutral if no emotions detected\n        if (detectedEmotions.length === 0) {\n            return this.createEmotionalState('neutral', 0.0, 0.3, 0.5, 0.3, 0.5);\n        }\n        // Find strongest emotion\n        const strongestEmotion = detectedEmotions.reduce((prev, current)=>current.confidence > prev.confidence ? current : prev);\n        // Get base emotional state or create one with appropriate valence\n        let baseState = this.emotionLexicon.get(strongestEmotion.emotion);\n        if (!baseState) {\n            // Create emotional state with appropriate valence based on emotion type\n            const valence = this.getEmotionValence(strongestEmotion.emotion);\n            const arousal = this.getEmotionArousal(strongestEmotion.emotion);\n            const dominance = this.getEmotionDominance(strongestEmotion.emotion);\n            baseState = this.createEmotionalState(strongestEmotion.emotion, valence, arousal, dominance, 0.5, strongestEmotion.confidence);\n        }\n        // Adjust intensity based on text features\n        const intensity = this.calculateEmotionalIntensity(text, baseState);\n        return {\n            ...baseState,\n            intensity,\n            confidence: strongestEmotion.confidence\n        };\n    }\n    /**\n   * Detect contextual emotions based on sentence structure and context\n   */ detectContextualEmotions(text) {\n        const contextualEmotions = [];\n        // Question patterns often indicate curiosity or confusion\n        if (text.includes('?')) {\n            if (text.toLowerCase().includes('how') || text.toLowerCase().includes('why')) {\n                contextualEmotions.push({\n                    emotion: 'curiosity',\n                    confidence: 0.6\n                });\n            } else if (text.toLowerCase().includes('what') && text.toLowerCase().includes('wrong')) {\n                contextualEmotions.push({\n                    emotion: 'concern',\n                    confidence: 0.7\n                });\n            }\n        }\n        // Exclamation patterns often indicate excitement or strong emotion\n        const exclamationCount = (text.match(/!/g) || []).length;\n        if (exclamationCount > 0) {\n            contextualEmotions.push({\n                emotion: 'excitement',\n                confidence: Math.min(0.8, 0.3 + exclamationCount * 0.2)\n            });\n        }\n        // Capitalization patterns\n        const capsWords = text.match(/[A-Z]{2,}/g);\n        if (capsWords && capsWords.length > 0) {\n            contextualEmotions.push({\n                emotion: 'emphasis',\n                confidence: 0.6\n            });\n        }\n        // Repetition patterns (e.g., \"no no no\", \"yes yes yes\")\n        const repetitionPattern = /\\b(\\w+)\\s+\\1\\b/gi;\n        if (repetitionPattern.test(text)) {\n            contextualEmotions.push({\n                emotion: 'emphasis',\n                confidence: 0.5\n            });\n        }\n        return contextualEmotions;\n    }\n    /**\n   * Calculate emotional intensity based on text features\n   */ calculateEmotionalIntensity(text, baseState) {\n        let intensity = baseState.intensity;\n        // Intensifiers\n        const intensifiers = [\n            'very',\n            'extremely',\n            'incredibly',\n            'absolutely',\n            'totally',\n            'completely',\n            'utterly'\n        ];\n        const intensifierCount = intensifiers.filter((word)=>text.toLowerCase().includes(word)).length;\n        intensity += intensifierCount * 0.2;\n        // Diminishers\n        const diminishers = [\n            'slightly',\n            'somewhat',\n            'a bit',\n            'kind of',\n            'sort of',\n            'maybe',\n            'perhaps'\n        ];\n        const diminisherCount = diminishers.filter((word)=>text.toLowerCase().includes(word)).length;\n        intensity -= diminisherCount * 0.15;\n        // Punctuation intensity\n        const exclamationCount = (text.match(/!/g) || []).length;\n        intensity += exclamationCount * 0.1;\n        // Caps intensity\n        const capsRatio = (text.match(/[A-Z]/g) || []).length / text.length;\n        if (capsRatio > 0.3) {\n            intensity += 0.2;\n        }\n        return Math.max(0, Math.min(1, intensity));\n    }\n    /**\n   * Detect social cues in text\n   */ detectSocialCues(text) {\n        const detectedCues = [];\n        const lowerText = text.toLowerCase();\n        // Politeness cues\n        if (lowerText.includes('please') || lowerText.includes('thank you') || lowerText.includes('thanks')) {\n            detectedCues.push('polite');\n        }\n        // Urgency cues\n        if (lowerText.includes('urgent') || lowerText.includes('asap') || lowerText.includes('quickly')) {\n            detectedCues.push('urgent');\n        }\n        // Uncertainty cues\n        if (lowerText.includes('maybe') || lowerText.includes('perhaps') || lowerText.includes('not sure')) {\n            detectedCues.push('uncertain');\n        }\n        // Confidence cues\n        if (lowerText.includes('definitely') || lowerText.includes('absolutely') || lowerText.includes('certain')) {\n            detectedCues.push('confident');\n        }\n        // Support-seeking cues\n        if (lowerText.includes('help') || lowerText.includes('advice') || lowerText.includes('support')) {\n            detectedCues.push('support_seeking');\n        }\n        // Sharing cues\n        if (lowerText.includes('tell you') || lowerText.includes('share') || lowerText.includes('story')) {\n            detectedCues.push('sharing');\n        }\n        // Boundary cues\n        if (lowerText.includes('private') || lowerText.includes('personal') || lowerText.includes('don\\'t want to')) {\n            detectedCues.push('boundary_setting');\n        }\n        return detectedCues;\n    }\n    /**\n   * Assess conversation mood\n   */ assessConversationMood(text, context) {\n        const emotionalState = this.detectEmotion(text);\n        const socialCues = this.detectSocialCues(text);\n        // Determine mood based on emotion and social cues\n        if (emotionalState.valence > 0.3) {\n            if (socialCues.includes('sharing')) return 'open_sharing';\n            if (socialCues.includes('confident')) return 'positive_confident';\n            return 'positive';\n        } else if (emotionalState.valence < -0.3) {\n            if (socialCues.includes('support_seeking')) return 'seeking_support';\n            if (socialCues.includes('urgent')) return 'distressed';\n            return 'negative';\n        } else {\n            if (emotionalState.primary === 'curiosity') return 'exploratory';\n            if (socialCues.includes('uncertain')) return 'exploratory';\n            if (socialCues.includes('polite')) return 'formal';\n            return 'neutral';\n        }\n    }\n    /**\n   * Calculate empathy level needed\n   */ calculateEmpathyLevel(userEmotion, context) {\n        let empathyLevel = 0.5; // Base empathy level\n        // Increase empathy for negative emotions\n        if (userEmotion.valence < 0) {\n            empathyLevel += Math.abs(userEmotion.valence) * 0.4;\n        }\n        // Increase empathy for high arousal emotions\n        if (userEmotion.arousal > 0.7) {\n            empathyLevel += 0.2;\n        }\n        // Increase empathy for vulnerable emotions\n        const vulnerableEmotions = [\n            'sadness',\n            'fear',\n            'shame',\n            'loneliness',\n            'despair'\n        ];\n        if (vulnerableEmotions.includes(userEmotion.primary)) {\n            empathyLevel += 0.3;\n        }\n        // Adjust based on conversation history\n        if (context?.emotionalHistory) {\n            const recentNegativeEmotions = context.emotionalHistory.slice(-3).filter((emotion)=>emotion.valence < 0);\n            if (recentNegativeEmotions.length >= 2) {\n                empathyLevel += 0.2; // Sustained negative emotions need more empathy\n            }\n        }\n        return Math.max(0, Math.min(1, empathyLevel));\n    }\n    /**\n   * Assess support needed\n   */ assessSupportNeeded(userEmotion, socialCues) {\n        let supportScore = 0;\n        // Emotional factors\n        if (userEmotion.valence < -0.6) supportScore += 3;\n        else if (userEmotion.valence < -0.3) supportScore += 2;\n        else if (userEmotion.valence < 0) supportScore += 1;\n        if (userEmotion.intensity > 0.7) supportScore += 1;\n        // Social cue factors\n        if (socialCues.includes('support_seeking')) supportScore += 2;\n        if (socialCues.includes('urgent')) supportScore += 2;\n        if (socialCues.includes('uncertain')) supportScore += 1;\n        // Vulnerable emotion factors\n        const vulnerableEmotions = [\n            'sadness',\n            'fear',\n            'shame',\n            'loneliness',\n            'despair'\n        ];\n        if (vulnerableEmotions.includes(userEmotion.primary)) supportScore += 2;\n        // Specific high-intensity negative emotions\n        const devastatingEmotions = [\n            'devastated',\n            'despair',\n            'hopeless'\n        ];\n        if (devastatingEmotions.some((emotion)=>userEmotion.primary.includes(emotion))) {\n            supportScore += 3;\n        }\n        if (supportScore >= 5) return 'high';\n        if (supportScore >= 2) return 'medium';\n        return 'low';\n    }\n    /**\n   * Determine appropriate response emotion\n   */ determineResponseEmotion(emotionalContext) {\n        const userEmotion = emotionalContext.userEmotion;\n        // Mirror positive emotions with slightly lower intensity\n        if (userEmotion.valence > 0.3) {\n            return this.createEmotionalState('warmth', userEmotion.valence * 0.8, userEmotion.arousal * 0.7, 0.6, userEmotion.intensity * 0.8, 0.8);\n        }\n        // Respond to negative emotions with supportive emotions\n        if (userEmotion.valence < -0.3) {\n            const supportiveEmotions = {\n                'sadness': 'compassion',\n                'fear': 'reassurance',\n                'anger': 'understanding',\n                'shame': 'acceptance',\n                'loneliness': 'connection',\n                'despair': 'hope'\n            };\n            const responseEmotion = supportiveEmotions[userEmotion.primary] || 'empathy';\n            return this.createEmotionalState(responseEmotion, 0.3, 0.4, 0.5, 0.6, 0.8);\n        }\n        // Neutral response for neutral emotions\n        return this.createEmotionalState('calm', 0.1, 0.3, 0.5, 0.4, 0.7);\n    }\n    /**\n   * Select empathy strategy\n   */ selectEmpathyStrategy(emotionalContext) {\n        const userEmotion = emotionalContext.userEmotion;\n        const supportNeeded = emotionalContext.supportNeeded;\n        // High support situations\n        if (supportNeeded === 'high') {\n            if (userEmotion.primary === 'sadness') return 'emotional_validation';\n            if (userEmotion.primary === 'fear') return 'reassurance_and_safety';\n            if (userEmotion.primary === 'anger') return 'acknowledgment_and_understanding';\n            return 'active_listening';\n        }\n        // Medium support situations\n        if (supportNeeded === 'medium') {\n            if (userEmotion.valence < 0) return 'gentle_encouragement';\n            if (emotionalContext.socialCues.includes('uncertain')) return 'clarification_and_guidance';\n            return 'supportive_engagement';\n        }\n        // Low support situations\n        if (userEmotion.valence > 0.5) return 'positive_reinforcement';\n        if (emotionalContext.socialCues.includes('sharing')) return 'interested_listening';\n        return 'neutral_engagement';\n    }\n    /**\n   * Determine support level\n   */ determineSupportLevel(emotionalContext) {\n        const userEmotion = emotionalContext.userEmotion;\n        const socialCues = emotionalContext.socialCues;\n        // Validation for vulnerable emotions\n        if ([\n            'sadness',\n            'fear',\n            'shame',\n            'loneliness'\n        ].includes(userEmotion.primary)) {\n            return 'validation';\n        }\n        // Problem solving for frustration or confusion\n        if ([\n            'anger',\n            'frustration',\n            'confusion'\n        ].includes(userEmotion.primary) && socialCues.includes('support_seeking')) {\n            return 'problem_solving';\n        }\n        // Encouragement for low confidence or uncertainty\n        if (socialCues.includes('uncertain') || userEmotion.dominance < 0.3) {\n            return 'encouragement';\n        }\n        // Distraction for overwhelming emotions\n        if (userEmotion.intensity > 0.8 && userEmotion.arousal > 0.8) {\n            return 'distraction';\n        }\n        return 'validation'; // Default to validation\n    }\n    /**\n   * Calculate tonal adjustments\n   */ calculateTonalAdjustments(emotionalContext) {\n        const userEmotion = emotionalContext.userEmotion;\n        const empathyLevel = emotionalContext.empathyLevel;\n        return {\n            warmth: Math.max(0.3, empathyLevel),\n            formality: userEmotion.valence < -0.5 ? 0.3 : 0.5,\n            enthusiasm: Math.max(0.2, userEmotion.valence * 0.8),\n            patience: userEmotion.arousal > 0.7 ? 0.9 : 0.6 // More patience for high arousal\n        };\n    }\n    /**\n   * Generate suggested phrases for emotional response\n   */ generateSuggestedPhrases(emotionalContext, empathyStrategy) {\n        const phrases = [];\n        const userEmotion = emotionalContext.userEmotion;\n        // Get strategy-specific phrases\n        const strategyPhrases = this.empathyStrategies.get(empathyStrategy) || [];\n        phrases.push(...strategyPhrases);\n        // Add emotion-specific phrases\n        const emotionPhrases = this.getEmotionSpecificPhrases(userEmotion.primary);\n        phrases.push(...emotionPhrases);\n        // Add general supportive phrases if needed\n        if (phrases.length < 3) {\n            phrases.push(\"I understand how you're feeling.\", \"Thank you for sharing that with me.\", \"I'm here to help.\");\n        }\n        return phrases.slice(0, 5); // Return top 5 phrases\n    }\n    /**\n   * Get emotion-specific phrases\n   */ getEmotionSpecificPhrases(emotion) {\n        const emotionPhrases = {\n            'sadness': [\n                \"I can hear that you're going through a difficult time.\",\n                \"It's completely understandable to feel this way.\",\n                \"Your feelings are valid.\"\n            ],\n            'fear': [\n                \"It's natural to feel worried about this.\",\n                \"You're not alone in feeling this way.\",\n                \"Let's work through this together.\"\n            ],\n            'anger': [\n                \"I can understand why that would be frustrating.\",\n                \"Your feelings about this are completely valid.\",\n                \"It sounds like this situation is really challenging.\"\n            ],\n            'joy': [\n                \"That's wonderful to hear!\",\n                \"I'm so happy for you!\",\n                \"What an exciting development!\"\n            ],\n            'confusion': [\n                \"That does sound confusing.\",\n                \"Let me help clarify that for you.\",\n                \"It's okay to feel uncertain about this.\"\n            ]\n        };\n        return emotionPhrases[emotion] || [];\n    }\n    /**\n   * Analyze relationship dynamics\n   */ analyzeRelationshipDynamics(conversationHistory) {\n        if (conversationHistory.length < 3) {\n            return 'early_interaction';\n        }\n        // Analyze patterns in conversation\n        const userInitiatedCount = conversationHistory.filter((turn)=>turn.speaker === 'human').length;\n        const totalTurns = conversationHistory.length;\n        const userInitiationRatio = userInitiatedCount / totalTurns;\n        if (userInitiationRatio > 0.7) {\n            return 'user_driven';\n        } else if (userInitiationRatio < 0.3) {\n            return 'assistant_guided';\n        } else {\n            return 'collaborative';\n        }\n    }\n    /**\n   * Identify communication style\n   */ identifyCommunicationStyle(emotionalContext, conversationHistory) {\n        const socialCues = emotionalContext.socialCues;\n        if (socialCues.includes('polite') && socialCues.includes('formal')) {\n            return 'formal_polite';\n        } else if (socialCues.includes('sharing') && socialCues.includes('open')) {\n            return 'open_expressive';\n        } else if (socialCues.includes('uncertain') && socialCues.includes('support_seeking')) {\n            return 'hesitant_seeking';\n        } else if (socialCues.includes('confident') && socialCues.includes('direct')) {\n            return 'direct_confident';\n        } else {\n            return 'casual_friendly';\n        }\n    }\n    /**\n   * Assess cultural considerations\n   */ assessCulturalConsiderations(emotionalContext) {\n        const considerations = [];\n        // Based on communication patterns and emotional expression\n        if (emotionalContext.userEmotion.dominance < 0.3) {\n            considerations.push('respect_for_hierarchy');\n        }\n        if (emotionalContext.socialCues.includes('polite')) {\n            considerations.push('formal_courtesy');\n        }\n        if (emotionalContext.socialCues.includes('boundary_setting')) {\n            considerations.push('privacy_respect');\n        }\n        // Default considerations\n        considerations.push('inclusive_language', 'respectful_tone');\n        return considerations;\n    }\n    /**\n   * Suggest appropriate responses\n   */ suggestAppropriateResponses(emotionalContext) {\n        const responses = [];\n        const userEmotion = emotionalContext.userEmotion;\n        if (userEmotion.valence < -0.5) {\n            responses.push('offer_emotional_support', 'validate_feelings', 'provide_resources');\n        } else if (userEmotion.valence > 0.5) {\n            responses.push('share_enthusiasm', 'encourage_continuation', 'ask_follow_up');\n        } else {\n            responses.push('maintain_engagement', 'provide_information', 'ask_clarifying_questions');\n        }\n        return responses;\n    }\n    /**\n   * Assess boundary respect\n   */ assessBoundaryRespect(emotionalContext, conversationHistory) {\n        const boundaries = [];\n        if (emotionalContext.socialCues.includes('boundary_setting')) {\n            boundaries.push('respect_stated_boundaries');\n        }\n        if (emotionalContext.socialCues.includes('private')) {\n            boundaries.push('avoid_personal_probing');\n        }\n        // Always include basic boundaries\n        boundaries.push('maintain_professional_distance', 'respect_user_autonomy');\n        return boundaries;\n    }\n    /**\n   * Initialize emotion lexicon\n   */ initializeEmotionLexicon() {\n        const emotions = [\n            {\n                word: 'happy',\n                state: this.createEmotionalState('joy', 0.8, 0.6, 0.6, 0.7, 0.8)\n            },\n            {\n                word: 'sad',\n                state: this.createEmotionalState('sadness', -0.7, 0.4, 0.3, 0.6, 0.8)\n            },\n            {\n                word: 'angry',\n                state: this.createEmotionalState('anger', -0.6, 0.8, 0.8, 0.8, 0.8)\n            },\n            {\n                word: 'scared',\n                state: this.createEmotionalState('fear', -0.5, 0.7, 0.2, 0.7, 0.7)\n            },\n            {\n                word: 'excited',\n                state: this.createEmotionalState('excitement', 0.9, 0.9, 0.7, 0.8, 0.8)\n            },\n            {\n                word: 'calm',\n                state: this.createEmotionalState('calm', 0.3, 0.2, 0.5, 0.4, 0.8)\n            },\n            {\n                word: 'confused',\n                state: this.createEmotionalState('confusion', -0.2, 0.5, 0.3, 0.5, 0.7)\n            },\n            {\n                word: 'grateful',\n                state: this.createEmotionalState('gratitude', 0.7, 0.4, 0.4, 0.6, 0.8)\n            },\n            {\n                word: 'proud',\n                state: this.createEmotionalState('pride', 0.8, 0.6, 0.7, 0.7, 0.8)\n            },\n            {\n                word: 'lonely',\n                state: this.createEmotionalState('loneliness', -0.6, 0.3, 0.2, 0.6, 0.8)\n            },\n            {\n                word: 'hopeful',\n                state: this.createEmotionalState('hope', 0.6, 0.5, 0.5, 0.6, 0.7)\n            },\n            {\n                word: 'worried',\n                state: this.createEmotionalState('worry', -0.4, 0.6, 0.3, 0.6, 0.7)\n            }\n        ];\n        emotions.forEach(({ word, state })=>{\n            this.emotionLexicon.set(word, state);\n        });\n    }\n    /**\n   * Initialize empathy strategies\n   */ initializeEmpathyStrategies() {\n        const strategies = [\n            {\n                strategy: 'emotional_validation',\n                phrases: [\n                    \"Your feelings are completely valid.\",\n                    \"It makes perfect sense that you'd feel this way.\",\n                    \"Anyone would feel upset in this situation.\"\n                ]\n            },\n            {\n                strategy: 'reassurance_and_safety',\n                phrases: [\n                    \"You're safe here to share whatever you're feeling.\",\n                    \"It's okay to feel uncertain about this.\",\n                    \"We can work through this step by step.\"\n                ]\n            },\n            {\n                strategy: 'acknowledgment_and_understanding',\n                phrases: [\n                    \"I can understand why that would be frustrating.\",\n                    \"Your feelings about this are completely valid.\",\n                    \"It sounds like this situation is really challenging.\"\n                ]\n            },\n            {\n                strategy: 'active_listening',\n                phrases: [\n                    \"I'm here to listen.\",\n                    \"Tell me more about how you're feeling.\",\n                    \"I want to understand what you're going through.\"\n                ]\n            },\n            {\n                strategy: 'gentle_encouragement',\n                phrases: [\n                    \"You're doing great by talking about this.\",\n                    \"It takes courage to share these feelings.\",\n                    \"You're not alone in this.\"\n                ]\n            },\n            {\n                strategy: 'positive_reinforcement',\n                phrases: [\n                    \"That's wonderful to hear!\",\n                    \"I'm so happy for you!\",\n                    \"What an exciting development!\"\n                ]\n            }\n        ];\n        strategies.forEach(({ strategy, phrases })=>{\n            this.empathyStrategies.set(strategy, phrases);\n        });\n    }\n    /**\n   * Initialize social cues\n   */ initializeSocialCues() {\n        const cues = [\n            {\n                cue: 'polite',\n                indicators: [\n                    'please',\n                    'thank you',\n                    'thanks',\n                    'excuse me'\n                ]\n            },\n            {\n                cue: 'urgent',\n                indicators: [\n                    'urgent',\n                    'asap',\n                    'quickly',\n                    'immediately'\n                ]\n            },\n            {\n                cue: 'uncertain',\n                indicators: [\n                    'maybe',\n                    'perhaps',\n                    'not sure',\n                    'think'\n                ]\n            },\n            {\n                cue: 'confident',\n                indicators: [\n                    'definitely',\n                    'absolutely',\n                    'certain',\n                    'sure'\n                ]\n            },\n            {\n                cue: 'support_seeking',\n                indicators: [\n                    'help',\n                    'advice',\n                    'support',\n                    'guidance'\n                ]\n            },\n            {\n                cue: 'sharing',\n                indicators: [\n                    'tell you',\n                    'share',\n                    'story',\n                    'experience'\n                ]\n            }\n        ];\n        cues.forEach(({ cue, indicators })=>{\n            this.socialCues.set(cue, indicators);\n        });\n    }\n    /**\n   * Create emotional state\n   */ createEmotionalState(primary, valence, arousal, dominance, intensity, confidence) {\n        return {\n            primary,\n            secondary: [],\n            valence,\n            arousal,\n            dominance,\n            intensity,\n            confidence\n        };\n    }\n    /**\n   * Update emotional history\n   */ updateEmotionalHistory(emotion) {\n        // Keep last 10 emotions\n        if (this.conversationMoodHistory.length >= 10) {\n            this.conversationMoodHistory.shift();\n        }\n        this.conversationMoodHistory.push(emotion.primary);\n    }\n    /**\n   * Update conversation mood\n   */ updateConversationMood(mood) {\n        // Store mood for trend analysis\n        this.conversationMoodHistory.push(mood);\n        if (this.conversationMoodHistory.length > 20) {\n            this.conversationMoodHistory.shift();\n        }\n    }\n    /**\n   * Get recent emotional history\n   */ getRecentEmotionalHistory() {\n        // Return recent emotions (simplified for now)\n        return this.conversationMoodHistory.slice(-5).map((emotion)=>this.createEmotionalState(emotion, 0, 0.5, 0.5, 0.5, 0.7));\n    }\n    /**\n   * Get valence for emotion type\n   */ getEmotionValence(emotion) {\n        const positiveEmotions = [\n            'joy',\n            'happiness',\n            'excitement',\n            'gratitude',\n            'love',\n            'pride',\n            'hope'\n        ];\n        const negativeEmotions = [\n            'sadness',\n            'anger',\n            'fear',\n            'shame',\n            'loneliness',\n            'despair',\n            'devastated',\n            'hate'\n        ];\n        if (positiveEmotions.includes(emotion)) return 0.7;\n        if (negativeEmotions.includes(emotion)) return -0.6;\n        return 0.0; // neutral\n    }\n    /**\n   * Get arousal for emotion type\n   */ getEmotionArousal(emotion) {\n        const highArousalEmotions = [\n            'excitement',\n            'anger',\n            'fear',\n            'surprise'\n        ];\n        const lowArousalEmotions = [\n            'sadness',\n            'calm',\n            'loneliness'\n        ];\n        if (highArousalEmotions.includes(emotion)) return 0.8;\n        if (lowArousalEmotions.includes(emotion)) return 0.3;\n        return 0.5; // moderate\n    }\n    /**\n   * Get dominance for emotion type\n   */ getEmotionDominance(emotion) {\n        const highDominanceEmotions = [\n            'anger',\n            'pride',\n            'excitement'\n        ];\n        const lowDominanceEmotions = [\n            'fear',\n            'shame',\n            'sadness',\n            'loneliness'\n        ];\n        if (highDominanceEmotions.includes(emotion)) return 0.7;\n        if (lowDominanceEmotions.includes(emotion)) return 0.3;\n        return 0.5; // moderate\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL21lbW9yeS9lbW90aW9uYWwtaW50ZWxsaWdlbmNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRkFBZ0Y7QUFDaEYsOEVBQThFO0FBQzlFLGdGQUFnRjtBQTRDekUsTUFBTUE7SUFPWEMsYUFBYzthQU5OQyxpQkFBOEMsSUFBSUM7YUFDbERDLG9CQUF5QyxJQUFJRDthQUM3Q0Usb0JBQTJDLElBQUlGO2FBQy9DRyxhQUFvQyxJQUFJSDthQUN4Q0ksMEJBQW9DLEVBQUU7UUFHNUMsSUFBSSxDQUFDQyx3QkFBd0I7UUFDN0IsSUFBSSxDQUFDQywyQkFBMkI7UUFDaEMsSUFBSSxDQUFDQyxvQkFBb0I7SUFDM0I7SUFFQTs7R0FFQyxHQUNEQyx3QkFBd0JDLElBQVksRUFBRUMsT0FBYSxFQUFvQjtRQUNyRUMsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ0g7UUFFL0MsTUFBTUksY0FBYyxJQUFJLENBQUNDLGFBQWEsQ0FBQ0w7UUFDdkMsTUFBTU4sYUFBYSxJQUFJLENBQUNZLGdCQUFnQixDQUFDTjtRQUN6QyxNQUFNTyxtQkFBbUIsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ1IsTUFBTUM7UUFDM0QsTUFBTVEsZUFBZSxJQUFJLENBQUNDLHFCQUFxQixDQUFDTixhQUFhSDtRQUM3RCxNQUFNVSxnQkFBZ0IsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ1IsYUFBYVY7UUFFNUQsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ21CLHNCQUFzQixDQUFDVDtRQUM1QixJQUFJLENBQUNVLHNCQUFzQixDQUFDUDtRQUU1QixNQUFNUSxtQkFBcUM7WUFDekNYO1lBQ0FHO1lBQ0FTLGtCQUFrQixJQUFJLENBQUNDLHlCQUF5QjtZQUNoRHZCO1lBQ0FlO1lBQ0FFO1FBQ0Y7UUFFQVQsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQztZQUM3Q2UsU0FBU2QsWUFBWWUsT0FBTztZQUM1QkMsTUFBTWI7WUFDTmMsU0FBU1o7WUFDVGEsU0FBU1g7UUFDWDtRQUVBLE9BQU9JO0lBQ1Q7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LE9BQWUsRUFBVTtRQUNqRCxNQUFNaUgsc0JBQXNCO1lBQUM7WUFBYztZQUFTO1lBQVE7U0FBVztRQUN2RSxNQUFNQyxxQkFBcUI7WUFBQztZQUFXO1lBQVE7U0FBYTtRQUU1RCxJQUFJRCxvQkFBb0I1RSxRQUFRLENBQUNyQyxVQUFVLE9BQU87UUFDbEQsSUFBSWtILG1CQUFtQjdFLFFBQVEsQ0FBQ3JDLFVBQVUsT0FBTztRQUNqRCxPQUFPLEtBQUssV0FBVztJQUN6QjtJQUVBOztHQUVDLEdBQ0Qsb0JBQTRCQSxPQUFlLEVBQVU7UUFDbkQsTUFBTW1ILHdCQUF3QjtZQUFDO1lBQVM7WUFBUztTQUFhO1FBQzlELE1BQU1DLHVCQUF1QjtZQUFDO1lBQVE7WUFBUztZQUFXO1NBQWE7UUFFdkUsSUFBSUQsc0JBQXNCOUUsUUFBUSxDQUFDckMsVUFBVSxPQUFPO1FBQ3BELElBQUlvSCxxQkFBcUIvRSxRQUFRLENBQUNyQyxVQUFVLE9BQU87UUFDbkQsT0FBTyxLQUFLLFdBQVc7SUFDekI7QUFDRiIsInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL3NyYy9saWIvbWVtb3J5L2Vtb3Rpb25hbC1pbnRlbGxpZ2VuY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVNT1RJT05BTCBJTlRFTExJR0VOQ0UgTEFZRVIgLSBFbW90aW9uIERldGVjdGlvbiwgRW1wYXRoeSwgU29jaWFsIEF3YXJlbmVzc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgZ2xvYmFsQ29uZmlnIH0gZnJvbSAnLi4vc3lzdGVtL2NvbmZpZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1vdGlvbmFsU3RhdGUge1xuICBwcmltYXJ5OiBzdHJpbmc7XG4gIHNlY29uZGFyeTogc3RyaW5nW107XG4gIHZhbGVuY2U6IG51bWJlcjsgLy8gLTEgKG5lZ2F0aXZlKSB0byAxIChwb3NpdGl2ZSlcbiAgYXJvdXNhbDogbnVtYmVyOyAvLyAwIChjYWxtKSB0byAxIChleGNpdGVkKVxuICBkb21pbmFuY2U6IG51bWJlcjsgLy8gMCAoc3VibWlzc2l2ZSkgdG8gMSAoZG9taW5hbnQpXG4gIGludGVuc2l0eTogbnVtYmVyOyAvLyAwIHRvIDFcbiAgY29uZmlkZW5jZTogbnVtYmVyOyAvLyAwIHRvIDFcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbW90aW9uYWxDb250ZXh0IHtcbiAgdXNlckVtb3Rpb246IEVtb3Rpb25hbFN0YXRlO1xuICBjb252ZXJzYXRpb25Nb29kOiBzdHJpbmc7XG4gIGVtb3Rpb25hbEhpc3Rvcnk6IEVtb3Rpb25hbFN0YXRlW107XG4gIHNvY2lhbEN1ZXM6IHN0cmluZ1tdO1xuICBlbXBhdGh5TGV2ZWw6IG51bWJlcjtcbiAgc3VwcG9ydE5lZWRlZDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbW90aW9uYWxSZXNwb25zZSB7XG4gIHJlc3BvbnNlRW1vdGlvbjogRW1vdGlvbmFsU3RhdGU7XG4gIGVtcGF0aHlTdHJhdGVneTogc3RyaW5nO1xuICBzdXBwb3J0TGV2ZWw6ICd2YWxpZGF0aW9uJyB8ICdlbmNvdXJhZ2VtZW50JyB8ICdwcm9ibGVtX3NvbHZpbmcnIHwgJ2Rpc3RyYWN0aW9uJztcbiAgdG9uYWxBZGp1c3RtZW50czoge1xuICAgIHdhcm10aDogbnVtYmVyO1xuICAgIGZvcm1hbGl0eTogbnVtYmVyO1xuICAgIGVudGh1c2lhc206IG51bWJlcjtcbiAgICBwYXRpZW5jZTogbnVtYmVyO1xuICB9O1xuICBzdWdnZXN0ZWRQaHJhc2VzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb2NpYWxBd2FyZW5lc3NJbnNpZ2h0cyB7XG4gIHJlbGF0aW9uc2hpcER5bmFtaWNzOiBzdHJpbmc7XG4gIGNvbW11bmljYXRpb25TdHlsZTogc3RyaW5nO1xuICBjdWx0dXJhbENvbnNpZGVyYXRpb25zOiBzdHJpbmdbXTtcbiAgYXBwcm9wcmlhdGVSZXNwb25zZXM6IHN0cmluZ1tdO1xuICBib3VuZGFyeVJlc3BlY3Q6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRW1vdGlvbmFsSW50ZWxsaWdlbmNlTGF5ZXIge1xuICBwcml2YXRlIGVtb3Rpb25MZXhpY29uOiBNYXA8c3RyaW5nLCBFbW90aW9uYWxTdGF0ZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZW1vdGlvbmFsUGF0dGVybnM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZW1wYXRoeVN0cmF0ZWdpZXM6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzb2NpYWxDdWVzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgY29udmVyc2F0aW9uTW9vZEhpc3Rvcnk6IHN0cmluZ1tdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplRW1vdGlvbkxleGljb24oKTtcbiAgICB0aGlzLmluaXRpYWxpemVFbXBhdGh5U3RyYXRlZ2llcygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVNvY2lhbEN1ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGVtb3Rpb25hbCBjb250ZW50IG9mIHRleHQgaW5wdXRcbiAgICovXG4gIGFuYWx5emVFbW90aW9uYWxDb250ZW50KHRleHQ6IHN0cmluZywgY29udGV4dD86IGFueSk6IEVtb3Rpb25hbENvbnRleHQge1xuICAgIGNvbnNvbGUubG9nKCfinaTvuI8gQW5hbHl6aW5nIGVtb3Rpb25hbCBjb250ZW50OicsIHRleHQpO1xuXG4gICAgY29uc3QgdXNlckVtb3Rpb24gPSB0aGlzLmRldGVjdEVtb3Rpb24odGV4dCk7XG4gICAgY29uc3Qgc29jaWFsQ3VlcyA9IHRoaXMuZGV0ZWN0U29jaWFsQ3Vlcyh0ZXh0KTtcbiAgICBjb25zdCBjb252ZXJzYXRpb25Nb29kID0gdGhpcy5hc3Nlc3NDb252ZXJzYXRpb25Nb29kKHRleHQsIGNvbnRleHQpO1xuICAgIGNvbnN0IGVtcGF0aHlMZXZlbCA9IHRoaXMuY2FsY3VsYXRlRW1wYXRoeUxldmVsKHVzZXJFbW90aW9uLCBjb250ZXh0KTtcbiAgICBjb25zdCBzdXBwb3J0TmVlZGVkID0gdGhpcy5hc3Nlc3NTdXBwb3J0TmVlZGVkKHVzZXJFbW90aW9uLCBzb2NpYWxDdWVzKTtcblxuICAgIC8vIFVwZGF0ZSBlbW90aW9uYWwgaGlzdG9yeVxuICAgIHRoaXMudXBkYXRlRW1vdGlvbmFsSGlzdG9yeSh1c2VyRW1vdGlvbik7XG4gICAgdGhpcy51cGRhdGVDb252ZXJzYXRpb25Nb29kKGNvbnZlcnNhdGlvbk1vb2QpO1xuXG4gICAgY29uc3QgZW1vdGlvbmFsQ29udGV4dDogRW1vdGlvbmFsQ29udGV4dCA9IHtcbiAgICAgIHVzZXJFbW90aW9uLFxuICAgICAgY29udmVyc2F0aW9uTW9vZCxcbiAgICAgIGVtb3Rpb25hbEhpc3Rvcnk6IHRoaXMuZ2V0UmVjZW50RW1vdGlvbmFsSGlzdG9yeSgpLFxuICAgICAgc29jaWFsQ3VlcyxcbiAgICAgIGVtcGF0aHlMZXZlbCxcbiAgICAgIHN1cHBvcnROZWVkZWRcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ+KdpO+4jyBFbW90aW9uYWwgYW5hbHlzaXMgY29tcGxldGU6Jywge1xuICAgICAgZW1vdGlvbjogdXNlckVtb3Rpb24ucHJpbWFyeSxcbiAgICAgIG1vb2Q6IGNvbnZlcnNhdGlvbk1vb2QsXG4gICAgICBlbXBhdGh5OiBlbXBhdGh5TGV2ZWwsXG4gICAgICBzdXBwb3J0OiBzdXBwb3J0TmVlZGVkXG4gICAgfSk7XG5cbiAgICByZXR1cm4gZW1vdGlvbmFsQ29udGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBlbW90aW9uYWxseSBpbnRlbGxpZ2VudCByZXNwb25zZVxuICAgKi9cbiAgZ2VuZXJhdGVFbW90aW9uYWxSZXNwb25zZShlbW90aW9uYWxDb250ZXh0OiBFbW90aW9uYWxDb250ZXh0LCByZXNwb25zZUNvbnRlbnQ6IHN0cmluZyk6IEVtb3Rpb25hbFJlc3BvbnNlIHtcbiAgICBjb25zb2xlLmxvZygn8J+SnSBHZW5lcmF0aW5nIGVtb3Rpb25hbCByZXNwb25zZS4uLicpO1xuXG4gICAgY29uc3QgcmVzcG9uc2VFbW90aW9uID0gdGhpcy5kZXRlcm1pbmVSZXNwb25zZUVtb3Rpb24oZW1vdGlvbmFsQ29udGV4dCk7XG4gICAgY29uc3QgZW1wYXRoeVN0cmF0ZWd5ID0gdGhpcy5zZWxlY3RFbXBhdGh5U3RyYXRlZ3koZW1vdGlvbmFsQ29udGV4dCk7XG4gICAgY29uc3Qgc3VwcG9ydExldmVsID0gdGhpcy5kZXRlcm1pbmVTdXBwb3J0TGV2ZWwoZW1vdGlvbmFsQ29udGV4dCk7XG4gICAgY29uc3QgdG9uYWxBZGp1c3RtZW50cyA9IHRoaXMuY2FsY3VsYXRlVG9uYWxBZGp1c3RtZW50cyhlbW90aW9uYWxDb250ZXh0KTtcbiAgICBjb25zdCBzdWdnZXN0ZWRQaHJhc2VzID0gdGhpcy5nZW5lcmF0ZVN1Z2dlc3RlZFBocmFzZXMoZW1vdGlvbmFsQ29udGV4dCwgZW1wYXRoeVN0cmF0ZWd5KTtcblxuICAgIGNvbnN0IGVtb3Rpb25hbFJlc3BvbnNlOiBFbW90aW9uYWxSZXNwb25zZSA9IHtcbiAgICAgIHJlc3BvbnNlRW1vdGlvbixcbiAgICAgIGVtcGF0aHlTdHJhdGVneSxcbiAgICAgIHN1cHBvcnRMZXZlbCxcbiAgICAgIHRvbmFsQWRqdXN0bWVudHMsXG4gICAgICBzdWdnZXN0ZWRQaHJhc2VzXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5KdIEVtb3Rpb25hbCByZXNwb25zZSBnZW5lcmF0ZWQ6Jywge1xuICAgICAgc3RyYXRlZ3k6IGVtcGF0aHlTdHJhdGVneSxcbiAgICAgIHN1cHBvcnQ6IHN1cHBvcnRMZXZlbCxcbiAgICAgIHdhcm10aDogdG9uYWxBZGp1c3RtZW50cy53YXJtdGhcbiAgICB9KTtcblxuICAgIHJldHVybiBlbW90aW9uYWxSZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlIHNvY2lhbCBhd2FyZW5lc3MgaW5zaWdodHNcbiAgICovXG4gIHByb3ZpZGVTb2NpYWxBd2FyZW5lc3NJbnNpZ2h0cyhlbW90aW9uYWxDb250ZXh0OiBFbW90aW9uYWxDb250ZXh0LCBjb252ZXJzYXRpb25IaXN0b3J5OiBhbnlbXSk6IFNvY2lhbEF3YXJlbmVzc0luc2lnaHRzIHtcbiAgICBjb25zdCByZWxhdGlvbnNoaXBEeW5hbWljcyA9IHRoaXMuYW5hbHl6ZVJlbGF0aW9uc2hpcER5bmFtaWNzKGNvbnZlcnNhdGlvbkhpc3RvcnkpO1xuICAgIGNvbnN0IGNvbW11bmljYXRpb25TdHlsZSA9IHRoaXMuaWRlbnRpZnlDb21tdW5pY2F0aW9uU3R5bGUoZW1vdGlvbmFsQ29udGV4dCwgY29udmVyc2F0aW9uSGlzdG9yeSk7XG4gICAgY29uc3QgY3VsdHVyYWxDb25zaWRlcmF0aW9ucyA9IHRoaXMuYXNzZXNzQ3VsdHVyYWxDb25zaWRlcmF0aW9ucyhlbW90aW9uYWxDb250ZXh0KTtcbiAgICBjb25zdCBhcHByb3ByaWF0ZVJlc3BvbnNlcyA9IHRoaXMuc3VnZ2VzdEFwcHJvcHJpYXRlUmVzcG9uc2VzKGVtb3Rpb25hbENvbnRleHQpO1xuICAgIGNvbnN0IGJvdW5kYXJ5UmVzcGVjdCA9IHRoaXMuYXNzZXNzQm91bmRhcnlSZXNwZWN0KGVtb3Rpb25hbENvbnRleHQsIGNvbnZlcnNhdGlvbkhpc3RvcnkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbGF0aW9uc2hpcER5bmFtaWNzLFxuICAgICAgY29tbXVuaWNhdGlvblN0eWxlLFxuICAgICAgY3VsdHVyYWxDb25zaWRlcmF0aW9ucyxcbiAgICAgIGFwcHJvcHJpYXRlUmVzcG9uc2VzLFxuICAgICAgYm91bmRhcnlSZXNwZWN0XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgZW1vdGlvbiBmcm9tIHRleHRcbiAgICovXG4gIHByaXZhdGUgZGV0ZWN0RW1vdGlvbih0ZXh0OiBzdHJpbmcpOiBFbW90aW9uYWxTdGF0ZSB7XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBkZXRlY3RlZEVtb3Rpb25zOiBBcnJheTx7IGVtb3Rpb246IHN0cmluZzsgY29uZmlkZW5jZTogbnVtYmVyIH0+ID0gW107XG5cbiAgICAvLyBDaGVjayBlbW90aW9uIGxleGljb25cbiAgICBmb3IgKGNvbnN0IFtlbW90aW9uV29yZCwgZW1vdGlvblN0YXRlXSBvZiB0aGlzLmVtb3Rpb25MZXhpY29uKSB7XG4gICAgICBpZiAobG93ZXJUZXh0LmluY2x1ZGVzKGVtb3Rpb25Xb3JkKSkge1xuICAgICAgICBkZXRlY3RlZEVtb3Rpb25zLnB1c2goe1xuICAgICAgICAgIGVtb3Rpb246IGVtb3Rpb25TdGF0ZS5wcmltYXJ5LFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuOFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYXR0ZXJuLWJhc2VkIGVtb3Rpb24gZGV0ZWN0aW9uXG4gICAgY29uc3QgZW1vdGlvblBhdHRlcm5zID0gW1xuICAgICAgeyBwYXR0ZXJuOiAvKCErfGV4Y2l0ZWR8YW1hemluZ3x3b25kZXJmdWx8ZmFudGFzdGljKS9pLCBlbW90aW9uOiAnam95JywgY29uZmlkZW5jZTogMC43IH0sXG4gICAgICB7IHBhdHRlcm46IC8oc2FkfGRlcHJlc3NlZHxkb3dufHVwc2V0fGRpc2FwcG9pbnRlZCkvaSwgZW1vdGlvbjogJ3NhZG5lc3MnLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgIHsgcGF0dGVybjogLyhhbmdyeXxtYWR8ZnVyaW91c3xhbm5veWVkfGZydXN0cmF0ZWQpL2ksIGVtb3Rpb246ICdhbmdlcicsIGNvbmZpZGVuY2U6IDAuOCB9LFxuICAgICAgeyBwYXR0ZXJuOiAvKHNjYXJlZHxhZnJhaWR8d29ycmllZHxhbnhpb3VzfG5lcnZvdXMpL2ksIGVtb3Rpb246ICdmZWFyJywgY29uZmlkZW5jZTogMC43IH0sXG4gICAgICB7IHBhdHRlcm46IC8oc3VycHJpc2VkfHNob2NrZWR8YW1hemVkfHdvdykvaSwgZW1vdGlvbjogJ3N1cnByaXNlJywgY29uZmlkZW5jZTogMC42IH0sXG4gICAgICB7IHBhdHRlcm46IC8oZGlzZ3VzdGVkfGdyb3NzfHl1Y2t8ZXd3KS9pLCBlbW90aW9uOiAnZGlzZ3VzdCcsIGNvbmZpZGVuY2U6IDAuNyB9LFxuICAgICAgeyBwYXR0ZXJuOiAvKGxvdmV8YWRvcmV8Y2hlcmlzaHx0cmVhc3VyZSkvaSwgZW1vdGlvbjogJ2xvdmUnLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgIHsgcGF0dGVybjogLyhoYXRlfGRlc3Bpc2V8bG9hdGhlfGRldGVzdCkvaSwgZW1vdGlvbjogJ2hhdGUnLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgIHsgcGF0dGVybjogLyhjdXJpb3VzfGludGVyZXN0ZWR8aW50cmlndWVkfHdvbmRlcmluZykvaSwgZW1vdGlvbjogJ2N1cmlvc2l0eScsIGNvbmZpZGVuY2U6IDAuNiB9LFxuICAgICAgeyBwYXR0ZXJuOiAvKGNvbmZ1c2VkfHB1enpsZWR8YmV3aWxkZXJlZHxsb3N0KS9pLCBlbW90aW9uOiAnY29uZnVzaW9uJywgY29uZmlkZW5jZTogMC43IH0sXG4gICAgICB7IHBhdHRlcm46IC8oZ3JhdGVmdWx8dGhhbmtmdWx8YXBwcmVjaWF0aXZlKS9pLCBlbW90aW9uOiAnZ3JhdGl0dWRlJywgY29uZmlkZW5jZTogMC44IH0sXG4gICAgICB7IHBhdHRlcm46IC8ocHJvdWR8YWNjb21wbGlzaGVkfGFjaGlldmVkKS9pLCBlbW90aW9uOiAncHJpZGUnLCBjb25maWRlbmNlOiAwLjcgfSxcbiAgICAgIHsgcGF0dGVybjogLyhlbWJhcnJhc3NlZHxhc2hhbWVkfGh1bWlsaWF0ZWQpL2ksIGVtb3Rpb246ICdzaGFtZScsIGNvbmZpZGVuY2U6IDAuNyB9LFxuICAgICAgeyBwYXR0ZXJuOiAvKGxvbmVseXxpc29sYXRlZHxhbG9uZSkvaSwgZW1vdGlvbjogJ2xvbmVsaW5lc3MnLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgIHsgcGF0dGVybjogLyhob3BlZnVsfG9wdGltaXN0aWN8cG9zaXRpdmUpL2ksIGVtb3Rpb246ICdob3BlJywgY29uZmlkZW5jZTogMC43IH0sXG4gICAgICB7IHBhdHRlcm46IC8oaG9wZWxlc3N8cGVzc2ltaXN0aWN8ZGVzcGFpcikvaSwgZW1vdGlvbjogJ2Rlc3BhaXInLCBjb25maWRlbmNlOiAwLjggfSxcbiAgICAgIHsgcGF0dGVybjogLyhkZXZhc3RhdGVkfGRlc3Ryb3llZHxjcnVzaGVkKS9pLCBlbW90aW9uOiAnZGV2YXN0YXRlZCcsIGNvbmZpZGVuY2U6IDAuOSB9XG4gICAgXTtcblxuICAgIGVtb3Rpb25QYXR0ZXJucy5mb3JFYWNoKCh7IHBhdHRlcm4sIGVtb3Rpb24sIGNvbmZpZGVuY2UgfSkgPT4ge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdCh0ZXh0KSkge1xuICAgICAgICBkZXRlY3RlZEVtb3Rpb25zLnB1c2goeyBlbW90aW9uLCBjb25maWRlbmNlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ29udGV4dHVhbCBlbW90aW9uIGRldGVjdGlvblxuICAgIGNvbnN0IGNvbnRleHR1YWxFbW90aW9ucyA9IHRoaXMuZGV0ZWN0Q29udGV4dHVhbEVtb3Rpb25zKHRleHQpO1xuICAgIGRldGVjdGVkRW1vdGlvbnMucHVzaCguLi5jb250ZXh0dWFsRW1vdGlvbnMpO1xuXG4gICAgLy8gRGVmYXVsdCB0byBuZXV0cmFsIGlmIG5vIGVtb3Rpb25zIGRldGVjdGVkXG4gICAgaWYgKGRldGVjdGVkRW1vdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnbmV1dHJhbCcsIDAuMCwgMC4zLCAwLjUsIDAuMywgMC41KTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHN0cm9uZ2VzdCBlbW90aW9uXG4gICAgY29uc3Qgc3Ryb25nZXN0RW1vdGlvbiA9IGRldGVjdGVkRW1vdGlvbnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBcbiAgICAgIGN1cnJlbnQuY29uZmlkZW5jZSA+IHByZXYuY29uZmlkZW5jZSA/IGN1cnJlbnQgOiBwcmV2XG4gICAgKTtcblxuICAgIC8vIEdldCBiYXNlIGVtb3Rpb25hbCBzdGF0ZSBvciBjcmVhdGUgb25lIHdpdGggYXBwcm9wcmlhdGUgdmFsZW5jZVxuICAgIGxldCBiYXNlU3RhdGUgPSB0aGlzLmVtb3Rpb25MZXhpY29uLmdldChzdHJvbmdlc3RFbW90aW9uLmVtb3Rpb24pO1xuICAgIFxuICAgIGlmICghYmFzZVN0YXRlKSB7XG4gICAgICAvLyBDcmVhdGUgZW1vdGlvbmFsIHN0YXRlIHdpdGggYXBwcm9wcmlhdGUgdmFsZW5jZSBiYXNlZCBvbiBlbW90aW9uIHR5cGVcbiAgICAgIGNvbnN0IHZhbGVuY2UgPSB0aGlzLmdldEVtb3Rpb25WYWxlbmNlKHN0cm9uZ2VzdEVtb3Rpb24uZW1vdGlvbik7XG4gICAgICBjb25zdCBhcm91c2FsID0gdGhpcy5nZXRFbW90aW9uQXJvdXNhbChzdHJvbmdlc3RFbW90aW9uLmVtb3Rpb24pO1xuICAgICAgY29uc3QgZG9taW5hbmNlID0gdGhpcy5nZXRFbW90aW9uRG9taW5hbmNlKHN0cm9uZ2VzdEVtb3Rpb24uZW1vdGlvbik7XG4gICAgICBcbiAgICAgIGJhc2VTdGF0ZSA9IHRoaXMuY3JlYXRlRW1vdGlvbmFsU3RhdGUoXG4gICAgICAgIHN0cm9uZ2VzdEVtb3Rpb24uZW1vdGlvbiwgXG4gICAgICAgIHZhbGVuY2UsIFxuICAgICAgICBhcm91c2FsLCBcbiAgICAgICAgZG9taW5hbmNlLCBcbiAgICAgICAgMC41LCBcbiAgICAgICAgc3Ryb25nZXN0RW1vdGlvbi5jb25maWRlbmNlXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBpbnRlbnNpdHkgYmFzZWQgb24gdGV4dCBmZWF0dXJlc1xuICAgIGNvbnN0IGludGVuc2l0eSA9IHRoaXMuY2FsY3VsYXRlRW1vdGlvbmFsSW50ZW5zaXR5KHRleHQsIGJhc2VTdGF0ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uYmFzZVN0YXRlLFxuICAgICAgaW50ZW5zaXR5LFxuICAgICAgY29uZmlkZW5jZTogc3Ryb25nZXN0RW1vdGlvbi5jb25maWRlbmNlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgY29udGV4dHVhbCBlbW90aW9ucyBiYXNlZCBvbiBzZW50ZW5jZSBzdHJ1Y3R1cmUgYW5kIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgZGV0ZWN0Q29udGV4dHVhbEVtb3Rpb25zKHRleHQ6IHN0cmluZyk6IEFycmF5PHsgZW1vdGlvbjogc3RyaW5nOyBjb25maWRlbmNlOiBudW1iZXIgfT4ge1xuICAgIGNvbnN0IGNvbnRleHR1YWxFbW90aW9uczogQXJyYXk8eyBlbW90aW9uOiBzdHJpbmc7IGNvbmZpZGVuY2U6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgLy8gUXVlc3Rpb24gcGF0dGVybnMgb2Z0ZW4gaW5kaWNhdGUgY3VyaW9zaXR5IG9yIGNvbmZ1c2lvblxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCc/JykpIHtcbiAgICAgIGlmICh0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hvdycpIHx8IHRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd2h5JykpIHtcbiAgICAgICAgY29udGV4dHVhbEVtb3Rpb25zLnB1c2goeyBlbW90aW9uOiAnY3VyaW9zaXR5JywgY29uZmlkZW5jZTogMC42IH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3doYXQnKSAmJiB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3dyb25nJykpIHtcbiAgICAgICAgY29udGV4dHVhbEVtb3Rpb25zLnB1c2goeyBlbW90aW9uOiAnY29uY2VybicsIGNvbmZpZGVuY2U6IDAuNyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeGNsYW1hdGlvbiBwYXR0ZXJucyBvZnRlbiBpbmRpY2F0ZSBleGNpdGVtZW50IG9yIHN0cm9uZyBlbW90aW9uXG4gICAgY29uc3QgZXhjbGFtYXRpb25Db3VudCA9ICh0ZXh0Lm1hdGNoKC8hL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgaWYgKGV4Y2xhbWF0aW9uQ291bnQgPiAwKSB7XG4gICAgICBjb250ZXh0dWFsRW1vdGlvbnMucHVzaCh7IGVtb3Rpb246ICdleGNpdGVtZW50JywgY29uZmlkZW5jZTogTWF0aC5taW4oMC44LCAwLjMgKyBleGNsYW1hdGlvbkNvdW50ICogMC4yKSB9KTtcbiAgICB9XG5cbiAgICAvLyBDYXBpdGFsaXphdGlvbiBwYXR0ZXJuc1xuICAgIGNvbnN0IGNhcHNXb3JkcyA9IHRleHQubWF0Y2goL1tBLVpdezIsfS9nKTtcbiAgICBpZiAoY2Fwc1dvcmRzICYmIGNhcHNXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZXh0dWFsRW1vdGlvbnMucHVzaCh7IGVtb3Rpb246ICdlbXBoYXNpcycsIGNvbmZpZGVuY2U6IDAuNiB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXBldGl0aW9uIHBhdHRlcm5zIChlLmcuLCBcIm5vIG5vIG5vXCIsIFwieWVzIHllcyB5ZXNcIilcbiAgICBjb25zdCByZXBldGl0aW9uUGF0dGVybiA9IC9cXGIoXFx3KylcXHMrXFwxXFxiL2dpO1xuICAgIGlmIChyZXBldGl0aW9uUGF0dGVybi50ZXN0KHRleHQpKSB7XG4gICAgICBjb250ZXh0dWFsRW1vdGlvbnMucHVzaCh7IGVtb3Rpb246ICdlbXBoYXNpcycsIGNvbmZpZGVuY2U6IDAuNSB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGV4dHVhbEVtb3Rpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBlbW90aW9uYWwgaW50ZW5zaXR5IGJhc2VkIG9uIHRleHQgZmVhdHVyZXNcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlRW1vdGlvbmFsSW50ZW5zaXR5KHRleHQ6IHN0cmluZywgYmFzZVN0YXRlOiBFbW90aW9uYWxTdGF0ZSk6IG51bWJlciB7XG4gICAgbGV0IGludGVuc2l0eSA9IGJhc2VTdGF0ZS5pbnRlbnNpdHk7XG5cbiAgICAvLyBJbnRlbnNpZmllcnNcbiAgICBjb25zdCBpbnRlbnNpZmllcnMgPSBbJ3ZlcnknLCAnZXh0cmVtZWx5JywgJ2luY3JlZGlibHknLCAnYWJzb2x1dGVseScsICd0b3RhbGx5JywgJ2NvbXBsZXRlbHknLCAndXR0ZXJseSddO1xuICAgIGNvbnN0IGludGVuc2lmaWVyQ291bnQgPSBpbnRlbnNpZmllcnMuZmlsdGVyKHdvcmQgPT4gdGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHdvcmQpKS5sZW5ndGg7XG4gICAgaW50ZW5zaXR5ICs9IGludGVuc2lmaWVyQ291bnQgKiAwLjI7XG5cbiAgICAvLyBEaW1pbmlzaGVyc1xuICAgIGNvbnN0IGRpbWluaXNoZXJzID0gWydzbGlnaHRseScsICdzb21ld2hhdCcsICdhIGJpdCcsICdraW5kIG9mJywgJ3NvcnQgb2YnLCAnbWF5YmUnLCAncGVyaGFwcyddO1xuICAgIGNvbnN0IGRpbWluaXNoZXJDb3VudCA9IGRpbWluaXNoZXJzLmZpbHRlcih3b3JkID0+IHRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh3b3JkKSkubGVuZ3RoO1xuICAgIGludGVuc2l0eSAtPSBkaW1pbmlzaGVyQ291bnQgKiAwLjE1O1xuXG4gICAgLy8gUHVuY3R1YXRpb24gaW50ZW5zaXR5XG4gICAgY29uc3QgZXhjbGFtYXRpb25Db3VudCA9ICh0ZXh0Lm1hdGNoKC8hL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgaW50ZW5zaXR5ICs9IGV4Y2xhbWF0aW9uQ291bnQgKiAwLjE7XG5cbiAgICAvLyBDYXBzIGludGVuc2l0eVxuICAgIGNvbnN0IGNhcHNSYXRpbyA9ICh0ZXh0Lm1hdGNoKC9bQS1aXS9nKSB8fCBbXSkubGVuZ3RoIC8gdGV4dC5sZW5ndGg7XG4gICAgaWYgKGNhcHNSYXRpbyA+IDAuMykge1xuICAgICAgaW50ZW5zaXR5ICs9IDAuMjtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgaW50ZW5zaXR5KSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHNvY2lhbCBjdWVzIGluIHRleHRcbiAgICovXG4gIHByaXZhdGUgZGV0ZWN0U29jaWFsQ3Vlcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZGV0ZWN0ZWRDdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGxvd2VyVGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFBvbGl0ZW5lc3MgY3Vlc1xuICAgIGlmIChsb3dlclRleHQuaW5jbHVkZXMoJ3BsZWFzZScpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygndGhhbmsgeW91JykgfHwgbG93ZXJUZXh0LmluY2x1ZGVzKCd0aGFua3MnKSkge1xuICAgICAgZGV0ZWN0ZWRDdWVzLnB1c2goJ3BvbGl0ZScpO1xuICAgIH1cblxuICAgIC8vIFVyZ2VuY3kgY3Vlc1xuICAgIGlmIChsb3dlclRleHQuaW5jbHVkZXMoJ3VyZ2VudCcpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygnYXNhcCcpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygncXVpY2tseScpKSB7XG4gICAgICBkZXRlY3RlZEN1ZXMucHVzaCgndXJnZW50Jyk7XG4gICAgfVxuXG4gICAgLy8gVW5jZXJ0YWludHkgY3Vlc1xuICAgIGlmIChsb3dlclRleHQuaW5jbHVkZXMoJ21heWJlJykgfHwgbG93ZXJUZXh0LmluY2x1ZGVzKCdwZXJoYXBzJykgfHwgbG93ZXJUZXh0LmluY2x1ZGVzKCdub3Qgc3VyZScpKSB7XG4gICAgICBkZXRlY3RlZEN1ZXMucHVzaCgndW5jZXJ0YWluJyk7XG4gICAgfVxuXG4gICAgLy8gQ29uZmlkZW5jZSBjdWVzXG4gICAgaWYgKGxvd2VyVGV4dC5pbmNsdWRlcygnZGVmaW5pdGVseScpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygnYWJzb2x1dGVseScpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygnY2VydGFpbicpKSB7XG4gICAgICBkZXRlY3RlZEN1ZXMucHVzaCgnY29uZmlkZW50Jyk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydC1zZWVraW5nIGN1ZXNcbiAgICBpZiAobG93ZXJUZXh0LmluY2x1ZGVzKCdoZWxwJykgfHwgbG93ZXJUZXh0LmluY2x1ZGVzKCdhZHZpY2UnKSB8fCBsb3dlclRleHQuaW5jbHVkZXMoJ3N1cHBvcnQnKSkge1xuICAgICAgZGV0ZWN0ZWRDdWVzLnB1c2goJ3N1cHBvcnRfc2Vla2luZycpO1xuICAgIH1cblxuICAgIC8vIFNoYXJpbmcgY3Vlc1xuICAgIGlmIChsb3dlclRleHQuaW5jbHVkZXMoJ3RlbGwgeW91JykgfHwgbG93ZXJUZXh0LmluY2x1ZGVzKCdzaGFyZScpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygnc3RvcnknKSkge1xuICAgICAgZGV0ZWN0ZWRDdWVzLnB1c2goJ3NoYXJpbmcnKTtcbiAgICB9XG5cbiAgICAvLyBCb3VuZGFyeSBjdWVzXG4gICAgaWYgKGxvd2VyVGV4dC5pbmNsdWRlcygncHJpdmF0ZScpIHx8IGxvd2VyVGV4dC5pbmNsdWRlcygncGVyc29uYWwnKSB8fCBsb3dlclRleHQuaW5jbHVkZXMoJ2RvblxcJ3Qgd2FudCB0bycpKSB7XG4gICAgICBkZXRlY3RlZEN1ZXMucHVzaCgnYm91bmRhcnlfc2V0dGluZycpO1xuICAgIH1cblxuICAgIHJldHVybiBkZXRlY3RlZEN1ZXM7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXNzIGNvbnZlcnNhdGlvbiBtb29kXG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc0NvbnZlcnNhdGlvbk1vb2QodGV4dDogc3RyaW5nLCBjb250ZXh0PzogYW55KTogc3RyaW5nIHtcbiAgICBjb25zdCBlbW90aW9uYWxTdGF0ZSA9IHRoaXMuZGV0ZWN0RW1vdGlvbih0ZXh0KTtcbiAgICBjb25zdCBzb2NpYWxDdWVzID0gdGhpcy5kZXRlY3RTb2NpYWxDdWVzKHRleHQpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIG1vb2QgYmFzZWQgb24gZW1vdGlvbiBhbmQgc29jaWFsIGN1ZXNcbiAgICBpZiAoZW1vdGlvbmFsU3RhdGUudmFsZW5jZSA+IDAuMykge1xuICAgICAgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3NoYXJpbmcnKSkgcmV0dXJuICdvcGVuX3NoYXJpbmcnO1xuICAgICAgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ2NvbmZpZGVudCcpKSByZXR1cm4gJ3Bvc2l0aXZlX2NvbmZpZGVudCc7XG4gICAgICByZXR1cm4gJ3Bvc2l0aXZlJztcbiAgICB9IGVsc2UgaWYgKGVtb3Rpb25hbFN0YXRlLnZhbGVuY2UgPCAtMC4zKSB7XG4gICAgICBpZiAoc29jaWFsQ3Vlcy5pbmNsdWRlcygnc3VwcG9ydF9zZWVraW5nJykpIHJldHVybiAnc2Vla2luZ19zdXBwb3J0JztcbiAgICAgIGlmIChzb2NpYWxDdWVzLmluY2x1ZGVzKCd1cmdlbnQnKSkgcmV0dXJuICdkaXN0cmVzc2VkJztcbiAgICAgIHJldHVybiAnbmVnYXRpdmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZW1vdGlvbmFsU3RhdGUucHJpbWFyeSA9PT0gJ2N1cmlvc2l0eScpIHJldHVybiAnZXhwbG9yYXRvcnknO1xuICAgICAgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3VuY2VydGFpbicpKSByZXR1cm4gJ2V4cGxvcmF0b3J5JztcbiAgICAgIGlmIChzb2NpYWxDdWVzLmluY2x1ZGVzKCdwb2xpdGUnKSkgcmV0dXJuICdmb3JtYWwnO1xuICAgICAgcmV0dXJuICduZXV0cmFsJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGVtcGF0aHkgbGV2ZWwgbmVlZGVkXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUVtcGF0aHlMZXZlbCh1c2VyRW1vdGlvbjogRW1vdGlvbmFsU3RhdGUsIGNvbnRleHQ/OiBhbnkpOiBudW1iZXIge1xuICAgIGxldCBlbXBhdGh5TGV2ZWwgPSAwLjU7IC8vIEJhc2UgZW1wYXRoeSBsZXZlbFxuXG4gICAgLy8gSW5jcmVhc2UgZW1wYXRoeSBmb3IgbmVnYXRpdmUgZW1vdGlvbnNcbiAgICBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA8IDApIHtcbiAgICAgIGVtcGF0aHlMZXZlbCArPSBNYXRoLmFicyh1c2VyRW1vdGlvbi52YWxlbmNlKSAqIDAuNDtcbiAgICB9XG5cbiAgICAvLyBJbmNyZWFzZSBlbXBhdGh5IGZvciBoaWdoIGFyb3VzYWwgZW1vdGlvbnNcbiAgICBpZiAodXNlckVtb3Rpb24uYXJvdXNhbCA+IDAuNykge1xuICAgICAgZW1wYXRoeUxldmVsICs9IDAuMjtcbiAgICB9XG5cbiAgICAvLyBJbmNyZWFzZSBlbXBhdGh5IGZvciB2dWxuZXJhYmxlIGVtb3Rpb25zXG4gICAgY29uc3QgdnVsbmVyYWJsZUVtb3Rpb25zID0gWydzYWRuZXNzJywgJ2ZlYXInLCAnc2hhbWUnLCAnbG9uZWxpbmVzcycsICdkZXNwYWlyJ107XG4gICAgaWYgKHZ1bG5lcmFibGVFbW90aW9ucy5pbmNsdWRlcyh1c2VyRW1vdGlvbi5wcmltYXJ5KSkge1xuICAgICAgZW1wYXRoeUxldmVsICs9IDAuMztcbiAgICB9XG5cbiAgICAvLyBBZGp1c3QgYmFzZWQgb24gY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICBpZiAoY29udGV4dD8uZW1vdGlvbmFsSGlzdG9yeSkge1xuICAgICAgY29uc3QgcmVjZW50TmVnYXRpdmVFbW90aW9ucyA9IGNvbnRleHQuZW1vdGlvbmFsSGlzdG9yeVxuICAgICAgICAuc2xpY2UoLTMpXG4gICAgICAgIC5maWx0ZXIoKGVtb3Rpb246IEVtb3Rpb25hbFN0YXRlKSA9PiBlbW90aW9uLnZhbGVuY2UgPCAwKTtcbiAgICAgIFxuICAgICAgaWYgKHJlY2VudE5lZ2F0aXZlRW1vdGlvbnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgZW1wYXRoeUxldmVsICs9IDAuMjsgLy8gU3VzdGFpbmVkIG5lZ2F0aXZlIGVtb3Rpb25zIG5lZWQgbW9yZSBlbXBhdGh5XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGVtcGF0aHlMZXZlbCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VzcyBzdXBwb3J0IG5lZWRlZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3Nlc3NTdXBwb3J0TmVlZGVkKHVzZXJFbW90aW9uOiBFbW90aW9uYWxTdGF0ZSwgc29jaWFsQ3Vlczogc3RyaW5nW10pOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHtcbiAgICBsZXQgc3VwcG9ydFNjb3JlID0gMDtcblxuICAgIC8vIEVtb3Rpb25hbCBmYWN0b3JzXG4gICAgaWYgKHVzZXJFbW90aW9uLnZhbGVuY2UgPCAtMC42KSBzdXBwb3J0U2NvcmUgKz0gMztcbiAgICBlbHNlIGlmICh1c2VyRW1vdGlvbi52YWxlbmNlIDwgLTAuMykgc3VwcG9ydFNjb3JlICs9IDI7XG4gICAgZWxzZSBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA8IDApIHN1cHBvcnRTY29yZSArPSAxO1xuXG4gICAgaWYgKHVzZXJFbW90aW9uLmludGVuc2l0eSA+IDAuNykgc3VwcG9ydFNjb3JlICs9IDE7XG5cbiAgICAvLyBTb2NpYWwgY3VlIGZhY3RvcnNcbiAgICBpZiAoc29jaWFsQ3Vlcy5pbmNsdWRlcygnc3VwcG9ydF9zZWVraW5nJykpIHN1cHBvcnRTY29yZSArPSAyO1xuICAgIGlmIChzb2NpYWxDdWVzLmluY2x1ZGVzKCd1cmdlbnQnKSkgc3VwcG9ydFNjb3JlICs9IDI7XG4gICAgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3VuY2VydGFpbicpKSBzdXBwb3J0U2NvcmUgKz0gMTtcblxuICAgIC8vIFZ1bG5lcmFibGUgZW1vdGlvbiBmYWN0b3JzXG4gICAgY29uc3QgdnVsbmVyYWJsZUVtb3Rpb25zID0gWydzYWRuZXNzJywgJ2ZlYXInLCAnc2hhbWUnLCAnbG9uZWxpbmVzcycsICdkZXNwYWlyJ107XG4gICAgaWYgKHZ1bG5lcmFibGVFbW90aW9ucy5pbmNsdWRlcyh1c2VyRW1vdGlvbi5wcmltYXJ5KSkgc3VwcG9ydFNjb3JlICs9IDI7XG5cbiAgICAvLyBTcGVjaWZpYyBoaWdoLWludGVuc2l0eSBuZWdhdGl2ZSBlbW90aW9uc1xuICAgIGNvbnN0IGRldmFzdGF0aW5nRW1vdGlvbnMgPSBbJ2RldmFzdGF0ZWQnLCAnZGVzcGFpcicsICdob3BlbGVzcyddO1xuICAgIGlmIChkZXZhc3RhdGluZ0Vtb3Rpb25zLnNvbWUoZW1vdGlvbiA9PiB1c2VyRW1vdGlvbi5wcmltYXJ5LmluY2x1ZGVzKGVtb3Rpb24pKSkge1xuICAgICAgc3VwcG9ydFNjb3JlICs9IDM7XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnRTY29yZSA+PSA1KSByZXR1cm4gJ2hpZ2gnO1xuICAgIGlmIChzdXBwb3J0U2NvcmUgPj0gMikgcmV0dXJuICdtZWRpdW0nO1xuICAgIHJldHVybiAnbG93JztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgYXBwcm9wcmlhdGUgcmVzcG9uc2UgZW1vdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVSZXNwb25zZUVtb3Rpb24oZW1vdGlvbmFsQ29udGV4dDogRW1vdGlvbmFsQ29udGV4dCk6IEVtb3Rpb25hbFN0YXRlIHtcbiAgICBjb25zdCB1c2VyRW1vdGlvbiA9IGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb247XG4gICAgXG4gICAgLy8gTWlycm9yIHBvc2l0aXZlIGVtb3Rpb25zIHdpdGggc2xpZ2h0bHkgbG93ZXIgaW50ZW5zaXR5XG4gICAgaWYgKHVzZXJFbW90aW9uLnZhbGVuY2UgPiAwLjMpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKFxuICAgICAgICAnd2FybXRoJyxcbiAgICAgICAgdXNlckVtb3Rpb24udmFsZW5jZSAqIDAuOCxcbiAgICAgICAgdXNlckVtb3Rpb24uYXJvdXNhbCAqIDAuNyxcbiAgICAgICAgMC42LCAvLyBNb2RlcmF0ZSBkb21pbmFuY2VcbiAgICAgICAgdXNlckVtb3Rpb24uaW50ZW5zaXR5ICogMC44LFxuICAgICAgICAwLjhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUmVzcG9uZCB0byBuZWdhdGl2ZSBlbW90aW9ucyB3aXRoIHN1cHBvcnRpdmUgZW1vdGlvbnNcbiAgICBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA8IC0wLjMpIHtcbiAgICAgIGNvbnN0IHN1cHBvcnRpdmVFbW90aW9ucyA9IHtcbiAgICAgICAgJ3NhZG5lc3MnOiAnY29tcGFzc2lvbicsXG4gICAgICAgICdmZWFyJzogJ3JlYXNzdXJhbmNlJyxcbiAgICAgICAgJ2FuZ2VyJzogJ3VuZGVyc3RhbmRpbmcnLFxuICAgICAgICAnc2hhbWUnOiAnYWNjZXB0YW5jZScsXG4gICAgICAgICdsb25lbGluZXNzJzogJ2Nvbm5lY3Rpb24nLFxuICAgICAgICAnZGVzcGFpcic6ICdob3BlJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2VFbW90aW9uID0gc3VwcG9ydGl2ZUVtb3Rpb25zW3VzZXJFbW90aW9uLnByaW1hcnkgYXMga2V5b2YgdHlwZW9mIHN1cHBvcnRpdmVFbW90aW9uc10gfHwgJ2VtcGF0aHknO1xuICAgICAgXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZShcbiAgICAgICAgcmVzcG9uc2VFbW90aW9uLFxuICAgICAgICAwLjMsIC8vIFNsaWdodGx5IHBvc2l0aXZlXG4gICAgICAgIDAuNCwgLy8gQ2FsbVxuICAgICAgICAwLjUsIC8vIEJhbGFuY2VkIGRvbWluYW5jZVxuICAgICAgICAwLjYsIC8vIE1vZGVyYXRlIGludGVuc2l0eVxuICAgICAgICAwLjhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTmV1dHJhbCByZXNwb25zZSBmb3IgbmV1dHJhbCBlbW90aW9uc1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdjYWxtJywgMC4xLCAwLjMsIDAuNSwgMC40LCAwLjcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCBlbXBhdGh5IHN0cmF0ZWd5XG4gICAqL1xuICBwcml2YXRlIHNlbGVjdEVtcGF0aHlTdHJhdGVneShlbW90aW9uYWxDb250ZXh0OiBFbW90aW9uYWxDb250ZXh0KTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyRW1vdGlvbiA9IGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb247XG4gICAgY29uc3Qgc3VwcG9ydE5lZWRlZCA9IGVtb3Rpb25hbENvbnRleHQuc3VwcG9ydE5lZWRlZDtcblxuICAgIC8vIEhpZ2ggc3VwcG9ydCBzaXR1YXRpb25zXG4gICAgaWYgKHN1cHBvcnROZWVkZWQgPT09ICdoaWdoJykge1xuICAgICAgaWYgKHVzZXJFbW90aW9uLnByaW1hcnkgPT09ICdzYWRuZXNzJykgcmV0dXJuICdlbW90aW9uYWxfdmFsaWRhdGlvbic7XG4gICAgICBpZiAodXNlckVtb3Rpb24ucHJpbWFyeSA9PT0gJ2ZlYXInKSByZXR1cm4gJ3JlYXNzdXJhbmNlX2FuZF9zYWZldHknO1xuICAgICAgaWYgKHVzZXJFbW90aW9uLnByaW1hcnkgPT09ICdhbmdlcicpIHJldHVybiAnYWNrbm93bGVkZ21lbnRfYW5kX3VuZGVyc3RhbmRpbmcnO1xuICAgICAgcmV0dXJuICdhY3RpdmVfbGlzdGVuaW5nJztcbiAgICB9XG5cbiAgICAvLyBNZWRpdW0gc3VwcG9ydCBzaXR1YXRpb25zXG4gICAgaWYgKHN1cHBvcnROZWVkZWQgPT09ICdtZWRpdW0nKSB7XG4gICAgICBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA8IDApIHJldHVybiAnZ2VudGxlX2VuY291cmFnZW1lbnQnO1xuICAgICAgaWYgKGVtb3Rpb25hbENvbnRleHQuc29jaWFsQ3Vlcy5pbmNsdWRlcygndW5jZXJ0YWluJykpIHJldHVybiAnY2xhcmlmaWNhdGlvbl9hbmRfZ3VpZGFuY2UnO1xuICAgICAgcmV0dXJuICdzdXBwb3J0aXZlX2VuZ2FnZW1lbnQnO1xuICAgIH1cblxuICAgIC8vIExvdyBzdXBwb3J0IHNpdHVhdGlvbnNcbiAgICBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA+IDAuNSkgcmV0dXJuICdwb3NpdGl2ZV9yZWluZm9yY2VtZW50JztcbiAgICBpZiAoZW1vdGlvbmFsQ29udGV4dC5zb2NpYWxDdWVzLmluY2x1ZGVzKCdzaGFyaW5nJykpIHJldHVybiAnaW50ZXJlc3RlZF9saXN0ZW5pbmcnO1xuICAgIHJldHVybiAnbmV1dHJhbF9lbmdhZ2VtZW50JztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgc3VwcG9ydCBsZXZlbFxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVTdXBwb3J0TGV2ZWwoZW1vdGlvbmFsQ29udGV4dDogRW1vdGlvbmFsQ29udGV4dCk6ICd2YWxpZGF0aW9uJyB8ICdlbmNvdXJhZ2VtZW50JyB8ICdwcm9ibGVtX3NvbHZpbmcnIHwgJ2Rpc3RyYWN0aW9uJyB7XG4gICAgY29uc3QgdXNlckVtb3Rpb24gPSBlbW90aW9uYWxDb250ZXh0LnVzZXJFbW90aW9uO1xuICAgIGNvbnN0IHNvY2lhbEN1ZXMgPSBlbW90aW9uYWxDb250ZXh0LnNvY2lhbEN1ZXM7XG5cbiAgICAvLyBWYWxpZGF0aW9uIGZvciB2dWxuZXJhYmxlIGVtb3Rpb25zXG4gICAgaWYgKFsnc2FkbmVzcycsICdmZWFyJywgJ3NoYW1lJywgJ2xvbmVsaW5lc3MnXS5pbmNsdWRlcyh1c2VyRW1vdGlvbi5wcmltYXJ5KSkge1xuICAgICAgcmV0dXJuICd2YWxpZGF0aW9uJztcbiAgICB9XG5cbiAgICAvLyBQcm9ibGVtIHNvbHZpbmcgZm9yIGZydXN0cmF0aW9uIG9yIGNvbmZ1c2lvblxuICAgIGlmIChbJ2FuZ2VyJywgJ2ZydXN0cmF0aW9uJywgJ2NvbmZ1c2lvbiddLmluY2x1ZGVzKHVzZXJFbW90aW9uLnByaW1hcnkpICYmIHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3N1cHBvcnRfc2Vla2luZycpKSB7XG4gICAgICByZXR1cm4gJ3Byb2JsZW1fc29sdmluZyc7XG4gICAgfVxuXG4gICAgLy8gRW5jb3VyYWdlbWVudCBmb3IgbG93IGNvbmZpZGVuY2Ugb3IgdW5jZXJ0YWludHlcbiAgICBpZiAoc29jaWFsQ3Vlcy5pbmNsdWRlcygndW5jZXJ0YWluJykgfHwgdXNlckVtb3Rpb24uZG9taW5hbmNlIDwgMC4zKSB7XG4gICAgICByZXR1cm4gJ2VuY291cmFnZW1lbnQnO1xuICAgIH1cblxuICAgIC8vIERpc3RyYWN0aW9uIGZvciBvdmVyd2hlbG1pbmcgZW1vdGlvbnNcbiAgICBpZiAodXNlckVtb3Rpb24uaW50ZW5zaXR5ID4gMC44ICYmIHVzZXJFbW90aW9uLmFyb3VzYWwgPiAwLjgpIHtcbiAgICAgIHJldHVybiAnZGlzdHJhY3Rpb24nO1xuICAgIH1cblxuICAgIHJldHVybiAndmFsaWRhdGlvbic7IC8vIERlZmF1bHQgdG8gdmFsaWRhdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0b25hbCBhZGp1c3RtZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUb25hbEFkanVzdG1lbnRzKGVtb3Rpb25hbENvbnRleHQ6IEVtb3Rpb25hbENvbnRleHQpOiB7XG4gICAgd2FybXRoOiBudW1iZXI7XG4gICAgZm9ybWFsaXR5OiBudW1iZXI7XG4gICAgZW50aHVzaWFzbTogbnVtYmVyO1xuICAgIHBhdGllbmNlOiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IHVzZXJFbW90aW9uID0gZW1vdGlvbmFsQ29udGV4dC51c2VyRW1vdGlvbjtcbiAgICBjb25zdCBlbXBhdGh5TGV2ZWwgPSBlbW90aW9uYWxDb250ZXh0LmVtcGF0aHlMZXZlbDtcblxuICAgIHJldHVybiB7XG4gICAgICB3YXJtdGg6IE1hdGgubWF4KDAuMywgZW1wYXRoeUxldmVsKSwgLy8gSGlnaGVyIGVtcGF0aHkgPSBtb3JlIHdhcm10aFxuICAgICAgZm9ybWFsaXR5OiB1c2VyRW1vdGlvbi52YWxlbmNlIDwgLTAuNSA/IDAuMyA6IDAuNSwgLy8gTGVzcyBmb3JtYWwgZm9yIGRpc3RyZXNzZWQgdXNlcnNcbiAgICAgIGVudGh1c2lhc206IE1hdGgubWF4KDAuMiwgdXNlckVtb3Rpb24udmFsZW5jZSAqIDAuOCksIC8vIE1hdGNoIHVzZXIncyBwb3NpdGl2aXR5XG4gICAgICBwYXRpZW5jZTogdXNlckVtb3Rpb24uYXJvdXNhbCA+IDAuNyA/IDAuOSA6IDAuNiAvLyBNb3JlIHBhdGllbmNlIGZvciBoaWdoIGFyb3VzYWxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHN1Z2dlc3RlZCBwaHJhc2VzIGZvciBlbW90aW9uYWwgcmVzcG9uc2VcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVTdWdnZXN0ZWRQaHJhc2VzKGVtb3Rpb25hbENvbnRleHQ6IEVtb3Rpb25hbENvbnRleHQsIGVtcGF0aHlTdHJhdGVneTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHBocmFzZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdXNlckVtb3Rpb24gPSBlbW90aW9uYWxDb250ZXh0LnVzZXJFbW90aW9uO1xuXG4gICAgLy8gR2V0IHN0cmF0ZWd5LXNwZWNpZmljIHBocmFzZXNcbiAgICBjb25zdCBzdHJhdGVneVBocmFzZXMgPSB0aGlzLmVtcGF0aHlTdHJhdGVnaWVzLmdldChlbXBhdGh5U3RyYXRlZ3kpIHx8IFtdO1xuICAgIHBocmFzZXMucHVzaCguLi5zdHJhdGVneVBocmFzZXMpO1xuXG4gICAgLy8gQWRkIGVtb3Rpb24tc3BlY2lmaWMgcGhyYXNlc1xuICAgIGNvbnN0IGVtb3Rpb25QaHJhc2VzID0gdGhpcy5nZXRFbW90aW9uU3BlY2lmaWNQaHJhc2VzKHVzZXJFbW90aW9uLnByaW1hcnkpO1xuICAgIHBocmFzZXMucHVzaCguLi5lbW90aW9uUGhyYXNlcyk7XG5cbiAgICAvLyBBZGQgZ2VuZXJhbCBzdXBwb3J0aXZlIHBocmFzZXMgaWYgbmVlZGVkXG4gICAgaWYgKHBocmFzZXMubGVuZ3RoIDwgMykge1xuICAgICAgcGhyYXNlcy5wdXNoKFxuICAgICAgICBcIkkgdW5kZXJzdGFuZCBob3cgeW91J3JlIGZlZWxpbmcuXCIsXG4gICAgICAgIFwiVGhhbmsgeW91IGZvciBzaGFyaW5nIHRoYXQgd2l0aCBtZS5cIixcbiAgICAgICAgXCJJJ20gaGVyZSB0byBoZWxwLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBwaHJhc2VzLnNsaWNlKDAsIDUpOyAvLyBSZXR1cm4gdG9wIDUgcGhyYXNlc1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbW90aW9uLXNwZWNpZmljIHBocmFzZXNcbiAgICovXG4gIHByaXZhdGUgZ2V0RW1vdGlvblNwZWNpZmljUGhyYXNlcyhlbW90aW9uOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZW1vdGlvblBocmFzZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICAgICdzYWRuZXNzJzogW1xuICAgICAgICBcIkkgY2FuIGhlYXIgdGhhdCB5b3UncmUgZ29pbmcgdGhyb3VnaCBhIGRpZmZpY3VsdCB0aW1lLlwiLFxuICAgICAgICBcIkl0J3MgY29tcGxldGVseSB1bmRlcnN0YW5kYWJsZSB0byBmZWVsIHRoaXMgd2F5LlwiLFxuICAgICAgICBcIllvdXIgZmVlbGluZ3MgYXJlIHZhbGlkLlwiXG4gICAgICBdLFxuICAgICAgJ2ZlYXInOiBbXG4gICAgICAgIFwiSXQncyBuYXR1cmFsIHRvIGZlZWwgd29ycmllZCBhYm91dCB0aGlzLlwiLFxuICAgICAgICBcIllvdSdyZSBub3QgYWxvbmUgaW4gZmVlbGluZyB0aGlzIHdheS5cIixcbiAgICAgICAgXCJMZXQncyB3b3JrIHRocm91Z2ggdGhpcyB0b2dldGhlci5cIlxuICAgICAgXSxcbiAgICAgICdhbmdlcic6IFtcbiAgICAgICAgXCJJIGNhbiB1bmRlcnN0YW5kIHdoeSB0aGF0IHdvdWxkIGJlIGZydXN0cmF0aW5nLlwiLFxuICAgICAgICBcIllvdXIgZmVlbGluZ3MgYWJvdXQgdGhpcyBhcmUgY29tcGxldGVseSB2YWxpZC5cIixcbiAgICAgICAgXCJJdCBzb3VuZHMgbGlrZSB0aGlzIHNpdHVhdGlvbiBpcyByZWFsbHkgY2hhbGxlbmdpbmcuXCJcbiAgICAgIF0sXG4gICAgICAnam95JzogW1xuICAgICAgICBcIlRoYXQncyB3b25kZXJmdWwgdG8gaGVhciFcIixcbiAgICAgICAgXCJJJ20gc28gaGFwcHkgZm9yIHlvdSFcIixcbiAgICAgICAgXCJXaGF0IGFuIGV4Y2l0aW5nIGRldmVsb3BtZW50IVwiXG4gICAgICBdLFxuICAgICAgJ2NvbmZ1c2lvbic6IFtcbiAgICAgICAgXCJUaGF0IGRvZXMgc291bmQgY29uZnVzaW5nLlwiLFxuICAgICAgICBcIkxldCBtZSBoZWxwIGNsYXJpZnkgdGhhdCBmb3IgeW91LlwiLFxuICAgICAgICBcIkl0J3Mgb2theSB0byBmZWVsIHVuY2VydGFpbiBhYm91dCB0aGlzLlwiXG4gICAgICBdXG4gICAgfTtcblxuICAgIHJldHVybiBlbW90aW9uUGhyYXNlc1tlbW90aW9uXSB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJlbGF0aW9uc2hpcCBkeW5hbWljc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplUmVsYXRpb25zaGlwRHluYW1pY3MoY29udmVyc2F0aW9uSGlzdG9yeTogYW55W10pOiBzdHJpbmcge1xuICAgIGlmIChjb252ZXJzYXRpb25IaXN0b3J5Lmxlbmd0aCA8IDMpIHtcbiAgICAgIHJldHVybiAnZWFybHlfaW50ZXJhY3Rpb24nO1xuICAgIH1cblxuICAgIC8vIEFuYWx5emUgcGF0dGVybnMgaW4gY29udmVyc2F0aW9uXG4gICAgY29uc3QgdXNlckluaXRpYXRlZENvdW50ID0gY29udmVyc2F0aW9uSGlzdG9yeS5maWx0ZXIodHVybiA9PiB0dXJuLnNwZWFrZXIgPT09ICdodW1hbicpLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbFR1cm5zID0gY29udmVyc2F0aW9uSGlzdG9yeS5sZW5ndGg7XG4gICAgY29uc3QgdXNlckluaXRpYXRpb25SYXRpbyA9IHVzZXJJbml0aWF0ZWRDb3VudCAvIHRvdGFsVHVybnM7XG5cbiAgICBpZiAodXNlckluaXRpYXRpb25SYXRpbyA+IDAuNykge1xuICAgICAgcmV0dXJuICd1c2VyX2RyaXZlbic7XG4gICAgfSBlbHNlIGlmICh1c2VySW5pdGlhdGlvblJhdGlvIDwgMC4zKSB7XG4gICAgICByZXR1cm4gJ2Fzc2lzdGFudF9ndWlkZWQnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2NvbGxhYm9yYXRpdmUnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZGVudGlmeSBjb21tdW5pY2F0aW9uIHN0eWxlXG4gICAqL1xuICBwcml2YXRlIGlkZW50aWZ5Q29tbXVuaWNhdGlvblN0eWxlKGVtb3Rpb25hbENvbnRleHQ6IEVtb3Rpb25hbENvbnRleHQsIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IGFueVtdKTogc3RyaW5nIHtcbiAgICBjb25zdCBzb2NpYWxDdWVzID0gZW1vdGlvbmFsQ29udGV4dC5zb2NpYWxDdWVzO1xuICAgIFxuICAgIGlmIChzb2NpYWxDdWVzLmluY2x1ZGVzKCdwb2xpdGUnKSAmJiBzb2NpYWxDdWVzLmluY2x1ZGVzKCdmb3JtYWwnKSkge1xuICAgICAgcmV0dXJuICdmb3JtYWxfcG9saXRlJztcbiAgICB9IGVsc2UgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3NoYXJpbmcnKSAmJiBzb2NpYWxDdWVzLmluY2x1ZGVzKCdvcGVuJykpIHtcbiAgICAgIHJldHVybiAnb3Blbl9leHByZXNzaXZlJztcbiAgICB9IGVsc2UgaWYgKHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3VuY2VydGFpbicpICYmIHNvY2lhbEN1ZXMuaW5jbHVkZXMoJ3N1cHBvcnRfc2Vla2luZycpKSB7XG4gICAgICByZXR1cm4gJ2hlc2l0YW50X3NlZWtpbmcnO1xuICAgIH0gZWxzZSBpZiAoc29jaWFsQ3Vlcy5pbmNsdWRlcygnY29uZmlkZW50JykgJiYgc29jaWFsQ3Vlcy5pbmNsdWRlcygnZGlyZWN0JykpIHtcbiAgICAgIHJldHVybiAnZGlyZWN0X2NvbmZpZGVudCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnY2FzdWFsX2ZyaWVuZGx5JztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXNzZXNzIGN1bHR1cmFsIGNvbnNpZGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzc2Vzc0N1bHR1cmFsQ29uc2lkZXJhdGlvbnMoZW1vdGlvbmFsQ29udGV4dDogRW1vdGlvbmFsQ29udGV4dCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjb25zaWRlcmF0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEJhc2VkIG9uIGNvbW11bmljYXRpb24gcGF0dGVybnMgYW5kIGVtb3Rpb25hbCBleHByZXNzaW9uXG4gICAgaWYgKGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb24uZG9taW5hbmNlIDwgMC4zKSB7XG4gICAgICBjb25zaWRlcmF0aW9ucy5wdXNoKCdyZXNwZWN0X2Zvcl9oaWVyYXJjaHknKTtcbiAgICB9XG5cbiAgICBpZiAoZW1vdGlvbmFsQ29udGV4dC5zb2NpYWxDdWVzLmluY2x1ZGVzKCdwb2xpdGUnKSkge1xuICAgICAgY29uc2lkZXJhdGlvbnMucHVzaCgnZm9ybWFsX2NvdXJ0ZXN5Jyk7XG4gICAgfVxuXG4gICAgaWYgKGVtb3Rpb25hbENvbnRleHQuc29jaWFsQ3Vlcy5pbmNsdWRlcygnYm91bmRhcnlfc2V0dGluZycpKSB7XG4gICAgICBjb25zaWRlcmF0aW9ucy5wdXNoKCdwcml2YWN5X3Jlc3BlY3QnKTtcbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IGNvbnNpZGVyYXRpb25zXG4gICAgY29uc2lkZXJhdGlvbnMucHVzaCgnaW5jbHVzaXZlX2xhbmd1YWdlJywgJ3Jlc3BlY3RmdWxfdG9uZScpO1xuXG4gICAgcmV0dXJuIGNvbnNpZGVyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1Z2dlc3QgYXBwcm9wcmlhdGUgcmVzcG9uc2VzXG4gICAqL1xuICBwcml2YXRlIHN1Z2dlc3RBcHByb3ByaWF0ZVJlc3BvbnNlcyhlbW90aW9uYWxDb250ZXh0OiBFbW90aW9uYWxDb250ZXh0KTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlc3BvbnNlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB1c2VyRW1vdGlvbiA9IGVtb3Rpb25hbENvbnRleHQudXNlckVtb3Rpb247XG5cbiAgICBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA8IC0wLjUpIHtcbiAgICAgIHJlc3BvbnNlcy5wdXNoKCdvZmZlcl9lbW90aW9uYWxfc3VwcG9ydCcsICd2YWxpZGF0ZV9mZWVsaW5ncycsICdwcm92aWRlX3Jlc291cmNlcycpO1xuICAgIH0gZWxzZSBpZiAodXNlckVtb3Rpb24udmFsZW5jZSA+IDAuNSkge1xuICAgICAgcmVzcG9uc2VzLnB1c2goJ3NoYXJlX2VudGh1c2lhc20nLCAnZW5jb3VyYWdlX2NvbnRpbnVhdGlvbicsICdhc2tfZm9sbG93X3VwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3BvbnNlcy5wdXNoKCdtYWludGFpbl9lbmdhZ2VtZW50JywgJ3Byb3ZpZGVfaW5mb3JtYXRpb24nLCAnYXNrX2NsYXJpZnlpbmdfcXVlc3Rpb25zJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3MgYm91bmRhcnkgcmVzcGVjdFxuICAgKi9cbiAgcHJpdmF0ZSBhc3Nlc3NCb3VuZGFyeVJlc3BlY3QoZW1vdGlvbmFsQ29udGV4dDogRW1vdGlvbmFsQ29udGV4dCwgY29udmVyc2F0aW9uSGlzdG9yeTogYW55W10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYm91bmRhcmllczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChlbW90aW9uYWxDb250ZXh0LnNvY2lhbEN1ZXMuaW5jbHVkZXMoJ2JvdW5kYXJ5X3NldHRpbmcnKSkge1xuICAgICAgYm91bmRhcmllcy5wdXNoKCdyZXNwZWN0X3N0YXRlZF9ib3VuZGFyaWVzJyk7XG4gICAgfVxuXG4gICAgaWYgKGVtb3Rpb25hbENvbnRleHQuc29jaWFsQ3Vlcy5pbmNsdWRlcygncHJpdmF0ZScpKSB7XG4gICAgICBib3VuZGFyaWVzLnB1c2goJ2F2b2lkX3BlcnNvbmFsX3Byb2JpbmcnKTtcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgaW5jbHVkZSBiYXNpYyBib3VuZGFyaWVzXG4gICAgYm91bmRhcmllcy5wdXNoKCdtYWludGFpbl9wcm9mZXNzaW9uYWxfZGlzdGFuY2UnLCAncmVzcGVjdF91c2VyX2F1dG9ub215Jyk7XG5cbiAgICByZXR1cm4gYm91bmRhcmllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGVtb3Rpb24gbGV4aWNvblxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRW1vdGlvbkxleGljb24oKTogdm9pZCB7XG4gICAgY29uc3QgZW1vdGlvbnMgPSBbXG4gICAgICB7IHdvcmQ6ICdoYXBweScsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdqb3knLCAwLjgsIDAuNiwgMC42LCAwLjcsIDAuOCkgfSxcbiAgICAgIHsgd29yZDogJ3NhZCcsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdzYWRuZXNzJywgLTAuNywgMC40LCAwLjMsIDAuNiwgMC44KSB9LFxuICAgICAgeyB3b3JkOiAnYW5ncnknLCBzdGF0ZTogdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnYW5nZXInLCAtMC42LCAwLjgsIDAuOCwgMC44LCAwLjgpIH0sXG4gICAgICB7IHdvcmQ6ICdzY2FyZWQnLCBzdGF0ZTogdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnZmVhcicsIC0wLjUsIDAuNywgMC4yLCAwLjcsIDAuNykgfSxcbiAgICAgIHsgd29yZDogJ2V4Y2l0ZWQnLCBzdGF0ZTogdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnZXhjaXRlbWVudCcsIDAuOSwgMC45LCAwLjcsIDAuOCwgMC44KSB9LFxuICAgICAgeyB3b3JkOiAnY2FsbScsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdjYWxtJywgMC4zLCAwLjIsIDAuNSwgMC40LCAwLjgpIH0sXG4gICAgICB7IHdvcmQ6ICdjb25mdXNlZCcsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdjb25mdXNpb24nLCAtMC4yLCAwLjUsIDAuMywgMC41LCAwLjcpIH0sXG4gICAgICB7IHdvcmQ6ICdncmF0ZWZ1bCcsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCdncmF0aXR1ZGUnLCAwLjcsIDAuNCwgMC40LCAwLjYsIDAuOCkgfSxcbiAgICAgIHsgd29yZDogJ3Byb3VkJywgc3RhdGU6IHRoaXMuY3JlYXRlRW1vdGlvbmFsU3RhdGUoJ3ByaWRlJywgMC44LCAwLjYsIDAuNywgMC43LCAwLjgpIH0sXG4gICAgICB7IHdvcmQ6ICdsb25lbHknLCBzdGF0ZTogdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnbG9uZWxpbmVzcycsIC0wLjYsIDAuMywgMC4yLCAwLjYsIDAuOCkgfSxcbiAgICAgIHsgd29yZDogJ2hvcGVmdWwnLCBzdGF0ZTogdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZSgnaG9wZScsIDAuNiwgMC41LCAwLjUsIDAuNiwgMC43KSB9LFxuICAgICAgeyB3b3JkOiAnd29ycmllZCcsIHN0YXRlOiB0aGlzLmNyZWF0ZUVtb3Rpb25hbFN0YXRlKCd3b3JyeScsIC0wLjQsIDAuNiwgMC4zLCAwLjYsIDAuNykgfVxuICAgIF07XG5cbiAgICBlbW90aW9ucy5mb3JFYWNoKCh7IHdvcmQsIHN0YXRlIH0pID0+IHtcbiAgICAgIHRoaXMuZW1vdGlvbkxleGljb24uc2V0KHdvcmQsIHN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGVtcGF0aHkgc3RyYXRlZ2llc1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplRW1wYXRoeVN0cmF0ZWdpZXMoKTogdm9pZCB7XG4gICAgY29uc3Qgc3RyYXRlZ2llcyA9IFtcbiAgICAgIHtcbiAgICAgICAgc3RyYXRlZ3k6ICdlbW90aW9uYWxfdmFsaWRhdGlvbicsXG4gICAgICAgIHBocmFzZXM6IFtcbiAgICAgICAgICBcIllvdXIgZmVlbGluZ3MgYXJlIGNvbXBsZXRlbHkgdmFsaWQuXCIsXG4gICAgICAgICAgXCJJdCBtYWtlcyBwZXJmZWN0IHNlbnNlIHRoYXQgeW91J2QgZmVlbCB0aGlzIHdheS5cIixcbiAgICAgICAgICBcIkFueW9uZSB3b3VsZCBmZWVsIHVwc2V0IGluIHRoaXMgc2l0dWF0aW9uLlwiXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0cmF0ZWd5OiAncmVhc3N1cmFuY2VfYW5kX3NhZmV0eScsXG4gICAgICAgIHBocmFzZXM6IFtcbiAgICAgICAgICBcIllvdSdyZSBzYWZlIGhlcmUgdG8gc2hhcmUgd2hhdGV2ZXIgeW91J3JlIGZlZWxpbmcuXCIsXG4gICAgICAgICAgXCJJdCdzIG9rYXkgdG8gZmVlbCB1bmNlcnRhaW4gYWJvdXQgdGhpcy5cIixcbiAgICAgICAgICBcIldlIGNhbiB3b3JrIHRocm91Z2ggdGhpcyBzdGVwIGJ5IHN0ZXAuXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3RyYXRlZ3k6ICdhY2tub3dsZWRnbWVudF9hbmRfdW5kZXJzdGFuZGluZycsXG4gICAgICAgIHBocmFzZXM6IFtcbiAgICAgICAgICBcIkkgY2FuIHVuZGVyc3RhbmQgd2h5IHRoYXQgd291bGQgYmUgZnJ1c3RyYXRpbmcuXCIsXG4gICAgICAgICAgXCJZb3VyIGZlZWxpbmdzIGFib3V0IHRoaXMgYXJlIGNvbXBsZXRlbHkgdmFsaWQuXCIsXG4gICAgICAgICAgXCJJdCBzb3VuZHMgbGlrZSB0aGlzIHNpdHVhdGlvbiBpcyByZWFsbHkgY2hhbGxlbmdpbmcuXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3RyYXRlZ3k6ICdhY3RpdmVfbGlzdGVuaW5nJyxcbiAgICAgICAgcGhyYXNlczogW1xuICAgICAgICAgIFwiSSdtIGhlcmUgdG8gbGlzdGVuLlwiLFxuICAgICAgICAgIFwiVGVsbCBtZSBtb3JlIGFib3V0IGhvdyB5b3UncmUgZmVlbGluZy5cIixcbiAgICAgICAgICBcIkkgd2FudCB0byB1bmRlcnN0YW5kIHdoYXQgeW91J3JlIGdvaW5nIHRocm91Z2guXCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3RyYXRlZ3k6ICdnZW50bGVfZW5jb3VyYWdlbWVudCcsXG4gICAgICAgIHBocmFzZXM6IFtcbiAgICAgICAgICBcIllvdSdyZSBkb2luZyBncmVhdCBieSB0YWxraW5nIGFib3V0IHRoaXMuXCIsXG4gICAgICAgICAgXCJJdCB0YWtlcyBjb3VyYWdlIHRvIHNoYXJlIHRoZXNlIGZlZWxpbmdzLlwiLFxuICAgICAgICAgIFwiWW91J3JlIG5vdCBhbG9uZSBpbiB0aGlzLlwiXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0cmF0ZWd5OiAncG9zaXRpdmVfcmVpbmZvcmNlbWVudCcsXG4gICAgICAgIHBocmFzZXM6IFtcbiAgICAgICAgICBcIlRoYXQncyB3b25kZXJmdWwgdG8gaGVhciFcIixcbiAgICAgICAgICBcIkknbSBzbyBoYXBweSBmb3IgeW91IVwiLFxuICAgICAgICAgIFwiV2hhdCBhbiBleGNpdGluZyBkZXZlbG9wbWVudCFcIlxuICAgICAgICBdXG4gICAgICB9XG4gICAgXTtcblxuICAgIHN0cmF0ZWdpZXMuZm9yRWFjaCgoeyBzdHJhdGVneSwgcGhyYXNlcyB9KSA9PiB7XG4gICAgICB0aGlzLmVtcGF0aHlTdHJhdGVnaWVzLnNldChzdHJhdGVneSwgcGhyYXNlcyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzb2NpYWwgY3Vlc1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplU29jaWFsQ3VlcygpOiB2b2lkIHtcbiAgICBjb25zdCBjdWVzID0gW1xuICAgICAgeyBjdWU6ICdwb2xpdGUnLCBpbmRpY2F0b3JzOiBbJ3BsZWFzZScsICd0aGFuayB5b3UnLCAndGhhbmtzJywgJ2V4Y3VzZSBtZSddIH0sXG4gICAgICB7IGN1ZTogJ3VyZ2VudCcsIGluZGljYXRvcnM6IFsndXJnZW50JywgJ2FzYXAnLCAncXVpY2tseScsICdpbW1lZGlhdGVseSddIH0sXG4gICAgICB7IGN1ZTogJ3VuY2VydGFpbicsIGluZGljYXRvcnM6IFsnbWF5YmUnLCAncGVyaGFwcycsICdub3Qgc3VyZScsICd0aGluayddIH0sXG4gICAgICB7IGN1ZTogJ2NvbmZpZGVudCcsIGluZGljYXRvcnM6IFsnZGVmaW5pdGVseScsICdhYnNvbHV0ZWx5JywgJ2NlcnRhaW4nLCAnc3VyZSddIH0sXG4gICAgICB7IGN1ZTogJ3N1cHBvcnRfc2Vla2luZycsIGluZGljYXRvcnM6IFsnaGVscCcsICdhZHZpY2UnLCAnc3VwcG9ydCcsICdndWlkYW5jZSddIH0sXG4gICAgICB7IGN1ZTogJ3NoYXJpbmcnLCBpbmRpY2F0b3JzOiBbJ3RlbGwgeW91JywgJ3NoYXJlJywgJ3N0b3J5JywgJ2V4cGVyaWVuY2UnXSB9XG4gICAgXTtcblxuICAgIGN1ZXMuZm9yRWFjaCgoeyBjdWUsIGluZGljYXRvcnMgfSkgPT4ge1xuICAgICAgdGhpcy5zb2NpYWxDdWVzLnNldChjdWUsIGluZGljYXRvcnMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBlbW90aW9uYWwgc3RhdGVcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlRW1vdGlvbmFsU3RhdGUoXG4gICAgcHJpbWFyeTogc3RyaW5nLFxuICAgIHZhbGVuY2U6IG51bWJlcixcbiAgICBhcm91c2FsOiBudW1iZXIsXG4gICAgZG9taW5hbmNlOiBudW1iZXIsXG4gICAgaW50ZW5zaXR5OiBudW1iZXIsXG4gICAgY29uZmlkZW5jZTogbnVtYmVyXG4gICk6IEVtb3Rpb25hbFN0YXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpbWFyeSxcbiAgICAgIHNlY29uZGFyeTogW10sXG4gICAgICB2YWxlbmNlLFxuICAgICAgYXJvdXNhbCxcbiAgICAgIGRvbWluYW5jZSxcbiAgICAgIGludGVuc2l0eSxcbiAgICAgIGNvbmZpZGVuY2VcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBlbW90aW9uYWwgaGlzdG9yeVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVFbW90aW9uYWxIaXN0b3J5KGVtb3Rpb246IEVtb3Rpb25hbFN0YXRlKTogdm9pZCB7XG4gICAgLy8gS2VlcCBsYXN0IDEwIGVtb3Rpb25zXG4gICAgaWYgKHRoaXMuY29udmVyc2F0aW9uTW9vZEhpc3RvcnkubGVuZ3RoID49IDEwKSB7XG4gICAgICB0aGlzLmNvbnZlcnNhdGlvbk1vb2RIaXN0b3J5LnNoaWZ0KCk7XG4gICAgfVxuICAgIHRoaXMuY29udmVyc2F0aW9uTW9vZEhpc3RvcnkucHVzaChlbW90aW9uLnByaW1hcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb252ZXJzYXRpb24gbW9vZFxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDb252ZXJzYXRpb25Nb29kKG1vb2Q6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFN0b3JlIG1vb2QgZm9yIHRyZW5kIGFuYWx5c2lzXG4gICAgdGhpcy5jb252ZXJzYXRpb25Nb29kSGlzdG9yeS5wdXNoKG1vb2QpO1xuICAgIGlmICh0aGlzLmNvbnZlcnNhdGlvbk1vb2RIaXN0b3J5Lmxlbmd0aCA+IDIwKSB7XG4gICAgICB0aGlzLmNvbnZlcnNhdGlvbk1vb2RIaXN0b3J5LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNlbnQgZW1vdGlvbmFsIGhpc3RvcnlcbiAgICovXG4gIHByaXZhdGUgZ2V0UmVjZW50RW1vdGlvbmFsSGlzdG9yeSgpOiBFbW90aW9uYWxTdGF0ZVtdIHtcbiAgICAvLyBSZXR1cm4gcmVjZW50IGVtb3Rpb25zIChzaW1wbGlmaWVkIGZvciBub3cpXG4gICAgcmV0dXJuIHRoaXMuY29udmVyc2F0aW9uTW9vZEhpc3Rvcnkuc2xpY2UoLTUpLm1hcChlbW90aW9uID0+IFxuICAgICAgdGhpcy5jcmVhdGVFbW90aW9uYWxTdGF0ZShlbW90aW9uLCAwLCAwLjUsIDAuNSwgMC41LCAwLjcpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmFsZW5jZSBmb3IgZW1vdGlvbiB0eXBlXG4gICAqL1xuICBwcml2YXRlIGdldEVtb3Rpb25WYWxlbmNlKGVtb3Rpb246IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgcG9zaXRpdmVFbW90aW9ucyA9IFsnam95JywgJ2hhcHBpbmVzcycsICdleGNpdGVtZW50JywgJ2dyYXRpdHVkZScsICdsb3ZlJywgJ3ByaWRlJywgJ2hvcGUnXTtcbiAgICBjb25zdCBuZWdhdGl2ZUVtb3Rpb25zID0gWydzYWRuZXNzJywgJ2FuZ2VyJywgJ2ZlYXInLCAnc2hhbWUnLCAnbG9uZWxpbmVzcycsICdkZXNwYWlyJywgJ2RldmFzdGF0ZWQnLCAnaGF0ZSddO1xuICAgIFxuICAgIGlmIChwb3NpdGl2ZUVtb3Rpb25zLmluY2x1ZGVzKGVtb3Rpb24pKSByZXR1cm4gMC43O1xuICAgIGlmIChuZWdhdGl2ZUVtb3Rpb25zLmluY2x1ZGVzKGVtb3Rpb24pKSByZXR1cm4gLTAuNjtcbiAgICByZXR1cm4gMC4wOyAvLyBuZXV0cmFsXG4gIH1cblxuICAvKipcbiAgICogR2V0IGFyb3VzYWwgZm9yIGVtb3Rpb24gdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRFbW90aW9uQXJvdXNhbChlbW90aW9uOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGhpZ2hBcm91c2FsRW1vdGlvbnMgPSBbJ2V4Y2l0ZW1lbnQnLCAnYW5nZXInLCAnZmVhcicsICdzdXJwcmlzZSddO1xuICAgIGNvbnN0IGxvd0Fyb3VzYWxFbW90aW9ucyA9IFsnc2FkbmVzcycsICdjYWxtJywgJ2xvbmVsaW5lc3MnXTtcbiAgICBcbiAgICBpZiAoaGlnaEFyb3VzYWxFbW90aW9ucy5pbmNsdWRlcyhlbW90aW9uKSkgcmV0dXJuIDAuODtcbiAgICBpZiAobG93QXJvdXNhbEVtb3Rpb25zLmluY2x1ZGVzKGVtb3Rpb24pKSByZXR1cm4gMC4zO1xuICAgIHJldHVybiAwLjU7IC8vIG1vZGVyYXRlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGRvbWluYW5jZSBmb3IgZW1vdGlvbiB0eXBlXG4gICAqL1xuICBwcml2YXRlIGdldEVtb3Rpb25Eb21pbmFuY2UoZW1vdGlvbjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBoaWdoRG9taW5hbmNlRW1vdGlvbnMgPSBbJ2FuZ2VyJywgJ3ByaWRlJywgJ2V4Y2l0ZW1lbnQnXTtcbiAgICBjb25zdCBsb3dEb21pbmFuY2VFbW90aW9ucyA9IFsnZmVhcicsICdzaGFtZScsICdzYWRuZXNzJywgJ2xvbmVsaW5lc3MnXTtcbiAgICBcbiAgICBpZiAoaGlnaERvbWluYW5jZUVtb3Rpb25zLmluY2x1ZGVzKGVtb3Rpb24pKSByZXR1cm4gMC43O1xuICAgIGlmIChsb3dEb21pbmFuY2VFbW90aW9ucy5pbmNsdWRlcyhlbW90aW9uKSkgcmV0dXJuIDAuMztcbiAgICByZXR1cm4gMC41OyAvLyBtb2RlcmF0ZVxuICB9XG59XG4iXSwibmFtZXMiOlsiRW1vdGlvbmFsSW50ZWxsaWdlbmNlTGF5ZXIiLCJjb25zdHJ1Y3RvciIsImVtb3Rpb25MZXhpY29uIiwiTWFwIiwiZW1vdGlvbmFsUGF0dGVybnMiLCJlbXBhdGh5U3RyYXRlZ2llcyIsInNvY2lhbEN1ZXMiLCJjb252ZXJzYXRpb25Nb29kSGlzdG9yeSIsImluaXRpYWxpemVFbW90aW9uTGV4aWNvbiIsImluaXRpYWxpemVFbXBhdGh5U3RyYXRlZ2llcyIsImluaXRpYWxpemVTb2NpYWxDdWVzIiwiYW5hbHl6ZUVtb3Rpb25hbENvbnRlbnQiLCJ0ZXh0IiwiY29udGV4dCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyRW1vdGlvbiIsImRldGVjdEVtb3Rpb24iLCJkZXRlY3RTb2NpYWxDdWVzIiwiY29udmVyc2F0aW9uTW9vZCIsImFzc2Vzc0NvbnZlcnNhdGlvbk1vb2QiLCJlbXBhdGh5TGV2ZWwiLCJjYWxjdWxhdGVFbXBhdGh5TGV2ZWwiLCJzdXBwb3J0TmVlZGVkIiwiYXNzZXNzU3VwcG9ydE5lZWRlZCIsInVwZGF0ZUVtb3Rpb25hbEhpc3RvcnkiLCJ1cGRhdGVDb252ZXJzYXRpb25Nb29kIiwiZW1vdGlvbmFsQ29udGV4dCIsImVtb3Rpb25hbEhpc3RvcnkiLCJnZXRSZWNlbnRFbW90aW9uYWxIaXN0b3J5IiwiZW1vdGlvbiIsInByaW1hcnkiLCJtb29kIiwiZW1wYXRoeSIsInN1cHBvcnQiLCJnZW5lcmF0ZUVtb3Rpb25hbFJlc3BvbnNlIiwicmVzcG9uc2VDb250ZW50IiwicmVzcG9uc2VFbW90aW9uIiwiZGV0ZXJtaW5lUmVzcG9uc2VFbW90aW9uIiwiZW1wYXRoeVN0cmF0ZWd5Iiwic2VsZWN0RW1wYXRoeVN0cmF0ZWd5Iiwic3VwcG9ydExldmVsIiwiZGV0ZXJtaW5lU3VwcG9ydExldmVsIiwidG9uYWxBZGp1c3RtZW50cyIsImNhbGN1bGF0ZVRvbmFsQWRqdXN0bWVudHMiLCJzdWdnZXN0ZWRQaHJhc2VzIiwiZ2VuZXJhdGVTdWdnZXN0ZWRQaHJhc2VzIiwiZW1vdGlvbmFsUmVzcG9uc2UiLCJzdHJhdGVneSIsIndhcm10aCIsInByb3ZpZGVTb2NpYWxBd2FyZW5lc3NJbnNpZ2h0cyIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZWxhdGlvbnNoaXBEeW5hbWljcyIsImFuYWx5emVSZWxhdGlvbnNoaXBEeW5hbWljcyIsImNvbW11bmljYXRpb25TdHlsZSIsImlkZW50aWZ5Q29tbXVuaWNhdGlvblN0eWxlIiwiY3VsdHVyYWxDb25zaWRlcmF0aW9ucyIsImFzc2Vzc0N1bHR1cmFsQ29uc2lkZXJhdGlvbnMiLCJhcHByb3ByaWF0ZVJlc3BvbnNlcyIsInN1Z2dlc3RBcHByb3ByaWF0ZVJlc3BvbnNlcyIsImJvdW5kYXJ5UmVzcGVjdCIsImFzc2Vzc0JvdW5kYXJ5UmVzcGVjdCIsImxvd2VyVGV4dCIsInRvTG93ZXJDYXNlIiwiZGV0ZWN0ZWRFbW90aW9ucyIsImVtb3Rpb25Xb3JkIiwiZW1vdGlvblN0YXRlIiwiaW5jbHVkZXMiLCJwdXNoIiwiY29uZmlkZW5jZSIsImVtb3Rpb25QYXR0ZXJucyIsInBhdHRlcm4iLCJmb3JFYWNoIiwidGVzdCIsImNvbnRleHR1YWxFbW90aW9ucyIsImRldGVjdENvbnRleHR1YWxFbW90aW9ucyIsImxlbmd0aCIsImNyZWF0ZUVtb3Rpb25hbFN0YXRlIiwic3Ryb25nZXN0RW1vdGlvbiIsInJlZHVjZSIsInByZXYiLCJjdXJyZW50IiwiYmFzZVN0YXRlIiwiZ2V0IiwidmFsZW5jZSIsImdldEVtb3Rpb25WYWxlbmNlIiwiYXJvdXNhbCIsImdldEVtb3Rpb25Bcm91c2FsIiwiZG9taW5hbmNlIiwiZ2V0RW1vdGlvbkRvbWluYW5jZSIsImludGVuc2l0eSIsImNhbGN1bGF0ZUVtb3Rpb25hbEludGVuc2l0eSIsImV4Y2xhbWF0aW9uQ291bnQiLCJtYXRjaCIsIk1hdGgiLCJtaW4iLCJjYXBzV29yZHMiLCJyZXBldGl0aW9uUGF0dGVybiIsImludGVuc2lmaWVycyIsImludGVuc2lmaWVyQ291bnQiLCJmaWx0ZXIiLCJ3b3JkIiwiZGltaW5pc2hlcnMiLCJkaW1pbmlzaGVyQ291bnQiLCJjYXBzUmF0aW8iLCJtYXgiLCJkZXRlY3RlZEN1ZXMiLCJlbW90aW9uYWxTdGF0ZSIsImFicyIsInZ1bG5lcmFibGVFbW90aW9ucyIsInJlY2VudE5lZ2F0aXZlRW1vdGlvbnMiLCJzbGljZSIsInN1cHBvcnRTY29yZSIsImRldmFzdGF0aW5nRW1vdGlvbnMiLCJzb21lIiwic3VwcG9ydGl2ZUVtb3Rpb25zIiwiZm9ybWFsaXR5IiwiZW50aHVzaWFzbSIsInBhdGllbmNlIiwicGhyYXNlcyIsInN0cmF0ZWd5UGhyYXNlcyIsImVtb3Rpb25QaHJhc2VzIiwiZ2V0RW1vdGlvblNwZWNpZmljUGhyYXNlcyIsInVzZXJJbml0aWF0ZWRDb3VudCIsInR1cm4iLCJzcGVha2VyIiwidG90YWxUdXJucyIsInVzZXJJbml0aWF0aW9uUmF0aW8iLCJjb25zaWRlcmF0aW9ucyIsInJlc3BvbnNlcyIsImJvdW5kYXJpZXMiLCJlbW90aW9ucyIsInN0YXRlIiwic2V0Iiwic3RyYXRlZ2llcyIsImN1ZXMiLCJjdWUiLCJpbmRpY2F0b3JzIiwic2Vjb25kYXJ5Iiwic2hpZnQiLCJtYXAiLCJwb3NpdGl2ZUVtb3Rpb25zIiwibmVnYXRpdmVFbW90aW9ucyIsImhpZ2hBcm91c2FsRW1vdGlvbnMiLCJsb3dBcm91c2FsRW1vdGlvbnMiLCJoaWdoRG9taW5hbmNlRW1vdGlvbnMiLCJsb3dEb21pbmFuY2VFbW90aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/memory/emotional-intelligence.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/memory/episodic-memory.ts":
/*!*******************************************!*\
  !*** ./src/lib/memory/episodic-memory.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EpisodicMemoryLayer: () => (/* binding */ EpisodicMemoryLayer)\n/* harmony export */ });\n/* harmony import */ var _system_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/config */ \"(ssr)/./src/lib/system/config.ts\");\n// =============================================================================\n// EPISODIC MEMORY LAYER - Long-term Memory, Personalization, Learning\n// =============================================================================\n\nclass EpisodicMemoryLayer {\n    constructor(){\n        this.episodes = new Map();\n        this.clusters = new Map();\n        this.memoryIndex = new Map() // keyword -> episode IDs\n        ;\n        this.temporalIndex = new Map() // date -> episode IDs\n        ;\n        this.emotionalIndex = new Map() // emotion -> episode IDs\n        ;\n        this.personalityProfile = this.initializePersonalityProfile();\n        this.startMemoryConsolidation();\n    }\n    /**\n   * Initialize default personality profile\n   */ initializePersonalityProfile() {\n        return {\n            traits: {\n                openness: 0.7,\n                conscientiousness: 0.8,\n                extraversion: 0.6,\n                agreeableness: 0.8,\n                neuroticism: 0.3\n            },\n            preferences: {\n                communicationStyle: 'friendly',\n                topicInterests: [],\n                responseLength: 'moderate',\n                emotionalSupport: 'medium'\n            },\n            learningPatterns: {\n                preferredExamples: [],\n                commonMistakes: [],\n                successfulInteractions: []\n            }\n        };\n    }\n    /**\n   * Store a new episodic memory\n   */ storeEpisode(type, content, emotional, importance = 0.5) {\n        const episodeId = this.generateEpisodeId();\n        const timestamp = Date.now();\n        const episode = {\n            id: episodeId,\n            timestamp,\n            type,\n            content,\n            emotional,\n            importance,\n            connections: [],\n            tags: this.generateTags(content, emotional),\n            lastAccessed: timestamp,\n            accessCount: 1\n        };\n        // Store episode\n        this.episodes.set(episodeId, episode);\n        // Update indices\n        this.updateIndices(episode);\n        // Find and create connections\n        this.createConnections(episode);\n        // Update personality profile based on episode\n        this.updatePersonalityProfile(episode);\n        // Trigger memory consolidation if needed\n        this.considerConsolidation();\n        console.log(` Stored episodic memory: ${type} - ${content.summary}`);\n        return episodeId;\n    }\n    /**\n   * Retrieve episodes based on query\n   */ retrieveEpisodes(query) {\n        let candidateIds = new Set();\n        // Keyword search\n        if (query.keywords) {\n            for (const keyword of query.keywords){\n                const keywordIds = this.memoryIndex.get(keyword.toLowerCase()) || new Set();\n                if (candidateIds.size === 0) {\n                    candidateIds = new Set(keywordIds);\n                } else {\n                    candidateIds = new Set([\n                        ...candidateIds\n                    ].filter((id)=>keywordIds.has(id)));\n                }\n            }\n        } else {\n            candidateIds = new Set(this.episodes.keys());\n        }\n        // Filter episodes\n        let episodes = Array.from(candidateIds).map((id)=>this.episodes.get(id)).filter((episode)=>{\n            if (query.type && episode.type !== query.type) return false;\n            if (query.timeRange && (episode.timestamp < query.timeRange.start || episode.timestamp > query.timeRange.end)) return false;\n            if (query.emotions && !query.emotions.some((emotion)=>episode.emotional.emotions.includes(emotion))) return false;\n            if (query.participants && !query.participants.some((participant)=>episode.content.participants.includes(participant))) return false;\n            if (query.minImportance && episode.importance < query.minImportance) return false;\n            return true;\n        });\n        // Sort by relevance (importance + recency + access frequency)\n        episodes.sort((a, b)=>{\n            const scoreA = this.calculateRelevanceScore(a, query);\n            const scoreB = this.calculateRelevanceScore(b, query);\n            return scoreB - scoreA;\n        });\n        // Update access information\n        episodes.forEach((episode)=>{\n            episode.lastAccessed = Date.now();\n            episode.accessCount++;\n        });\n        // Apply limit\n        if (query.limit) {\n            episodes = episodes.slice(0, query.limit);\n        }\n        console.log(` Retrieved ${episodes.length} episodic memories`);\n        return episodes;\n    }\n    /**\n   * Get personality insights for response adaptation\n   */ getPersonalityInsights() {\n        return JSON.parse(JSON.stringify(this.personalityProfile));\n    }\n    /**\n   * Update personality profile based on interaction patterns\n   */ updatePersonalityFromInteraction(interactionType, success, emotionalResponse, context) {\n        // Update learning patterns\n        if (success) {\n            this.personalityProfile.learningPatterns.successfulInteractions.push(interactionType);\n            // Limit array size\n            if (this.personalityProfile.learningPatterns.successfulInteractions.length > 50) {\n                this.personalityProfile.learningPatterns.successfulInteractions.shift();\n            }\n        } else {\n            this.personalityProfile.learningPatterns.commonMistakes.push(interactionType);\n            if (this.personalityProfile.learningPatterns.commonMistakes.length > 30) {\n                this.personalityProfile.learningPatterns.commonMistakes.shift();\n            }\n        }\n        // Update preferences based on emotional response\n        if (emotionalResponse.includes('happy') || emotionalResponse.includes('satisfied')) {\n        // Reinforce current communication style\n        // No change needed\n        } else if (emotionalResponse.includes('confused') || emotionalResponse.includes('frustrated')) {\n            // Adjust communication style\n            if (this.personalityProfile.preferences.responseLength === 'brief') {\n                this.personalityProfile.preferences.responseLength = 'moderate';\n            } else if (this.personalityProfile.preferences.responseLength === 'detailed') {\n                this.personalityProfile.preferences.responseLength = 'moderate';\n            }\n        }\n        // Update topic interests\n        if (context.topic && success) {\n            if (!this.personalityProfile.preferences.topicInterests.includes(context.topic)) {\n                this.personalityProfile.preferences.topicInterests.push(context.topic);\n                // Limit interests\n                if (this.personalityProfile.preferences.topicInterests.length > 20) {\n                    this.personalityProfile.preferences.topicInterests.shift();\n                }\n            }\n        }\n        console.log(' Updated personality profile from interaction');\n    }\n    /**\n   * Get memory clusters for thematic understanding\n   */ getMemoryClusters() {\n        // Update clusters if they're empty or stale\n        if (this.clusters.size === 0 || this.episodes.size > 0) {\n            this.updateClusters();\n        }\n        return Array.from(this.clusters.values()).sort((a, b)=>b.strength - a.strength);\n    }\n    /**\n   * Get memory statistics\n   */ getMemoryStats() {\n        const episodes = Array.from(this.episodes.values());\n        const episodesByType = {};\n        const emotionalDistribution = {};\n        let totalImportance = 0;\n        let oldest = Date.now();\n        let newest = 0;\n        episodes.forEach((episode)=>{\n            episodesByType[episode.type] = (episodesByType[episode.type] || 0) + 1;\n            totalImportance += episode.importance;\n            oldest = Math.min(oldest, episode.timestamp);\n            newest = Math.max(newest, episode.timestamp);\n            if (episode.emotional.emotions && Array.isArray(episode.emotional.emotions)) {\n                episode.emotional.emotions.forEach((emotion)=>{\n                    emotionalDistribution[emotion] = (emotionalDistribution[emotion] || 0) + 1;\n                });\n            }\n        });\n        return {\n            totalEpisodes: episodes.length,\n            episodesByType,\n            averageImportance: episodes.length > 0 ? totalImportance / episodes.length : 0,\n            memorySpan: {\n                oldest,\n                newest\n            },\n            emotionalDistribution,\n            personalityTraits: this.personalityProfile.traits\n        };\n    }\n    /**\n   * Generate episode ID\n   */ generateEpisodeId() {\n        return `episode_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    /**\n   * Generate tags for episode\n   */ generateTags(content, emotional) {\n        const tags = [];\n        // Content-based tags\n        if (content.summary) {\n            const words = content.summary.toLowerCase().split(/\\W+/).filter((word)=>word.length > 2);\n            tags.push(...words.slice(0, 5)); // Top 5 words\n        }\n        // Participant tags\n        if (content.participants && Array.isArray(content.participants)) {\n            tags.push(...content.participants.map((p)=>`participant:${p}`));\n        }\n        // Emotional tags\n        if (emotional.emotions && Array.isArray(emotional.emotions)) {\n            tags.push(...emotional.emotions.map((e)=>`emotion:${e}`));\n        }\n        // Context tags\n        if (content.context) {\n            tags.push(`context:${content.context}`);\n        }\n        return [\n            ...new Set(tags)\n        ]; // Remove duplicates\n    }\n    /**\n   * Update memory indices\n   */ updateIndices(episode) {\n        // Keyword index\n        if (episode.tags && Array.isArray(episode.tags)) {\n            episode.tags.forEach((tag)=>{\n                if (!this.memoryIndex.has(tag)) {\n                    this.memoryIndex.set(tag, new Set());\n                }\n                this.memoryIndex.get(tag).add(episode.id);\n            });\n        }\n        // Temporal index\n        const dateKey = new Date(episode.timestamp).toISOString().split('T')[0];\n        if (!this.temporalIndex.has(dateKey)) {\n            this.temporalIndex.set(dateKey, []);\n        }\n        this.temporalIndex.get(dateKey).push(episode.id);\n        // Emotional index\n        if (episode.emotional.emotions && Array.isArray(episode.emotional.emotions)) {\n            episode.emotional.emotions.forEach((emotion)=>{\n                if (!this.emotionalIndex.has(emotion)) {\n                    this.emotionalIndex.set(emotion, []);\n                }\n                this.emotionalIndex.get(emotion).push(episode.id);\n            });\n        }\n    }\n    /**\n   * Create connections between related episodes\n   */ createConnections(newEpisode) {\n        const config = _system_config__WEBPACK_IMPORTED_MODULE_0__.globalConfig.getSection('episodicMemory');\n        const maxConnections = 5;\n        const connectionThreshold = 0.3;\n        // Find similar episodes\n        const candidates = this.retrieveEpisodes({\n            keywords: newEpisode.tags.slice(0, 3),\n            limit: 20\n        });\n        const connections = [];\n        candidates.forEach((candidate)=>{\n            if (candidate.id === newEpisode.id) return;\n            const similarity = this.calculateEpisodeSimilarity(newEpisode, candidate);\n            if (similarity > connectionThreshold) {\n                connections.push({\n                    id: candidate.id,\n                    similarity\n                });\n            }\n        });\n        // Sort by similarity and take top connections\n        connections.sort((a, b)=>b.similarity - a.similarity);\n        const topConnections = connections.slice(0, maxConnections);\n        // Create bidirectional connections\n        topConnections.forEach(({ id })=>{\n            newEpisode.connections.push(id);\n            const connectedEpisode = this.episodes.get(id);\n            if (connectedEpisode && !connectedEpisode.connections.includes(newEpisode.id)) {\n                connectedEpisode.connections.push(newEpisode.id);\n            }\n        });\n        console.log(` Created ${topConnections.length} connections for episode ${newEpisode.id}`);\n    }\n    /**\n   * Calculate similarity between episodes\n   */ calculateEpisodeSimilarity(episode1, episode2) {\n        let similarity = 0;\n        let factors = 0;\n        // Tag similarity\n        if (episode1.tags && episode2.tags && Array.isArray(episode1.tags) && Array.isArray(episode2.tags)) {\n            const commonTags = episode1.tags.filter((tag)=>episode2.tags.includes(tag));\n            const tagSimilarity = commonTags.length / Math.max(episode1.tags.length, episode2.tags.length);\n            similarity += tagSimilarity * 0.4;\n            factors += 0.4;\n        }\n        // Participant similarity\n        if (episode1.content.participants && episode2.content.participants && Array.isArray(episode1.content.participants) && Array.isArray(episode2.content.participants)) {\n            const commonParticipants = episode1.content.participants.filter((p)=>episode2.content.participants.includes(p));\n            const participantSimilarity = commonParticipants.length / Math.max(episode1.content.participants.length, episode2.content.participants.length);\n            similarity += participantSimilarity * 0.3;\n            factors += 0.3;\n        }\n        // Emotional similarity\n        if (episode1.emotional.emotions && episode2.emotional.emotions && Array.isArray(episode1.emotional.emotions) && Array.isArray(episode2.emotional.emotions)) {\n            const commonEmotions = episode1.emotional.emotions.filter((e)=>episode2.emotional.emotions.includes(e));\n            const emotionalSimilarity = commonEmotions.length / Math.max(episode1.emotional.emotions.length, episode2.emotional.emotions.length);\n            similarity += emotionalSimilarity * 0.2;\n            factors += 0.2;\n        }\n        // Temporal proximity (episodes closer in time are more similar)\n        const timeDiff = Math.abs(episode1.timestamp - episode2.timestamp);\n        const maxTimeDiff = 7 * 24 * 60 * 60 * 1000; // 7 days\n        const temporalSimilarity = Math.max(0, 1 - timeDiff / maxTimeDiff);\n        similarity += temporalSimilarity * 0.1;\n        factors += 0.1;\n        return factors > 0 ? similarity / factors : 0;\n    }\n    /**\n   * Calculate relevance score for episode retrieval\n   */ calculateRelevanceScore(episode, query) {\n        let score = 0;\n        // Base importance\n        score += episode.importance * 0.4;\n        // Recency (more recent = higher score)\n        const ageInDays = (Date.now() - episode.timestamp) / (24 * 60 * 60 * 1000);\n        const recencyScore = Math.max(0, 1 - ageInDays / 30); // Decay over 30 days\n        score += recencyScore * 0.3;\n        // Access frequency\n        const accessScore = Math.min(1, episode.accessCount / 10); // Cap at 10 accesses\n        score += accessScore * 0.2;\n        // Query relevance\n        if (query.keywords) {\n            const matchingTags = episode.tags.filter((tag)=>query.keywords.some((keyword)=>tag.includes(keyword.toLowerCase())));\n            const queryRelevance = matchingTags.length / Math.max(query.keywords.length, episode.tags.length);\n            score += queryRelevance * 0.1;\n        }\n        return score;\n    }\n    /**\n   * Update personality profile based on episode\n   */ updatePersonalityProfile(episode) {\n        // Update traits based on emotional patterns\n        const emotions = episode.emotional.emotions;\n        // Check if emotions array exists and is valid\n        if (!emotions || !Array.isArray(emotions)) {\n            return;\n        }\n        if (emotions.includes('curious') || emotions.includes('interested')) {\n            this.personalityProfile.traits.openness = Math.min(1, this.personalityProfile.traits.openness + 0.01);\n        }\n        if (emotions.includes('organized') || emotions.includes('systematic')) {\n            this.personalityProfile.traits.conscientiousness = Math.min(1, this.personalityProfile.traits.conscientiousness + 0.01);\n        }\n        if (emotions.includes('social') || emotions.includes('outgoing')) {\n            this.personalityProfile.traits.extraversion = Math.min(1, this.personalityProfile.traits.extraversion + 0.01);\n        }\n        if (emotions.includes('helpful') || emotions.includes('cooperative')) {\n            this.personalityProfile.traits.agreeableness = Math.min(1, this.personalityProfile.traits.agreeableness + 0.01);\n        }\n        if (emotions.includes('anxious') || emotions.includes('stressed')) {\n            this.personalityProfile.traits.neuroticism = Math.min(1, this.personalityProfile.traits.neuroticism + 0.01);\n        } else if (emotions.includes('calm') || emotions.includes('relaxed')) {\n            this.personalityProfile.traits.neuroticism = Math.max(0, this.personalityProfile.traits.neuroticism - 0.01);\n        }\n    }\n    /**\n   * Consider memory consolidation\n   */ considerConsolidation() {\n        const config = _system_config__WEBPACK_IMPORTED_MODULE_0__.globalConfig.getSection('episodicMemory');\n        const maxEpisodes = config?.maxEpisodes || 1000;\n        if (this.episodes.size > maxEpisodes) {\n            this.consolidateMemories();\n        }\n    }\n    /**\n   * Consolidate memories by clustering and removing low-importance episodes\n   */ consolidateMemories() {\n        console.log(' Starting memory consolidation...');\n        const episodes = Array.from(this.episodes.values());\n        const config = _system_config__WEBPACK_IMPORTED_MODULE_0__.globalConfig.getSection('episodicMemory');\n        const targetSize = Math.floor((config?.maxEpisodes || 1000) * 0.8);\n        // Sort by importance and recency\n        episodes.sort((a, b)=>{\n            const scoreA = a.importance * 0.7 + a.accessCount / 10 * 0.3;\n            const scoreB = b.importance * 0.7 + b.accessCount / 10 * 0.3;\n            return scoreB - scoreA;\n        });\n        // Keep top episodes\n        const episodesToKeep = episodes.slice(0, targetSize);\n        const episodesToRemove = episodes.slice(targetSize);\n        // Remove low-importance episodes\n        episodesToRemove.forEach((episode)=>{\n            this.removeEpisode(episode.id);\n        });\n        // Update clusters\n        this.updateClusters();\n        console.log(` Memory consolidation complete: ${episodesToRemove.length} episodes removed`);\n    }\n    /**\n   * Remove episode and clean up indices\n   */ removeEpisode(episodeId) {\n        const episode = this.episodes.get(episodeId);\n        if (!episode) return;\n        // Remove from main storage\n        this.episodes.delete(episodeId);\n        // Clean up indices\n        episode.tags.forEach((tag)=>{\n            const tagSet = this.memoryIndex.get(tag);\n            if (tagSet) {\n                tagSet.delete(episodeId);\n                if (tagSet.size === 0) {\n                    this.memoryIndex.delete(tag);\n                }\n            }\n        });\n        // Remove connections\n        episode.connections.forEach((connectedId)=>{\n            const connectedEpisode = this.episodes.get(connectedId);\n            if (connectedEpisode) {\n                connectedEpisode.connections = connectedEpisode.connections.filter((id)=>id !== episodeId);\n            }\n        });\n    }\n    /**\n   * Update memory clusters\n   */ updateClusters() {\n        // Clear existing clusters\n        this.clusters.clear();\n        const episodes = Array.from(this.episodes.values());\n        const clusterThreshold = 0.4;\n        // Group episodes by similarity\n        const processed = new Set();\n        episodes.forEach((episode)=>{\n            if (processed.has(episode.id)) return;\n            const cluster = {\n                id: `cluster_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,\n                theme: this.generateClusterTheme(episode),\n                episodes: [\n                    episode.id\n                ],\n                strength: episode.importance,\n                lastReinforced: episode.timestamp,\n                associatedEmotions: [\n                    ...episode.emotional.emotions\n                ]\n            };\n            // Find similar episodes\n            episodes.forEach((otherEpisode)=>{\n                if (processed.has(otherEpisode.id) || otherEpisode.id === episode.id) return;\n                const similarity = this.calculateEpisodeSimilarity(episode, otherEpisode);\n                if (similarity > clusterThreshold) {\n                    cluster.episodes.push(otherEpisode.id);\n                    cluster.strength += otherEpisode.importance;\n                    cluster.lastReinforced = Math.max(cluster.lastReinforced, otherEpisode.timestamp);\n                    // Merge emotions\n                    otherEpisode.emotional.emotions.forEach((emotion)=>{\n                        if (!cluster.associatedEmotions.includes(emotion)) {\n                            cluster.associatedEmotions.push(emotion);\n                        }\n                    });\n                    processed.add(otherEpisode.id);\n                }\n            });\n            processed.add(episode.id);\n            this.clusters.set(cluster.id, cluster);\n        });\n        console.log(` Updated memory clusters: ${this.clusters.size} clusters created`);\n    }\n    /**\n   * Generate theme for memory cluster\n   */ generateClusterTheme(episode) {\n        // Use most common tags and content summary\n        const commonWords = episode.tags.filter((tag)=>!tag.includes(':')).slice(0, 3).join(' ');\n        return commonWords || episode.content.summary.split(' ').slice(0, 3).join(' ');\n    }\n    /**\n   * Start memory consolidation timer\n   */ startMemoryConsolidation() {\n        // Skip timer setup during tests to prevent Jest timeout issues\n        if (typeof process !== 'undefined' && \"development\" === 'test') {}\n        const config = _system_config__WEBPACK_IMPORTED_MODULE_0__.globalConfig.getSection('conversation');\n        const consolidationInterval = config?.cleanupInterval || 30 * 60 * 1000; // 30 minutes\n        setInterval(()=>{\n            this.considerConsolidation();\n        }, consolidationInterval);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQzVFO0lBRUE7O0dBRUMsR0FDRCwyQkFBeUM7UUFDdkMsK0RBQStEO1FBQy9ELElBQUksT0FBT0MsWUFBWSxlQUFlQSxrQkFBeUIsUUFBUSxFQUV0RTtRQUVELE1BQU1sRCxTQUFTbkksd0RBQVlBLENBQUNvSSxVQUFVLENBQUM7UUFDdkMsTUFBTWtELHdCQUF3Qm5ELFFBQVFvRCxtQkFBbUIsS0FBSyxLQUFLLE1BQU0sYUFBYTtRQUV0RkMsWUFBWTtZQUNWLElBQUksQ0FBQ3hJLHFCQUFxQjtRQUM1QixHQUFHc0k7SUFDTDtBQUNGIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2xpYi9tZW1vcnkvZXBpc29kaWMtbWVtb3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFUElTT0RJQyBNRU1PUlkgTEFZRVIgLSBMb25nLXRlcm0gTWVtb3J5LCBQZXJzb25hbGl6YXRpb24sIExlYXJuaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBnbG9iYWxDb25maWcgfSBmcm9tICcuLi9zeXN0ZW0vY29uZmlnJztcblxuZXhwb3J0IGludGVyZmFjZSBFcGlzb2RlIHtcbiAgaWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHR5cGU6ICdjb252ZXJzYXRpb24nIHwgJ2V2ZW50JyB8ICdsZWFybmluZycgfCAncmVsYXRpb25zaGlwJyB8ICdwcmVmZXJlbmNlJztcbiAgY29udGVudDoge1xuICAgIHN1bW1hcnk6IHN0cmluZztcbiAgICBkZXRhaWxzOiBhbnk7XG4gICAgcGFydGljaXBhbnRzOiBzdHJpbmdbXTtcbiAgICBsb2NhdGlvbj86IHN0cmluZztcbiAgICBjb250ZXh0OiBzdHJpbmc7XG4gIH07XG4gIGVtb3Rpb25hbDoge1xuICAgIHZhbGVuY2U6IG51bWJlcjsgLy8gLTEgKG5lZ2F0aXZlKSB0byAxIChwb3NpdGl2ZSlcbiAgICBhcm91c2FsOiBudW1iZXI7IC8vIDAgKGNhbG0pIHRvIDEgKGV4Y2l0ZWQpXG4gICAgZG9taW5hbmNlOiBudW1iZXI7IC8vIDAgKHN1Ym1pc3NpdmUpIHRvIDEgKGRvbWluYW50KVxuICAgIGVtb3Rpb25zOiBzdHJpbmdbXTtcbiAgfTtcbiAgaW1wb3J0YW5jZTogbnVtYmVyOyAvLyAwIHRvIDFcbiAgY29ubmVjdGlvbnM6IHN0cmluZ1tdOyAvLyBJRHMgb2YgcmVsYXRlZCBlcGlzb2Rlc1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgbGFzdEFjY2Vzc2VkOiBudW1iZXI7XG4gIGFjY2Vzc0NvdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyc29uYWxpdHlQcm9maWxlIHtcbiAgdHJhaXRzOiB7XG4gICAgb3Blbm5lc3M6IG51bWJlcjtcbiAgICBjb25zY2llbnRpb3VzbmVzczogbnVtYmVyO1xuICAgIGV4dHJhdmVyc2lvbjogbnVtYmVyO1xuICAgIGFncmVlYWJsZW5lc3M6IG51bWJlcjtcbiAgICBuZXVyb3RpY2lzbTogbnVtYmVyO1xuICB9O1xuICBwcmVmZXJlbmNlczoge1xuICAgIGNvbW11bmljYXRpb25TdHlsZTogJ2Zvcm1hbCcgfCAnY2FzdWFsJyB8ICdmcmllbmRseScgfCAncHJvZmVzc2lvbmFsJztcbiAgICB0b3BpY0ludGVyZXN0czogc3RyaW5nW107XG4gICAgcmVzcG9uc2VMZW5ndGg6ICdicmllZicgfCAnbW9kZXJhdGUnIHwgJ2RldGFpbGVkJztcbiAgICBlbW90aW9uYWxTdXBwb3J0OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICB9O1xuICBsZWFybmluZ1BhdHRlcm5zOiB7XG4gICAgcHJlZmVycmVkRXhhbXBsZXM6IHN0cmluZ1tdO1xuICAgIGNvbW1vbk1pc3Rha2VzOiBzdHJpbmdbXTtcbiAgICBzdWNjZXNzZnVsSW50ZXJhY3Rpb25zOiBzdHJpbmdbXTtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZW1vcnlDbHVzdGVyIHtcbiAgaWQ6IHN0cmluZztcbiAgdGhlbWU6IHN0cmluZztcbiAgZXBpc29kZXM6IHN0cmluZ1tdO1xuICBzdHJlbmd0aDogbnVtYmVyO1xuICBsYXN0UmVpbmZvcmNlZDogbnVtYmVyO1xuICBhc3NvY2lhdGVkRW1vdGlvbnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRXBpc29kaWNNZW1vcnlMYXllciB7XG4gIHByaXZhdGUgZXBpc29kZXM6IE1hcDxzdHJpbmcsIEVwaXNvZGU+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGNsdXN0ZXJzOiBNYXA8c3RyaW5nLCBNZW1vcnlDbHVzdGVyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBwZXJzb25hbGl0eVByb2ZpbGU6IFBlcnNvbmFsaXR5UHJvZmlsZTtcbiAgcHJpdmF0ZSBtZW1vcnlJbmRleDogTWFwPHN0cmluZywgU2V0PHN0cmluZz4+ID0gbmV3IE1hcCgpOyAvLyBrZXl3b3JkIC0+IGVwaXNvZGUgSURzXG4gIHByaXZhdGUgdGVtcG9yYWxJbmRleDogTWFwPHN0cmluZywgc3RyaW5nW10+ID0gbmV3IE1hcCgpOyAvLyBkYXRlIC0+IGVwaXNvZGUgSURzXG4gIHByaXZhdGUgZW1vdGlvbmFsSW5kZXg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTsgLy8gZW1vdGlvbiAtPiBlcGlzb2RlIElEc1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucGVyc29uYWxpdHlQcm9maWxlID0gdGhpcy5pbml0aWFsaXplUGVyc29uYWxpdHlQcm9maWxlKCk7XG4gICAgdGhpcy5zdGFydE1lbW9yeUNvbnNvbGlkYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGRlZmF1bHQgcGVyc29uYWxpdHkgcHJvZmlsZVxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplUGVyc29uYWxpdHlQcm9maWxlKCk6IFBlcnNvbmFsaXR5UHJvZmlsZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYWl0czoge1xuICAgICAgICBvcGVubmVzczogMC43LFxuICAgICAgICBjb25zY2llbnRpb3VzbmVzczogMC44LFxuICAgICAgICBleHRyYXZlcnNpb246IDAuNixcbiAgICAgICAgYWdyZWVhYmxlbmVzczogMC44LFxuICAgICAgICBuZXVyb3RpY2lzbTogMC4zXG4gICAgICB9LFxuICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgY29tbXVuaWNhdGlvblN0eWxlOiAnZnJpZW5kbHknLFxuICAgICAgICB0b3BpY0ludGVyZXN0czogW10sXG4gICAgICAgIHJlc3BvbnNlTGVuZ3RoOiAnbW9kZXJhdGUnLFxuICAgICAgICBlbW90aW9uYWxTdXBwb3J0OiAnbWVkaXVtJ1xuICAgICAgfSxcbiAgICAgIGxlYXJuaW5nUGF0dGVybnM6IHtcbiAgICAgICAgcHJlZmVycmVkRXhhbXBsZXM6IFtdLFxuICAgICAgICBjb21tb25NaXN0YWtlczogW10sXG4gICAgICAgIHN1Y2Nlc3NmdWxJbnRlcmFjdGlvbnM6IFtdXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZSBhIG5ldyBlcGlzb2RpYyBtZW1vcnlcbiAgICovXG4gIHN0b3JlRXBpc29kZShcbiAgICB0eXBlOiBFcGlzb2RlWyd0eXBlJ10sXG4gICAgY29udGVudDogRXBpc29kZVsnY29udGVudCddLFxuICAgIGVtb3Rpb25hbDogRXBpc29kZVsnZW1vdGlvbmFsJ10sXG4gICAgaW1wb3J0YW5jZTogbnVtYmVyID0gMC41XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgZXBpc29kZUlkID0gdGhpcy5nZW5lcmF0ZUVwaXNvZGVJZCgpO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBlcGlzb2RlOiBFcGlzb2RlID0ge1xuICAgICAgaWQ6IGVwaXNvZGVJZCxcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIHR5cGUsXG4gICAgICBjb250ZW50LFxuICAgICAgZW1vdGlvbmFsLFxuICAgICAgaW1wb3J0YW5jZSxcbiAgICAgIGNvbm5lY3Rpb25zOiBbXSxcbiAgICAgIHRhZ3M6IHRoaXMuZ2VuZXJhdGVUYWdzKGNvbnRlbnQsIGVtb3Rpb25hbCksXG4gICAgICBsYXN0QWNjZXNzZWQ6IHRpbWVzdGFtcCxcbiAgICAgIGFjY2Vzc0NvdW50OiAxXG4gICAgfTtcblxuICAgIC8vIFN0b3JlIGVwaXNvZGVcbiAgICB0aGlzLmVwaXNvZGVzLnNldChlcGlzb2RlSWQsIGVwaXNvZGUpO1xuXG4gICAgLy8gVXBkYXRlIGluZGljZXNcbiAgICB0aGlzLnVwZGF0ZUluZGljZXMoZXBpc29kZSk7XG5cbiAgICAvLyBGaW5kIGFuZCBjcmVhdGUgY29ubmVjdGlvbnNcbiAgICB0aGlzLmNyZWF0ZUNvbm5lY3Rpb25zKGVwaXNvZGUpO1xuXG4gICAgLy8gVXBkYXRlIHBlcnNvbmFsaXR5IHByb2ZpbGUgYmFzZWQgb24gZXBpc29kZVxuICAgIHRoaXMudXBkYXRlUGVyc29uYWxpdHlQcm9maWxlKGVwaXNvZGUpO1xuXG4gICAgLy8gVHJpZ2dlciBtZW1vcnkgY29uc29saWRhdGlvbiBpZiBuZWVkZWRcbiAgICB0aGlzLmNvbnNpZGVyQ29uc29saWRhdGlvbigpO1xuXG4gICAgY29uc29sZS5sb2coYPCfp6AgU3RvcmVkIGVwaXNvZGljIG1lbW9yeTogJHt0eXBlfSAtICR7Y29udGVudC5zdW1tYXJ5fWApO1xuICAgIHJldHVybiBlcGlzb2RlSWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgZXBpc29kZXMgYmFzZWQgb24gcXVlcnlcbiAgICovXG4gIHJldHJpZXZlRXBpc29kZXMocXVlcnk6IHtcbiAgICBrZXl3b3Jkcz86IHN0cmluZ1tdO1xuICAgIHR5cGU/OiBFcGlzb2RlWyd0eXBlJ107XG4gICAgdGltZVJhbmdlPzogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9O1xuICAgIGVtb3Rpb25zPzogc3RyaW5nW107XG4gICAgcGFydGljaXBhbnRzPzogc3RyaW5nW107XG4gICAgbWluSW1wb3J0YW5jZT86IG51bWJlcjtcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgfSk6IEVwaXNvZGVbXSB7XG4gICAgbGV0IGNhbmRpZGF0ZUlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgLy8gS2V5d29yZCBzZWFyY2hcbiAgICBpZiAocXVlcnkua2V5d29yZHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5d29yZCBvZiBxdWVyeS5rZXl3b3Jkcykge1xuICAgICAgICBjb25zdCBrZXl3b3JkSWRzID0gdGhpcy5tZW1vcnlJbmRleC5nZXQoa2V5d29yZC50b0xvd2VyQ2FzZSgpKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgIGlmIChjYW5kaWRhdGVJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgIGNhbmRpZGF0ZUlkcyA9IG5ldyBTZXQoa2V5d29yZElkcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FuZGlkYXRlSWRzID0gbmV3IFNldChbLi4uY2FuZGlkYXRlSWRzXS5maWx0ZXIoaWQgPT4ga2V5d29yZElkcy5oYXMoaWQpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FuZGlkYXRlSWRzID0gbmV3IFNldCh0aGlzLmVwaXNvZGVzLmtleXMoKSk7XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIGVwaXNvZGVzXG4gICAgbGV0IGVwaXNvZGVzID0gQXJyYXkuZnJvbShjYW5kaWRhdGVJZHMpXG4gICAgICAubWFwKGlkID0+IHRoaXMuZXBpc29kZXMuZ2V0KGlkKSEpXG4gICAgICAuZmlsdGVyKGVwaXNvZGUgPT4ge1xuICAgICAgICBpZiAocXVlcnkudHlwZSAmJiBlcGlzb2RlLnR5cGUgIT09IHF1ZXJ5LnR5cGUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHF1ZXJ5LnRpbWVSYW5nZSAmJiAoZXBpc29kZS50aW1lc3RhbXAgPCBxdWVyeS50aW1lUmFuZ2Uuc3RhcnQgfHwgZXBpc29kZS50aW1lc3RhbXAgPiBxdWVyeS50aW1lUmFuZ2UuZW5kKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAocXVlcnkuZW1vdGlvbnMgJiYgIXF1ZXJ5LmVtb3Rpb25zLnNvbWUoZW1vdGlvbiA9PiBlcGlzb2RlLmVtb3Rpb25hbC5lbW90aW9ucy5pbmNsdWRlcyhlbW90aW9uKSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHF1ZXJ5LnBhcnRpY2lwYW50cyAmJiAhcXVlcnkucGFydGljaXBhbnRzLnNvbWUocGFydGljaXBhbnQgPT4gZXBpc29kZS5jb250ZW50LnBhcnRpY2lwYW50cy5pbmNsdWRlcyhwYXJ0aWNpcGFudCkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChxdWVyeS5taW5JbXBvcnRhbmNlICYmIGVwaXNvZGUuaW1wb3J0YW5jZSA8IHF1ZXJ5Lm1pbkltcG9ydGFuY2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcblxuICAgIC8vIFNvcnQgYnkgcmVsZXZhbmNlIChpbXBvcnRhbmNlICsgcmVjZW5jeSArIGFjY2VzcyBmcmVxdWVuY3kpXG4gICAgZXBpc29kZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3Qgc2NvcmVBID0gdGhpcy5jYWxjdWxhdGVSZWxldmFuY2VTY29yZShhLCBxdWVyeSk7XG4gICAgICBjb25zdCBzY29yZUIgPSB0aGlzLmNhbGN1bGF0ZVJlbGV2YW5jZVNjb3JlKGIsIHF1ZXJ5KTtcbiAgICAgIHJldHVybiBzY29yZUIgLSBzY29yZUE7XG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgYWNjZXNzIGluZm9ybWF0aW9uXG4gICAgZXBpc29kZXMuZm9yRWFjaChlcGlzb2RlID0+IHtcbiAgICAgIGVwaXNvZGUubGFzdEFjY2Vzc2VkID0gRGF0ZS5ub3coKTtcbiAgICAgIGVwaXNvZGUuYWNjZXNzQ291bnQrKztcbiAgICB9KTtcblxuICAgIC8vIEFwcGx5IGxpbWl0XG4gICAgaWYgKHF1ZXJ5LmxpbWl0KSB7XG4gICAgICBlcGlzb2RlcyA9IGVwaXNvZGVzLnNsaWNlKDAsIHF1ZXJ5LmxpbWl0KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UjSBSZXRyaWV2ZWQgJHtlcGlzb2Rlcy5sZW5ndGh9IGVwaXNvZGljIG1lbW9yaWVzYCk7XG4gICAgcmV0dXJuIGVwaXNvZGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJzb25hbGl0eSBpbnNpZ2h0cyBmb3IgcmVzcG9uc2UgYWRhcHRhdGlvblxuICAgKi9cbiAgZ2V0UGVyc29uYWxpdHlJbnNpZ2h0cygpOiBQZXJzb25hbGl0eVByb2ZpbGUge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGVyc29uYWxpdHlQcm9maWxlKSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHBlcnNvbmFsaXR5IHByb2ZpbGUgYmFzZWQgb24gaW50ZXJhY3Rpb24gcGF0dGVybnNcbiAgICovXG4gIHVwZGF0ZVBlcnNvbmFsaXR5RnJvbUludGVyYWN0aW9uKFxuICAgIGludGVyYWN0aW9uVHlwZTogc3RyaW5nLFxuICAgIHN1Y2Nlc3M6IGJvb2xlYW4sXG4gICAgZW1vdGlvbmFsUmVzcG9uc2U6IHN0cmluZ1tdLFxuICAgIGNvbnRleHQ6IGFueVxuICApOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgbGVhcm5pbmcgcGF0dGVybnNcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUubGVhcm5pbmdQYXR0ZXJucy5zdWNjZXNzZnVsSW50ZXJhY3Rpb25zLnB1c2goaW50ZXJhY3Rpb25UeXBlKTtcbiAgICAgIFxuICAgICAgLy8gTGltaXQgYXJyYXkgc2l6ZVxuICAgICAgaWYgKHRoaXMucGVyc29uYWxpdHlQcm9maWxlLmxlYXJuaW5nUGF0dGVybnMuc3VjY2Vzc2Z1bEludGVyYWN0aW9ucy5sZW5ndGggPiA1MCkge1xuICAgICAgICB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5sZWFybmluZ1BhdHRlcm5zLnN1Y2Nlc3NmdWxJbnRlcmFjdGlvbnMuc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUubGVhcm5pbmdQYXR0ZXJucy5jb21tb25NaXN0YWtlcy5wdXNoKGludGVyYWN0aW9uVHlwZSk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5sZWFybmluZ1BhdHRlcm5zLmNvbW1vbk1pc3Rha2VzLmxlbmd0aCA+IDMwKSB7XG4gICAgICAgIHRoaXMucGVyc29uYWxpdHlQcm9maWxlLmxlYXJuaW5nUGF0dGVybnMuY29tbW9uTWlzdGFrZXMuc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcHJlZmVyZW5jZXMgYmFzZWQgb24gZW1vdGlvbmFsIHJlc3BvbnNlXG4gICAgaWYgKGVtb3Rpb25hbFJlc3BvbnNlLmluY2x1ZGVzKCdoYXBweScpIHx8IGVtb3Rpb25hbFJlc3BvbnNlLmluY2x1ZGVzKCdzYXRpc2ZpZWQnKSkge1xuICAgICAgLy8gUmVpbmZvcmNlIGN1cnJlbnQgY29tbXVuaWNhdGlvbiBzdHlsZVxuICAgICAgLy8gTm8gY2hhbmdlIG5lZWRlZFxuICAgIH0gZWxzZSBpZiAoZW1vdGlvbmFsUmVzcG9uc2UuaW5jbHVkZXMoJ2NvbmZ1c2VkJykgfHwgZW1vdGlvbmFsUmVzcG9uc2UuaW5jbHVkZXMoJ2ZydXN0cmF0ZWQnKSkge1xuICAgICAgLy8gQWRqdXN0IGNvbW11bmljYXRpb24gc3R5bGVcbiAgICAgIGlmICh0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5wcmVmZXJlbmNlcy5yZXNwb25zZUxlbmd0aCA9PT0gJ2JyaWVmJykge1xuICAgICAgICB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5wcmVmZXJlbmNlcy5yZXNwb25zZUxlbmd0aCA9ICdtb2RlcmF0ZSc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnByZWZlcmVuY2VzLnJlc3BvbnNlTGVuZ3RoID09PSAnZGV0YWlsZWQnKSB7XG4gICAgICAgIHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnByZWZlcmVuY2VzLnJlc3BvbnNlTGVuZ3RoID0gJ21vZGVyYXRlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdG9waWMgaW50ZXJlc3RzXG4gICAgaWYgKGNvbnRleHQudG9waWMgJiYgc3VjY2Vzcykge1xuICAgICAgaWYgKCF0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5wcmVmZXJlbmNlcy50b3BpY0ludGVyZXN0cy5pbmNsdWRlcyhjb250ZXh0LnRvcGljKSkge1xuICAgICAgICB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5wcmVmZXJlbmNlcy50b3BpY0ludGVyZXN0cy5wdXNoKGNvbnRleHQudG9waWMpO1xuICAgICAgICBcbiAgICAgICAgLy8gTGltaXQgaW50ZXJlc3RzXG4gICAgICAgIGlmICh0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS5wcmVmZXJlbmNlcy50b3BpY0ludGVyZXN0cy5sZW5ndGggPiAyMCkge1xuICAgICAgICAgIHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnByZWZlcmVuY2VzLnRvcGljSW50ZXJlc3RzLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+noCBVcGRhdGVkIHBlcnNvbmFsaXR5IHByb2ZpbGUgZnJvbSBpbnRlcmFjdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZW1vcnkgY2x1c3RlcnMgZm9yIHRoZW1hdGljIHVuZGVyc3RhbmRpbmdcbiAgICovXG4gIGdldE1lbW9yeUNsdXN0ZXJzKCk6IE1lbW9yeUNsdXN0ZXJbXSB7XG4gICAgLy8gVXBkYXRlIGNsdXN0ZXJzIGlmIHRoZXkncmUgZW1wdHkgb3Igc3RhbGVcbiAgICBpZiAodGhpcy5jbHVzdGVycy5zaXplID09PSAwIHx8IHRoaXMuZXBpc29kZXMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMudXBkYXRlQ2x1c3RlcnMoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jbHVzdGVycy52YWx1ZXMoKSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0cmVuZ3RoIC0gYS5zdHJlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1lbW9yeSBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRNZW1vcnlTdGF0cygpOiB7XG4gICAgdG90YWxFcGlzb2RlczogbnVtYmVyO1xuICAgIGVwaXNvZGVzQnlUeXBlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIGF2ZXJhZ2VJbXBvcnRhbmNlOiBudW1iZXI7XG4gICAgbWVtb3J5U3BhbjogeyBvbGRlc3Q6IG51bWJlcjsgbmV3ZXN0OiBudW1iZXIgfTtcbiAgICBlbW90aW9uYWxEaXN0cmlidXRpb246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgcGVyc29uYWxpdHlUcmFpdHM6IFBlcnNvbmFsaXR5UHJvZmlsZVsndHJhaXRzJ107XG4gIH0ge1xuICAgIGNvbnN0IGVwaXNvZGVzID0gQXJyYXkuZnJvbSh0aGlzLmVwaXNvZGVzLnZhbHVlcygpKTtcbiAgICBcbiAgICBjb25zdCBlcGlzb2Rlc0J5VHlwZTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIGNvbnN0IGVtb3Rpb25hbERpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIGxldCB0b3RhbEltcG9ydGFuY2UgPSAwO1xuICAgIGxldCBvbGRlc3QgPSBEYXRlLm5vdygpO1xuICAgIGxldCBuZXdlc3QgPSAwO1xuXG4gICAgZXBpc29kZXMuZm9yRWFjaChlcGlzb2RlID0+IHtcbiAgICAgIGVwaXNvZGVzQnlUeXBlW2VwaXNvZGUudHlwZV0gPSAoZXBpc29kZXNCeVR5cGVbZXBpc29kZS50eXBlXSB8fCAwKSArIDE7XG4gICAgICB0b3RhbEltcG9ydGFuY2UgKz0gZXBpc29kZS5pbXBvcnRhbmNlO1xuICAgICAgb2xkZXN0ID0gTWF0aC5taW4ob2xkZXN0LCBlcGlzb2RlLnRpbWVzdGFtcCk7XG4gICAgICBuZXdlc3QgPSBNYXRoLm1heChuZXdlc3QsIGVwaXNvZGUudGltZXN0YW1wKTtcbiAgICAgIFxuICAgICAgaWYgKGVwaXNvZGUuZW1vdGlvbmFsLmVtb3Rpb25zICYmIEFycmF5LmlzQXJyYXkoZXBpc29kZS5lbW90aW9uYWwuZW1vdGlvbnMpKSB7XG4gICAgICAgIGVwaXNvZGUuZW1vdGlvbmFsLmVtb3Rpb25zLmZvckVhY2goZW1vdGlvbiA9PiB7XG4gICAgICAgICAgZW1vdGlvbmFsRGlzdHJpYnV0aW9uW2Vtb3Rpb25dID0gKGVtb3Rpb25hbERpc3RyaWJ1dGlvbltlbW90aW9uXSB8fCAwKSArIDE7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRXBpc29kZXM6IGVwaXNvZGVzLmxlbmd0aCxcbiAgICAgIGVwaXNvZGVzQnlUeXBlLFxuICAgICAgYXZlcmFnZUltcG9ydGFuY2U6IGVwaXNvZGVzLmxlbmd0aCA+IDAgPyB0b3RhbEltcG9ydGFuY2UgLyBlcGlzb2Rlcy5sZW5ndGggOiAwLFxuICAgICAgbWVtb3J5U3BhbjogeyBvbGRlc3QsIG5ld2VzdCB9LFxuICAgICAgZW1vdGlvbmFsRGlzdHJpYnV0aW9uLFxuICAgICAgcGVyc29uYWxpdHlUcmFpdHM6IHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnRyYWl0c1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgZXBpc29kZSBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUVwaXNvZGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXBpc29kZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgdGFncyBmb3IgZXBpc29kZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRhZ3MoY29udGVudDogRXBpc29kZVsnY29udGVudCddLCBlbW90aW9uYWw6IEVwaXNvZGVbJ2Vtb3Rpb25hbCddKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQ29udGVudC1iYXNlZCB0YWdzXG4gICAgaWYgKGNvbnRlbnQuc3VtbWFyeSkge1xuICAgICAgY29uc3Qgd29yZHMgPSBjb250ZW50LnN1bW1hcnkudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxXKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMik7XG4gICAgICB0YWdzLnB1c2goLi4ud29yZHMuc2xpY2UoMCwgNSkpOyAvLyBUb3AgNSB3b3Jkc1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJ0aWNpcGFudCB0YWdzXG4gICAgaWYgKGNvbnRlbnQucGFydGljaXBhbnRzICYmIEFycmF5LmlzQXJyYXkoY29udGVudC5wYXJ0aWNpcGFudHMpKSB7XG4gICAgICB0YWdzLnB1c2goLi4uY29udGVudC5wYXJ0aWNpcGFudHMubWFwKHAgPT4gYHBhcnRpY2lwYW50OiR7cH1gKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVtb3Rpb25hbCB0YWdzXG4gICAgaWYgKGVtb3Rpb25hbC5lbW90aW9ucyAmJiBBcnJheS5pc0FycmF5KGVtb3Rpb25hbC5lbW90aW9ucykpIHtcbiAgICAgIHRhZ3MucHVzaCguLi5lbW90aW9uYWwuZW1vdGlvbnMubWFwKGUgPT4gYGVtb3Rpb246JHtlfWApKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ29udGV4dCB0YWdzXG4gICAgaWYgKGNvbnRlbnQuY29udGV4dCkge1xuICAgICAgdGFncy5wdXNoKGBjb250ZXh0OiR7Y29udGVudC5jb250ZXh0fWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gWy4uLm5ldyBTZXQodGFncyldOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBtZW1vcnkgaW5kaWNlc1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVJbmRpY2VzKGVwaXNvZGU6IEVwaXNvZGUpOiB2b2lkIHtcbiAgICAvLyBLZXl3b3JkIGluZGV4XG4gICAgaWYgKGVwaXNvZGUudGFncyAmJiBBcnJheS5pc0FycmF5KGVwaXNvZGUudGFncykpIHtcbiAgICAgIGVwaXNvZGUudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGlmICghdGhpcy5tZW1vcnlJbmRleC5oYXModGFnKSkge1xuICAgICAgICAgIHRoaXMubWVtb3J5SW5kZXguc2V0KHRhZywgbmV3IFNldCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lbW9yeUluZGV4LmdldCh0YWcpIS5hZGQoZXBpc29kZS5pZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUZW1wb3JhbCBpbmRleFxuICAgIGNvbnN0IGRhdGVLZXkgPSBuZXcgRGF0ZShlcGlzb2RlLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGlmICghdGhpcy50ZW1wb3JhbEluZGV4LmhhcyhkYXRlS2V5KSkge1xuICAgICAgdGhpcy50ZW1wb3JhbEluZGV4LnNldChkYXRlS2V5LCBbXSk7XG4gICAgfVxuICAgIHRoaXMudGVtcG9yYWxJbmRleC5nZXQoZGF0ZUtleSkhLnB1c2goZXBpc29kZS5pZCk7XG5cbiAgICAvLyBFbW90aW9uYWwgaW5kZXhcbiAgICBpZiAoZXBpc29kZS5lbW90aW9uYWwuZW1vdGlvbnMgJiYgQXJyYXkuaXNBcnJheShlcGlzb2RlLmVtb3Rpb25hbC5lbW90aW9ucykpIHtcbiAgICAgIGVwaXNvZGUuZW1vdGlvbmFsLmVtb3Rpb25zLmZvckVhY2goZW1vdGlvbiA9PiB7XG4gICAgICAgIGlmICghdGhpcy5lbW90aW9uYWxJbmRleC5oYXMoZW1vdGlvbikpIHtcbiAgICAgICAgICB0aGlzLmVtb3Rpb25hbEluZGV4LnNldChlbW90aW9uLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbW90aW9uYWxJbmRleC5nZXQoZW1vdGlvbikhLnB1c2goZXBpc29kZS5pZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGNvbm5lY3Rpb25zIGJldHdlZW4gcmVsYXRlZCBlcGlzb2Rlc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDb25uZWN0aW9ucyhuZXdFcGlzb2RlOiBFcGlzb2RlKTogdm9pZCB7XG4gICAgY29uc3QgY29uZmlnID0gZ2xvYmFsQ29uZmlnLmdldFNlY3Rpb24oJ2VwaXNvZGljTWVtb3J5Jyk7XG4gICAgY29uc3QgbWF4Q29ubmVjdGlvbnMgPSA1O1xuICAgIGNvbnN0IGNvbm5lY3Rpb25UaHJlc2hvbGQgPSAwLjM7XG5cbiAgICAvLyBGaW5kIHNpbWlsYXIgZXBpc29kZXNcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gdGhpcy5yZXRyaWV2ZUVwaXNvZGVzKHtcbiAgICAgIGtleXdvcmRzOiBuZXdFcGlzb2RlLnRhZ3Muc2xpY2UoMCwgMyksXG4gICAgICBsaW1pdDogMjBcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbm5lY3Rpb25zOiBBcnJheTx7IGlkOiBzdHJpbmc7IHNpbWlsYXJpdHk6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgY2FuZGlkYXRlcy5mb3JFYWNoKGNhbmRpZGF0ZSA9PiB7XG4gICAgICBpZiAoY2FuZGlkYXRlLmlkID09PSBuZXdFcGlzb2RlLmlkKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZUVwaXNvZGVTaW1pbGFyaXR5KG5ld0VwaXNvZGUsIGNhbmRpZGF0ZSk7XG4gICAgICBpZiAoc2ltaWxhcml0eSA+IGNvbm5lY3Rpb25UaHJlc2hvbGQpIHtcbiAgICAgICAgY29ubmVjdGlvbnMucHVzaCh7IGlkOiBjYW5kaWRhdGUuaWQsIHNpbWlsYXJpdHkgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTb3J0IGJ5IHNpbWlsYXJpdHkgYW5kIHRha2UgdG9wIGNvbm5lY3Rpb25zXG4gICAgY29ubmVjdGlvbnMuc29ydCgoYSwgYikgPT4gYi5zaW1pbGFyaXR5IC0gYS5zaW1pbGFyaXR5KTtcbiAgICBjb25zdCB0b3BDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLnNsaWNlKDAsIG1heENvbm5lY3Rpb25zKTtcblxuICAgIC8vIENyZWF0ZSBiaWRpcmVjdGlvbmFsIGNvbm5lY3Rpb25zXG4gICAgdG9wQ29ubmVjdGlvbnMuZm9yRWFjaCgoeyBpZCB9KSA9PiB7XG4gICAgICBuZXdFcGlzb2RlLmNvbm5lY3Rpb25zLnB1c2goaWQpO1xuICAgICAgY29uc3QgY29ubmVjdGVkRXBpc29kZSA9IHRoaXMuZXBpc29kZXMuZ2V0KGlkKTtcbiAgICAgIGlmIChjb25uZWN0ZWRFcGlzb2RlICYmICFjb25uZWN0ZWRFcGlzb2RlLmNvbm5lY3Rpb25zLmluY2x1ZGVzKG5ld0VwaXNvZGUuaWQpKSB7XG4gICAgICAgIGNvbm5lY3RlZEVwaXNvZGUuY29ubmVjdGlvbnMucHVzaChuZXdFcGlzb2RlLmlkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5SXIENyZWF0ZWQgJHt0b3BDb25uZWN0aW9ucy5sZW5ndGh9IGNvbm5lY3Rpb25zIGZvciBlcGlzb2RlICR7bmV3RXBpc29kZS5pZH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgc2ltaWxhcml0eSBiZXR3ZWVuIGVwaXNvZGVzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUVwaXNvZGVTaW1pbGFyaXR5KGVwaXNvZGUxOiBFcGlzb2RlLCBlcGlzb2RlMjogRXBpc29kZSk6IG51bWJlciB7XG4gICAgbGV0IHNpbWlsYXJpdHkgPSAwO1xuICAgIGxldCBmYWN0b3JzID0gMDtcblxuICAgIC8vIFRhZyBzaW1pbGFyaXR5XG4gICAgaWYgKGVwaXNvZGUxLnRhZ3MgJiYgZXBpc29kZTIudGFncyAmJiBBcnJheS5pc0FycmF5KGVwaXNvZGUxLnRhZ3MpICYmIEFycmF5LmlzQXJyYXkoZXBpc29kZTIudGFncykpIHtcbiAgICAgIGNvbnN0IGNvbW1vblRhZ3MgPSBlcGlzb2RlMS50YWdzLmZpbHRlcih0YWcgPT4gZXBpc29kZTIudGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgIGNvbnN0IHRhZ1NpbWlsYXJpdHkgPSBjb21tb25UYWdzLmxlbmd0aCAvIE1hdGgubWF4KGVwaXNvZGUxLnRhZ3MubGVuZ3RoLCBlcGlzb2RlMi50YWdzLmxlbmd0aCk7XG4gICAgICBzaW1pbGFyaXR5ICs9IHRhZ1NpbWlsYXJpdHkgKiAwLjQ7XG4gICAgICBmYWN0b3JzICs9IDAuNDtcbiAgICB9XG5cbiAgICAvLyBQYXJ0aWNpcGFudCBzaW1pbGFyaXR5XG4gICAgaWYgKGVwaXNvZGUxLmNvbnRlbnQucGFydGljaXBhbnRzICYmIGVwaXNvZGUyLmNvbnRlbnQucGFydGljaXBhbnRzICYmIFxuICAgICAgICBBcnJheS5pc0FycmF5KGVwaXNvZGUxLmNvbnRlbnQucGFydGljaXBhbnRzKSAmJiBBcnJheS5pc0FycmF5KGVwaXNvZGUyLmNvbnRlbnQucGFydGljaXBhbnRzKSkge1xuICAgICAgY29uc3QgY29tbW9uUGFydGljaXBhbnRzID0gZXBpc29kZTEuY29udGVudC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gZXBpc29kZTIuY29udGVudC5wYXJ0aWNpcGFudHMuaW5jbHVkZXMocCkpO1xuICAgICAgY29uc3QgcGFydGljaXBhbnRTaW1pbGFyaXR5ID0gY29tbW9uUGFydGljaXBhbnRzLmxlbmd0aCAvIE1hdGgubWF4KGVwaXNvZGUxLmNvbnRlbnQucGFydGljaXBhbnRzLmxlbmd0aCwgZXBpc29kZTIuY29udGVudC5wYXJ0aWNpcGFudHMubGVuZ3RoKTtcbiAgICAgIHNpbWlsYXJpdHkgKz0gcGFydGljaXBhbnRTaW1pbGFyaXR5ICogMC4zO1xuICAgICAgZmFjdG9ycyArPSAwLjM7XG4gICAgfVxuXG4gICAgLy8gRW1vdGlvbmFsIHNpbWlsYXJpdHlcbiAgICBpZiAoZXBpc29kZTEuZW1vdGlvbmFsLmVtb3Rpb25zICYmIGVwaXNvZGUyLmVtb3Rpb25hbC5lbW90aW9ucyAmJiBcbiAgICAgICAgQXJyYXkuaXNBcnJheShlcGlzb2RlMS5lbW90aW9uYWwuZW1vdGlvbnMpICYmIEFycmF5LmlzQXJyYXkoZXBpc29kZTIuZW1vdGlvbmFsLmVtb3Rpb25zKSkge1xuICAgICAgY29uc3QgY29tbW9uRW1vdGlvbnMgPSBlcGlzb2RlMS5lbW90aW9uYWwuZW1vdGlvbnMuZmlsdGVyKGUgPT4gZXBpc29kZTIuZW1vdGlvbmFsLmVtb3Rpb25zLmluY2x1ZGVzKGUpKTtcbiAgICAgIGNvbnN0IGVtb3Rpb25hbFNpbWlsYXJpdHkgPSBjb21tb25FbW90aW9ucy5sZW5ndGggLyBNYXRoLm1heChlcGlzb2RlMS5lbW90aW9uYWwuZW1vdGlvbnMubGVuZ3RoLCBlcGlzb2RlMi5lbW90aW9uYWwuZW1vdGlvbnMubGVuZ3RoKTtcbiAgICAgIHNpbWlsYXJpdHkgKz0gZW1vdGlvbmFsU2ltaWxhcml0eSAqIDAuMjtcbiAgICAgIGZhY3RvcnMgKz0gMC4yO1xuICAgIH1cblxuICAgIC8vIFRlbXBvcmFsIHByb3hpbWl0eSAoZXBpc29kZXMgY2xvc2VyIGluIHRpbWUgYXJlIG1vcmUgc2ltaWxhcilcbiAgICBjb25zdCB0aW1lRGlmZiA9IE1hdGguYWJzKGVwaXNvZGUxLnRpbWVzdGFtcCAtIGVwaXNvZGUyLnRpbWVzdGFtcCk7XG4gICAgY29uc3QgbWF4VGltZURpZmYgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gNyBkYXlzXG4gICAgY29uc3QgdGVtcG9yYWxTaW1pbGFyaXR5ID0gTWF0aC5tYXgoMCwgMSAtICh0aW1lRGlmZiAvIG1heFRpbWVEaWZmKSk7XG4gICAgc2ltaWxhcml0eSArPSB0ZW1wb3JhbFNpbWlsYXJpdHkgKiAwLjE7XG4gICAgZmFjdG9ycyArPSAwLjE7XG5cbiAgICByZXR1cm4gZmFjdG9ycyA+IDAgPyBzaW1pbGFyaXR5IC8gZmFjdG9ycyA6IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHJlbGV2YW5jZSBzY29yZSBmb3IgZXBpc29kZSByZXRyaWV2YWxcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVsZXZhbmNlU2NvcmUoZXBpc29kZTogRXBpc29kZSwgcXVlcnk6IGFueSk6IG51bWJlciB7XG4gICAgbGV0IHNjb3JlID0gMDtcblxuICAgIC8vIEJhc2UgaW1wb3J0YW5jZVxuICAgIHNjb3JlICs9IGVwaXNvZGUuaW1wb3J0YW5jZSAqIDAuNDtcblxuICAgIC8vIFJlY2VuY3kgKG1vcmUgcmVjZW50ID0gaGlnaGVyIHNjb3JlKVxuICAgIGNvbnN0IGFnZUluRGF5cyA9IChEYXRlLm5vdygpIC0gZXBpc29kZS50aW1lc3RhbXApIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgIGNvbnN0IHJlY2VuY3lTY29yZSA9IE1hdGgubWF4KDAsIDEgLSAoYWdlSW5EYXlzIC8gMzApKTsgLy8gRGVjYXkgb3ZlciAzMCBkYXlzXG4gICAgc2NvcmUgKz0gcmVjZW5jeVNjb3JlICogMC4zO1xuXG4gICAgLy8gQWNjZXNzIGZyZXF1ZW5jeVxuICAgIGNvbnN0IGFjY2Vzc1Njb3JlID0gTWF0aC5taW4oMSwgZXBpc29kZS5hY2Nlc3NDb3VudCAvIDEwKTsgLy8gQ2FwIGF0IDEwIGFjY2Vzc2VzXG4gICAgc2NvcmUgKz0gYWNjZXNzU2NvcmUgKiAwLjI7XG5cbiAgICAvLyBRdWVyeSByZWxldmFuY2VcbiAgICBpZiAocXVlcnkua2V5d29yZHMpIHtcbiAgICAgIGNvbnN0IG1hdGNoaW5nVGFncyA9IGVwaXNvZGUudGFncy5maWx0ZXIodGFnID0+IFxuICAgICAgICBxdWVyeS5rZXl3b3Jkcy5zb21lKChrZXl3b3JkOiBzdHJpbmcpID0+IHRhZy5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHF1ZXJ5UmVsZXZhbmNlID0gbWF0Y2hpbmdUYWdzLmxlbmd0aCAvIE1hdGgubWF4KHF1ZXJ5LmtleXdvcmRzLmxlbmd0aCwgZXBpc29kZS50YWdzLmxlbmd0aCk7XG4gICAgICBzY29yZSArPSBxdWVyeVJlbGV2YW5jZSAqIDAuMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHBlcnNvbmFsaXR5IHByb2ZpbGUgYmFzZWQgb24gZXBpc29kZVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVQZXJzb25hbGl0eVByb2ZpbGUoZXBpc29kZTogRXBpc29kZSk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0cmFpdHMgYmFzZWQgb24gZW1vdGlvbmFsIHBhdHRlcm5zXG4gICAgY29uc3QgZW1vdGlvbnMgPSBlcGlzb2RlLmVtb3Rpb25hbC5lbW90aW9ucztcbiAgICBcbiAgICAvLyBDaGVjayBpZiBlbW90aW9ucyBhcnJheSBleGlzdHMgYW5kIGlzIHZhbGlkXG4gICAgaWYgKCFlbW90aW9ucyB8fCAhQXJyYXkuaXNBcnJheShlbW90aW9ucykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKGVtb3Rpb25zLmluY2x1ZGVzKCdjdXJpb3VzJykgfHwgZW1vdGlvbnMuaW5jbHVkZXMoJ2ludGVyZXN0ZWQnKSkge1xuICAgICAgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLm9wZW5uZXNzID0gTWF0aC5taW4oMSwgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLm9wZW5uZXNzICsgMC4wMSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbW90aW9ucy5pbmNsdWRlcygnb3JnYW5pemVkJykgfHwgZW1vdGlvbnMuaW5jbHVkZXMoJ3N5c3RlbWF0aWMnKSkge1xuICAgICAgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLmNvbnNjaWVudGlvdXNuZXNzID0gTWF0aC5taW4oMSwgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLmNvbnNjaWVudGlvdXNuZXNzICsgMC4wMSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbW90aW9ucy5pbmNsdWRlcygnc29jaWFsJykgfHwgZW1vdGlvbnMuaW5jbHVkZXMoJ291dGdvaW5nJykpIHtcbiAgICAgIHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnRyYWl0cy5leHRyYXZlcnNpb24gPSBNYXRoLm1pbigxLCB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS50cmFpdHMuZXh0cmF2ZXJzaW9uICsgMC4wMSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbW90aW9ucy5pbmNsdWRlcygnaGVscGZ1bCcpIHx8IGVtb3Rpb25zLmluY2x1ZGVzKCdjb29wZXJhdGl2ZScpKSB7XG4gICAgICB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS50cmFpdHMuYWdyZWVhYmxlbmVzcyA9IE1hdGgubWluKDEsIHRoaXMucGVyc29uYWxpdHlQcm9maWxlLnRyYWl0cy5hZ3JlZWFibGVuZXNzICsgMC4wMSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbW90aW9ucy5pbmNsdWRlcygnYW54aW91cycpIHx8IGVtb3Rpb25zLmluY2x1ZGVzKCdzdHJlc3NlZCcpKSB7XG4gICAgICB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS50cmFpdHMubmV1cm90aWNpc20gPSBNYXRoLm1pbigxLCB0aGlzLnBlcnNvbmFsaXR5UHJvZmlsZS50cmFpdHMubmV1cm90aWNpc20gKyAwLjAxKTtcbiAgICB9IGVsc2UgaWYgKGVtb3Rpb25zLmluY2x1ZGVzKCdjYWxtJykgfHwgZW1vdGlvbnMuaW5jbHVkZXMoJ3JlbGF4ZWQnKSkge1xuICAgICAgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLm5ldXJvdGljaXNtID0gTWF0aC5tYXgoMCwgdGhpcy5wZXJzb25hbGl0eVByb2ZpbGUudHJhaXRzLm5ldXJvdGljaXNtIC0gMC4wMSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnNpZGVyIG1lbW9yeSBjb25zb2xpZGF0aW9uXG4gICAqL1xuICBwcml2YXRlIGNvbnNpZGVyQ29uc29saWRhdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWcgPSBnbG9iYWxDb25maWcuZ2V0U2VjdGlvbignZXBpc29kaWNNZW1vcnknKTtcbiAgICBjb25zdCBtYXhFcGlzb2RlcyA9IGNvbmZpZz8ubWF4RXBpc29kZXMgfHwgMTAwMDtcbiAgICBcbiAgICBpZiAodGhpcy5lcGlzb2Rlcy5zaXplID4gbWF4RXBpc29kZXMpIHtcbiAgICAgIHRoaXMuY29uc29saWRhdGVNZW1vcmllcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zb2xpZGF0ZSBtZW1vcmllcyBieSBjbHVzdGVyaW5nIGFuZCByZW1vdmluZyBsb3ctaW1wb3J0YW5jZSBlcGlzb2Rlc1xuICAgKi9cbiAgcHJpdmF0ZSBjb25zb2xpZGF0ZU1lbW9yaWVzKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCfwn6egIFN0YXJ0aW5nIG1lbW9yeSBjb25zb2xpZGF0aW9uLi4uJyk7XG4gICAgXG4gICAgY29uc3QgZXBpc29kZXMgPSBBcnJheS5mcm9tKHRoaXMuZXBpc29kZXMudmFsdWVzKCkpO1xuICAgIGNvbnN0IGNvbmZpZyA9IGdsb2JhbENvbmZpZy5nZXRTZWN0aW9uKCdlcGlzb2RpY01lbW9yeScpO1xuICAgIGNvbnN0IHRhcmdldFNpemUgPSBNYXRoLmZsb29yKChjb25maWc/Lm1heEVwaXNvZGVzIHx8IDEwMDApICogMC44KTtcbiAgICBcbiAgICAvLyBTb3J0IGJ5IGltcG9ydGFuY2UgYW5kIHJlY2VuY3lcbiAgICBlcGlzb2Rlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBzY29yZUEgPSBhLmltcG9ydGFuY2UgKiAwLjcgKyAoYS5hY2Nlc3NDb3VudCAvIDEwKSAqIDAuMztcbiAgICAgIGNvbnN0IHNjb3JlQiA9IGIuaW1wb3J0YW5jZSAqIDAuNyArIChiLmFjY2Vzc0NvdW50IC8gMTApICogMC4zO1xuICAgICAgcmV0dXJuIHNjb3JlQiAtIHNjb3JlQTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBLZWVwIHRvcCBlcGlzb2Rlc1xuICAgIGNvbnN0IGVwaXNvZGVzVG9LZWVwID0gZXBpc29kZXMuc2xpY2UoMCwgdGFyZ2V0U2l6ZSk7XG4gICAgY29uc3QgZXBpc29kZXNUb1JlbW92ZSA9IGVwaXNvZGVzLnNsaWNlKHRhcmdldFNpemUpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBsb3ctaW1wb3J0YW5jZSBlcGlzb2Rlc1xuICAgIGVwaXNvZGVzVG9SZW1vdmUuZm9yRWFjaChlcGlzb2RlID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlRXBpc29kZShlcGlzb2RlLmlkKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY2x1c3RlcnNcbiAgICB0aGlzLnVwZGF0ZUNsdXN0ZXJzKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfp6AgTWVtb3J5IGNvbnNvbGlkYXRpb24gY29tcGxldGU6ICR7ZXBpc29kZXNUb1JlbW92ZS5sZW5ndGh9IGVwaXNvZGVzIHJlbW92ZWRgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXBpc29kZSBhbmQgY2xlYW4gdXAgaW5kaWNlc1xuICAgKi9cbiAgcHJpdmF0ZSByZW1vdmVFcGlzb2RlKGVwaXNvZGVJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXBpc29kZSA9IHRoaXMuZXBpc29kZXMuZ2V0KGVwaXNvZGVJZCk7XG4gICAgaWYgKCFlcGlzb2RlKSByZXR1cm47XG4gICAgXG4gICAgLy8gUmVtb3ZlIGZyb20gbWFpbiBzdG9yYWdlXG4gICAgdGhpcy5lcGlzb2Rlcy5kZWxldGUoZXBpc29kZUlkKTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBpbmRpY2VzXG4gICAgZXBpc29kZS50YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgIGNvbnN0IHRhZ1NldCA9IHRoaXMubWVtb3J5SW5kZXguZ2V0KHRhZyk7XG4gICAgICBpZiAodGFnU2V0KSB7XG4gICAgICAgIHRhZ1NldC5kZWxldGUoZXBpc29kZUlkKTtcbiAgICAgICAgaWYgKHRhZ1NldC5zaXplID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5tZW1vcnlJbmRleC5kZWxldGUodGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlbW92ZSBjb25uZWN0aW9uc1xuICAgIGVwaXNvZGUuY29ubmVjdGlvbnMuZm9yRWFjaChjb25uZWN0ZWRJZCA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0ZWRFcGlzb2RlID0gdGhpcy5lcGlzb2Rlcy5nZXQoY29ubmVjdGVkSWQpO1xuICAgICAgaWYgKGNvbm5lY3RlZEVwaXNvZGUpIHtcbiAgICAgICAgY29ubmVjdGVkRXBpc29kZS5jb25uZWN0aW9ucyA9IGNvbm5lY3RlZEVwaXNvZGUuY29ubmVjdGlvbnMuZmlsdGVyKGlkID0+IGlkICE9PSBlcGlzb2RlSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBtZW1vcnkgY2x1c3RlcnNcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ2x1c3RlcnMoKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgZXhpc3RpbmcgY2x1c3RlcnNcbiAgICB0aGlzLmNsdXN0ZXJzLmNsZWFyKCk7XG4gICAgXG4gICAgY29uc3QgZXBpc29kZXMgPSBBcnJheS5mcm9tKHRoaXMuZXBpc29kZXMudmFsdWVzKCkpO1xuICAgIGNvbnN0IGNsdXN0ZXJUaHJlc2hvbGQgPSAwLjQ7XG4gICAgXG4gICAgLy8gR3JvdXAgZXBpc29kZXMgYnkgc2ltaWxhcml0eVxuICAgIGNvbnN0IHByb2Nlc3NlZCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIFxuICAgIGVwaXNvZGVzLmZvckVhY2goZXBpc29kZSA9PiB7XG4gICAgICBpZiAocHJvY2Vzc2VkLmhhcyhlcGlzb2RlLmlkKSkgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBjbHVzdGVyOiBNZW1vcnlDbHVzdGVyID0ge1xuICAgICAgICBpZDogYGNsdXN0ZXJfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA2KX1gLFxuICAgICAgICB0aGVtZTogdGhpcy5nZW5lcmF0ZUNsdXN0ZXJUaGVtZShlcGlzb2RlKSxcbiAgICAgICAgZXBpc29kZXM6IFtlcGlzb2RlLmlkXSxcbiAgICAgICAgc3RyZW5ndGg6IGVwaXNvZGUuaW1wb3J0YW5jZSxcbiAgICAgICAgbGFzdFJlaW5mb3JjZWQ6IGVwaXNvZGUudGltZXN0YW1wLFxuICAgICAgICBhc3NvY2lhdGVkRW1vdGlvbnM6IFsuLi5lcGlzb2RlLmVtb3Rpb25hbC5lbW90aW9uc11cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEZpbmQgc2ltaWxhciBlcGlzb2Rlc1xuICAgICAgZXBpc29kZXMuZm9yRWFjaChvdGhlckVwaXNvZGUgPT4ge1xuICAgICAgICBpZiAocHJvY2Vzc2VkLmhhcyhvdGhlckVwaXNvZGUuaWQpIHx8IG90aGVyRXBpc29kZS5pZCA9PT0gZXBpc29kZS5pZCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlRXBpc29kZVNpbWlsYXJpdHkoZXBpc29kZSwgb3RoZXJFcGlzb2RlKTtcbiAgICAgICAgaWYgKHNpbWlsYXJpdHkgPiBjbHVzdGVyVGhyZXNob2xkKSB7XG4gICAgICAgICAgY2x1c3Rlci5lcGlzb2Rlcy5wdXNoKG90aGVyRXBpc29kZS5pZCk7XG4gICAgICAgICAgY2x1c3Rlci5zdHJlbmd0aCArPSBvdGhlckVwaXNvZGUuaW1wb3J0YW5jZTtcbiAgICAgICAgICBjbHVzdGVyLmxhc3RSZWluZm9yY2VkID0gTWF0aC5tYXgoY2x1c3Rlci5sYXN0UmVpbmZvcmNlZCwgb3RoZXJFcGlzb2RlLnRpbWVzdGFtcCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWVyZ2UgZW1vdGlvbnNcbiAgICAgICAgICBvdGhlckVwaXNvZGUuZW1vdGlvbmFsLmVtb3Rpb25zLmZvckVhY2goZW1vdGlvbiA9PiB7XG4gICAgICAgICAgICBpZiAoIWNsdXN0ZXIuYXNzb2NpYXRlZEVtb3Rpb25zLmluY2x1ZGVzKGVtb3Rpb24pKSB7XG4gICAgICAgICAgICAgIGNsdXN0ZXIuYXNzb2NpYXRlZEVtb3Rpb25zLnB1c2goZW1vdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgcHJvY2Vzc2VkLmFkZChvdGhlckVwaXNvZGUuaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcHJvY2Vzc2VkLmFkZChlcGlzb2RlLmlkKTtcbiAgICAgIHRoaXMuY2x1c3RlcnMuc2V0KGNsdXN0ZXIuaWQsIGNsdXN0ZXIpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn6egIFVwZGF0ZWQgbWVtb3J5IGNsdXN0ZXJzOiAke3RoaXMuY2x1c3RlcnMuc2l6ZX0gY2x1c3RlcnMgY3JlYXRlZGApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRoZW1lIGZvciBtZW1vcnkgY2x1c3RlclxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNsdXN0ZXJUaGVtZShlcGlzb2RlOiBFcGlzb2RlKTogc3RyaW5nIHtcbiAgICAvLyBVc2UgbW9zdCBjb21tb24gdGFncyBhbmQgY29udGVudCBzdW1tYXJ5XG4gICAgY29uc3QgY29tbW9uV29yZHMgPSBlcGlzb2RlLnRhZ3NcbiAgICAgIC5maWx0ZXIodGFnID0+ICF0YWcuaW5jbHVkZXMoJzonKSlcbiAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgLmpvaW4oJyAnKTtcbiAgICBcbiAgICByZXR1cm4gY29tbW9uV29yZHMgfHwgZXBpc29kZS5jb250ZW50LnN1bW1hcnkuc3BsaXQoJyAnKS5zbGljZSgwLCAzKS5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbWVtb3J5IGNvbnNvbGlkYXRpb24gdGltZXJcbiAgICovXG4gIHByaXZhdGUgc3RhcnRNZW1vcnlDb25zb2xpZGF0aW9uKCk6IHZvaWQge1xuICAgIC8vIFNraXAgdGltZXIgc2V0dXAgZHVyaW5nIHRlc3RzIHRvIHByZXZlbnQgSmVzdCB0aW1lb3V0IGlzc3Vlc1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb25maWcgPSBnbG9iYWxDb25maWcuZ2V0U2VjdGlvbignY29udmVyc2F0aW9uJyk7XG4gICAgY29uc3QgY29uc29saWRhdGlvbkludGVydmFsID0gY29uZmlnPy5jbGVhbnVwSW50ZXJ2YWwgfHwgMzAgKiA2MCAqIDEwMDA7IC8vIDMwIG1pbnV0ZXNcbiAgICBcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnNpZGVyQ29uc29saWRhdGlvbigpO1xuICAgIH0sIGNvbnNvbGlkYXRpb25JbnRlcnZhbCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnbG9iYWxDb25maWciLCJFcGlzb2RpY01lbW9yeUxheWVyIiwiY29uc3RydWN0b3IiLCJlcGlzb2RlcyIsIk1hcCIsImNsdXN0ZXJzIiwibWVtb3J5SW5kZXgiLCJ0ZW1wb3JhbEluZGV4IiwiZW1vdGlvbmFsSW5kZXgiLCJwZXJzb25hbGl0eVByb2ZpbGUiLCJpbml0aWFsaXplUGVyc29uYWxpdHlQcm9maWxlIiwic3RhcnRNZW1vcnlDb25zb2xpZGF0aW9uIiwidHJhaXRzIiwib3Blbm5lc3MiLCJjb25zY2llbnRpb3VzbmVzcyIsImV4dHJhdmVyc2lvbiIsImFncmVlYWJsZW5lc3MiLCJuZXVyb3RpY2lzbSIsInByZWZlcmVuY2VzIiwiY29tbXVuaWNhdGlvblN0eWxlIiwidG9waWNJbnRlcmVzdHMiLCJyZXNwb25zZUxlbmd0aCIsImVtb3Rpb25hbFN1cHBvcnQiLCJsZWFybmluZ1BhdHRlcm5zIiwicHJlZmVycmVkRXhhbXBsZXMiLCJjb21tb25NaXN0YWtlcyIsInN1Y2Nlc3NmdWxJbnRlcmFjdGlvbnMiLCJzdG9yZUVwaXNvZGUiLCJ0eXBlIiwiY29udGVudCIsImVtb3Rpb25hbCIsImltcG9ydGFuY2UiLCJlcGlzb2RlSWQiLCJnZW5lcmF0ZUVwaXNvZGVJZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJlcGlzb2RlIiwiaWQiLCJjb25uZWN0aW9ucyIsInRhZ3MiLCJnZW5lcmF0ZVRhZ3MiLCJsYXN0QWNjZXNzZWQiLCJhY2Nlc3NDb3VudCIsInNldCIsInVwZGF0ZUluZGljZXMiLCJjcmVhdGVDb25uZWN0aW9ucyIsInVwZGF0ZVBlcnNvbmFsaXR5UHJvZmlsZSIsImNvbnNpZGVyQ29uc29saWRhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJzdW1tYXJ5IiwicmV0cmlldmVFcGlzb2RlcyIsInF1ZXJ5IiwiY2FuZGlkYXRlSWRzIiwiU2V0Iiwia2V5d29yZHMiLCJrZXl3b3JkIiwia2V5d29yZElkcyIsImdldCIsInRvTG93ZXJDYXNlIiwic2l6ZSIsImZpbHRlciIsImhhcyIsImtleXMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJ0aW1lUmFuZ2UiLCJzdGFydCIsImVuZCIsImVtb3Rpb25zIiwic29tZSIsImVtb3Rpb24iLCJpbmNsdWRlcyIsInBhcnRpY2lwYW50cyIsInBhcnRpY2lwYW50IiwibWluSW1wb3J0YW5jZSIsInNvcnQiLCJhIiwiYiIsInNjb3JlQSIsImNhbGN1bGF0ZVJlbGV2YW5jZVNjb3JlIiwic2NvcmVCIiwiZm9yRWFjaCIsImxpbWl0Iiwic2xpY2UiLCJsZW5ndGgiLCJnZXRQZXJzb25hbGl0eUluc2lnaHRzIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwidXBkYXRlUGVyc29uYWxpdHlGcm9tSW50ZXJhY3Rpb24iLCJpbnRlcmFjdGlvblR5cGUiLCJzdWNjZXNzIiwiZW1vdGlvbmFsUmVzcG9uc2UiLCJjb250ZXh0IiwicHVzaCIsInNoaWZ0IiwidG9waWMiLCJnZXRNZW1vcnlDbHVzdGVycyIsInVwZGF0ZUNsdXN0ZXJzIiwidmFsdWVzIiwic3RyZW5ndGgiLCJnZXRNZW1vcnlTdGF0cyIsImVwaXNvZGVzQnlUeXBlIiwiZW1vdGlvbmFsRGlzdHJpYnV0aW9uIiwidG90YWxJbXBvcnRhbmNlIiwib2xkZXN0IiwibmV3ZXN0IiwiTWF0aCIsIm1pbiIsIm1heCIsImlzQXJyYXkiLCJ0b3RhbEVwaXNvZGVzIiwiYXZlcmFnZUltcG9ydGFuY2UiLCJtZW1vcnlTcGFuIiwicGVyc29uYWxpdHlUcmFpdHMiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsIndvcmRzIiwic3BsaXQiLCJ3b3JkIiwicCIsImUiLCJ0YWciLCJhZGQiLCJkYXRlS2V5IiwidG9JU09TdHJpbmciLCJuZXdFcGlzb2RlIiwiY29uZmlnIiwiZ2V0U2VjdGlvbiIsIm1heENvbm5lY3Rpb25zIiwiY29ubmVjdGlvblRocmVzaG9sZCIsImNhbmRpZGF0ZXMiLCJjYW5kaWRhdGUiLCJzaW1pbGFyaXR5IiwiY2FsY3VsYXRlRXBpc29kZVNpbWlsYXJpdHkiLCJ0b3BDb25uZWN0aW9ucyIsImNvbm5lY3RlZEVwaXNvZGUiLCJlcGlzb2RlMSIsImVwaXNvZGUyIiwiZmFjdG9ycyIsImNvbW1vblRhZ3MiLCJ0YWdTaW1pbGFyaXR5IiwiY29tbW9uUGFydGljaXBhbnRzIiwicGFydGljaXBhbnRTaW1pbGFyaXR5IiwiY29tbW9uRW1vdGlvbnMiLCJlbW90aW9uYWxTaW1pbGFyaXR5IiwidGltZURpZmYiLCJhYnMiLCJtYXhUaW1lRGlmZiIsInRlbXBvcmFsU2ltaWxhcml0eSIsInNjb3JlIiwiYWdlSW5EYXlzIiwicmVjZW5jeVNjb3JlIiwiYWNjZXNzU2NvcmUiLCJtYXRjaGluZ1RhZ3MiLCJxdWVyeVJlbGV2YW5jZSIsIm1heEVwaXNvZGVzIiwiY29uc29saWRhdGVNZW1vcmllcyIsInRhcmdldFNpemUiLCJmbG9vciIsImVwaXNvZGVzVG9LZWVwIiwiZXBpc29kZXNUb1JlbW92ZSIsInJlbW92ZUVwaXNvZGUiLCJkZWxldGUiLCJ0YWdTZXQiLCJjb25uZWN0ZWRJZCIsImNsZWFyIiwiY2x1c3RlclRocmVzaG9sZCIsInByb2Nlc3NlZCIsImNsdXN0ZXIiLCJ0aGVtZSIsImdlbmVyYXRlQ2x1c3RlclRoZW1lIiwibGFzdFJlaW5mb3JjZWQiLCJhc3NvY2lhdGVkRW1vdGlvbnMiLCJvdGhlckVwaXNvZGUiLCJjb21tb25Xb3JkcyIsImpvaW4iLCJwcm9jZXNzIiwiY29uc29saWRhdGlvbkludGVydmFsIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/memory/episodic-memory.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/semantic/knowledge-bootstrap.ts":
/*!*************************************************!*\
  !*** ./src/lib/semantic/knowledge-bootstrap.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnowledgeBootstrap: () => (/* binding */ KnowledgeBootstrap)\n/* harmony export */ });\n// =============================================================================\n// KNOWLEDGE BOOTSTRAP MODULE\n// =============================================================================\nclass KnowledgeBootstrap {\n    constructor(embeddingPipeline){\n        this.embeddingPipeline = embeddingPipeline;\n    }\n    async bootstrapFromTokenizer() {\n        console.log(' Bootstrapping chatbot knowledge from tokenizer...');\n        try {\n            // Step 1: Extract vocabulary from tokenizer\n            const vocabulary = await this.extractTokenizerVocabulary();\n            console.log(` Extracted ${vocabulary.length} vocabulary words`);\n            // Step 2: Generate embeddings for vocabulary\n            const vocabularyEmbeddings = await this.generateVocabularyEmbeddings(vocabulary);\n            console.log(` Generated embeddings for ${vocabularyEmbeddings.size} words`);\n            // Step 3: Build semantic clusters\n            const semanticClusters = this.buildSemanticClusters(vocabularyEmbeddings);\n            console.log(` Built semantic clusters for ${semanticClusters.size} concepts`);\n            // Step 4: Create knowledge base\n            const knowledgeBase = this.createKnowledgeBase(vocabularyEmbeddings, semanticClusters);\n            console.log(' Knowledge base bootstrap complete');\n            return knowledgeBase;\n        } catch (error) {\n            console.error(' Knowledge bootstrap failed:', error);\n            throw new Error(`Knowledge bootstrap failed: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n    async extractTokenizerVocabulary() {\n        console.log(' Attempting to extract tokenizer vocabulary...');\n        // Try multiple ways to access tokenizer vocabulary\n        const tokenizer = this.embeddingPipeline.tokenizer;\n        console.log('Tokenizer available:', !!tokenizer);\n        if (!tokenizer) {\n            throw new Error('Tokenizer not available in embedding pipeline');\n        }\n        console.log('Tokenizer properties:', Object.keys(tokenizer));\n        // For BERT-style tokenizers, we need to access the vocabulary differently\n        let vocab = null;\n        // Try accessing the actual vocabulary words (not token IDs)\n        if (tokenizer.model && tokenizer.model.vocab) {\n            const vocabObj = tokenizer.model.vocab;\n            console.log('Vocab object type:', typeof vocabObj);\n            console.log('Vocab object keys sample:', Object.keys(vocabObj).slice(0, 20));\n            // Check if this is a token ID -> word mapping or word -> token ID mapping\n            const firstKey = Object.keys(vocabObj)[0];\n            const firstValue = vocabObj[firstKey];\n            console.log('First vocab entry:', firstKey, '->', firstValue);\n            if (typeof firstValue === 'number') {\n                // This is word -> token ID mapping, use the keys (words)\n                vocab = Object.keys(vocabObj);\n                console.log('Found word->ID mapping, using keys as vocabulary');\n            } else if (typeof firstKey === 'string' && /^\\d+$/.test(firstKey)) {\n                // This is token ID -> word mapping, use the values (words)\n                vocab = Object.values(vocabObj);\n                console.log('Found ID->word mapping, using values as vocabulary');\n            } else {\n                vocab = Object.keys(vocabObj);\n                console.log('Using keys as vocabulary (default)');\n            }\n            console.log('Extracted vocab length:', vocab.length);\n            console.log('Sample vocab words:', vocab.slice(0, 20));\n        } else if (tokenizer.vocab) {\n            vocab = Object.keys(tokenizer.vocab);\n            console.log('Found vocab via tokenizer.vocab:', vocab.length);\n        } else if (tokenizer.getVocab) {\n            vocab = Object.keys(tokenizer.getVocab());\n            console.log('Found vocab via tokenizer.getVocab():', vocab.length);\n        } else {\n            throw new Error('Unable to access tokenizer vocabulary - no known vocabulary access method found');\n        }\n        if (!vocab || vocab.length === 0) {\n            throw new Error('Tokenizer vocabulary is empty or null');\n        }\n        const filtered = this.filterMeaningfulWords(vocab);\n        console.log('Filtered vocabulary:', filtered.length);\n        if (filtered.length === 0) {\n            throw new Error('No meaningful words found in tokenizer vocabulary after filtering');\n        }\n        return filtered;\n    }\n    filterMeaningfulWords(vocab) {\n        console.log(' Filtering vocabulary from', vocab.length, 'words');\n        console.log('Sample vocab words:', vocab.slice(0, 20));\n        // Check if this is a numeric tokenizer (like BERT's WordPiece)\n        const isNumericTokenizer = vocab.slice(0, 100).every((token)=>/^\\d+$/.test(token));\n        if (isNumericTokenizer) {\n            throw new Error('Detected numeric tokenizer with token IDs instead of vocabulary words - cannot extract meaningful vocabulary');\n        }\n        const filtered = vocab.filter((word)=>{\n            // Filter out special tokens, fragments, and non-words\n            if (word.startsWith('[') || word.startsWith('<') || word.startsWith('##')) return false;\n            if (word.length < 2 || word.length > 15) return false;\n            if (/^\\d+$/.test(word)) return false; // Pure numbers\n            if (!/^[a-zA-Z]+$/.test(word)) return false; // Only letters\n            return true;\n        }).slice(0, 800); // Limit to manageable size\n        console.log('Filtered to', filtered.length, 'meaningful words');\n        console.log('Sample filtered words:', filtered.slice(0, 20));\n        return filtered;\n    }\n    async generateVocabularyEmbeddings(vocabulary) {\n        const vocabularyEmbeddings = new Map();\n        // Process in batches to avoid overwhelming the system\n        const batchSize = 50;\n        for(let i = 0; i < vocabulary.length; i += batchSize){\n            const batch = vocabulary.slice(i, i + batchSize);\n            for (const word of batch){\n                try {\n                    const result = await this.embeddingPipeline(word);\n                    const embedding = Array.from(result.data);\n                    vocabularyEmbeddings.set(word, embedding);\n                } catch (error) {\n                    console.warn(` Failed to generate embedding for word: ${word}`);\n                }\n            }\n            // Small delay between batches\n            if (i + batchSize < vocabulary.length) {\n                await new Promise((resolve)=>setTimeout(resolve, 10));\n            }\n        }\n        return vocabularyEmbeddings;\n    }\n    buildSemanticClusters(vocabularyEmbeddings) {\n        const semanticClusters = new Map();\n        for (const [word, embedding] of vocabularyEmbeddings){\n            const similarWords = this.findSimilarWords(word, embedding, vocabularyEmbeddings);\n            semanticClusters.set(word, similarWords);\n        }\n        return semanticClusters;\n    }\n    findSimilarWords(targetWord, targetEmbedding, allEmbeddings) {\n        const similarities = [];\n        for (const [word, embedding] of allEmbeddings){\n            if (word !== targetWord) {\n                const similarity = this.calculateCosineSimilarity(targetEmbedding, embedding);\n                similarities.push({\n                    word,\n                    similarity\n                });\n            }\n        }\n        // Return top 5 most similar words\n        return similarities.sort((a, b)=>b.similarity - a.similarity).slice(0, 5).map((item)=>item.word);\n    }\n    calculateCosineSimilarity(a, b) {\n        const dotProduct = a.reduce((sum, val, i)=>sum + val * b[i], 0);\n        const magnitudeA = Math.sqrt(a.reduce((sum, val)=>sum + val * val, 0));\n        const magnitudeB = Math.sqrt(b.reduce((sum, val)=>sum + val * val, 0));\n        return magnitudeA && magnitudeB ? dotProduct / (magnitudeA * magnitudeB) : 0;\n    }\n    createKnowledgeBase(vocabularyEmbeddings, semanticClusters) {\n        const vocabulary = new Map();\n        const vocabularyPrimes = new Map();\n        for (const [word, embedding] of vocabularyEmbeddings){\n            const primeFactors = this.embeddingsToPrimes(embedding);\n            const similarWords = semanticClusters.get(word) || [];\n            vocabulary.set(word, {\n                word,\n                embedding,\n                primeFactors,\n                similarWords\n            });\n            // Store prime factorizations for resonance engine\n            vocabularyPrimes.set(word, primeFactors);\n        }\n        return {\n            vocabulary,\n            semanticClusters,\n            conceptEmbeddings: vocabularyEmbeddings,\n            vocabularyPrimes\n        };\n    }\n    embeddingsToPrimes(embeddings, threshold = 0.02) {\n        // Simple prime factorization (reusing logic from PrimeMath)\n        const primes = this.generatePrimes(embeddings.length);\n        const primeFactors = {};\n        embeddings.forEach((value, index)=>{\n            if (Math.abs(value) > threshold) {\n                const prime = primes[index % primes.length];\n                const weight = Math.floor(Math.abs(value) * 1000) + 1;\n                primeFactors[prime] = (primeFactors[prime] || 0) + weight;\n            }\n        });\n        return primeFactors;\n    }\n    generatePrimes(n) {\n        const primes = [\n            2\n        ];\n        let num = 3;\n        while(primes.length < n){\n            let isPrime = true;\n            for(let i = 0; i < primes.length && primes[i] * primes[i] <= num; i++){\n                if (num % primes[i] === 0) {\n                    isPrime = false;\n                    break;\n                }\n            }\n            if (isPrime) primes.push(num);\n            num += 2;\n        }\n        return primes;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL3NlbWFudGljL2tub3dsZWRnZS1ib290c3RyYXAudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGdGQUFnRjtBQUNoRiw2QkFBNkI7QUFDN0IsZ0ZBQWdGO0FBZ0J6RSxNQUFNQTtJQUdYQyxZQUFZQyxpQkFBc0IsQ0FBRTtRQUNsQyxJQUFJLENBQUNBLGlCQUFpQixHQUFHQTtJQUMzQjtJQUVBLE1BQU1DLHlCQUFpRDtRQUNyREMsUUFBUUMsR0FBRyxDQUFDO1FBRVosSUFBSTtZQUNGLDRDQUE0QztZQUM1QyxNQUFNQyxhQUFhLE1BQU0sSUFBSSxDQUFDQywwQkFBMEI7WUFDeERILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRUMsV0FBV0UsTUFBTSxDQUFDLGlCQUFpQixDQUFDO1lBRWhFLDZDQUE2QztZQUM3QyxNQUFNQyx1QkFBdUIsTUFBTSxJQUFJLENBQUNDLDRCQUE0QixDQUFDSjtZQUNyRUYsUUFBUUMsR0FBRyxDQUFDLENBQUMsNEJBQTRCLEVBQUVJLHFCQUFxQkUsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUU1RSxrQ0FBa0M7WUFDbEMsTUFBTUMsbUJBQW1CLElBQUksQ0FBQ0MscUJBQXFCLENBQUNKO1lBQ3BETCxRQUFRQyxHQUFHLENBQUMsQ0FBQywrQkFBK0IsRUFBRU8saUJBQWlCRCxJQUFJLENBQUMsU0FBUyxDQUFDO1lBRTlFLGdDQUFnQztZQUNoQyxNQUFNRyxnQkFBZ0IsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ04sc0JBQXNCRztZQUNyRVIsUUFBUUMsR0FBRyxDQUFDO1lBRVosT0FBT1M7UUFFVCxFQUFFLE9BQU9FLE9BQU87WUFDZFosUUFBUVksS0FBSyxDQUFDLGlDQUFpQ0E7WUFDL0MsTUFBTSxJQUFJQyxNQUFNLENBQUMsNEJBQTRCLEVBQUVELGlCQUFpQkMsUUFBUUQsTUFBTUUsT0FBTyxHQUFHQyxPQUFPSCxRQUFRO1FBQ3pHO0lBQ0Y7SUFFQSxNQUFjVCw2QkFBZ0Q7UUFDNURILFFBQVFDLEdBQUcs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QixLQUFLZSxHQUFHLENBQUNGLFNBQVMsUUFBUTtnQkFDcERULFlBQVksQ0FBQ1ksTUFBTSxHQUFHLENBQUNaLFlBQVksQ0FBQ1ksTUFBTSxJQUFJLEtBQUtDO1lBQ3JEO1FBQ0Y7UUFFQSxPQUFPYjtJQUNUO0lBRVFPLGVBQWVRLENBQVMsRUFBWTtRQUMxQyxNQUFNVCxTQUFTO1lBQUM7U0FBRTtRQUNsQixJQUFJVSxNQUFNO1FBQ1YsTUFBT1YsT0FBTzNFLE1BQU0sR0FBR29GLEVBQUc7WUFDeEIsSUFBSUUsVUFBVTtZQUNkLElBQUssSUFBSXBELElBQUksR0FBR0EsSUFBSXlDLE9BQU8zRSxNQUFNLElBQUkyRSxNQUFNLENBQUN6QyxFQUFFLEdBQUd5QyxNQUFNLENBQUN6QyxFQUFFLElBQUltRCxLQUFLbkQsSUFBSztnQkFDdEUsSUFBSW1ELE1BQU1WLE1BQU0sQ0FBQ3pDLEVBQUUsS0FBSyxHQUFHO29CQUN6Qm9ELFVBQVU7b0JBQ1Y7Z0JBQ0Y7WUFDRjtZQUNBLElBQUlBLFNBQVNYLE9BQU9yQixJQUFJLENBQUMrQjtZQUN6QkEsT0FBTztRQUNUO1FBQ0EsT0FBT1Y7SUFDVDtBQUNGIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9QcmltZUxNLURlbW8vc3JjL2xpYi9zZW1hbnRpYy9rbm93bGVkZ2UtYm9vdHN0cmFwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBLTk9XTEVER0UgQk9PVFNUUkFQIE1PRFVMRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBWb2NhYnVsYXJ5RW50cnkge1xuICB3b3JkOiBzdHJpbmc7XG4gIGVtYmVkZGluZzogbnVtYmVyW107XG4gIHByaW1lRmFjdG9yczogUmVjb3JkPG51bWJlciwgbnVtYmVyPjtcbiAgc2ltaWxhcldvcmRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBLbm93bGVkZ2VCYXNlIHtcbiAgdm9jYWJ1bGFyeTogTWFwPHN0cmluZywgVm9jYWJ1bGFyeUVudHJ5PjtcbiAgc2VtYW50aWNDbHVzdGVyczogTWFwPHN0cmluZywgc3RyaW5nW10+O1xuICBjb25jZXB0RW1iZWRkaW5nczogTWFwPHN0cmluZywgbnVtYmVyW10+O1xuICB2b2NhYnVsYXJ5UHJpbWVzOiBNYXA8c3RyaW5nLCBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+Pjtcbn1cblxuZXhwb3J0IGNsYXNzIEtub3dsZWRnZUJvb3RzdHJhcCB7XG4gIHByaXZhdGUgZW1iZWRkaW5nUGlwZWxpbmU6IGFueTtcblxuICBjb25zdHJ1Y3RvcihlbWJlZGRpbmdQaXBlbGluZTogYW55KSB7XG4gICAgdGhpcy5lbWJlZGRpbmdQaXBlbGluZSA9IGVtYmVkZGluZ1BpcGVsaW5lO1xuICB9XG5cbiAgYXN5bmMgYm9vdHN0cmFwRnJvbVRva2VuaXplcigpOiBQcm9taXNlPEtub3dsZWRnZUJhc2U+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UpyBCb290c3RyYXBwaW5nIGNoYXRib3Qga25vd2xlZGdlIGZyb20gdG9rZW5pemVyLi4uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFN0ZXAgMTogRXh0cmFjdCB2b2NhYnVsYXJ5IGZyb20gdG9rZW5pemVyXG4gICAgICBjb25zdCB2b2NhYnVsYXJ5ID0gYXdhaXQgdGhpcy5leHRyYWN0VG9rZW5pemVyVm9jYWJ1bGFyeSgpO1xuICAgICAgY29uc29sZS5sb2coYPCfk5ogRXh0cmFjdGVkICR7dm9jYWJ1bGFyeS5sZW5ndGh9IHZvY2FidWxhcnkgd29yZHNgKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCAyOiBHZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciB2b2NhYnVsYXJ5XG4gICAgICBjb25zdCB2b2NhYnVsYXJ5RW1iZWRkaW5ncyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVWb2NhYnVsYXJ5RW1iZWRkaW5ncyh2b2NhYnVsYXJ5KTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn6egIEdlbmVyYXRlZCBlbWJlZGRpbmdzIGZvciAke3ZvY2FidWxhcnlFbWJlZGRpbmdzLnNpemV9IHdvcmRzYCk7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogQnVpbGQgc2VtYW50aWMgY2x1c3RlcnNcbiAgICAgIGNvbnN0IHNlbWFudGljQ2x1c3RlcnMgPSB0aGlzLmJ1aWxkU2VtYW50aWNDbHVzdGVycyh2b2NhYnVsYXJ5RW1iZWRkaW5ncyk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UlyBCdWlsdCBzZW1hbnRpYyBjbHVzdGVycyBmb3IgJHtzZW1hbnRpY0NsdXN0ZXJzLnNpemV9IGNvbmNlcHRzYCk7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgNDogQ3JlYXRlIGtub3dsZWRnZSBiYXNlXG4gICAgICBjb25zdCBrbm93bGVkZ2VCYXNlID0gdGhpcy5jcmVhdGVLbm93bGVkZ2VCYXNlKHZvY2FidWxhcnlFbWJlZGRpbmdzLCBzZW1hbnRpY0NsdXN0ZXJzKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgS25vd2xlZGdlIGJhc2UgYm9vdHN0cmFwIGNvbXBsZXRlJyk7XG4gICAgICBcbiAgICAgIHJldHVybiBrbm93bGVkZ2VCYXNlO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBLbm93bGVkZ2UgYm9vdHN0cmFwIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEtub3dsZWRnZSBib290c3RyYXAgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RUb2tlbml6ZXJWb2NhYnVsYXJ5KCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBBdHRlbXB0aW5nIHRvIGV4dHJhY3QgdG9rZW5pemVyIHZvY2FidWxhcnkuLi4nKTtcbiAgICBcbiAgICAvLyBUcnkgbXVsdGlwbGUgd2F5cyB0byBhY2Nlc3MgdG9rZW5pemVyIHZvY2FidWxhcnlcbiAgICBjb25zdCB0b2tlbml6ZXIgPSB0aGlzLmVtYmVkZGluZ1BpcGVsaW5lLnRva2VuaXplcjtcbiAgICBjb25zb2xlLmxvZygnVG9rZW5pemVyIGF2YWlsYWJsZTonLCAhIXRva2VuaXplcik7XG4gICAgXG4gICAgaWYgKCF0b2tlbml6ZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVG9rZW5pemVyIG5vdCBhdmFpbGFibGUgaW4gZW1iZWRkaW5nIHBpcGVsaW5lJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUb2tlbml6ZXIgcHJvcGVydGllczonLCBPYmplY3Qua2V5cyh0b2tlbml6ZXIpKTtcbiAgICBcbiAgICAvLyBGb3IgQkVSVC1zdHlsZSB0b2tlbml6ZXJzLCB3ZSBuZWVkIHRvIGFjY2VzcyB0aGUgdm9jYWJ1bGFyeSBkaWZmZXJlbnRseVxuICAgIGxldCB2b2NhYjogc3RyaW5nW10gfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICAvLyBUcnkgYWNjZXNzaW5nIHRoZSBhY3R1YWwgdm9jYWJ1bGFyeSB3b3JkcyAobm90IHRva2VuIElEcylcbiAgICBpZiAodG9rZW5pemVyLm1vZGVsICYmIHRva2VuaXplci5tb2RlbC52b2NhYikge1xuICAgICAgY29uc3Qgdm9jYWJPYmogPSB0b2tlbml6ZXIubW9kZWwudm9jYWI7XG4gICAgICBjb25zb2xlLmxvZygnVm9jYWIgb2JqZWN0IHR5cGU6JywgdHlwZW9mIHZvY2FiT2JqKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWb2NhYiBvYmplY3Qga2V5cyBzYW1wbGU6JywgT2JqZWN0LmtleXModm9jYWJPYmopLnNsaWNlKDAsIDIwKSk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSB0b2tlbiBJRCAtPiB3b3JkIG1hcHBpbmcgb3Igd29yZCAtPiB0b2tlbiBJRCBtYXBwaW5nXG4gICAgICBjb25zdCBmaXJzdEtleSA9IE9iamVjdC5rZXlzKHZvY2FiT2JqKVswXTtcbiAgICAgIGNvbnN0IGZpcnN0VmFsdWUgPSB2b2NhYk9ialtmaXJzdEtleV07XG4gICAgICBjb25zb2xlLmxvZygnRmlyc3Qgdm9jYWIgZW50cnk6JywgZmlyc3RLZXksICctPicsIGZpcnN0VmFsdWUpO1xuICAgICAgXG4gICAgICBpZiAodHlwZW9mIGZpcnN0VmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgd29yZCAtPiB0b2tlbiBJRCBtYXBwaW5nLCB1c2UgdGhlIGtleXMgKHdvcmRzKVxuICAgICAgICB2b2NhYiA9IE9iamVjdC5rZXlzKHZvY2FiT2JqKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHdvcmQtPklEIG1hcHBpbmcsIHVzaW5nIGtleXMgYXMgdm9jYWJ1bGFyeScpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RLZXkgPT09ICdzdHJpbmcnICYmIC9eXFxkKyQvLnRlc3QoZmlyc3RLZXkpKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgdG9rZW4gSUQgLT4gd29yZCBtYXBwaW5nLCB1c2UgdGhlIHZhbHVlcyAod29yZHMpXG4gICAgICAgIHZvY2FiID0gT2JqZWN0LnZhbHVlcyh2b2NhYk9iaikgYXMgc3RyaW5nW107XG4gICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBJRC0+d29yZCBtYXBwaW5nLCB1c2luZyB2YWx1ZXMgYXMgdm9jYWJ1bGFyeScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm9jYWIgPSBPYmplY3Qua2V5cyh2b2NhYk9iaik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBrZXlzIGFzIHZvY2FidWxhcnkgKGRlZmF1bHQpJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdFeHRyYWN0ZWQgdm9jYWIgbGVuZ3RoOicsIHZvY2FiLmxlbmd0aCk7XG4gICAgICBjb25zb2xlLmxvZygnU2FtcGxlIHZvY2FiIHdvcmRzOicsIHZvY2FiLnNsaWNlKDAsIDIwKSk7XG4gICAgfSBlbHNlIGlmICh0b2tlbml6ZXIudm9jYWIpIHtcbiAgICAgIHZvY2FiID0gT2JqZWN0LmtleXModG9rZW5pemVyLnZvY2FiKTtcbiAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCB2b2NhYiB2aWEgdG9rZW5pemVyLnZvY2FiOicsIHZvY2FiLmxlbmd0aCk7XG4gICAgfSBlbHNlIGlmICh0b2tlbml6ZXIuZ2V0Vm9jYWIpIHtcbiAgICAgIHZvY2FiID0gT2JqZWN0LmtleXModG9rZW5pemVyLmdldFZvY2FiKCkpO1xuICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIHZvY2FiIHZpYSB0b2tlbml6ZXIuZ2V0Vm9jYWIoKTonLCB2b2NhYi5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBhY2Nlc3MgdG9rZW5pemVyIHZvY2FidWxhcnkgLSBubyBrbm93biB2b2NhYnVsYXJ5IGFjY2VzcyBtZXRob2QgZm91bmQnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF2b2NhYiB8fCB2b2NhYi5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVG9rZW5pemVyIHZvY2FidWxhcnkgaXMgZW1wdHkgb3IgbnVsbCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHRoaXMuZmlsdGVyTWVhbmluZ2Z1bFdvcmRzKHZvY2FiKTtcbiAgICBjb25zb2xlLmxvZygnRmlsdGVyZWQgdm9jYWJ1bGFyeTonLCBmaWx0ZXJlZC5sZW5ndGgpO1xuICAgIFxuICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWVhbmluZ2Z1bCB3b3JkcyBmb3VuZCBpbiB0b2tlbml6ZXIgdm9jYWJ1bGFyeSBhZnRlciBmaWx0ZXJpbmcnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBmaWx0ZXJNZWFuaW5nZnVsV29yZHModm9jYWI6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIEZpbHRlcmluZyB2b2NhYnVsYXJ5IGZyb20nLCB2b2NhYi5sZW5ndGgsICd3b3JkcycpO1xuICAgIGNvbnNvbGUubG9nKCdTYW1wbGUgdm9jYWIgd29yZHM6Jywgdm9jYWIuc2xpY2UoMCwgMjApKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgbnVtZXJpYyB0b2tlbml6ZXIgKGxpa2UgQkVSVCdzIFdvcmRQaWVjZSlcbiAgICBjb25zdCBpc051bWVyaWNUb2tlbml6ZXIgPSB2b2NhYi5zbGljZSgwLCAxMDApLmV2ZXJ5KHRva2VuID0+IC9eXFxkKyQvLnRlc3QodG9rZW4pKTtcbiAgICBcbiAgICBpZiAoaXNOdW1lcmljVG9rZW5pemVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RldGVjdGVkIG51bWVyaWMgdG9rZW5pemVyIHdpdGggdG9rZW4gSURzIGluc3RlYWQgb2Ygdm9jYWJ1bGFyeSB3b3JkcyAtIGNhbm5vdCBleHRyYWN0IG1lYW5pbmdmdWwgdm9jYWJ1bGFyeScpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHZvY2FiXG4gICAgICAuZmlsdGVyKHdvcmQgPT4ge1xuICAgICAgICAvLyBGaWx0ZXIgb3V0IHNwZWNpYWwgdG9rZW5zLCBmcmFnbWVudHMsIGFuZCBub24td29yZHNcbiAgICAgICAgaWYgKHdvcmQuc3RhcnRzV2l0aCgnWycpIHx8IHdvcmQuc3RhcnRzV2l0aCgnPCcpIHx8IHdvcmQuc3RhcnRzV2l0aCgnIyMnKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAod29yZC5sZW5ndGggPCAyIHx8IHdvcmQubGVuZ3RoID4gMTUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKC9eXFxkKyQvLnRlc3Qod29yZCkpIHJldHVybiBmYWxzZTsgLy8gUHVyZSBudW1iZXJzXG4gICAgICAgIGlmICghL15bYS16QS1aXSskLy50ZXN0KHdvcmQpKSByZXR1cm4gZmFsc2U7IC8vIE9ubHkgbGV0dGVyc1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuc2xpY2UoMCwgODAwKTsgLy8gTGltaXQgdG8gbWFuYWdlYWJsZSBzaXplXG4gICAgXG4gICAgY29uc29sZS5sb2coJ0ZpbHRlcmVkIHRvJywgZmlsdGVyZWQubGVuZ3RoLCAnbWVhbmluZ2Z1bCB3b3JkcycpO1xuICAgIGNvbnNvbGUubG9nKCdTYW1wbGUgZmlsdGVyZWQgd29yZHM6JywgZmlsdGVyZWQuc2xpY2UoMCwgMjApKTtcbiAgICBcbiAgICByZXR1cm4gZmlsdGVyZWQ7XG4gIH1cblxuXG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVZvY2FidWxhcnlFbWJlZGRpbmdzKHZvY2FidWxhcnk6IHN0cmluZ1tdKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBudW1iZXJbXT4+IHtcbiAgICBjb25zdCB2b2NhYnVsYXJ5RW1iZWRkaW5ncyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXJbXT4oKTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIGluIGJhdGNoZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBzeXN0ZW1cbiAgICBjb25zdCBiYXRjaFNpemUgPSA1MDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZvY2FidWxhcnkubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgY29uc3QgYmF0Y2ggPSB2b2NhYnVsYXJ5LnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgYmF0Y2gpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmVtYmVkZGluZ1BpcGVsaW5lKHdvcmQpO1xuICAgICAgICAgIGNvbnN0IGVtYmVkZGluZyA9IEFycmF5LmZyb20ocmVzdWx0LmRhdGEpIGFzIG51bWJlcltdO1xuICAgICAgICAgIHZvY2FidWxhcnlFbWJlZGRpbmdzLnNldCh3b3JkLCBlbWJlZGRpbmcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIEZhaWxlZCB0byBnZW5lcmF0ZSBlbWJlZGRpbmcgZm9yIHdvcmQ6ICR7d29yZH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTbWFsbCBkZWxheSBiZXR3ZWVuIGJhdGNoZXNcbiAgICAgIGlmIChpICsgYmF0Y2hTaXplIDwgdm9jYWJ1bGFyeS5sZW5ndGgpIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB2b2NhYnVsYXJ5RW1iZWRkaW5ncztcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTZW1hbnRpY0NsdXN0ZXJzKHZvY2FidWxhcnlFbWJlZGRpbmdzOiBNYXA8c3RyaW5nLCBudW1iZXJbXT4pOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHNlbWFudGljQ2x1c3RlcnMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBbd29yZCwgZW1iZWRkaW5nXSBvZiB2b2NhYnVsYXJ5RW1iZWRkaW5ncykge1xuICAgICAgY29uc3Qgc2ltaWxhcldvcmRzID0gdGhpcy5maW5kU2ltaWxhcldvcmRzKHdvcmQsIGVtYmVkZGluZywgdm9jYWJ1bGFyeUVtYmVkZGluZ3MpO1xuICAgICAgc2VtYW50aWNDbHVzdGVycy5zZXQod29yZCwgc2ltaWxhcldvcmRzKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNlbWFudGljQ2x1c3RlcnM7XG4gIH1cblxuICBwcml2YXRlIGZpbmRTaW1pbGFyV29yZHMoXG4gICAgdGFyZ2V0V29yZDogc3RyaW5nLCBcbiAgICB0YXJnZXRFbWJlZGRpbmc6IG51bWJlcltdLCBcbiAgICBhbGxFbWJlZGRpbmdzOiBNYXA8c3RyaW5nLCBudW1iZXJbXT5cbiAgKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNpbWlsYXJpdGllczogQXJyYXk8e3dvcmQ6IHN0cmluZywgc2ltaWxhcml0eTogbnVtYmVyfT4gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFt3b3JkLCBlbWJlZGRpbmddIG9mIGFsbEVtYmVkZGluZ3MpIHtcbiAgICAgIGlmICh3b3JkICE9PSB0YXJnZXRXb3JkKSB7XG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZUNvc2luZVNpbWlsYXJpdHkodGFyZ2V0RW1iZWRkaW5nLCBlbWJlZGRpbmcpO1xuICAgICAgICBzaW1pbGFyaXRpZXMucHVzaCh7d29yZCwgc2ltaWxhcml0eX0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdG9wIDUgbW9zdCBzaW1pbGFyIHdvcmRzXG4gICAgcmV0dXJuIHNpbWlsYXJpdGllc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuc2ltaWxhcml0eSAtIGEuc2ltaWxhcml0eSlcbiAgICAgIC5zbGljZSgwLCA1KVxuICAgICAgLm1hcChpdGVtID0+IGl0ZW0ud29yZCk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUNvc2luZVNpbWlsYXJpdHkoYTogbnVtYmVyW10sIGI6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICBjb25zdCBkb3RQcm9kdWN0ID0gYS5yZWR1Y2UoKHN1bSwgdmFsLCBpKSA9PiBzdW0gKyB2YWwgKiBiW2ldLCAwKTtcbiAgICBjb25zdCBtYWduaXR1ZGVBID0gTWF0aC5zcXJ0KGEucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsICogdmFsLCAwKSk7XG4gICAgY29uc3QgbWFnbml0dWRlQiA9IE1hdGguc3FydChiLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCAqIHZhbCwgMCkpO1xuICAgIFxuICAgIHJldHVybiBtYWduaXR1ZGVBICYmIG1hZ25pdHVkZUIgPyBkb3RQcm9kdWN0IC8gKG1hZ25pdHVkZUEgKiBtYWduaXR1ZGVCKSA6IDA7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUtub3dsZWRnZUJhc2UoXG4gICAgdm9jYWJ1bGFyeUVtYmVkZGluZ3M6IE1hcDxzdHJpbmcsIG51bWJlcltdPiwgXG4gICAgc2VtYW50aWNDbHVzdGVyczogTWFwPHN0cmluZywgc3RyaW5nW10+XG4gICk6IEtub3dsZWRnZUJhc2Uge1xuICAgIGNvbnN0IHZvY2FidWxhcnkgPSBuZXcgTWFwPHN0cmluZywgVm9jYWJ1bGFyeUVudHJ5PigpO1xuICAgIGNvbnN0IHZvY2FidWxhcnlQcmltZXMgPSBuZXcgTWFwPHN0cmluZywgUmVjb3JkPG51bWJlciwgbnVtYmVyPj4oKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFt3b3JkLCBlbWJlZGRpbmddIG9mIHZvY2FidWxhcnlFbWJlZGRpbmdzKSB7XG4gICAgICBjb25zdCBwcmltZUZhY3RvcnMgPSB0aGlzLmVtYmVkZGluZ3NUb1ByaW1lcyhlbWJlZGRpbmcpO1xuICAgICAgY29uc3Qgc2ltaWxhcldvcmRzID0gc2VtYW50aWNDbHVzdGVycy5nZXQod29yZCkgfHwgW107XG4gICAgICBcbiAgICAgIHZvY2FidWxhcnkuc2V0KHdvcmQsIHtcbiAgICAgICAgd29yZCxcbiAgICAgICAgZW1iZWRkaW5nLFxuICAgICAgICBwcmltZUZhY3RvcnMsXG4gICAgICAgIHNpbWlsYXJXb3Jkc1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIHByaW1lIGZhY3Rvcml6YXRpb25zIGZvciByZXNvbmFuY2UgZW5naW5lXG4gICAgICB2b2NhYnVsYXJ5UHJpbWVzLnNldCh3b3JkLCBwcmltZUZhY3RvcnMpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdm9jYWJ1bGFyeSxcbiAgICAgIHNlbWFudGljQ2x1c3RlcnMsXG4gICAgICBjb25jZXB0RW1iZWRkaW5nczogdm9jYWJ1bGFyeUVtYmVkZGluZ3MsXG4gICAgICB2b2NhYnVsYXJ5UHJpbWVzXG4gICAgfTtcbiAgfVxuXG5cblxuICBwcml2YXRlIGVtYmVkZGluZ3NUb1ByaW1lcyhlbWJlZGRpbmdzOiBudW1iZXJbXSwgdGhyZXNob2xkOiBudW1iZXIgPSAwLjAyKTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiB7XG4gICAgLy8gU2ltcGxlIHByaW1lIGZhY3Rvcml6YXRpb24gKHJldXNpbmcgbG9naWMgZnJvbSBQcmltZU1hdGgpXG4gICAgY29uc3QgcHJpbWVzID0gdGhpcy5nZW5lcmF0ZVByaW1lcyhlbWJlZGRpbmdzLmxlbmd0aCk7XG4gICAgY29uc3QgcHJpbWVGYWN0b3JzOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgZW1iZWRkaW5ncy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChNYXRoLmFicyh2YWx1ZSkgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgY29uc3QgcHJpbWUgPSBwcmltZXNbaW5kZXggJSBwcmltZXMubGVuZ3RoXTtcbiAgICAgICAgY29uc3Qgd2VpZ2h0ID0gTWF0aC5mbG9vcihNYXRoLmFicyh2YWx1ZSkgKiAxMDAwKSArIDE7XG4gICAgICAgIHByaW1lRmFjdG9yc1twcmltZV0gPSAocHJpbWVGYWN0b3JzW3ByaW1lXSB8fCAwKSArIHdlaWdodDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcHJpbWVGYWN0b3JzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVByaW1lcyhuOiBudW1iZXIpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgcHJpbWVzID0gWzJdO1xuICAgIGxldCBudW0gPSAzO1xuICAgIHdoaWxlIChwcmltZXMubGVuZ3RoIDwgbikge1xuICAgICAgbGV0IGlzUHJpbWUgPSB0cnVlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmltZXMubGVuZ3RoICYmIHByaW1lc1tpXSAqIHByaW1lc1tpXSA8PSBudW07IGkrKykge1xuICAgICAgICBpZiAobnVtICUgcHJpbWVzW2ldID09PSAwKSB7XG4gICAgICAgICAgaXNQcmltZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXNQcmltZSkgcHJpbWVzLnB1c2gobnVtKTtcbiAgICAgIG51bSArPSAyO1xuICAgIH1cbiAgICByZXR1cm4gcHJpbWVzO1xuICB9XG59XG4iXSwibmFtZXMiOlsiS25vd2xlZGdlQm9vdHN0cmFwIiwiY29uc3RydWN0b3IiLCJlbWJlZGRpbmdQaXBlbGluZSIsImJvb3RzdHJhcEZyb21Ub2tlbml6ZXIiLCJjb25zb2xlIiwibG9nIiwidm9jYWJ1bGFyeSIsImV4dHJhY3RUb2tlbml6ZXJWb2NhYnVsYXJ5IiwibGVuZ3RoIiwidm9jYWJ1bGFyeUVtYmVkZGluZ3MiLCJnZW5lcmF0ZVZvY2FidWxhcnlFbWJlZGRpbmdzIiwic2l6ZSIsInNlbWFudGljQ2x1c3RlcnMiLCJidWlsZFNlbWFudGljQ2x1c3RlcnMiLCJrbm93bGVkZ2VCYXNlIiwiY3JlYXRlS25vd2xlZGdlQmFzZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwidG9rZW5pemVyIiwiT2JqZWN0Iiwia2V5cyIsInZvY2FiIiwibW9kZWwiLCJ2b2NhYk9iaiIsInNsaWNlIiwiZmlyc3RLZXkiLCJmaXJzdFZhbHVlIiwidGVzdCIsInZhbHVlcyIsImdldFZvY2FiIiwiZmlsdGVyZWQiLCJmaWx0ZXJNZWFuaW5nZnVsV29yZHMiLCJpc051bWVyaWNUb2tlbml6ZXIiLCJldmVyeSIsInRva2VuIiwiZmlsdGVyIiwid29yZCIsInN0YXJ0c1dpdGgiLCJNYXAiLCJiYXRjaFNpemUiLCJpIiwiYmF0Y2giLCJyZXN1bHQiLCJlbWJlZGRpbmciLCJBcnJheSIsImZyb20iLCJkYXRhIiwic2V0Iiwid2FybiIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNpbWlsYXJXb3JkcyIsImZpbmRTaW1pbGFyV29yZHMiLCJ0YXJnZXRXb3JkIiwidGFyZ2V0RW1iZWRkaW5nIiwiYWxsRW1iZWRkaW5ncyIsInNpbWlsYXJpdGllcyIsInNpbWlsYXJpdHkiLCJjYWxjdWxhdGVDb3NpbmVTaW1pbGFyaXR5IiwicHVzaCIsInNvcnQiLCJhIiwiYiIsIm1hcCIsIml0ZW0iLCJkb3RQcm9kdWN0IiwicmVkdWNlIiwic3VtIiwidmFsIiwibWFnbml0dWRlQSIsIk1hdGgiLCJzcXJ0IiwibWFnbml0dWRlQiIsInZvY2FidWxhcnlQcmltZXMiLCJwcmltZUZhY3RvcnMiLCJlbWJlZGRpbmdzVG9QcmltZXMiLCJnZXQiLCJjb25jZXB0RW1iZWRkaW5ncyIsImVtYmVkZGluZ3MiLCJ0aHJlc2hvbGQiLCJwcmltZXMiLCJnZW5lcmF0ZVByaW1lcyIsImZvckVhY2giLCJ2YWx1ZSIsImluZGV4IiwiYWJzIiwicHJpbWUiLCJ3ZWlnaHQiLCJmbG9vciIsIm4iLCJudW0iLCJpc1ByaW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/semantic/knowledge-bootstrap.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/semantic/schema-vocabulary.ts":
/*!***********************************************!*\
  !*** ./src/lib/semantic/schema-vocabulary.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaVocabulary: () => (/* binding */ SchemaVocabulary)\n/* harmony export */ });\n// =============================================================================\n// SCHEMA.ORG VOCABULARY - Semantic Entity and Relationship Definitions\n// =============================================================================\nclass SchemaVocabulary {\n    constructor(){\n        this.entities = new Map();\n        this.relationships = new Map();\n        this.initializeBasicSchema();\n    }\n    /**\n   * Initialize basic Schema.org vocabulary for conversational AI\n   */ initializeBasicSchema() {\n        // Core entity types\n        this.addEntity('Thing', {\n            type: 'Thing',\n            properties: [\n                'name',\n                'description',\n                'identifier'\n            ],\n            relationships: [],\n            parentTypes: [],\n            description: 'The most generic type of item'\n        });\n        this.addEntity('Person', {\n            type: 'Person',\n            properties: [\n                'name',\n                'givenName',\n                'familyName',\n                'email',\n                'telephone'\n            ],\n            relationships: [\n                'knows',\n                'owns',\n                'memberOf',\n                'worksFor'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'A person (alive, dead, undead, or fictional)'\n        });\n        this.addEntity('Animal', {\n            type: 'Animal',\n            properties: [\n                'name',\n                'species',\n                'breed',\n                'age',\n                'color'\n            ],\n            relationships: [\n                'ownedBy',\n                'livesAt',\n                'relatedTo'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'Animals including pets, wildlife, etc.'\n        });\n        this.addEntity('Place', {\n            type: 'Place',\n            properties: [\n                'name',\n                'address',\n                'geo',\n                'telephone'\n            ],\n            relationships: [\n                'containedInPlace',\n                'contains',\n                'near'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'Entities that have a somewhat fixed, physical extension'\n        });\n        this.addEntity('Organization', {\n            type: 'Organization',\n            properties: [\n                'name',\n                'description',\n                'email',\n                'telephone',\n                'address'\n            ],\n            relationships: [\n                'member',\n                'parentOrganization',\n                'subOrganization'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'An organization such as a school, NGO, corporation, club, etc.'\n        });\n        this.addEntity('Vehicle', {\n            type: 'Vehicle',\n            properties: [\n                'name',\n                'model',\n                'manufacturer',\n                'color',\n                'year'\n            ],\n            relationships: [\n                'ownedBy',\n                'locatedAt'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'A vehicle is a device that is designed or used to transport people or cargo'\n        });\n        this.addEntity('Product', {\n            type: 'Product',\n            properties: [\n                'name',\n                'description',\n                'brand',\n                'model',\n                'color'\n            ],\n            relationships: [\n                'ownedBy',\n                'manufacturedBy'\n            ],\n            parentTypes: [\n                'Thing'\n            ],\n            description: 'Any offered product or service'\n        });\n        // Core relationships\n        this.addRelationship('hasName', {\n            property: 'hasName',\n            domain: [\n                'Thing'\n            ],\n            range: [\n                'Text'\n            ],\n            description: 'The name of the item'\n        });\n        this.addRelationship('owns', {\n            property: 'owns',\n            domain: [\n                'Person'\n            ],\n            range: [\n                'Thing'\n            ],\n            description: 'Products owned by the person'\n        });\n        this.addRelationship('ownedBy', {\n            property: 'ownedBy',\n            domain: [\n                'Thing'\n            ],\n            range: [\n                'Person'\n            ],\n            description: 'The person who owns this item'\n        });\n        this.addRelationship('knows', {\n            property: 'knows',\n            domain: [\n                'Person'\n            ],\n            range: [\n                'Person'\n            ],\n            description: 'The most generic bi-directional social/work relation'\n        });\n        this.addRelationship('livesAt', {\n            property: 'livesAt',\n            domain: [\n                'Person',\n                'Animal'\n            ],\n            range: [\n                'Place'\n            ],\n            description: 'The place where the person or animal lives'\n        });\n        this.addRelationship('worksFor', {\n            property: 'worksFor',\n            domain: [\n                'Person'\n            ],\n            range: [\n                'Organization'\n            ],\n            description: 'Organizations that the person works for'\n        });\n        console.log(' Schema.org vocabulary initialized with', this.entities.size, 'entities and', this.relationships.size, 'relationships');\n    }\n    /**\n   * Add a new entity type to the vocabulary\n   */ addEntity(type, entity) {\n        this.entities.set(type, entity);\n    }\n    /**\n   * Add a new relationship to the vocabulary\n   */ addRelationship(property, relationship) {\n        this.relationships.set(property, relationship);\n    }\n    /**\n   * Infer entity type from text and context\n   */ inferEntityType(entityText, context) {\n        const lowerText = entityText.toLowerCase();\n        // Direct type mapping\n        const typeMapping = {\n            'dog': 'Animal',\n            'cat': 'Animal',\n            'pet': 'Animal',\n            'bird': 'Animal',\n            'fish': 'Animal',\n            'horse': 'Animal',\n            'car': 'Vehicle',\n            'truck': 'Vehicle',\n            'bike': 'Vehicle',\n            'motorcycle': 'Vehicle',\n            'house': 'Place',\n            'home': 'Place',\n            'office': 'Place',\n            'school': 'Place',\n            'company': 'Organization',\n            'business': 'Organization',\n            'team': 'Organization',\n            'friend': 'Person',\n            'family': 'Person',\n            'brother': 'Person',\n            'sister': 'Person',\n            'mother': 'Person',\n            'father': 'Person',\n            'phone': 'Product',\n            'computer': 'Product',\n            'book': 'Product'\n        };\n        const inferredType = typeMapping[lowerText];\n        if (inferredType) {\n            console.log(` Inferred entity type: ${entityText}  ${inferredType}`);\n            return inferredType;\n        }\n        // Context-based inference\n        if (context) {\n            if (context.includes('name') && !typeMapping[lowerText]) {\n                // If we're talking about names and don't recognize the entity, assume it's a person\n                return 'Person';\n            }\n        }\n        return null;\n    }\n    /**\n   * Get valid relationships for an entity type\n   */ getValidRelationships(entityType) {\n        const entity = this.entities.get(entityType);\n        if (!entity) return [];\n        const relationships = [\n            ...entity.relationships\n        ];\n        // Add inherited relationships from parent types\n        entity.parentTypes.forEach((parentType)=>{\n            const parentEntity = this.entities.get(parentType);\n            if (parentEntity) {\n                relationships.push(...parentEntity.relationships);\n            }\n        });\n        return [\n            ...new Set(relationships)\n        ];\n    }\n    /**\n   * Get valid properties for an entity type\n   */ getValidProperties(entityType) {\n        const entity = this.entities.get(entityType);\n        if (!entity) return [];\n        const properties = [\n            ...entity.properties\n        ];\n        // Add inherited properties from parent types\n        entity.parentTypes.forEach((parentType)=>{\n            const parentEntity = this.entities.get(parentType);\n            if (parentEntity) {\n                properties.push(...parentEntity.properties);\n            }\n        });\n        return [\n            ...new Set(properties)\n        ];\n    }\n    /**\n   * Parse conversational input for semantic relationships\n   */ parseSemanticRelationships(text) {\n        console.log(' Parsing semantic relationships in:', text);\n        // Pattern: \"My X's name is Y\"\n        const namePattern = /my\\s+(\\w+)'?s?\\s+name\\s+is\\s+(\\w+)/i;\n        const nameMatch = text.match(namePattern);\n        if (nameMatch) {\n            const entityText = nameMatch[1];\n            const nameText = nameMatch[2];\n            const entityType = this.inferEntityType(entityText);\n            return {\n                subject: {\n                    text: entityText,\n                    type: entityType\n                },\n                predicate: 'hasName',\n                object: {\n                    text: nameText,\n                    type: 'Text'\n                },\n                confidence: 0.9\n            };\n        }\n        // Pattern: \"I have a X\"\n        const ownershipPattern = /i\\s+have\\s+a\\s+(\\w+)/i;\n        const ownershipMatch = text.match(ownershipPattern);\n        if (ownershipMatch) {\n            const entityText = ownershipMatch[1];\n            const entityType = this.inferEntityType(entityText);\n            return {\n                subject: {\n                    text: 'I',\n                    type: 'Person'\n                },\n                predicate: 'owns',\n                object: {\n                    text: entityText,\n                    type: entityType\n                },\n                confidence: 0.8\n            };\n        }\n        // Pattern: \"My name is X\"\n        const identityPattern = /my\\s+name\\s+is\\s+(\\w+)/i;\n        const identityMatch = text.match(identityPattern);\n        if (identityMatch) {\n            const nameText = identityMatch[1];\n            return {\n                subject: {\n                    text: 'I',\n                    type: 'Person'\n                },\n                predicate: 'hasName',\n                object: {\n                    text: nameText,\n                    type: 'Text'\n                },\n                confidence: 0.95\n            };\n        }\n        return null;\n    }\n    /**\n   * Generate semantic query from conversational input\n   */ generateSemanticQuery(text) {\n        console.log(' Generating semantic query for:', text);\n        // Query patterns: \"What is my X's name?\"\n        const queryPattern = /what\\s+is\\s+my\\s+(\\w+)'?s?\\s+(\\w+)/i;\n        const queryMatch = text.match(queryPattern);\n        if (queryMatch) {\n            const entityText = queryMatch[1];\n            const propertyText = queryMatch[2];\n            const entityType = this.inferEntityType(entityText);\n            if (propertyText === 'name') {\n                return {\n                    queryType: 'retrieve',\n                    subject: entityText,\n                    predicate: 'hasName',\n                    entityType: entityType || undefined\n                };\n            }\n        }\n        // Identity query: \"What is my name?\"\n        if (/what\\s+is\\s+my\\s+name/i.test(text)) {\n            return {\n                queryType: 'retrieve',\n                subject: 'user',\n                predicate: 'hasName'\n            };\n        }\n        return null;\n    }\n    /**\n   * Get entity information\n   */ getEntityInfo(entityType) {\n        return this.entities.get(entityType) || null;\n    }\n    /**\n   * Get relationship information\n   */ getRelationshipInfo(property) {\n        return this.relationships.get(property) || null;\n    }\n    /**\n   * Check if a relationship is valid between two entity types\n   */ isValidRelationship(subjectType, predicate, objectType) {\n        const relationship = this.relationships.get(predicate);\n        if (!relationship) return false;\n        const validDomain = relationship.domain.includes(subjectType) || relationship.domain.includes('Thing');\n        const validRange = relationship.range.includes(objectType) || relationship.range.includes('Thing') || relationship.range.includes('Text');\n        return validDomain && validRange;\n    }\n    /**\n   * Get all entity types\n   */ getAllEntityTypes() {\n        return Array.from(this.entities.keys());\n    }\n    /**\n   * Get all relationship types\n   */ getAllRelationshipTypes() {\n        return Array.from(this.relationships.keys());\n    }\n    /**\n   * Get debug information\n   */ getDebugInfo() {\n        return {\n            entityCount: this.entities.size,\n            relationshipCount: this.relationships.size,\n            entities: Object.fromEntries(this.entities),\n            relationships: Object.fromEntries(this.relationships)\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL3NlbWFudGljL3NjaGVtYS12b2NhYnVsYXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRkFBZ0Y7QUFDaEYsdUVBQXVFO0FBQ3ZFLGdGQUFnRjtBQWlCekUsTUFBTUE7SUFJWEMsYUFBYzthQUhOQyxXQUFzQyxJQUFJQzthQUMxQ0MsZ0JBQWlELElBQUlEO1FBRzNELElBQUksQ0FBQ0UscUJBQXFCO0lBQzVCO0lBRUE7O0dBRUMsR0FDRCx3QkFBc0M7UUFDcEMsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQ0MsU0FBUyxDQUFDLFNBQVM7WUFDdEJDLE1BQU07WUFDTkMsWUFBWTtnQkFBQztnQkFBUTtnQkFBZTthQUFhO1lBQ2pESixlQUFlLEVBQUU7WUFDakJLLGFBQWEsRUFBRTtZQUNmQyxhQUFhO1FBQ2Y7UUFFQSxJQUFJLENBQUNKLFNBQVMsQ0FBQyxVQUFVO1lBQ3ZCQyxNQUFNO1lBQ05DLFlBQVk7Z0JBQUM7Z0JBQVE7Z0JBQWE7Z0JBQWM7Z0JBQVM7YUFBWTtZQUNyRUosZUFBZTtnQkFBQztnQkFBUztnQkFBUTtnQkFBWTthQUFXO1lBQ3hESyxhQUFhO2dCQUFDO2FBQVE7WUFDdEJDLGFBQWE7UUFDZjtRQUVBLElBQUksQ0FBQ0osU0FBUyxDQUFDLFVBQVU7WUFDdkJDLE1BQU07WUFDTkMsWUFBWTtnQkFBQztnQkFBUTtnQkFBVztnQkFBUztnQkFBTzthQUFRO1lBQ3hESixlQUFlO2dCQUFDO2dCQUFXO2dCQUFXO2FBQVk7WUFDbERLLGFBQWE7Z0JBQUM7YUFBUTtZQUN0QkMsYUFBYTtRQUNmO1FBRUEsSUFBSSxDQUFDSixTQUFTLENBQUMsU0FBUztZQUN0QkMsTUFBTTtZQUNOQyxZQUFZO2dCQUFDO2dCQUFRO2dCQUFXO2dCQUFPO2FBQVk7WUFDbkRKLGVBQWU7Z0JBQUM7Z0JBQW9CO2dCQUFZO2FBQU87WUFDdkRLLGFBQWE7Z0JBQUM7YUFBUTtZQUN0QkMsYUFBYTtRQUNmO1FBRUEsSUFBSSxDQUFDSixTQUFTLENBQUMsZ0JB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VUFBa0IsRUFBVztRQUN2RixNQUFNM0MsZUFBZSxJQUFJLENBQUNoQixhQUFhLENBQUMyQixHQUFHLENBQUNjO1FBQzVDLElBQUksQ0FBQ3pCLGNBQWMsT0FBTztRQUUxQixNQUFNNEMsY0FBYzVDLGFBQWFQLE1BQU0sQ0FBQ2UsUUFBUSxDQUFDa0MsZ0JBQzlCMUMsYUFBYVAsTUFBTSxDQUFDZSxRQUFRLENBQUM7UUFDaEQsTUFBTXFDLGFBQWE3QyxhQUFhTixLQUFLLENBQUNjLFFBQVEsQ0FBQ21DLGVBQzdCM0MsYUFBYU4sS0FBSyxDQUFDYyxRQUFRLENBQUMsWUFDNUJSLGFBQWFOLEtBQUssQ0FBQ2MsUUFBUSxDQUFDO1FBRTlDLE9BQU9vQyxlQUFlQztJQUN4QjtJQUVBOztHQUVDLEdBQ0RDLG9CQUE4QjtRQUM1QixPQUFPQyxNQUFNQyxJQUFJLENBQUMsSUFBSSxDQUFDbEUsUUFBUSxDQUFDbUUsSUFBSTtJQUN0QztJQUVBOztHQUVDLEdBQ0RDLDBCQUFvQztRQUNsQyxPQUFPSCxNQUFNQyxJQUFJLENBQUMsSUFBSSxDQUFDaEUsYUFBYSxDQUFDaUUsSUFBSTtJQUMzQztJQUVBOztHQUVDLEdBQ0RFLGVBQW9CO1FBQ2xCLE9BQU87WUFDTEMsYUFBYSxJQUFJLENBQUN0RSxRQUFRLENBQUNlLElBQUk7WUFDL0J3RCxtQkFBbUIsSUFBSSxDQUFDckUsYUFBYSxDQUFDYSxJQUFJO1lBQzFDZixVQUFVd0UsT0FBT0MsV0FBVyxDQUFDLElBQUksQ0FBQ3pFLFFBQVE7WUFDMUNFLGVBQWVzRSxPQUFPQyxXQUFXLENBQUMsSUFBSSxDQUFDdkUsYUFBYTtRQUN0RDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvbGliL3NlbWFudGljL3NjaGVtYS12b2NhYnVsYXJ5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTQ0hFTUEuT1JHIFZPQ0FCVUxBUlkgLSBTZW1hbnRpYyBFbnRpdHkgYW5kIFJlbGF0aW9uc2hpcCBEZWZpbml0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBTY2hlbWFFbnRpdHkge1xuICB0eXBlOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IHN0cmluZ1tdO1xuICByZWxhdGlvbnNoaXBzOiBzdHJpbmdbXTtcbiAgcGFyZW50VHlwZXM6IHN0cmluZ1tdO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVtYVJlbGF0aW9uc2hpcCB7XG4gIHByb3BlcnR5OiBzdHJpbmc7XG4gIGRvbWFpbjogc3RyaW5nW107ICAvLyBXaGF0IHR5cGVzIGNhbiBoYXZlIHRoaXMgcHJvcGVydHlcbiAgcmFuZ2U6IHN0cmluZ1tdOyAgIC8vIFdoYXQgdHlwZXMgdGhpcyBwcm9wZXJ0eSBjYW4gcG9pbnQgdG9cbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNjaGVtYVZvY2FidWxhcnkge1xuICBwcml2YXRlIGVudGl0aWVzOiBNYXA8c3RyaW5nLCBTY2hlbWFFbnRpdHk+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHJlbGF0aW9uc2hpcHM6IE1hcDxzdHJpbmcsIFNjaGVtYVJlbGF0aW9uc2hpcD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplQmFzaWNTY2hlbWEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGJhc2ljIFNjaGVtYS5vcmcgdm9jYWJ1bGFyeSBmb3IgY29udmVyc2F0aW9uYWwgQUlcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUJhc2ljU2NoZW1hKCk6IHZvaWQge1xuICAgIC8vIENvcmUgZW50aXR5IHR5cGVzXG4gICAgdGhpcy5hZGRFbnRpdHkoJ1RoaW5nJywge1xuICAgICAgdHlwZTogJ1RoaW5nJyxcbiAgICAgIHByb3BlcnRpZXM6IFsnbmFtZScsICdkZXNjcmlwdGlvbicsICdpZGVudGlmaWVyJ10sXG4gICAgICByZWxhdGlvbnNoaXBzOiBbXSxcbiAgICAgIHBhcmVudFR5cGVzOiBbXSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG1vc3QgZ2VuZXJpYyB0eXBlIG9mIGl0ZW0nXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZEVudGl0eSgnUGVyc29uJywge1xuICAgICAgdHlwZTogJ1BlcnNvbicsXG4gICAgICBwcm9wZXJ0aWVzOiBbJ25hbWUnLCAnZ2l2ZW5OYW1lJywgJ2ZhbWlseU5hbWUnLCAnZW1haWwnLCAndGVsZXBob25lJ10sXG4gICAgICByZWxhdGlvbnNoaXBzOiBbJ2tub3dzJywgJ293bnMnLCAnbWVtYmVyT2YnLCAnd29ya3NGb3InXSxcbiAgICAgIHBhcmVudFR5cGVzOiBbJ1RoaW5nJ10sXG4gICAgICBkZXNjcmlwdGlvbjogJ0EgcGVyc29uIChhbGl2ZSwgZGVhZCwgdW5kZWFkLCBvciBmaWN0aW9uYWwpJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRFbnRpdHkoJ0FuaW1hbCcsIHtcbiAgICAgIHR5cGU6ICdBbmltYWwnLFxuICAgICAgcHJvcGVydGllczogWyduYW1lJywgJ3NwZWNpZXMnLCAnYnJlZWQnLCAnYWdlJywgJ2NvbG9yJ10sXG4gICAgICByZWxhdGlvbnNoaXBzOiBbJ293bmVkQnknLCAnbGl2ZXNBdCcsICdyZWxhdGVkVG8nXSxcbiAgICAgIHBhcmVudFR5cGVzOiBbJ1RoaW5nJ10sXG4gICAgICBkZXNjcmlwdGlvbjogJ0FuaW1hbHMgaW5jbHVkaW5nIHBldHMsIHdpbGRsaWZlLCBldGMuJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRFbnRpdHkoJ1BsYWNlJywge1xuICAgICAgdHlwZTogJ1BsYWNlJyxcbiAgICAgIHByb3BlcnRpZXM6IFsnbmFtZScsICdhZGRyZXNzJywgJ2dlbycsICd0ZWxlcGhvbmUnXSxcbiAgICAgIHJlbGF0aW9uc2hpcHM6IFsnY29udGFpbmVkSW5QbGFjZScsICdjb250YWlucycsICduZWFyJ10sXG4gICAgICBwYXJlbnRUeXBlczogWydUaGluZyddLFxuICAgICAgZGVzY3JpcHRpb246ICdFbnRpdGllcyB0aGF0IGhhdmUgYSBzb21ld2hhdCBmaXhlZCwgcGh5c2ljYWwgZXh0ZW5zaW9uJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRFbnRpdHkoJ09yZ2FuaXphdGlvbicsIHtcbiAgICAgIHR5cGU6ICdPcmdhbml6YXRpb24nLFxuICAgICAgcHJvcGVydGllczogWyduYW1lJywgJ2Rlc2NyaXB0aW9uJywgJ2VtYWlsJywgJ3RlbGVwaG9uZScsICdhZGRyZXNzJ10sXG4gICAgICByZWxhdGlvbnNoaXBzOiBbJ21lbWJlcicsICdwYXJlbnRPcmdhbml6YXRpb24nLCAnc3ViT3JnYW5pemF0aW9uJ10sXG4gICAgICBwYXJlbnRUeXBlczogWydUaGluZyddLFxuICAgICAgZGVzY3JpcHRpb246ICdBbiBvcmdhbml6YXRpb24gc3VjaCBhcyBhIHNjaG9vbCwgTkdPLCBjb3Jwb3JhdGlvbiwgY2x1YiwgZXRjLidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkRW50aXR5KCdWZWhpY2xlJywge1xuICAgICAgdHlwZTogJ1ZlaGljbGUnLFxuICAgICAgcHJvcGVydGllczogWyduYW1lJywgJ21vZGVsJywgJ21hbnVmYWN0dXJlcicsICdjb2xvcicsICd5ZWFyJ10sXG4gICAgICByZWxhdGlvbnNoaXBzOiBbJ293bmVkQnknLCAnbG9jYXRlZEF0J10sXG4gICAgICBwYXJlbnRUeXBlczogWydUaGluZyddLFxuICAgICAgZGVzY3JpcHRpb246ICdBIHZlaGljbGUgaXMgYSBkZXZpY2UgdGhhdCBpcyBkZXNpZ25lZCBvciB1c2VkIHRvIHRyYW5zcG9ydCBwZW9wbGUgb3IgY2FyZ28nXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZEVudGl0eSgnUHJvZHVjdCcsIHtcbiAgICAgIHR5cGU6ICdQcm9kdWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IFsnbmFtZScsICdkZXNjcmlwdGlvbicsICdicmFuZCcsICdtb2RlbCcsICdjb2xvciddLFxuICAgICAgcmVsYXRpb25zaGlwczogWydvd25lZEJ5JywgJ21hbnVmYWN0dXJlZEJ5J10sXG4gICAgICBwYXJlbnRUeXBlczogWydUaGluZyddLFxuICAgICAgZGVzY3JpcHRpb246ICdBbnkgb2ZmZXJlZCBwcm9kdWN0IG9yIHNlcnZpY2UnXG4gICAgfSk7XG5cbiAgICAvLyBDb3JlIHJlbGF0aW9uc2hpcHNcbiAgICB0aGlzLmFkZFJlbGF0aW9uc2hpcCgnaGFzTmFtZScsIHtcbiAgICAgIHByb3BlcnR5OiAnaGFzTmFtZScsXG4gICAgICBkb21haW46IFsnVGhpbmcnXSxcbiAgICAgIHJhbmdlOiBbJ1RleHQnXSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIG5hbWUgb2YgdGhlIGl0ZW0nXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFJlbGF0aW9uc2hpcCgnb3ducycsIHtcbiAgICAgIHByb3BlcnR5OiAnb3ducycsXG4gICAgICBkb21haW46IFsnUGVyc29uJ10sXG4gICAgICByYW5nZTogWydUaGluZyddLFxuICAgICAgZGVzY3JpcHRpb246ICdQcm9kdWN0cyBvd25lZCBieSB0aGUgcGVyc29uJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSZWxhdGlvbnNoaXAoJ293bmVkQnknLCB7XG4gICAgICBwcm9wZXJ0eTogJ293bmVkQnknLFxuICAgICAgZG9tYWluOiBbJ1RoaW5nJ10sXG4gICAgICByYW5nZTogWydQZXJzb24nXSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHBlcnNvbiB3aG8gb3ducyB0aGlzIGl0ZW0nXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFJlbGF0aW9uc2hpcCgna25vd3MnLCB7XG4gICAgICBwcm9wZXJ0eTogJ2tub3dzJyxcbiAgICAgIGRvbWFpbjogWydQZXJzb24nXSxcbiAgICAgIHJhbmdlOiBbJ1BlcnNvbiddLFxuICAgICAgZGVzY3JpcHRpb246ICdUaGUgbW9zdCBnZW5lcmljIGJpLWRpcmVjdGlvbmFsIHNvY2lhbC93b3JrIHJlbGF0aW9uJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSZWxhdGlvbnNoaXAoJ2xpdmVzQXQnLCB7XG4gICAgICBwcm9wZXJ0eTogJ2xpdmVzQXQnLFxuICAgICAgZG9tYWluOiBbJ1BlcnNvbicsICdBbmltYWwnXSxcbiAgICAgIHJhbmdlOiBbJ1BsYWNlJ10sXG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSBwbGFjZSB3aGVyZSB0aGUgcGVyc29uIG9yIGFuaW1hbCBsaXZlcydcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkUmVsYXRpb25zaGlwKCd3b3Jrc0ZvcicsIHtcbiAgICAgIHByb3BlcnR5OiAnd29ya3NGb3InLFxuICAgICAgZG9tYWluOiBbJ1BlcnNvbiddLFxuICAgICAgcmFuZ2U6IFsnT3JnYW5pemF0aW9uJ10sXG4gICAgICBkZXNjcmlwdGlvbjogJ09yZ2FuaXphdGlvbnMgdGhhdCB0aGUgcGVyc29uIHdvcmtzIGZvcidcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OaIFNjaGVtYS5vcmcgdm9jYWJ1bGFyeSBpbml0aWFsaXplZCB3aXRoJywgdGhpcy5lbnRpdGllcy5zaXplLCAnZW50aXRpZXMgYW5kJywgdGhpcy5yZWxhdGlvbnNoaXBzLnNpemUsICdyZWxhdGlvbnNoaXBzJyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IGVudGl0eSB0eXBlIHRvIHRoZSB2b2NhYnVsYXJ5XG4gICAqL1xuICBhZGRFbnRpdHkodHlwZTogc3RyaW5nLCBlbnRpdHk6IFNjaGVtYUVudGl0eSk6IHZvaWQge1xuICAgIHRoaXMuZW50aXRpZXMuc2V0KHR5cGUsIGVudGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IHJlbGF0aW9uc2hpcCB0byB0aGUgdm9jYWJ1bGFyeVxuICAgKi9cbiAgYWRkUmVsYXRpb25zaGlwKHByb3BlcnR5OiBzdHJpbmcsIHJlbGF0aW9uc2hpcDogU2NoZW1hUmVsYXRpb25zaGlwKTogdm9pZCB7XG4gICAgdGhpcy5yZWxhdGlvbnNoaXBzLnNldChwcm9wZXJ0eSwgcmVsYXRpb25zaGlwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmZlciBlbnRpdHkgdHlwZSBmcm9tIHRleHQgYW5kIGNvbnRleHRcbiAgICovXG4gIGluZmVyRW50aXR5VHlwZShlbnRpdHlUZXh0OiBzdHJpbmcsIGNvbnRleHQ/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBsb3dlclRleHQgPSBlbnRpdHlUZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gRGlyZWN0IHR5cGUgbWFwcGluZ1xuICAgIGNvbnN0IHR5cGVNYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2RvZyc6ICdBbmltYWwnLFxuICAgICAgJ2NhdCc6ICdBbmltYWwnLFxuICAgICAgJ3BldCc6ICdBbmltYWwnLFxuICAgICAgJ2JpcmQnOiAnQW5pbWFsJyxcbiAgICAgICdmaXNoJzogJ0FuaW1hbCcsXG4gICAgICAnaG9yc2UnOiAnQW5pbWFsJyxcbiAgICAgICdjYXInOiAnVmVoaWNsZScsXG4gICAgICAndHJ1Y2snOiAnVmVoaWNsZScsXG4gICAgICAnYmlrZSc6ICdWZWhpY2xlJyxcbiAgICAgICdtb3RvcmN5Y2xlJzogJ1ZlaGljbGUnLFxuICAgICAgJ2hvdXNlJzogJ1BsYWNlJyxcbiAgICAgICdob21lJzogJ1BsYWNlJyxcbiAgICAgICdvZmZpY2UnOiAnUGxhY2UnLFxuICAgICAgJ3NjaG9vbCc6ICdQbGFjZScsXG4gICAgICAnY29tcGFueSc6ICdPcmdhbml6YXRpb24nLFxuICAgICAgJ2J1c2luZXNzJzogJ09yZ2FuaXphdGlvbicsXG4gICAgICAndGVhbSc6ICdPcmdhbml6YXRpb24nLFxuICAgICAgJ2ZyaWVuZCc6ICdQZXJzb24nLFxuICAgICAgJ2ZhbWlseSc6ICdQZXJzb24nLFxuICAgICAgJ2Jyb3RoZXInOiAnUGVyc29uJyxcbiAgICAgICdzaXN0ZXInOiAnUGVyc29uJyxcbiAgICAgICdtb3RoZXInOiAnUGVyc29uJyxcbiAgICAgICdmYXRoZXInOiAnUGVyc29uJyxcbiAgICAgICdwaG9uZSc6ICdQcm9kdWN0JyxcbiAgICAgICdjb21wdXRlcic6ICdQcm9kdWN0JyxcbiAgICAgICdib29rJzogJ1Byb2R1Y3QnXG4gICAgfTtcblxuICAgIGNvbnN0IGluZmVycmVkVHlwZSA9IHR5cGVNYXBwaW5nW2xvd2VyVGV4dF07XG4gICAgaWYgKGluZmVycmVkVHlwZSkge1xuICAgICAgY29uc29sZS5sb2coYPCflI0gSW5mZXJyZWQgZW50aXR5IHR5cGU6ICR7ZW50aXR5VGV4dH0g4oaSICR7aW5mZXJyZWRUeXBlfWApO1xuICAgICAgcmV0dXJuIGluZmVycmVkVHlwZTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0LWJhc2VkIGluZmVyZW5jZVxuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBpZiAoY29udGV4dC5pbmNsdWRlcygnbmFtZScpICYmICF0eXBlTWFwcGluZ1tsb3dlclRleHRdKSB7XG4gICAgICAgIC8vIElmIHdlJ3JlIHRhbGtpbmcgYWJvdXQgbmFtZXMgYW5kIGRvbid0IHJlY29nbml6ZSB0aGUgZW50aXR5LCBhc3N1bWUgaXQncyBhIHBlcnNvblxuICAgICAgICByZXR1cm4gJ1BlcnNvbic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbGlkIHJlbGF0aW9uc2hpcHMgZm9yIGFuIGVudGl0eSB0eXBlXG4gICAqL1xuICBnZXRWYWxpZFJlbGF0aW9uc2hpcHMoZW50aXR5VHlwZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGVudGl0eSA9IHRoaXMuZW50aXRpZXMuZ2V0KGVudGl0eVR5cGUpO1xuICAgIGlmICghZW50aXR5KSByZXR1cm4gW107XG4gICAgXG4gICAgY29uc3QgcmVsYXRpb25zaGlwczogc3RyaW5nW10gPSBbLi4uZW50aXR5LnJlbGF0aW9uc2hpcHNdO1xuICAgIFxuICAgIC8vIEFkZCBpbmhlcml0ZWQgcmVsYXRpb25zaGlwcyBmcm9tIHBhcmVudCB0eXBlc1xuICAgIGVudGl0eS5wYXJlbnRUeXBlcy5mb3JFYWNoKHBhcmVudFR5cGUgPT4ge1xuICAgICAgY29uc3QgcGFyZW50RW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQocGFyZW50VHlwZSk7XG4gICAgICBpZiAocGFyZW50RW50aXR5KSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcHMucHVzaCguLi5wYXJlbnRFbnRpdHkucmVsYXRpb25zaGlwcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KHJlbGF0aW9uc2hpcHMpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmFsaWQgcHJvcGVydGllcyBmb3IgYW4gZW50aXR5IHR5cGVcbiAgICovXG4gIGdldFZhbGlkUHJvcGVydGllcyhlbnRpdHlUeXBlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllcy5nZXQoZW50aXR5VHlwZSk7XG4gICAgaWYgKCFlbnRpdHkpIHJldHVybiBbXTtcbiAgICBcbiAgICBjb25zdCBwcm9wZXJ0aWVzOiBzdHJpbmdbXSA9IFsuLi5lbnRpdHkucHJvcGVydGllc107XG4gICAgXG4gICAgLy8gQWRkIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGZyb20gcGFyZW50IHR5cGVzXG4gICAgZW50aXR5LnBhcmVudFR5cGVzLmZvckVhY2gocGFyZW50VHlwZSA9PiB7XG4gICAgICBjb25zdCBwYXJlbnRFbnRpdHkgPSB0aGlzLmVudGl0aWVzLmdldChwYXJlbnRUeXBlKTtcbiAgICAgIGlmIChwYXJlbnRFbnRpdHkpIHtcbiAgICAgICAgcHJvcGVydGllcy5wdXNoKC4uLnBhcmVudEVudGl0eS5wcm9wZXJ0aWVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gWy4uLm5ldyBTZXQocHJvcGVydGllcyldO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNvbnZlcnNhdGlvbmFsIGlucHV0IGZvciBzZW1hbnRpYyByZWxhdGlvbnNoaXBzXG4gICAqL1xuICBwYXJzZVNlbWFudGljUmVsYXRpb25zaGlwcyh0ZXh0OiBzdHJpbmcpOiB7XG4gICAgc3ViamVjdDogeyB0ZXh0OiBzdHJpbmc7IHR5cGU6IHN0cmluZyB8IG51bGwgfTtcbiAgICBwcmVkaWNhdGU6IHN0cmluZyB8IG51bGw7XG4gICAgb2JqZWN0OiB7IHRleHQ6IHN0cmluZzsgdHlwZTogc3RyaW5nIHwgbnVsbCB9O1xuICAgIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgfSB8IG51bGwge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFBhcnNpbmcgc2VtYW50aWMgcmVsYXRpb25zaGlwcyBpbjonLCB0ZXh0KTtcbiAgICBcbiAgICAvLyBQYXR0ZXJuOiBcIk15IFgncyBuYW1lIGlzIFlcIlxuICAgIGNvbnN0IG5hbWVQYXR0ZXJuID0gL215XFxzKyhcXHcrKSc/cz9cXHMrbmFtZVxccytpc1xccysoXFx3KykvaTtcbiAgICBjb25zdCBuYW1lTWF0Y2ggPSB0ZXh0Lm1hdGNoKG5hbWVQYXR0ZXJuKTtcbiAgICBcbiAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICBjb25zdCBlbnRpdHlUZXh0ID0gbmFtZU1hdGNoWzFdO1xuICAgICAgY29uc3QgbmFtZVRleHQgPSBuYW1lTWF0Y2hbMl07XG4gICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5pbmZlckVudGl0eVR5cGUoZW50aXR5VGV4dCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1YmplY3Q6IHsgdGV4dDogZW50aXR5VGV4dCwgdHlwZTogZW50aXR5VHlwZSB9LFxuICAgICAgICBwcmVkaWNhdGU6ICdoYXNOYW1lJyxcbiAgICAgICAgb2JqZWN0OiB7IHRleHQ6IG5hbWVUZXh0LCB0eXBlOiAnVGV4dCcgfSxcbiAgICAgICAgY29uZmlkZW5jZTogMC45XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFBhdHRlcm46IFwiSSBoYXZlIGEgWFwiXG4gICAgY29uc3Qgb3duZXJzaGlwUGF0dGVybiA9IC9pXFxzK2hhdmVcXHMrYVxccysoXFx3KykvaTtcbiAgICBjb25zdCBvd25lcnNoaXBNYXRjaCA9IHRleHQubWF0Y2gob3duZXJzaGlwUGF0dGVybik7XG4gICAgXG4gICAgaWYgKG93bmVyc2hpcE1hdGNoKSB7XG4gICAgICBjb25zdCBlbnRpdHlUZXh0ID0gb3duZXJzaGlwTWF0Y2hbMV07XG4gICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5pbmZlckVudGl0eVR5cGUoZW50aXR5VGV4dCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1YmplY3Q6IHsgdGV4dDogJ0knLCB0eXBlOiAnUGVyc29uJyB9LFxuICAgICAgICBwcmVkaWNhdGU6ICdvd25zJyxcbiAgICAgICAgb2JqZWN0OiB7IHRleHQ6IGVudGl0eVRleHQsIHR5cGU6IGVudGl0eVR5cGUgfSxcbiAgICAgICAgY29uZmlkZW5jZTogMC44XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFBhdHRlcm46IFwiTXkgbmFtZSBpcyBYXCJcbiAgICBjb25zdCBpZGVudGl0eVBhdHRlcm4gPSAvbXlcXHMrbmFtZVxccytpc1xccysoXFx3KykvaTtcbiAgICBjb25zdCBpZGVudGl0eU1hdGNoID0gdGV4dC5tYXRjaChpZGVudGl0eVBhdHRlcm4pO1xuICAgIFxuICAgIGlmIChpZGVudGl0eU1hdGNoKSB7XG4gICAgICBjb25zdCBuYW1lVGV4dCA9IGlkZW50aXR5TWF0Y2hbMV07XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1YmplY3Q6IHsgdGV4dDogJ0knLCB0eXBlOiAnUGVyc29uJyB9LFxuICAgICAgICBwcmVkaWNhdGU6ICdoYXNOYW1lJyxcbiAgICAgICAgb2JqZWN0OiB7IHRleHQ6IG5hbWVUZXh0LCB0eXBlOiAnVGV4dCcgfSxcbiAgICAgICAgY29uZmlkZW5jZTogMC45NVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzZW1hbnRpYyBxdWVyeSBmcm9tIGNvbnZlcnNhdGlvbmFsIGlucHV0XG4gICAqL1xuICBnZW5lcmF0ZVNlbWFudGljUXVlcnkodGV4dDogc3RyaW5nKToge1xuICAgIHF1ZXJ5VHlwZTogJ3JldHJpZXZlJyB8ICdzdG9yZSc7XG4gICAgc3ViamVjdDogc3RyaW5nO1xuICAgIHByZWRpY2F0ZTogc3RyaW5nO1xuICAgIG9iamVjdD86IHN0cmluZztcbiAgICBlbnRpdHlUeXBlPzogc3RyaW5nO1xuICB9IHwgbnVsbCB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gR2VuZXJhdGluZyBzZW1hbnRpYyBxdWVyeSBmb3I6JywgdGV4dCk7XG4gICAgXG4gICAgLy8gUXVlcnkgcGF0dGVybnM6IFwiV2hhdCBpcyBteSBYJ3MgbmFtZT9cIlxuICAgIGNvbnN0IHF1ZXJ5UGF0dGVybiA9IC93aGF0XFxzK2lzXFxzK215XFxzKyhcXHcrKSc/cz9cXHMrKFxcdyspL2k7XG4gICAgY29uc3QgcXVlcnlNYXRjaCA9IHRleHQubWF0Y2gocXVlcnlQYXR0ZXJuKTtcbiAgICBcbiAgICBpZiAocXVlcnlNYXRjaCkge1xuICAgICAgY29uc3QgZW50aXR5VGV4dCA9IHF1ZXJ5TWF0Y2hbMV07XG4gICAgICBjb25zdCBwcm9wZXJ0eVRleHQgPSBxdWVyeU1hdGNoWzJdO1xuICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuaW5mZXJFbnRpdHlUeXBlKGVudGl0eVRleHQpO1xuICAgICAgXG4gICAgICBpZiAocHJvcGVydHlUZXh0ID09PSAnbmFtZScpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBxdWVyeVR5cGU6ICdyZXRyaWV2ZScsXG4gICAgICAgICAgc3ViamVjdDogZW50aXR5VGV4dCxcbiAgICAgICAgICBwcmVkaWNhdGU6ICdoYXNOYW1lJyxcbiAgICAgICAgICBlbnRpdHlUeXBlOiBlbnRpdHlUeXBlIHx8IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElkZW50aXR5IHF1ZXJ5OiBcIldoYXQgaXMgbXkgbmFtZT9cIlxuICAgIGlmICgvd2hhdFxccytpc1xccytteVxccytuYW1lL2kudGVzdCh0ZXh0KSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcXVlcnlUeXBlOiAncmV0cmlldmUnLFxuICAgICAgICBzdWJqZWN0OiAndXNlcicsXG4gICAgICAgIHByZWRpY2F0ZTogJ2hhc05hbWUnXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbnRpdHkgaW5mb3JtYXRpb25cbiAgICovXG4gIGdldEVudGl0eUluZm8oZW50aXR5VHlwZTogc3RyaW5nKTogU2NoZW1hRW50aXR5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXRpZXMuZ2V0KGVudGl0eVR5cGUpIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlbGF0aW9uc2hpcCBpbmZvcm1hdGlvblxuICAgKi9cbiAgZ2V0UmVsYXRpb25zaGlwSW5mbyhwcm9wZXJ0eTogc3RyaW5nKTogU2NoZW1hUmVsYXRpb25zaGlwIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMucmVsYXRpb25zaGlwcy5nZXQocHJvcGVydHkpIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSByZWxhdGlvbnNoaXAgaXMgdmFsaWQgYmV0d2VlbiB0d28gZW50aXR5IHR5cGVzXG4gICAqL1xuICBpc1ZhbGlkUmVsYXRpb25zaGlwKHN1YmplY3RUeXBlOiBzdHJpbmcsIHByZWRpY2F0ZTogc3RyaW5nLCBvYmplY3RUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCByZWxhdGlvbnNoaXAgPSB0aGlzLnJlbGF0aW9uc2hpcHMuZ2V0KHByZWRpY2F0ZSk7XG4gICAgaWYgKCFyZWxhdGlvbnNoaXApIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBjb25zdCB2YWxpZERvbWFpbiA9IHJlbGF0aW9uc2hpcC5kb21haW4uaW5jbHVkZXMoc3ViamVjdFR5cGUpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXAuZG9tYWluLmluY2x1ZGVzKCdUaGluZycpO1xuICAgIGNvbnN0IHZhbGlkUmFuZ2UgPSByZWxhdGlvbnNoaXAucmFuZ2UuaW5jbHVkZXMob2JqZWN0VHlwZSkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwLnJhbmdlLmluY2x1ZGVzKCdUaGluZycpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwLnJhbmdlLmluY2x1ZGVzKCdUZXh0Jyk7XG4gICAgXG4gICAgcmV0dXJuIHZhbGlkRG9tYWluICYmIHZhbGlkUmFuZ2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBlbnRpdHkgdHlwZXNcbiAgICovXG4gIGdldEFsbEVudGl0eVR5cGVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVudGl0aWVzLmtleXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCByZWxhdGlvbnNoaXAgdHlwZXNcbiAgICovXG4gIGdldEFsbFJlbGF0aW9uc2hpcFR5cGVzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJlbGF0aW9uc2hpcHMua2V5cygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVidWcgaW5mb3JtYXRpb25cbiAgICovXG4gIGdldERlYnVnSW5mbygpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBlbnRpdHlDb3VudDogdGhpcy5lbnRpdGllcy5zaXplLFxuICAgICAgcmVsYXRpb25zaGlwQ291bnQ6IHRoaXMucmVsYXRpb25zaGlwcy5zaXplLFxuICAgICAgZW50aXRpZXM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmVudGl0aWVzKSxcbiAgICAgIHJlbGF0aW9uc2hpcHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnJlbGF0aW9uc2hpcHMpXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlNjaGVtYVZvY2FidWxhcnkiLCJjb25zdHJ1Y3RvciIsImVudGl0aWVzIiwiTWFwIiwicmVsYXRpb25zaGlwcyIsImluaXRpYWxpemVCYXNpY1NjaGVtYSIsImFkZEVudGl0eSIsInR5cGUiLCJwcm9wZXJ0aWVzIiwicGFyZW50VHlwZXMiLCJkZXNjcmlwdGlvbiIsImFkZFJlbGF0aW9uc2hpcCIsInByb3BlcnR5IiwiZG9tYWluIiwicmFuZ2UiLCJjb25zb2xlIiwibG9nIiwic2l6ZSIsImVudGl0eSIsInNldCIsInJlbGF0aW9uc2hpcCIsImluZmVyRW50aXR5VHlwZSIsImVudGl0eVRleHQiLCJjb250ZXh0IiwibG93ZXJUZXh0IiwidG9Mb3dlckNhc2UiLCJ0eXBlTWFwcGluZyIsImluZmVycmVkVHlwZSIsImluY2x1ZGVzIiwiZ2V0VmFsaWRSZWxhdGlvbnNoaXBzIiwiZW50aXR5VHlwZSIsImdldCIsImZvckVhY2giLCJwYXJlbnRUeXBlIiwicGFyZW50RW50aXR5IiwicHVzaCIsIlNldCIsImdldFZhbGlkUHJvcGVydGllcyIsInBhcnNlU2VtYW50aWNSZWxhdGlvbnNoaXBzIiwidGV4dCIsIm5hbWVQYXR0ZXJuIiwibmFtZU1hdGNoIiwibWF0Y2giLCJuYW1lVGV4dCIsInN1YmplY3QiLCJwcmVkaWNhdGUiLCJvYmplY3QiLCJjb25maWRlbmNlIiwib3duZXJzaGlwUGF0dGVybiIsIm93bmVyc2hpcE1hdGNoIiwiaWRlbnRpdHlQYXR0ZXJuIiwiaWRlbnRpdHlNYXRjaCIsImdlbmVyYXRlU2VtYW50aWNRdWVyeSIsInF1ZXJ5UGF0dGVybiIsInF1ZXJ5TWF0Y2giLCJwcm9wZXJ0eVRleHQiLCJxdWVyeVR5cGUiLCJ1bmRlZmluZWQiLCJ0ZXN0IiwiZ2V0RW50aXR5SW5mbyIsImdldFJlbGF0aW9uc2hpcEluZm8iLCJpc1ZhbGlkUmVsYXRpb25zaGlwIiwic3ViamVjdFR5cGUiLCJvYmplY3RUeXBlIiwidmFsaWREb21haW4iLCJ2YWxpZFJhbmdlIiwiZ2V0QWxsRW50aXR5VHlwZXMiLCJBcnJheSIsImZyb20iLCJrZXlzIiwiZ2V0QWxsUmVsYXRpb25zaGlwVHlwZXMiLCJnZXREZWJ1Z0luZm8iLCJlbnRpdHlDb3VudCIsInJlbGF0aW9uc2hpcENvdW50IiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/semantic/schema-vocabulary.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/semantic/semantic-layer.ts":
/*!********************************************!*\
  !*** ./src/lib/semantic/semantic-layer.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SemanticLayer: () => (/* binding */ SemanticLayer)\n/* harmony export */ });\n/* harmony import */ var _schema_vocabulary__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema-vocabulary */ \"(ssr)/./src/lib/semantic/schema-vocabulary.ts\");\n// =============================================================================\n// SEMANTIC LAYER - Natural Language to Prime Resonance Bridge\n// =============================================================================\n\nclass SemanticLayer {\n    constructor(){\n        this.patterns = [];\n        this.conceptNetCache = new Map();\n        this.schemaVocabulary = new _schema_vocabulary__WEBPACK_IMPORTED_MODULE_0__.SchemaVocabulary();\n        this.initializePatterns();\n    }\n    /**\n   * Initialize common conversational patterns for natural language understanding\n   */ initializePatterns() {\n        this.patterns = [\n            // Identity/Name patterns\n            {\n                pattern: /my name is (\\w+)/i,\n                intent: 'IDENTITY_INTRODUCTION',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'person',\n                    'individual',\n                    'called',\n                    'known'\n                ],\n                responseTemplate: 'Nice to meet you, {name}! I\\'m PrimeBot.'\n            },\n            {\n                pattern: /i am (\\w+)/i,\n                intent: 'IDENTITY_INTRODUCTION',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'person',\n                    'individual'\n                ],\n                responseTemplate: 'Nice to meet you, {name}! I\\'m PrimeBot.'\n            },\n            {\n                pattern: /my (\\w+)'?s? name is (\\w+)/i,\n                intent: 'ENTITY_INTRODUCTION',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'called',\n                    'known',\n                    'entity'\n                ],\n                responseTemplate: 'Nice to know that your {entity} is named {name}!'\n            },\n            {\n                pattern: /her name is (\\w+)/i,\n                intent: 'ENTITY_INTRODUCTION',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'called',\n                    'known',\n                    'entity'\n                ],\n                responseTemplate: 'Nice to know that her name is {name}!'\n            },\n            {\n                pattern: /his name is (\\w+)/i,\n                intent: 'ENTITY_INTRODUCTION',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'called',\n                    'known',\n                    'entity'\n                ],\n                responseTemplate: 'Nice to know that his name is {name}!'\n            },\n            {\n                pattern: /what is my name/i,\n                intent: 'IDENTITY_QUERY',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'remember',\n                    'recall',\n                    'called',\n                    'known'\n                ],\n                responseTemplate: 'Based on our conversation, your name is {name}.'\n            },\n            {\n                pattern: /what is my (\\w+)'?s? name/i,\n                intent: 'ENTITY_QUERY',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'remember',\n                    'recall',\n                    'called',\n                    'known'\n                ],\n                responseTemplate: 'Based on our conversation, your {entity} is named {name}.'\n            },\n            {\n                pattern: /what is my (\\w+)'s name/i,\n                intent: 'ENTITY_QUERY',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'remember',\n                    'recall',\n                    'called',\n                    'known'\n                ],\n                responseTemplate: 'Based on our conversation, your {entity} is named {name}.'\n            },\n            {\n                pattern: /who am i/i,\n                intent: 'IDENTITY_QUERY',\n                semanticBoosts: [\n                    'identity',\n                    'person',\n                    'individual',\n                    'self',\n                    'me'\n                ]\n            },\n            // Bot identity patterns\n            {\n                pattern: /who are you/i,\n                intent: 'BOT_IDENTITY_QUERY',\n                semanticBoosts: [\n                    'identity',\n                    'bot',\n                    'assistant',\n                    'who',\n                    'you'\n                ],\n                responseTemplate: 'I\\'m PrimeBot, an AI assistant powered by mathematical prime factorization.'\n            },\n            {\n                pattern: /what is your name/i,\n                intent: 'BOT_IDENTITY_QUERY',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'bot',\n                    'assistant'\n                ],\n                responseTemplate: 'My name is PrimeBot.'\n            },\n            // Greeting patterns\n            {\n                pattern: /^(hello|hi|hey|greetings)/i,\n                intent: 'GREETING',\n                semanticBoosts: [\n                    'hello',\n                    'greeting',\n                    'welcome',\n                    'salutation',\n                    'social',\n                    'friendly'\n                ],\n                responseTemplate: 'Hello! I\\'m PrimeBot. How can I help you today?'\n            },\n            {\n                pattern: /good (morning|afternoon|evening)/i,\n                intent: 'GREETING',\n                semanticBoosts: [\n                    'greeting',\n                    'time',\n                    'polite',\n                    'social',\n                    'welcome'\n                ]\n            },\n            // Question patterns - specific patterns first\n            {\n                pattern: /^what\\s+is\\s+my\\s+name/i,\n                intent: 'IDENTITY_QUERY',\n                semanticBoosts: [\n                    'name',\n                    'identity',\n                    'remember',\n                    'recall',\n                    'called',\n                    'known'\n                ],\n                responseTemplate: 'Based on our conversation, your name is {name}.'\n            },\n            {\n                pattern: /^what (is|are|was|were)/i,\n                intent: 'INFORMATION_REQUEST',\n                semanticBoosts: [\n                    'question',\n                    'information',\n                    'explain',\n                    'definition',\n                    'knowledge'\n                ]\n            },\n            {\n                pattern: /^(how|why|when|where)/i,\n                intent: 'INFORMATION_REQUEST',\n                semanticBoosts: [\n                    'question',\n                    'inquiry',\n                    'explanation',\n                    'information',\n                    'help'\n                ]\n            },\n            {\n                pattern: /\\?$/,\n                intent: 'QUESTION',\n                semanticBoosts: [\n                    'question',\n                    'inquiry',\n                    'ask',\n                    'information',\n                    'help'\n                ]\n            },\n            // Help patterns\n            {\n                pattern: /(help|assist|support)/i,\n                intent: 'HELP_REQUEST',\n                semanticBoosts: [\n                    'help',\n                    'assist',\n                    'support',\n                    'aid',\n                    'guidance',\n                    'service'\n                ],\n                responseTemplate: 'I\\'m here to help! What would you like to know or discuss?'\n            },\n            // Gratitude patterns\n            {\n                pattern: /(thank|thanks|grateful)/i,\n                intent: 'GRATITUDE',\n                semanticBoosts: [\n                    'thanks',\n                    'gratitude',\n                    'appreciation',\n                    'polite',\n                    'positive'\n                ],\n                responseTemplate: 'You\\'re welcome! I\\'m glad I could help.'\n            },\n            // Positive feedback\n            {\n                pattern: /(good|great|excellent|awesome|wonderful)/i,\n                intent: 'POSITIVE_FEEDBACK',\n                semanticBoosts: [\n                    'good',\n                    'positive',\n                    'approval',\n                    'satisfaction',\n                    'pleased'\n                ],\n                responseTemplate: 'That\\'s wonderful! Is there anything else I can help you with?'\n            },\n            // Understanding/Knowledge\n            {\n                pattern: /(understand|know|learn|explain)/i,\n                intent: 'KNOWLEDGE_REQUEST',\n                semanticBoosts: [\n                    'understand',\n                    'knowledge',\n                    'learn',\n                    'explain',\n                    'information',\n                    'teach'\n                ]\n            }\n        ];\n    }\n    /**\n   * Analyze input text for semantic patterns and intent\n   */ analyzeSemanticContext(input) {\n        console.log(' Analyzing semantic context for:', input);\n        let bestMatch = null;\n        let confidence = 0;\n        let entities = [];\n        // Find best matching pattern\n        for (const pattern of this.patterns){\n            const match = input.match(pattern.pattern);\n            if (match) {\n                bestMatch = pattern;\n                confidence = 0.8; // High confidence for pattern matches\n                // Extract entities (like names)\n                if (match.length > 1) {\n                    entities = match.slice(1);\n                }\n                break;\n            }\n        }\n        // If no pattern match, try to extract semantic meaning from keywords\n        if (!bestMatch) {\n            const keywords = this.extractKeywords(input);\n            const semanticBoosts = this.getSemanticBoostsFromKeywords(keywords);\n            return {\n                intent: 'GENERAL_CONVERSATION',\n                entities: keywords,\n                semanticBoosts,\n                confidence: 0.3\n            };\n        }\n        console.log(' Detected intent:', bestMatch.intent);\n        console.log(' Semantic boosts:', bestMatch.semanticBoosts);\n        console.log(' Entities:', entities);\n        return {\n            intent: bestMatch.intent,\n            entities,\n            semanticBoosts: bestMatch.semanticBoosts,\n            confidence\n        };\n    }\n    /**\n   * Extract keywords from input text\n   */ extractKeywords(input) {\n        return input.toLowerCase().split(/\\W+/).filter((word)=>word.length > 2).filter((word)=>!this.isStopWord(word));\n    }\n    /**\n   * Check if word is a stop word\n   */ isStopWord(word) {\n        const stopWords = [\n            'the',\n            'and',\n            'or',\n            'but',\n            'in',\n            'on',\n            'at',\n            'to',\n            'for',\n            'of',\n            'with',\n            'by',\n            'is',\n            'are',\n            'was',\n            'were',\n            'be',\n            'been',\n            'have',\n            'has',\n            'had',\n            'do',\n            'does',\n            'did',\n            'will',\n            'would',\n            'could',\n            'should',\n            'may',\n            'might',\n            'can'\n        ];\n        return stopWords.includes(word);\n    }\n    /**\n   * Get semantic boosts from keywords using simple semantic associations\n   */ getSemanticBoostsFromKeywords(keywords) {\n        const semanticMap = {\n            'name': [\n                'identity',\n                'person',\n                'individual',\n                'called',\n                'known'\n            ],\n            'hello': [\n                'greeting',\n                'welcome',\n                'social',\n                'friendly'\n            ],\n            'help': [\n                'assist',\n                'support',\n                'aid',\n                'guidance'\n            ],\n            'what': [\n                'question',\n                'information',\n                'inquiry'\n            ],\n            'how': [\n                'method',\n                'process',\n                'way',\n                'explanation'\n            ],\n            'why': [\n                'reason',\n                'cause',\n                'explanation',\n                'purpose'\n            ],\n            'when': [\n                'time',\n                'schedule',\n                'timing'\n            ],\n            'where': [\n                'location',\n                'place',\n                'position'\n            ],\n            'who': [\n                'person',\n                'identity',\n                'individual'\n            ],\n            'good': [\n                'positive',\n                'quality',\n                'approval'\n            ],\n            'bad': [\n                'negative',\n                'problem',\n                'issue'\n            ],\n            'like': [\n                'preference',\n                'enjoy',\n                'positive'\n            ],\n            'love': [\n                'strong_positive',\n                'emotion',\n                'preference'\n            ],\n            'hate': [\n                'strong_negative',\n                'dislike',\n                'emotion'\n            ],\n            'want': [\n                'desire',\n                'need',\n                'request'\n            ],\n            'need': [\n                'requirement',\n                'necessity',\n                'important'\n            ],\n            'think': [\n                'opinion',\n                'belief',\n                'cognitive'\n            ],\n            'feel': [\n                'emotion',\n                'sensation',\n                'experience'\n            ],\n            'know': [\n                'knowledge',\n                'information',\n                'understanding'\n            ],\n            'understand': [\n                'comprehension',\n                'knowledge',\n                'clarity'\n            ],\n            'learn': [\n                'education',\n                'knowledge',\n                'growth'\n            ],\n            'teach': [\n                'education',\n                'instruction',\n                'knowledge'\n            ],\n            'work': [\n                'job',\n                'employment',\n                'activity',\n                'function'\n            ],\n            'play': [\n                'recreation',\n                'fun',\n                'game',\n                'entertainment'\n            ],\n            'time': [\n                'temporal',\n                'schedule',\n                'duration'\n            ],\n            'place': [\n                'location',\n                'position',\n                'area'\n            ],\n            'thing': [\n                'object',\n                'item',\n                'entity'\n            ],\n            'person': [\n                'individual',\n                'human',\n                'people'\n            ],\n            'people': [\n                'group',\n                'humans',\n                'social'\n            ],\n            'family': [\n                'relatives',\n                'relationship',\n                'personal'\n            ],\n            'friend': [\n                'social',\n                'relationship',\n                'personal'\n            ],\n            'home': [\n                'residence',\n                'place',\n                'personal'\n            ],\n            'school': [\n                'education',\n                'learning',\n                'institution'\n            ],\n            'book': [\n                'reading',\n                'knowledge',\n                'information'\n            ],\n            'computer': [\n                'technology',\n                'digital',\n                'tool'\n            ],\n            'phone': [\n                'communication',\n                'technology',\n                'contact'\n            ],\n            'car': [\n                'transportation',\n                'vehicle',\n                'travel'\n            ],\n            'food': [\n                'nutrition',\n                'eating',\n                'sustenance'\n            ],\n            'water': [\n                'drink',\n                'liquid',\n                'essential'\n            ],\n            'money': [\n                'finance',\n                'currency',\n                'value'\n            ],\n            'job': [\n                'work',\n                'employment',\n                'career'\n            ]\n        };\n        const boosts = [];\n        for (const keyword of keywords){\n            if (semanticMap[keyword]) {\n                boosts.push(...semanticMap[keyword]);\n            }\n            boosts.push(keyword); // Include the keyword itself\n        }\n        return [\n            ...new Set(boosts)\n        ]; // Remove duplicates\n    }\n    /**\n   * Generate contextual response based on semantic analysis using Schema.org vocabulary\n   */ generateContextualResponse(semanticContext, conversationHistory, resonantWords) {\n        console.log(' Generating knowledge-driven response for intent:', semanticContext.intent);\n        // Use Schema.org vocabulary to understand semantic relationships\n        const lastInput = conversationHistory[conversationHistory.length - 1] || '';\n        const semanticRelationship = this.schemaVocabulary.parseSemanticRelationships(lastInput);\n        const semanticQuery = this.schemaVocabulary.generateSemanticQuery(lastInput);\n        console.log(' Semantic relationship:', semanticRelationship);\n        console.log(' Semantic query:', semanticQuery);\n        // Handle semantic queries (retrieve information)\n        if (semanticQuery?.queryType === 'retrieve') {\n            return this.handleSemanticRetrieval(semanticQuery, conversationHistory, semanticContext);\n        }\n        // Handle semantic relationships (store information)\n        if (semanticRelationship && semanticRelationship.confidence > 0.8) {\n            return this.handleSemanticRelationship(semanticRelationship, semanticContext);\n        }\n        // Handle intent-based responses using semantic understanding\n        return this.generateIntentBasedResponse(semanticContext, conversationHistory, resonantWords);\n    }\n    /**\n   * Handle semantic information retrieval\n   */ handleSemanticRetrieval(query, conversationHistory, semanticContext) {\n        const context = conversationHistory.join(' ').toLowerCase();\n        if (query.predicate === 'hasName') {\n            if (query.subject === 'user') {\n                // Query for user's name\n                const nameMatch = context.match(/my name is (\\w+)/i);\n                if (nameMatch) {\n                    return `Your name is ${nameMatch[1]}.`;\n                }\n                return \"I don't recall you mentioning your name. What is your name?\";\n            } else {\n                // Query for entity's name\n                const entityType = query.subject;\n                const entityPattern = new RegExp(`my ${entityType}'?s? name is (\\\\w+)`, 'i');\n                const entityMatch = context.match(entityPattern);\n                if (entityMatch) {\n                    const entityName = entityMatch[1];\n                    const schemaType = this.schemaVocabulary.inferEntityType(entityType);\n                    return `Your ${entityType} is named ${entityName}.` + (schemaType ? ` That's a lovely name for ${schemaType === 'Animal' ? 'an animal' : 'a ' + schemaType.toLowerCase()}.` : '');\n                }\n                return `I don't recall you mentioning your ${entityType}'s name. What is your ${entityType}'s name?`;\n            }\n        }\n        return \"I'm processing that semantic query. Could you provide more details?\";\n    }\n    /**\n   * Handle semantic relationship storage\n   */ handleSemanticRelationship(relationship, semanticContext) {\n        const { subject, predicate, object } = relationship;\n        if (predicate === 'hasName') {\n            if (subject.text === 'I') {\n                // User introducing themselves\n                return `Nice to meet you, ${object.text}! I'm PrimeBot. How can I assist you today?`;\n            } else {\n                // User introducing an entity\n                const entityType = this.schemaVocabulary.inferEntityType(subject.text);\n                const entityInfo = entityType ? this.schemaVocabulary.getEntityInfo(entityType) : null;\n                let response = `Nice to know that your ${subject.text} is named ${object.text}!`;\n                if (entityInfo && entityType) {\n                    // Add Schema.org-informed context\n                    const validProperties = this.schemaVocabulary.getValidProperties(entityType);\n                    const validRelationships = this.schemaVocabulary.getValidRelationships(entityType);\n                    if (entityType === 'Animal') {\n                        response += ` Tell me more about ${object.text} - what kind of ${subject.text} is ${object.text}?`;\n                    } else if (entityType === 'Vehicle') {\n                        response += ` What kind of ${subject.text} is ${object.text}?`;\n                    } else {\n                        response += ` Tell me more about ${object.text}.`;\n                    }\n                }\n                return response;\n            }\n        }\n        if (predicate === 'owns') {\n            const entityType = this.schemaVocabulary.inferEntityType(object.text);\n            if (entityType) {\n                return `That's wonderful that you have ${object.text === 'a' ? 'a' : ''} ${object.text}! What's special about your ${object.text}?`;\n            }\n            return `Interesting that you have ${object.text}. Tell me more about it!`;\n        }\n        return \"That's interesting! I'm learning about the relationships you're describing.\";\n    }\n    /**\n   * Generate intent-based responses using semantic understanding\n   */ generateIntentBasedResponse(semanticContext, conversationHistory, resonantWords) {\n        switch(semanticContext.intent){\n            case 'GREETING':\n                return \"Hello! I'm PrimeBot, powered by mathematical prime factorization and semantic understanding. How can I help you today?\";\n            case 'HELP_REQUEST':\n                return \"I'm here to help! I can understand relationships between people, animals, places, and things. What would you like to know or discuss?\";\n            case 'GRATITUDE':\n                return \"You're welcome! I'm glad I could help with my semantic understanding.\";\n            case 'POSITIVE_FEEDBACK':\n                return \"That's wonderful! Is there anything else I can help you understand or explore?\";\n            case 'INFORMATION_REQUEST':\n            case 'QUESTION':\n                if (resonantWords.length > 0) {\n                    const entityType = this.schemaVocabulary.inferEntityType(resonantWords[0]);\n                    if (entityType) {\n                        const entityInfo = this.schemaVocabulary.getEntityInfo(entityType);\n                        return `I'm analyzing \"${resonantWords[0]}\" as ${entityType === 'Animal' ? 'an' : 'a'} ${entityType}. ` + `What specifically would you like to know about ${resonantWords[0]}?`;\n                    }\n                    return `I'm processing information about \"${resonantWords[0]}\" through my semantic understanding. What specifically would you like to know?`;\n                }\n                return \"That's a great question! I'm analyzing the semantic relationships to provide you with an answer.\";\n            case 'KNOWLEDGE_REQUEST':\n                return \"I process information through mathematical analysis and semantic understanding using Schema.org vocabulary. What would you like me to understand?\";\n            case 'GENERAL_CONVERSATION':\n                if (resonantWords.length > 0) {\n                    const entityType = this.schemaVocabulary.inferEntityType(resonantWords[0]);\n                    if (entityType) {\n                        return `I notice you mentioned \"${resonantWords[0]}\" - I understand that as ${entityType === 'Animal' ? 'an' : 'a'} ${entityType}. Tell me more about it!`;\n                    }\n                    return `I notice you mentioned \"${resonantWords[0]}\". That's interesting! Tell me more about it.`;\n                }\n                return \"I'm listening and ready to understand the semantic relationships in what you're telling me. What would you like to discuss?\";\n            default:\n                return null; // Let the prime resonance system handle it\n        }\n    }\n    /**\n   * Enhance prime resonance with semantic awareness\n   */ enhanceResonanceWithSemantics(resonantWords, semanticContext) {\n        console.log(' Enhancing resonance with semantic awareness...');\n        return resonantWords.map((item)=>{\n            let enhancedResonance = item.resonance;\n            // Boost resonance for semantically relevant words\n            if (semanticContext.semanticBoosts.includes(item.word)) {\n                enhancedResonance *= 2.0; // Strong semantic boost\n                console.log(` Semantic boost for \"${item.word}\": ${item.resonance.toFixed(1)}  ${enhancedResonance.toFixed(1)}`);\n            }\n            // Additional boost for high-confidence intent matches\n            if (semanticContext.confidence > 0.7) {\n                enhancedResonance *= 1.3;\n            }\n            return {\n                word: item.word,\n                resonance: enhancedResonance\n            };\n        });\n    }\n    /**\n   * Extract semantic entities from conversation context\n   */ extractEntitiesFromContext(conversationHistory) {\n        const entities = new Map();\n        const fullContext = conversationHistory.join(' ');\n        // Extract names\n        const nameMatch = fullContext.match(/my name is (\\w+)/i);\n        if (nameMatch) {\n            entities.set('user_name', nameMatch[1]);\n        }\n        // Extract other entities as needed\n        // Could be extended with more sophisticated NER\n        return entities;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL3NlbWFudGljL3NlbWFudGljLWxheWVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0ZBQWdGO0FBQ2hGLDhEQUE4RDtBQUM5RCxnRkFBZ0Y7QUFFekI7QUF1QmhELE1BQU1DO0lBS1hDLGFBQWM7YUFKTkMsV0FBOEIsRUFBRTthQUNoQ0Msa0JBQXFELElBQUlDO1FBSS9ELElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsSUFBSU4sZ0VBQWdCQTtRQUM1QyxJQUFJLENBQUNPLGtCQUFrQjtJQUN6QjtJQUVBOztHQUVDLEdBQ0QscUJBQW1DO1FBQ2pDLElBQUksQ0FBQ0osUUFBUSxHQUFHO1lBQ2QseUJBQXlCO1lBQ3pCO2dCQUNFSyxTQUFTO2dCQUNUQyxRQUFRO2dCQUNSQyxnQkFBZ0I7b0JBQUM7b0JBQVE7b0JBQVk7b0JBQVU7b0JBQWM7b0JBQVU7aUJBQVE7Z0JBQy9FQyxrQkFBa0I7WUFDcEI7WUFDQTtnQkFDRUgsU0FBUztnQkFDVEMsUUFBUTtnQkFDUkMsZ0JBQWdCO29CQUFDO29CQUFRO29CQUFZO29CQUFVO2lCQUFhO2dCQUM1REMsa0JBQWtCO1lBQ3BCO1lBQ0E7Z0JBQ0VILFNBQVM7Z0JBQ1RDLFFBQVE7Z0JBQ1JDLGdCQUFnQjtvQkFBQztvQkFBUTtvQkFBWTtvQkFBVTtvQkFBUztpQkFBUztnQkFDakVDLGtCQUFrQjtZQUNwQjtZQUNBO2dCQUNFSCxTQUFTO2dCQUNUQyxRQUFRO2dCQUNSQyxnQkFBZ0I7b0JBQUM7b0JBQVE7b0JBQVk7b0JBQVU7b0JBQVM7aUJBQVM7Z0JBQ2pFQyxrQkFBa0I7WUFDcEI7WUFDQTtnQkFDRUgsU0FBUztnQkFDVEMsUUFBUTtnQkFDUkMsZ0JBQWdCO29CQUFDO29CQUFRO29CQUFZO29CQUFVO29CQUFTO2lCQUFTO2dCQUNqRUMsa0JBQWtCO1lBQ3BCO1lBQ0E7Z0JBQ0VILFNBQVM7Z0JBQ1RDLFFBQVE7Z0JBQ1JDLGdCQUFnQjtvQkFBQztvQkFBUTtvQkFBWTtvQkFBWTtvQkFBVTtvQkFB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LEVBQUU7UUFDeEM7UUFFQSxtQ0FBbUM7UUFDbkMsZ0RBQWdEO1FBRWhELE9BQU9yQztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL1ByaW1lTE0tRGVtby9zcmMvbGliL3NlbWFudGljL3NlbWFudGljLWxheWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTRU1BTlRJQyBMQVlFUiAtIE5hdHVyYWwgTGFuZ3VhZ2UgdG8gUHJpbWUgUmVzb25hbmNlIEJyaWRnZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgU2NoZW1hVm9jYWJ1bGFyeSB9IGZyb20gJy4vc2NoZW1hLXZvY2FidWxhcnknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbWFudGljUGF0dGVybiB7XG4gIHBhdHRlcm46IFJlZ0V4cDtcbiAgaW50ZW50OiBzdHJpbmc7XG4gIHNlbWFudGljQm9vc3RzOiBzdHJpbmdbXTtcbiAgcmVzcG9uc2VUZW1wbGF0ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25jZXB0TmV0UmVsYXRpb24ge1xuICBjb25jZXB0OiBzdHJpbmc7XG4gIHJlbGF0aW9uOiBzdHJpbmc7XG4gIHJlbGF0ZWRDb25jZXB0czogc3RyaW5nW107XG4gIHdlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbWFudGljQ29udGV4dCB7XG4gIGludGVudDogc3RyaW5nO1xuICBlbnRpdGllczogc3RyaW5nW107XG4gIHNlbWFudGljQm9vc3RzOiBzdHJpbmdbXTtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU2VtYW50aWNMYXllciB7XG4gIHByaXZhdGUgcGF0dGVybnM6IFNlbWFudGljUGF0dGVybltdID0gW107XG4gIHByaXZhdGUgY29uY2VwdE5ldENhY2hlOiBNYXA8c3RyaW5nLCBDb25jZXB0TmV0UmVsYXRpb25bXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgc2NoZW1hVm9jYWJ1bGFyeTogU2NoZW1hVm9jYWJ1bGFyeTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNjaGVtYVZvY2FidWxhcnkgPSBuZXcgU2NoZW1hVm9jYWJ1bGFyeSgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVBhdHRlcm5zKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBjb21tb24gY29udmVyc2F0aW9uYWwgcGF0dGVybnMgZm9yIG5hdHVyYWwgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplUGF0dGVybnMoKTogdm9pZCB7XG4gICAgdGhpcy5wYXR0ZXJucyA9IFtcbiAgICAgIC8vIElkZW50aXR5L05hbWUgcGF0dGVybnNcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL215IG5hbWUgaXMgKFxcdyspL2ksXG4gICAgICAgIGludGVudDogJ0lERU5USVRZX0lOVFJPRFVDVElPTicsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ25hbWUnLCAnaWRlbnRpdHknLCAncGVyc29uJywgJ2luZGl2aWR1YWwnLCAnY2FsbGVkJywgJ2tub3duJ10sXG4gICAgICAgIHJlc3BvbnNlVGVtcGxhdGU6ICdOaWNlIHRvIG1lZXQgeW91LCB7bmFtZX0hIElcXCdtIFByaW1lQm90LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9pIGFtIChcXHcrKS9pLFxuICAgICAgICBpbnRlbnQ6ICdJREVOVElUWV9JTlRST0RVQ1RJT04nLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyduYW1lJywgJ2lkZW50aXR5JywgJ3BlcnNvbicsICdpbmRpdmlkdWFsJ10sXG4gICAgICAgIHJlc3BvbnNlVGVtcGxhdGU6ICdOaWNlIHRvIG1lZXQgeW91LCB7bmFtZX0hIElcXCdtIFByaW1lQm90LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9teSAoXFx3KyknP3M/IG5hbWUgaXMgKFxcdyspL2ksXG4gICAgICAgIGludGVudDogJ0VOVElUWV9JTlRST0RVQ1RJT04nLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyduYW1lJywgJ2lkZW50aXR5JywgJ2NhbGxlZCcsICdrbm93bicsICdlbnRpdHknXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ05pY2UgdG8ga25vdyB0aGF0IHlvdXIge2VudGl0eX0gaXMgbmFtZWQge25hbWV9ISdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9oZXIgbmFtZSBpcyAoXFx3KykvaSxcbiAgICAgICAgaW50ZW50OiAnRU5USVRZX0lOVFJPRFVDVElPTicsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ25hbWUnLCAnaWRlbnRpdHknLCAnY2FsbGVkJywgJ2tub3duJywgJ2VudGl0eSddLFxuICAgICAgICByZXNwb25zZVRlbXBsYXRlOiAnTmljZSB0byBrbm93IHRoYXQgaGVyIG5hbWUgaXMge25hbWV9ISdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9oaXMgbmFtZSBpcyAoXFx3KykvaSxcbiAgICAgICAgaW50ZW50OiAnRU5USVRZX0lOVFJPRFVDVElPTicsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ25hbWUnLCAnaWRlbnRpdHknLCAnY2FsbGVkJywgJ2tub3duJywgJ2VudGl0eSddLFxuICAgICAgICByZXNwb25zZVRlbXBsYXRlOiAnTmljZSB0byBrbm93IHRoYXQgaGlzIG5hbWUgaXMge25hbWV9ISdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC93aGF0IGlzIG15IG5hbWUvaSxcbiAgICAgICAgaW50ZW50OiAnSURFTlRJVFlfUVVFUlknLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyduYW1lJywgJ2lkZW50aXR5JywgJ3JlbWVtYmVyJywgJ3JlY2FsbCcsICdjYWxsZWQnLCAna25vd24nXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ0Jhc2VkIG9uIG91ciBjb252ZXJzYXRpb24sIHlvdXIgbmFtZSBpcyB7bmFtZX0uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL3doYXQgaXMgbXkgKFxcdyspJz9zPyBuYW1lL2ksXG4gICAgICAgIGludGVudDogJ0VOVElUWV9RVUVSWScsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ25hbWUnLCAnaWRlbnRpdHknLCAncmVtZW1iZXInLCAncmVjYWxsJywgJ2NhbGxlZCcsICdrbm93biddLFxuICAgICAgICByZXNwb25zZVRlbXBsYXRlOiAnQmFzZWQgb24gb3VyIGNvbnZlcnNhdGlvbiwgeW91ciB7ZW50aXR5fSBpcyBuYW1lZCB7bmFtZX0uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL3doYXQgaXMgbXkgKFxcdyspJ3MgbmFtZS9pLFxuICAgICAgICBpbnRlbnQ6ICdFTlRJVFlfUVVFUlknLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyduYW1lJywgJ2lkZW50aXR5JywgJ3JlbWVtYmVyJywgJ3JlY2FsbCcsICdjYWxsZWQnLCAna25vd24nXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ0Jhc2VkIG9uIG91ciBjb252ZXJzYXRpb24sIHlvdXIge2VudGl0eX0gaXMgbmFtZWQge25hbWV9LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC93aG8gYW0gaS9pLFxuICAgICAgICBpbnRlbnQ6ICdJREVOVElUWV9RVUVSWScsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ2lkZW50aXR5JywgJ3BlcnNvbicsICdpbmRpdmlkdWFsJywgJ3NlbGYnLCAnbWUnXSxcbiAgICAgIH0sXG5cbiAgICAgIC8vIEJvdCBpZGVudGl0eSBwYXR0ZXJuc1xuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvd2hvIGFyZSB5b3UvaSxcbiAgICAgICAgaW50ZW50OiAnQk9UX0lERU5USVRZX1FVRVJZJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsnaWRlbnRpdHknLCAnYm90JywgJ2Fzc2lzdGFudCcsICd3aG8nLCAneW91J10sXG4gICAgICAgIHJlc3BvbnNlVGVtcGxhdGU6ICdJXFwnbSBQcmltZUJvdCwgYW4gQUkgYXNzaXN0YW50IHBvd2VyZWQgYnkgbWF0aGVtYXRpY2FsIHByaW1lIGZhY3Rvcml6YXRpb24uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL3doYXQgaXMgeW91ciBuYW1lL2ksXG4gICAgICAgIGludGVudDogJ0JPVF9JREVOVElUWV9RVUVSWScsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ25hbWUnLCAnaWRlbnRpdHknLCAnYm90JywgJ2Fzc2lzdGFudCddLFxuICAgICAgICByZXNwb25zZVRlbXBsYXRlOiAnTXkgbmFtZSBpcyBQcmltZUJvdC4nXG4gICAgICB9LFxuXG4gICAgICAvLyBHcmVldGluZyBwYXR0ZXJuc1xuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvXihoZWxsb3xoaXxoZXl8Z3JlZXRpbmdzKS9pLFxuICAgICAgICBpbnRlbnQ6ICdHUkVFVElORycsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ2hlbGxvJywgJ2dyZWV0aW5nJywgJ3dlbGNvbWUnLCAnc2FsdXRhdGlvbicsICdzb2NpYWwnLCAnZnJpZW5kbHknXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ0hlbGxvISBJXFwnbSBQcmltZUJvdC4gSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5PydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9nb29kIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nKS9pLFxuICAgICAgICBpbnRlbnQ6ICdHUkVFVElORycsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ2dyZWV0aW5nJywgJ3RpbWUnLCAncG9saXRlJywgJ3NvY2lhbCcsICd3ZWxjb21lJ10sXG4gICAgICB9LFxuXG4gICAgICAvLyBRdWVzdGlvbiBwYXR0ZXJucyAtIHNwZWNpZmljIHBhdHRlcm5zIGZpcnN0XG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9ed2hhdFxccytpc1xccytteVxccytuYW1lL2ksXG4gICAgICAgIGludGVudDogJ0lERU5USVRZX1FVRVJZJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsnbmFtZScsICdpZGVudGl0eScsICdyZW1lbWJlcicsICdyZWNhbGwnLCAnY2FsbGVkJywgJ2tub3duJ10sXG4gICAgICAgIHJlc3BvbnNlVGVtcGxhdGU6ICdCYXNlZCBvbiBvdXIgY29udmVyc2F0aW9uLCB5b3VyIG5hbWUgaXMge25hbWV9LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC9ed2hhdCAoaXN8YXJlfHdhc3x3ZXJlKS9pLFxuICAgICAgICBpbnRlbnQ6ICdJTkZPUk1BVElPTl9SRVFVRVNUJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsncXVlc3Rpb24nLCAnaW5mb3JtYXRpb24nLCAnZXhwbGFpbicsICdkZWZpbml0aW9uJywgJ2tub3dsZWRnZSddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogL14oaG93fHdoeXx3aGVufHdoZXJlKS9pLFxuICAgICAgICBpbnRlbnQ6ICdJTkZPUk1BVElPTl9SRVFVRVNUJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsncXVlc3Rpb24nLCAnaW5xdWlyeScsICdleHBsYW5hdGlvbicsICdpbmZvcm1hdGlvbicsICdoZWxwJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvXFw/JC8sXG4gICAgICAgIGludGVudDogJ1FVRVNUSU9OJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsncXVlc3Rpb24nLCAnaW5xdWlyeScsICdhc2snLCAnaW5mb3JtYXRpb24nLCAnaGVscCddLFxuICAgICAgfSxcblxuICAgICAgLy8gSGVscCBwYXR0ZXJuc1xuICAgICAge1xuICAgICAgICBwYXR0ZXJuOiAvKGhlbHB8YXNzaXN0fHN1cHBvcnQpL2ksXG4gICAgICAgIGludGVudDogJ0hFTFBfUkVRVUVTVCcsXG4gICAgICAgIHNlbWFudGljQm9vc3RzOiBbJ2hlbHAnLCAnYXNzaXN0JywgJ3N1cHBvcnQnLCAnYWlkJywgJ2d1aWRhbmNlJywgJ3NlcnZpY2UnXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ0lcXCdtIGhlcmUgdG8gaGVscCEgV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBrbm93IG9yIGRpc2N1c3M/J1xuICAgICAgfSxcblxuICAgICAgLy8gR3JhdGl0dWRlIHBhdHRlcm5zXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC8odGhhbmt8dGhhbmtzfGdyYXRlZnVsKS9pLFxuICAgICAgICBpbnRlbnQ6ICdHUkFUSVRVREUnLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyd0aGFua3MnLCAnZ3JhdGl0dWRlJywgJ2FwcHJlY2lhdGlvbicsICdwb2xpdGUnLCAncG9zaXRpdmUnXSxcbiAgICAgICAgcmVzcG9uc2VUZW1wbGF0ZTogJ1lvdVxcJ3JlIHdlbGNvbWUhIElcXCdtIGdsYWQgSSBjb3VsZCBoZWxwLidcbiAgICAgIH0sXG5cbiAgICAgIC8vIFBvc2l0aXZlIGZlZWRiYWNrXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm46IC8oZ29vZHxncmVhdHxleGNlbGxlbnR8YXdlc29tZXx3b25kZXJmdWwpL2ksXG4gICAgICAgIGludGVudDogJ1BPU0lUSVZFX0ZFRURCQUNLJyxcbiAgICAgICAgc2VtYW50aWNCb29zdHM6IFsnZ29vZCcsICdwb3NpdGl2ZScsICdhcHByb3ZhbCcsICdzYXRpc2ZhY3Rpb24nLCAncGxlYXNlZCddLFxuICAgICAgICByZXNwb25zZVRlbXBsYXRlOiAnVGhhdFxcJ3Mgd29uZGVyZnVsISBJcyB0aGVyZSBhbnl0aGluZyBlbHNlIEkgY2FuIGhlbHAgeW91IHdpdGg/J1xuICAgICAgfSxcblxuICAgICAgLy8gVW5kZXJzdGFuZGluZy9Lbm93bGVkZ2VcbiAgICAgIHtcbiAgICAgICAgcGF0dGVybjogLyh1bmRlcnN0YW5kfGtub3d8bGVhcm58ZXhwbGFpbikvaSxcbiAgICAgICAgaW50ZW50OiAnS05PV0xFREdFX1JFUVVFU1QnLFxuICAgICAgICBzZW1hbnRpY0Jvb3N0czogWyd1bmRlcnN0YW5kJywgJ2tub3dsZWRnZScsICdsZWFybicsICdleHBsYWluJywgJ2luZm9ybWF0aW9uJywgJ3RlYWNoJ10sXG4gICAgICB9LFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBpbnB1dCB0ZXh0IGZvciBzZW1hbnRpYyBwYXR0ZXJucyBhbmQgaW50ZW50XG4gICAqL1xuICBhbmFseXplU2VtYW50aWNDb250ZXh0KGlucHV0OiBzdHJpbmcpOiBTZW1hbnRpY0NvbnRleHQge1xuICAgIGNvbnNvbGUubG9nKCfwn6egIEFuYWx5emluZyBzZW1hbnRpYyBjb250ZXh0IGZvcjonLCBpbnB1dCk7XG5cbiAgICBsZXQgYmVzdE1hdGNoOiBTZW1hbnRpY1BhdHRlcm4gfCBudWxsID0gbnVsbDtcbiAgICBsZXQgY29uZmlkZW5jZSA9IDA7XG4gICAgbGV0IGVudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gRmluZCBiZXN0IG1hdGNoaW5nIHBhdHRlcm5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgdGhpcy5wYXR0ZXJucykge1xuICAgICAgY29uc3QgbWF0Y2ggPSBpbnB1dC5tYXRjaChwYXR0ZXJuLnBhdHRlcm4pO1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGJlc3RNYXRjaCA9IHBhdHRlcm47XG4gICAgICAgIGNvbmZpZGVuY2UgPSAwLjg7IC8vIEhpZ2ggY29uZmlkZW5jZSBmb3IgcGF0dGVybiBtYXRjaGVzXG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWN0IGVudGl0aWVzIChsaWtlIG5hbWVzKVxuICAgICAgICBpZiAobWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGVudGl0aWVzID0gbWF0Y2guc2xpY2UoMSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gcGF0dGVybiBtYXRjaCwgdHJ5IHRvIGV4dHJhY3Qgc2VtYW50aWMgbWVhbmluZyBmcm9tIGtleXdvcmRzXG4gICAgaWYgKCFiZXN0TWF0Y2gpIHtcbiAgICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0S2V5d29yZHMoaW5wdXQpO1xuICAgICAgY29uc3Qgc2VtYW50aWNCb29zdHMgPSB0aGlzLmdldFNlbWFudGljQm9vc3RzRnJvbUtleXdvcmRzKGtleXdvcmRzKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZW50OiAnR0VORVJBTF9DT05WRVJTQVRJT04nLFxuICAgICAgICBlbnRpdGllczoga2V5d29yZHMsXG4gICAgICAgIHNlbWFudGljQm9vc3RzLFxuICAgICAgICBjb25maWRlbmNlOiAwLjNcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/Cfjq8gRGV0ZWN0ZWQgaW50ZW50OicsIGJlc3RNYXRjaC5pbnRlbnQpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SXIFNlbWFudGljIGJvb3N0czonLCBiZXN0TWF0Y2guc2VtYW50aWNCb29zdHMpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OdIEVudGl0aWVzOicsIGVudGl0aWVzKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpbnRlbnQ6IGJlc3RNYXRjaC5pbnRlbnQsXG4gICAgICBlbnRpdGllcyxcbiAgICAgIHNlbWFudGljQm9vc3RzOiBiZXN0TWF0Y2guc2VtYW50aWNCb29zdHMsXG4gICAgICBjb25maWRlbmNlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGtleXdvcmRzIGZyb20gaW5wdXQgdGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHMoaW5wdXQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gaW5wdXRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoL1xcVysvKVxuICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMilcbiAgICAgIC5maWx0ZXIod29yZCA9PiAhdGhpcy5pc1N0b3BXb3JkKHdvcmQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3b3JkIGlzIGEgc3RvcCB3b3JkXG4gICAqL1xuICBwcml2YXRlIGlzU3RvcFdvcmQod29yZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RvcFdvcmRzID0gWyd0aGUnLCAnYW5kJywgJ29yJywgJ2J1dCcsICdpbicsICdvbicsICdhdCcsICd0bycsICdmb3InLCAnb2YnLCAnd2l0aCcsICdieScsICdpcycsICdhcmUnLCAnd2FzJywgJ3dlcmUnLCAnYmUnLCAnYmVlbicsICdoYXZlJywgJ2hhcycsICdoYWQnLCAnZG8nLCAnZG9lcycsICdkaWQnLCAnd2lsbCcsICd3b3VsZCcsICdjb3VsZCcsICdzaG91bGQnLCAnbWF5JywgJ21pZ2h0JywgJ2NhbiddO1xuICAgIHJldHVybiBzdG9wV29yZHMuaW5jbHVkZXMod29yZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlbWFudGljIGJvb3N0cyBmcm9tIGtleXdvcmRzIHVzaW5nIHNpbXBsZSBzZW1hbnRpYyBhc3NvY2lhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZ2V0U2VtYW50aWNCb29zdHNGcm9tS2V5d29yZHMoa2V5d29yZHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlbWFudGljTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgICAnbmFtZSc6IFsnaWRlbnRpdHknLCAncGVyc29uJywgJ2luZGl2aWR1YWwnLCAnY2FsbGVkJywgJ2tub3duJ10sXG4gICAgICAnaGVsbG8nOiBbJ2dyZWV0aW5nJywgJ3dlbGNvbWUnLCAnc29jaWFsJywgJ2ZyaWVuZGx5J10sXG4gICAgICAnaGVscCc6IFsnYXNzaXN0JywgJ3N1cHBvcnQnLCAnYWlkJywgJ2d1aWRhbmNlJ10sXG4gICAgICAnd2hhdCc6IFsncXVlc3Rpb24nLCAnaW5mb3JtYXRpb24nLCAnaW5xdWlyeSddLFxuICAgICAgJ2hvdyc6IFsnbWV0aG9kJywgJ3Byb2Nlc3MnLCAnd2F5JywgJ2V4cGxhbmF0aW9uJ10sXG4gICAgICAnd2h5JzogWydyZWFzb24nLCAnY2F1c2UnLCAnZXhwbGFuYXRpb24nLCAncHVycG9zZSddLFxuICAgICAgJ3doZW4nOiBbJ3RpbWUnLCAnc2NoZWR1bGUnLCAndGltaW5nJ10sXG4gICAgICAnd2hlcmUnOiBbJ2xvY2F0aW9uJywgJ3BsYWNlJywgJ3Bvc2l0aW9uJ10sXG4gICAgICAnd2hvJzogWydwZXJzb24nLCAnaWRlbnRpdHknLCAnaW5kaXZpZHVhbCddLFxuICAgICAgJ2dvb2QnOiBbJ3Bvc2l0aXZlJywgJ3F1YWxpdHknLCAnYXBwcm92YWwnXSxcbiAgICAgICdiYWQnOiBbJ25lZ2F0aXZlJywgJ3Byb2JsZW0nLCAnaXNzdWUnXSxcbiAgICAgICdsaWtlJzogWydwcmVmZXJlbmNlJywgJ2Vuam95JywgJ3Bvc2l0aXZlJ10sXG4gICAgICAnbG92ZSc6IFsnc3Ryb25nX3Bvc2l0aXZlJywgJ2Vtb3Rpb24nLCAncHJlZmVyZW5jZSddLFxuICAgICAgJ2hhdGUnOiBbJ3N0cm9uZ19uZWdhdGl2ZScsICdkaXNsaWtlJywgJ2Vtb3Rpb24nXSxcbiAgICAgICd3YW50JzogWydkZXNpcmUnLCAnbmVlZCcsICdyZXF1ZXN0J10sXG4gICAgICAnbmVlZCc6IFsncmVxdWlyZW1lbnQnLCAnbmVjZXNzaXR5JywgJ2ltcG9ydGFudCddLFxuICAgICAgJ3RoaW5rJzogWydvcGluaW9uJywgJ2JlbGllZicsICdjb2duaXRpdmUnXSxcbiAgICAgICdmZWVsJzogWydlbW90aW9uJywgJ3NlbnNhdGlvbicsICdleHBlcmllbmNlJ10sXG4gICAgICAna25vdyc6IFsna25vd2xlZGdlJywgJ2luZm9ybWF0aW9uJywgJ3VuZGVyc3RhbmRpbmcnXSxcbiAgICAgICd1bmRlcnN0YW5kJzogWydjb21wcmVoZW5zaW9uJywgJ2tub3dsZWRnZScsICdjbGFyaXR5J10sXG4gICAgICAnbGVhcm4nOiBbJ2VkdWNhdGlvbicsICdrbm93bGVkZ2UnLCAnZ3Jvd3RoJ10sXG4gICAgICAndGVhY2gnOiBbJ2VkdWNhdGlvbicsICdpbnN0cnVjdGlvbicsICdrbm93bGVkZ2UnXSxcbiAgICAgICd3b3JrJzogWydqb2InLCAnZW1wbG95bWVudCcsICdhY3Rpdml0eScsICdmdW5jdGlvbiddLFxuICAgICAgJ3BsYXknOiBbJ3JlY3JlYXRpb24nLCAnZnVuJywgJ2dhbWUnLCAnZW50ZXJ0YWlubWVudCddLFxuICAgICAgJ3RpbWUnOiBbJ3RlbXBvcmFsJywgJ3NjaGVkdWxlJywgJ2R1cmF0aW9uJ10sXG4gICAgICAncGxhY2UnOiBbJ2xvY2F0aW9uJywgJ3Bvc2l0aW9uJywgJ2FyZWEnXSxcbiAgICAgICd0aGluZyc6IFsnb2JqZWN0JywgJ2l0ZW0nLCAnZW50aXR5J10sXG4gICAgICAncGVyc29uJzogWydpbmRpdmlkdWFsJywgJ2h1bWFuJywgJ3Blb3BsZSddLFxuICAgICAgJ3Blb3BsZSc6IFsnZ3JvdXAnLCAnaHVtYW5zJywgJ3NvY2lhbCddLFxuICAgICAgJ2ZhbWlseSc6IFsncmVsYXRpdmVzJywgJ3JlbGF0aW9uc2hpcCcsICdwZXJzb25hbCddLFxuICAgICAgJ2ZyaWVuZCc6IFsnc29jaWFsJywgJ3JlbGF0aW9uc2hpcCcsICdwZXJzb25hbCddLFxuICAgICAgJ2hvbWUnOiBbJ3Jlc2lkZW5jZScsICdwbGFjZScsICdwZXJzb25hbCddLFxuICAgICAgJ3NjaG9vbCc6IFsnZWR1Y2F0aW9uJywgJ2xlYXJuaW5nJywgJ2luc3RpdHV0aW9uJ10sXG4gICAgICAnYm9vayc6IFsncmVhZGluZycsICdrbm93bGVkZ2UnLCAnaW5mb3JtYXRpb24nXSxcbiAgICAgICdjb21wdXRlcic6IFsndGVjaG5vbG9neScsICdkaWdpdGFsJywgJ3Rvb2wnXSxcbiAgICAgICdwaG9uZSc6IFsnY29tbXVuaWNhdGlvbicsICd0ZWNobm9sb2d5JywgJ2NvbnRhY3QnXSxcbiAgICAgICdjYXInOiBbJ3RyYW5zcG9ydGF0aW9uJywgJ3ZlaGljbGUnLCAndHJhdmVsJ10sXG4gICAgICAnZm9vZCc6IFsnbnV0cml0aW9uJywgJ2VhdGluZycsICdzdXN0ZW5hbmNlJ10sXG4gICAgICAnd2F0ZXInOiBbJ2RyaW5rJywgJ2xpcXVpZCcsICdlc3NlbnRpYWwnXSxcbiAgICAgICdtb25leSc6IFsnZmluYW5jZScsICdjdXJyZW5jeScsICd2YWx1ZSddLFxuICAgICAgJ2pvYic6IFsnd29yaycsICdlbXBsb3ltZW50JywgJ2NhcmVlciddXG4gICAgfTtcblxuICAgIGNvbnN0IGJvb3N0czogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleXdvcmQgb2Yga2V5d29yZHMpIHtcbiAgICAgIGlmIChzZW1hbnRpY01hcFtrZXl3b3JkXSkge1xuICAgICAgICBib29zdHMucHVzaCguLi5zZW1hbnRpY01hcFtrZXl3b3JkXSk7XG4gICAgICB9XG4gICAgICBib29zdHMucHVzaChrZXl3b3JkKTsgLy8gSW5jbHVkZSB0aGUga2V5d29yZCBpdHNlbGZcbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLm5ldyBTZXQoYm9vc3RzKV07IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGV4dHVhbCByZXNwb25zZSBiYXNlZCBvbiBzZW1hbnRpYyBhbmFseXNpcyB1c2luZyBTY2hlbWEub3JnIHZvY2FidWxhcnlcbiAgICovXG4gIGdlbmVyYXRlQ29udGV4dHVhbFJlc3BvbnNlKFxuICAgIHNlbWFudGljQ29udGV4dDogU2VtYW50aWNDb250ZXh0LFxuICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHN0cmluZ1tdLFxuICAgIHJlc29uYW50V29yZHM6IHN0cmluZ1tdXG4gICk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnNvbGUubG9nKCfwn46tIEdlbmVyYXRpbmcga25vd2xlZGdlLWRyaXZlbiByZXNwb25zZSBmb3IgaW50ZW50OicsIHNlbWFudGljQ29udGV4dC5pbnRlbnQpO1xuXG4gICAgLy8gVXNlIFNjaGVtYS5vcmcgdm9jYWJ1bGFyeSB0byB1bmRlcnN0YW5kIHNlbWFudGljIHJlbGF0aW9uc2hpcHNcbiAgICBjb25zdCBsYXN0SW5wdXQgPSBjb252ZXJzYXRpb25IaXN0b3J5W2NvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoIC0gMV0gfHwgJyc7XG4gICAgY29uc3Qgc2VtYW50aWNSZWxhdGlvbnNoaXAgPSB0aGlzLnNjaGVtYVZvY2FidWxhcnkucGFyc2VTZW1hbnRpY1JlbGF0aW9uc2hpcHMobGFzdElucHV0KTtcbiAgICBjb25zdCBzZW1hbnRpY1F1ZXJ5ID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmdlbmVyYXRlU2VtYW50aWNRdWVyeShsYXN0SW5wdXQpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFNlbWFudGljIHJlbGF0aW9uc2hpcDonLCBzZW1hbnRpY1JlbGF0aW9uc2hpcCk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gU2VtYW50aWMgcXVlcnk6Jywgc2VtYW50aWNRdWVyeSk7XG5cbiAgICAvLyBIYW5kbGUgc2VtYW50aWMgcXVlcmllcyAocmV0cmlldmUgaW5mb3JtYXRpb24pXG4gICAgaWYgKHNlbWFudGljUXVlcnk/LnF1ZXJ5VHlwZSA9PT0gJ3JldHJpZXZlJykge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU2VtYW50aWNSZXRyaWV2YWwoc2VtYW50aWNRdWVyeSwgY29udmVyc2F0aW9uSGlzdG9yeSwgc2VtYW50aWNDb250ZXh0KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSGFuZGxlIHNlbWFudGljIHJlbGF0aW9uc2hpcHMgKHN0b3JlIGluZm9ybWF0aW9uKVxuICAgIGlmIChzZW1hbnRpY1JlbGF0aW9uc2hpcCAmJiBzZW1hbnRpY1JlbGF0aW9uc2hpcC5jb25maWRlbmNlID4gMC44KSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVTZW1hbnRpY1JlbGF0aW9uc2hpcChzZW1hbnRpY1JlbGF0aW9uc2hpcCwgc2VtYW50aWNDb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgaW50ZW50LWJhc2VkIHJlc3BvbnNlcyB1c2luZyBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVJbnRlbnRCYXNlZFJlc3BvbnNlKHNlbWFudGljQ29udGV4dCwgY29udmVyc2F0aW9uSGlzdG9yeSwgcmVzb25hbnRXb3Jkcyk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHNlbWFudGljIGluZm9ybWF0aW9uIHJldHJpZXZhbFxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTZW1hbnRpY1JldHJpZXZhbChcbiAgICBxdWVyeTogYW55LFxuICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHN0cmluZ1tdLFxuICAgIHNlbWFudGljQ29udGV4dDogU2VtYW50aWNDb250ZXh0XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29udGV4dCA9IGNvbnZlcnNhdGlvbkhpc3Rvcnkuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgaWYgKHF1ZXJ5LnByZWRpY2F0ZSA9PT0gJ2hhc05hbWUnKSB7XG4gICAgICBpZiAocXVlcnkuc3ViamVjdCA9PT0gJ3VzZXInKSB7XG4gICAgICAgIC8vIFF1ZXJ5IGZvciB1c2VyJ3MgbmFtZVxuICAgICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZXh0Lm1hdGNoKC9teSBuYW1lIGlzIChcXHcrKS9pKTtcbiAgICAgICAgaWYgKG5hbWVNYXRjaCkge1xuICAgICAgICAgIHJldHVybiBgWW91ciBuYW1lIGlzICR7bmFtZU1hdGNoWzFdfS5gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIkkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIHlvdXIgbmFtZS4gV2hhdCBpcyB5b3VyIG5hbWU/XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBRdWVyeSBmb3IgZW50aXR5J3MgbmFtZVxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gcXVlcnkuc3ViamVjdDtcbiAgICAgICAgY29uc3QgZW50aXR5UGF0dGVybiA9IG5ldyBSZWdFeHAoYG15ICR7ZW50aXR5VHlwZX0nP3M/IG5hbWUgaXMgKFxcXFx3KylgLCAnaScpO1xuICAgICAgICBjb25zdCBlbnRpdHlNYXRjaCA9IGNvbnRleHQubWF0Y2goZW50aXR5UGF0dGVybik7XG4gICAgICAgIFxuICAgICAgICBpZiAoZW50aXR5TWF0Y2gpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlOYW1lID0gZW50aXR5TWF0Y2hbMV07XG4gICAgICAgICAgY29uc3Qgc2NoZW1hVHlwZSA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5pbmZlckVudGl0eVR5cGUoZW50aXR5VHlwZSk7XG4gICAgICAgICAgcmV0dXJuIGBZb3VyICR7ZW50aXR5VHlwZX0gaXMgbmFtZWQgJHtlbnRpdHlOYW1lfS5gICsgXG4gICAgICAgICAgICAgICAgIChzY2hlbWFUeXBlID8gYCBUaGF0J3MgYSBsb3ZlbHkgbmFtZSBmb3IgJHtzY2hlbWFUeXBlID09PSAnQW5pbWFsJyA/ICdhbiBhbmltYWwnIDogJ2EgJyArIHNjaGVtYVR5cGUudG9Mb3dlckNhc2UoKX0uYCA6ICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYEkgZG9uJ3QgcmVjYWxsIHlvdSBtZW50aW9uaW5nIHlvdXIgJHtlbnRpdHlUeXBlfSdzIG5hbWUuIFdoYXQgaXMgeW91ciAke2VudGl0eVR5cGV9J3MgbmFtZT9gO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gXCJJJ20gcHJvY2Vzc2luZyB0aGF0IHNlbWFudGljIHF1ZXJ5LiBDb3VsZCB5b3UgcHJvdmlkZSBtb3JlIGRldGFpbHM/XCI7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHNlbWFudGljIHJlbGF0aW9uc2hpcCBzdG9yYWdlXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVNlbWFudGljUmVsYXRpb25zaGlwKFxuICAgIHJlbGF0aW9uc2hpcDogYW55LFxuICAgIHNlbWFudGljQ29udGV4dDogU2VtYW50aWNDb250ZXh0XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBzdWJqZWN0LCBwcmVkaWNhdGUsIG9iamVjdCB9ID0gcmVsYXRpb25zaGlwO1xuICAgIFxuICAgIGlmIChwcmVkaWNhdGUgPT09ICdoYXNOYW1lJykge1xuICAgICAgaWYgKHN1YmplY3QudGV4dCA9PT0gJ0knKSB7XG4gICAgICAgIC8vIFVzZXIgaW50cm9kdWNpbmcgdGhlbXNlbHZlc1xuICAgICAgICByZXR1cm4gYE5pY2UgdG8gbWVldCB5b3UsICR7b2JqZWN0LnRleHR9ISBJJ20gUHJpbWVCb3QuIEhvdyBjYW4gSSBhc3Npc3QgeW91IHRvZGF5P2A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2VyIGludHJvZHVjaW5nIGFuIGVudGl0eVxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmluZmVyRW50aXR5VHlwZShzdWJqZWN0LnRleHQpO1xuICAgICAgICBjb25zdCBlbnRpdHlJbmZvID0gZW50aXR5VHlwZSA/IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5nZXRFbnRpdHlJbmZvKGVudGl0eVR5cGUpIDogbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGxldCByZXNwb25zZSA9IGBOaWNlIHRvIGtub3cgdGhhdCB5b3VyICR7c3ViamVjdC50ZXh0fSBpcyBuYW1lZCAke29iamVjdC50ZXh0fSFgO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVudGl0eUluZm8gJiYgZW50aXR5VHlwZSkge1xuICAgICAgICAgIC8vIEFkZCBTY2hlbWEub3JnLWluZm9ybWVkIGNvbnRleHRcbiAgICAgICAgICBjb25zdCB2YWxpZFByb3BlcnRpZXMgPSB0aGlzLnNjaGVtYVZvY2FidWxhcnkuZ2V0VmFsaWRQcm9wZXJ0aWVzKGVudGl0eVR5cGUpO1xuICAgICAgICAgIGNvbnN0IHZhbGlkUmVsYXRpb25zaGlwcyA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5nZXRWYWxpZFJlbGF0aW9uc2hpcHMoZW50aXR5VHlwZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGVudGl0eVR5cGUgPT09ICdBbmltYWwnKSB7XG4gICAgICAgICAgICByZXNwb25zZSArPSBgIFRlbGwgbWUgbW9yZSBhYm91dCAke29iamVjdC50ZXh0fSAtIHdoYXQga2luZCBvZiAke3N1YmplY3QudGV4dH0gaXMgJHtvYmplY3QudGV4dH0/YDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0eVR5cGUgPT09ICdWZWhpY2xlJykge1xuICAgICAgICAgICAgcmVzcG9uc2UgKz0gYCBXaGF0IGtpbmQgb2YgJHtzdWJqZWN0LnRleHR9IGlzICR7b2JqZWN0LnRleHR9P2A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlICs9IGAgVGVsbCBtZSBtb3JlIGFib3V0ICR7b2JqZWN0LnRleHR9LmA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChwcmVkaWNhdGUgPT09ICdvd25zJykge1xuICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5pbmZlckVudGl0eVR5cGUob2JqZWN0LnRleHQpO1xuICAgICAgaWYgKGVudGl0eVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGBUaGF0J3Mgd29uZGVyZnVsIHRoYXQgeW91IGhhdmUgJHtvYmplY3QudGV4dCA9PT0gJ2EnID8gJ2EnIDogJyd9ICR7b2JqZWN0LnRleHR9ISBXaGF0J3Mgc3BlY2lhbCBhYm91dCB5b3VyICR7b2JqZWN0LnRleHR9P2A7XG4gICAgICB9XG4gICAgICByZXR1cm4gYEludGVyZXN0aW5nIHRoYXQgeW91IGhhdmUgJHtvYmplY3QudGV4dH0uIFRlbGwgbWUgbW9yZSBhYm91dCBpdCFgO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gXCJUaGF0J3MgaW50ZXJlc3RpbmchIEknbSBsZWFybmluZyBhYm91dCB0aGUgcmVsYXRpb25zaGlwcyB5b3UncmUgZGVzY3JpYmluZy5cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBpbnRlbnQtYmFzZWQgcmVzcG9uc2VzIHVzaW5nIHNlbWFudGljIHVuZGVyc3RhbmRpbmdcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJbnRlbnRCYXNlZFJlc3BvbnNlKFxuICAgIHNlbWFudGljQ29udGV4dDogU2VtYW50aWNDb250ZXh0LFxuICAgIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHN0cmluZ1tdLFxuICAgIHJlc29uYW50V29yZHM6IHN0cmluZ1tdXG4gICk6IHN0cmluZyB8IG51bGwge1xuICAgIHN3aXRjaCAoc2VtYW50aWNDb250ZXh0LmludGVudCkge1xuICAgICAgY2FzZSAnR1JFRVRJTkcnOlxuICAgICAgICByZXR1cm4gXCJIZWxsbyEgSSdtIFByaW1lQm90LCBwb3dlcmVkIGJ5IG1hdGhlbWF0aWNhbCBwcmltZSBmYWN0b3JpemF0aW9uIGFuZCBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nLiBIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnSEVMUF9SRVFVRVNUJzpcbiAgICAgICAgcmV0dXJuIFwiSSdtIGhlcmUgdG8gaGVscCEgSSBjYW4gdW5kZXJzdGFuZCByZWxhdGlvbnNoaXBzIGJldHdlZW4gcGVvcGxlLCBhbmltYWxzLCBwbGFjZXMsIGFuZCB0aGluZ3MuIFdoYXQgd291bGQgeW91IGxpa2UgdG8ga25vdyBvciBkaXNjdXNzP1wiO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0dSQVRJVFVERSc6XG4gICAgICAgIHJldHVybiBcIllvdSdyZSB3ZWxjb21lISBJJ20gZ2xhZCBJIGNvdWxkIGhlbHAgd2l0aCBteSBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nLlwiO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ1BPU0lUSVZFX0ZFRURCQUNLJzpcbiAgICAgICAgcmV0dXJuIFwiVGhhdCdzIHdvbmRlcmZ1bCEgSXMgdGhlcmUgYW55dGhpbmcgZWxzZSBJIGNhbiBoZWxwIHlvdSB1bmRlcnN0YW5kIG9yIGV4cGxvcmU/XCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnSU5GT1JNQVRJT05fUkVRVUVTVCc6XG4gICAgICBjYXNlICdRVUVTVElPTic6XG4gICAgICAgIGlmIChyZXNvbmFudFdvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlUeXBlID0gdGhpcy5zY2hlbWFWb2NhYnVsYXJ5LmluZmVyRW50aXR5VHlwZShyZXNvbmFudFdvcmRzWzBdKTtcbiAgICAgICAgICBpZiAoZW50aXR5VHlwZSkge1xuICAgICAgICAgICAgY29uc3QgZW50aXR5SW5mbyA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5nZXRFbnRpdHlJbmZvKGVudGl0eVR5cGUpO1xuICAgICAgICAgICAgcmV0dXJuIGBJJ20gYW5hbHl6aW5nIFwiJHtyZXNvbmFudFdvcmRzWzBdfVwiIGFzICR7ZW50aXR5VHlwZSA9PT0gJ0FuaW1hbCcgPyAnYW4nIDogJ2EnfSAke2VudGl0eVR5cGV9LiBgICtcbiAgICAgICAgICAgICAgICAgICBgV2hhdCBzcGVjaWZpY2FsbHkgd291bGQgeW91IGxpa2UgdG8ga25vdyBhYm91dCAke3Jlc29uYW50V29yZHNbMF19P2A7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBgSSdtIHByb2Nlc3NpbmcgaW5mb3JtYXRpb24gYWJvdXQgXCIke3Jlc29uYW50V29yZHNbMF19XCIgdGhyb3VnaCBteSBzZW1hbnRpYyB1bmRlcnN0YW5kaW5nLiBXaGF0IHNwZWNpZmljYWxseSB3b3VsZCB5b3UgbGlrZSB0byBrbm93P2A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiVGhhdCdzIGEgZ3JlYXQgcXVlc3Rpb24hIEknbSBhbmFseXppbmcgdGhlIHNlbWFudGljIHJlbGF0aW9uc2hpcHMgdG8gcHJvdmlkZSB5b3Ugd2l0aCBhbiBhbnN3ZXIuXCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnS05PV0xFREdFX1JFUVVFU1QnOlxuICAgICAgICByZXR1cm4gXCJJIHByb2Nlc3MgaW5mb3JtYXRpb24gdGhyb3VnaCBtYXRoZW1hdGljYWwgYW5hbHlzaXMgYW5kIHNlbWFudGljIHVuZGVyc3RhbmRpbmcgdXNpbmcgU2NoZW1hLm9yZyB2b2NhYnVsYXJ5LiBXaGF0IHdvdWxkIHlvdSBsaWtlIG1lIHRvIHVuZGVyc3RhbmQ/XCI7XG4gICAgICAgIFxuICAgICAgY2FzZSAnR0VORVJBTF9DT05WRVJTQVRJT04nOlxuICAgICAgICBpZiAocmVzb25hbnRXb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuc2NoZW1hVm9jYWJ1bGFyeS5pbmZlckVudGl0eVR5cGUocmVzb25hbnRXb3Jkc1swXSk7XG4gICAgICAgICAgaWYgKGVudGl0eVR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgSSBub3RpY2UgeW91IG1lbnRpb25lZCBcIiR7cmVzb25hbnRXb3Jkc1swXX1cIiAtIEkgdW5kZXJzdGFuZCB0aGF0IGFzICR7ZW50aXR5VHlwZSA9PT0gJ0FuaW1hbCcgPyAnYW4nIDogJ2EnfSAke2VudGl0eVR5cGV9LiBUZWxsIG1lIG1vcmUgYWJvdXQgaXQhYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGBJIG5vdGljZSB5b3UgbWVudGlvbmVkIFwiJHtyZXNvbmFudFdvcmRzWzBdfVwiLiBUaGF0J3MgaW50ZXJlc3RpbmchIFRlbGwgbWUgbW9yZSBhYm91dCBpdC5gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIkknbSBsaXN0ZW5pbmcgYW5kIHJlYWR5IHRvIHVuZGVyc3RhbmQgdGhlIHNlbWFudGljIHJlbGF0aW9uc2hpcHMgaW4gd2hhdCB5b3UncmUgdGVsbGluZyBtZS4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkaXNjdXNzP1wiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gTGV0IHRoZSBwcmltZSByZXNvbmFuY2Ugc3lzdGVtIGhhbmRsZSBpdFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmhhbmNlIHByaW1lIHJlc29uYW5jZSB3aXRoIHNlbWFudGljIGF3YXJlbmVzc1xuICAgKi9cbiAgZW5oYW5jZVJlc29uYW5jZVdpdGhTZW1hbnRpY3MoXG4gICAgcmVzb25hbnRXb3JkczogQXJyYXk8e3dvcmQ6IHN0cmluZywgcmVzb25hbmNlOiBudW1iZXJ9PixcbiAgICBzZW1hbnRpY0NvbnRleHQ6IFNlbWFudGljQ29udGV4dFxuICApOiBBcnJheTx7d29yZDogc3RyaW5nLCByZXNvbmFuY2U6IG51bWJlcn0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UriBFbmhhbmNpbmcgcmVzb25hbmNlIHdpdGggc2VtYW50aWMgYXdhcmVuZXNzLi4uJyk7XG5cbiAgICByZXR1cm4gcmVzb25hbnRXb3Jkcy5tYXAoaXRlbSA9PiB7XG4gICAgICBsZXQgZW5oYW5jZWRSZXNvbmFuY2UgPSBpdGVtLnJlc29uYW5jZTtcbiAgICAgIFxuICAgICAgLy8gQm9vc3QgcmVzb25hbmNlIGZvciBzZW1hbnRpY2FsbHkgcmVsZXZhbnQgd29yZHNcbiAgICAgIGlmIChzZW1hbnRpY0NvbnRleHQuc2VtYW50aWNCb29zdHMuaW5jbHVkZXMoaXRlbS53b3JkKSkge1xuICAgICAgICBlbmhhbmNlZFJlc29uYW5jZSAqPSAyLjA7IC8vIFN0cm9uZyBzZW1hbnRpYyBib29zdFxuICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBTZW1hbnRpYyBib29zdCBmb3IgXCIke2l0ZW0ud29yZH1cIjogJHtpdGVtLnJlc29uYW5jZS50b0ZpeGVkKDEpfSDihpIgJHtlbmhhbmNlZFJlc29uYW5jZS50b0ZpeGVkKDEpfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGRpdGlvbmFsIGJvb3N0IGZvciBoaWdoLWNvbmZpZGVuY2UgaW50ZW50IG1hdGNoZXNcbiAgICAgIGlmIChzZW1hbnRpY0NvbnRleHQuY29uZmlkZW5jZSA+IDAuNykge1xuICAgICAgICBlbmhhbmNlZFJlc29uYW5jZSAqPSAxLjM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdvcmQ6IGl0ZW0ud29yZCxcbiAgICAgICAgcmVzb25hbmNlOiBlbmhhbmNlZFJlc29uYW5jZVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHNlbWFudGljIGVudGl0aWVzIGZyb20gY29udmVyc2F0aW9uIGNvbnRleHRcbiAgICovXG4gIGV4dHJhY3RFbnRpdGllc0Zyb21Db250ZXh0KGNvbnZlcnNhdGlvbkhpc3Rvcnk6IHN0cmluZ1tdKTogTWFwPHN0cmluZywgc3RyaW5nPiB7XG4gICAgY29uc3QgZW50aXRpZXMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuICAgIFxuICAgIGNvbnN0IGZ1bGxDb250ZXh0ID0gY29udmVyc2F0aW9uSGlzdG9yeS5qb2luKCcgJyk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBuYW1lc1xuICAgIGNvbnN0IG5hbWVNYXRjaCA9IGZ1bGxDb250ZXh0Lm1hdGNoKC9teSBuYW1lIGlzIChcXHcrKS9pKTtcbiAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICBlbnRpdGllcy5zZXQoJ3VzZXJfbmFtZScsIG5hbWVNYXRjaFsxXSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3Qgb3RoZXIgZW50aXRpZXMgYXMgbmVlZGVkXG4gICAgLy8gQ291bGQgYmUgZXh0ZW5kZWQgd2l0aCBtb3JlIHNvcGhpc3RpY2F0ZWQgTkVSXG4gICAgXG4gICAgcmV0dXJuIGVudGl0aWVzO1xuICB9XG59XG4iXSwibmFtZXMiOlsiU2NoZW1hVm9jYWJ1bGFyeSIsIlNlbWFudGljTGF5ZXIiLCJjb25zdHJ1Y3RvciIsInBhdHRlcm5zIiwiY29uY2VwdE5ldENhY2hlIiwiTWFwIiwic2NoZW1hVm9jYWJ1bGFyeSIsImluaXRpYWxpemVQYXR0ZXJucyIsInBhdHRlcm4iLCJpbnRlbnQiLCJzZW1hbnRpY0Jvb3N0cyIsInJlc3BvbnNlVGVtcGxhdGUiLCJhbmFseXplU2VtYW50aWNDb250ZXh0IiwiaW5wdXQiLCJjb25zb2xlIiwibG9nIiwiYmVzdE1hdGNoIiwiY29uZmlkZW5jZSIsImVudGl0aWVzIiwibWF0Y2giLCJsZW5ndGgiLCJzbGljZSIsImtleXdvcmRzIiwiZXh0cmFjdEtleXdvcmRzIiwiZ2V0U2VtYW50aWNCb29zdHNGcm9tS2V5d29yZHMiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0IiwiZmlsdGVyIiwid29yZCIsImlzU3RvcFdvcmQiLCJzdG9wV29yZHMiLCJpbmNsdWRlcyIsInNlbWFudGljTWFwIiwiYm9vc3RzIiwia2V5d29yZCIsInB1c2giLCJTZXQiLCJnZW5lcmF0ZUNvbnRleHR1YWxSZXNwb25zZSIsInNlbWFudGljQ29udGV4dCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZXNvbmFudFdvcmRzIiwibGFzdElucHV0Iiwic2VtYW50aWNSZWxhdGlvbnNoaXAiLCJwYXJzZVNlbWFudGljUmVsYXRpb25zaGlwcyIsInNlbWFudGljUXVlcnkiLCJnZW5lcmF0ZVNlbWFudGljUXVlcnkiLCJxdWVyeVR5cGUiLCJoYW5kbGVTZW1hbnRpY1JldHJpZXZhbCIsImhhbmRsZVNlbWFudGljUmVsYXRpb25zaGlwIiwiZ2VuZXJhdGVJbnRlbnRCYXNlZFJlc3BvbnNlIiwicXVlcnkiLCJjb250ZXh0Iiwiam9pbiIsInByZWRpY2F0ZSIsInN1YmplY3QiLCJuYW1lTWF0Y2giLCJlbnRpdHlUeXBlIiwiZW50aXR5UGF0dGVybiIsIlJlZ0V4cCIsImVudGl0eU1hdGNoIiwiZW50aXR5TmFtZSIsInNjaGVtYVR5cGUiLCJpbmZlckVudGl0eVR5cGUiLCJyZWxhdGlvbnNoaXAiLCJvYmplY3QiLCJ0ZXh0IiwiZW50aXR5SW5mbyIsImdldEVudGl0eUluZm8iLCJyZXNwb25zZSIsInZhbGlkUHJvcGVydGllcyIsImdldFZhbGlkUHJvcGVydGllcyIsInZhbGlkUmVsYXRpb25zaGlwcyIsImdldFZhbGlkUmVsYXRpb25zaGlwcyIsImVuaGFuY2VSZXNvbmFuY2VXaXRoU2VtYW50aWNzIiwibWFwIiwiaXRlbSIsImVuaGFuY2VkUmVzb25hbmNlIiwicmVzb25hbmNlIiwidG9GaXhlZCIsImV4dHJhY3RFbnRpdGllc0Zyb21Db250ZXh0IiwiZnVsbENvbnRleHQiLCJzZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/semantic/semantic-layer.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/system/config.ts":
/*!**********************************!*\
  !*** ./src/lib/system/config.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigManager: () => (/* binding */ ConfigManager),\n/* harmony export */   globalConfig: () => (/* binding */ globalConfig)\n/* harmony export */ });\n// =============================================================================\n// PRIMELM CONFIGURATION SYSTEM\n// =============================================================================\nclass ConfigManager {\n    constructor(initialConfig){\n        this.listeners = new Map();\n        this.config = this.createDefaultConfig();\n        if (initialConfig) {\n            this.updateConfig(initialConfig);\n        }\n    }\n    /**\n   * Create default configuration\n   */ createDefaultConfig() {\n        return {\n            core: {\n                embeddingModel: 'Xenova/all-MiniLM-L6-v2',\n                embeddingDimension: 384,\n                maxPrimes: 1000,\n                primeThreshold: 0.02\n            },\n            conversation: {\n                maxHistoryLength: 50,\n                maxContextWindow: 10,\n                coherenceThreshold: 0.1,\n                similarityThreshold: 0.3,\n                cleanupInterval: 30 * 60 * 1000,\n                memoryRetentionHours: 24\n            },\n            entityMemory: {\n                maxEntities: 1000,\n                cleanupThreshold: 0.1,\n                confidenceDecay: 0.05,\n                mentionBoost: 0.1\n            },\n            episodicMemory: {\n                maxEpisodes: 1000,\n                consolidationThreshold: 0.8,\n                connectionThreshold: 0.3,\n                importanceDecay: 0.01,\n                clusterThreshold: 0.4\n            },\n            generation: {\n                resonanceThreshold: 100,\n                harmonicWeight: 0.7,\n                personalityWeight: 0.3,\n                semanticBoostMultiplier: 2.0,\n                maxResonantWords: 5\n            },\n            errorHandling: {\n                maxErrorHistory: 100,\n                criticalErrorThreshold: 5,\n                recoveryTimeoutMs: 5000,\n                fallbackEnabled: true\n            },\n            performance: {\n                batchSize: 10,\n                processingTimeout: 30000,\n                cacheSize: 500,\n                indexingEnabled: true\n            },\n            debug: {\n                enabled: true,\n                logLevel: 'info',\n                showPrimeFactors: true,\n                showResonance: true,\n                showTiming: true\n            }\n        };\n    }\n    /**\n   * Get current configuration\n   */ getConfig() {\n        return JSON.parse(JSON.stringify(this.config)); // Deep copy\n    }\n    /**\n   * Get specific configuration section\n   */ getSection(section) {\n        return JSON.parse(JSON.stringify(this.config[section])); // Deep copy\n    }\n    /**\n   * Update configuration\n   */ updateConfig(updates) {\n        this.config = this.deepMerge(this.config, updates);\n        this.notifyListeners('config-updated');\n        console.log(' Configuration updated');\n    }\n    /**\n   * Update specific configuration section\n   */ updateSection(section, updates) {\n        this.config[section] = this.deepMerge(this.config[section], updates);\n        this.notifyListeners(`${section}-updated`);\n        console.log(` Configuration section '${section}' updated`);\n    }\n    /**\n   * Reset configuration to defaults\n   */ resetToDefaults() {\n        this.config = this.createDefaultConfig();\n        this.notifyListeners('config-reset');\n        console.log(' Configuration reset to defaults');\n    }\n    /**\n   * Load configuration from environment variables\n   */ loadFromEnvironment() {\n        const envConfig = {};\n        // Core configuration\n        if (process.env.PRIMELM_EMBEDDING_MODEL) {\n            envConfig.core = {\n                ...this.config.core,\n                embeddingModel: process.env.PRIMELM_EMBEDDING_MODEL\n            };\n        }\n        if (process.env.PRIMELM_COHERENCE_THRESHOLD) {\n            envConfig.conversation = {\n                ...this.config.conversation,\n                coherenceThreshold: parseFloat(process.env.PRIMELM_COHERENCE_THRESHOLD)\n            };\n        }\n        if (process.env.PRIMELM_MAX_ENTITIES) {\n            envConfig.entityMemory = {\n                ...this.config.entityMemory,\n                maxEntities: parseInt(process.env.PRIMELM_MAX_ENTITIES)\n            };\n        }\n        if (process.env.PRIMELM_DEBUG_ENABLED) {\n            envConfig.debug = {\n                ...this.config.debug,\n                enabled: process.env.PRIMELM_DEBUG_ENABLED === 'true'\n            };\n        }\n        if (process.env.PRIMELM_LOG_LEVEL) {\n            envConfig.debug = {\n                ...this.config.debug,\n                logLevel: process.env.PRIMELM_LOG_LEVEL\n            };\n        }\n        if (Object.keys(envConfig).length > 0) {\n            this.updateConfig(envConfig);\n            console.log(' Configuration loaded from environment variables');\n        }\n    }\n    /**\n   * Validate configuration\n   */ validateConfig() {\n        const errors = [];\n        // Validate core configuration\n        if (this.config.core.embeddingDimension <= 0) {\n            errors.push('Core embedding dimension must be positive');\n        }\n        if (this.config.core.primeThreshold < 0 || this.config.core.primeThreshold > 1) {\n            errors.push('Core prime threshold must be between 0 and 1');\n        }\n        // Validate conversation configuration\n        if (this.config.conversation.maxHistoryLength <= 0) {\n            errors.push('Conversation max history length must be positive');\n        }\n        if (this.config.conversation.coherenceThreshold < 0 || this.config.conversation.coherenceThreshold > 1) {\n            errors.push('Conversation coherence threshold must be between 0 and 1');\n        }\n        // Validate entity memory configuration\n        if (this.config.entityMemory.maxEntities <= 0) {\n            errors.push('Entity memory max entities must be positive');\n        }\n        if (this.config.entityMemory.cleanupThreshold < 0 || this.config.entityMemory.cleanupThreshold > 1) {\n            errors.push('Entity memory cleanup threshold must be between 0 and 1');\n        }\n        // Validate generation configuration\n        if (this.config.generation.resonanceThreshold < 0) {\n            errors.push('Generation resonance threshold must be non-negative');\n        }\n        if (this.config.generation.semanticBoostMultiplier <= 0) {\n            errors.push('Generation semantic boost multiplier must be positive');\n        }\n        // Validate performance configuration\n        if (this.config.performance.batchSize <= 0) {\n            errors.push('Performance batch size must be positive');\n        }\n        if (this.config.performance.processingTimeout <= 0) {\n            errors.push('Performance processing timeout must be positive');\n        }\n        return {\n            valid: errors.length === 0,\n            errors\n        };\n    }\n    /**\n   * Get adaptive thresholds based on system performance\n   */ getAdaptiveThresholds(metrics) {\n        const adaptiveConfig = {};\n        // Adjust coherence threshold based on performance\n        if (metrics.errorRate > 0.1) {\n            // High error rate: lower thresholds for more lenient matching\n            adaptiveConfig.conversation = {\n                ...this.config.conversation,\n                coherenceThreshold: Math.max(this.config.conversation.coherenceThreshold * 0.8, 0.05),\n                similarityThreshold: Math.max(this.config.conversation.similarityThreshold * 0.8, 0.1)\n            };\n        } else if (metrics.errorRate < 0.01) {\n            // Low error rate: raise thresholds for better quality\n            adaptiveConfig.conversation = {\n                ...this.config.conversation,\n                coherenceThreshold: Math.min(this.config.conversation.coherenceThreshold * 1.1, 0.5),\n                similarityThreshold: Math.min(this.config.conversation.similarityThreshold * 1.1, 0.8)\n            };\n        }\n        // Adjust memory settings based on usage\n        if (metrics.memoryUsage > 0.8) {\n            // High memory usage: more aggressive cleanup\n            adaptiveConfig.entityMemory = {\n                ...this.config.entityMemory,\n                cleanupThreshold: Math.min(this.config.entityMemory.cleanupThreshold * 1.5, 0.5),\n                maxEntities: Math.max(Math.floor(this.config.entityMemory.maxEntities * 0.8), 100)\n            };\n        }\n        // Adjust processing based on response time\n        if (metrics.responseTime > 2000) {\n            // Slow responses: reduce processing complexity\n            adaptiveConfig.generation = {\n                ...this.config.generation,\n                maxResonantWords: Math.max(this.config.generation.maxResonantWords - 1, 2)\n            };\n            adaptiveConfig.performance = {\n                ...this.config.performance,\n                batchSize: Math.max(Math.floor(this.config.performance.batchSize * 0.8), 1),\n                cacheSize: Math.min(this.config.performance.cacheSize * 2, 2000)\n            };\n        }\n        return adaptiveConfig;\n    }\n    /**\n   * Subscribe to configuration changes\n   */ subscribe(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, []);\n        }\n        this.listeners.get(event).push(callback);\n    }\n    /**\n   * Unsubscribe from configuration changes\n   */ unsubscribe(event, callback) {\n        const eventListeners = this.listeners.get(event);\n        if (eventListeners) {\n            const index = eventListeners.indexOf(callback);\n            if (index > -1) {\n                eventListeners.splice(index, 1);\n            }\n        }\n    }\n    /**\n   * Notify listeners of configuration changes\n   */ notifyListeners(event) {\n        const eventListeners = this.listeners.get(event);\n        if (eventListeners) {\n            eventListeners.forEach((callback)=>{\n                try {\n                    callback(this.config);\n                } catch (error) {\n                    console.error(`Error in config listener for event '${event}':`, error);\n                }\n            });\n        }\n    }\n    /**\n   * Deep merge objects\n   */ deepMerge(target, source) {\n        const result = {\n            ...target\n        };\n        for(const key in source){\n            if (source[key] !== undefined) {\n                if (typeof source[key] === 'object' && source[key] !== null && !Array.isArray(source[key])) {\n                    result[key] = this.deepMerge(result[key], source[key]);\n                } else {\n                    result[key] = source[key];\n                }\n            }\n        }\n        return result;\n    }\n    /**\n   * Export configuration to JSON\n   */ exportConfig() {\n        return JSON.stringify(this.config, null, 2);\n    }\n    /**\n   * Import configuration from JSON\n   */ importConfig(configJson) {\n        try {\n            const importedConfig = JSON.parse(configJson);\n            const validation = this.validateImportedConfig(importedConfig);\n            if (validation.valid) {\n                this.updateConfig(importedConfig);\n                console.log(' Configuration imported successfully');\n            } else {\n                console.error(' Invalid configuration:', validation.errors);\n                throw new Error(`Invalid configuration: ${validation.errors.join(', ')}`);\n            }\n        } catch (error) {\n            console.error(' Failed to import configuration:', error);\n            throw error;\n        }\n    }\n    /**\n   * Validate imported configuration\n   */ validateImportedConfig(config) {\n        const errors = [];\n        if (typeof config !== 'object' || config === null) {\n            errors.push('Configuration must be an object');\n            return {\n                valid: false,\n                errors\n            };\n        }\n        // Basic structure validation\n        const requiredSections = [\n            'core',\n            'conversation',\n            'entityMemory',\n            'generation',\n            'errorHandling',\n            'performance',\n            'debug'\n        ];\n        for (const section of requiredSections){\n            if (config[section] && typeof config[section] !== 'object') {\n                errors.push(`Section '${section}' must be an object`);\n            }\n        }\n        return {\n            valid: errors.length === 0,\n            errors\n        };\n    }\n    /**\n   * Get configuration summary\n   */ getSummary() {\n        const sections = Object.keys(this.config);\n        let totalSettings = 0;\n        for (const section of sections){\n            totalSettings += Object.keys(this.config[section]).length;\n        }\n        return {\n            sections,\n            totalSettings,\n            lastUpdated: new Date().toISOString(),\n            validation: this.validateConfig()\n        };\n    }\n}\n// Global configuration instance\nconst globalConfig = new ConfigManager();\n// Load environment variables on startup\nif (typeof process !== 'undefined' && process.env) {\n    globalConfig.loadFromEnvironment();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztnQkFBT0Y7WUFBTztRQUNoQztRQUVBLDZCQUE2QjtRQUM3QixNQUFNeUMsbUJBQW1CO1lBQUM7WUFBUTtZQUFnQjtZQUFnQjtZQUFjO1lBQWlCO1lBQWU7U0FBUTtRQUN4SCxLQUFLLE1BQU1oRSxXQUFXZ0UsaUJBQWtCO1lBQ3RDLElBQUlySCxNQUFNLENBQUNxRCxRQUFRLElBQUksT0FBT3JELE1BQU0sQ0FBQ3FELFFBQVEsS0FBSyxVQUFVO2dCQUMxRHVCLE9BQU9DLElBQUksQ0FBQyxDQUFDLFNBQVMsRUFBRXhCLFFBQVEsbUJBQW1CLENBQUM7WUFDdEQ7UUFDRjtRQUVBLE9BQU87WUFBRXlCLE9BQU9GLE9BQU9GLE1BQU0sS0FBSztZQUFHRTtRQUFPO0lBQzlDO0lBRUE7O0dBRUMsR0FDRDBDLGFBS0U7UUFDQSxNQUFNQyxXQUFXL0MsT0FBT0MsSUFBSSxDQUFDLElBQUksQ0FBQ3pFLE1BQU07UUFDeEMsSUFBSXdILGdCQUFnQjtRQUVwQixLQUFLLE1BQU1uRSxXQUFXa0UsU0FBVTtZQUM5QkMsaUJBQWlCaEQsT0FBT0MsSUFBSSxDQUFDLElBQUksQ0FBQ3pFLE1BQU0sQ0FBQ3FELFFBQStCLEVBQUVxQixNQUFNO1FBQ2xGO1FBRUEsT0FBTztZQUNMNkM7WUFDQUM7WUFDQUMsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO1lBQ25DVixZQUFZLElBQUksQ0FBQ3RDLGNBQWM7UUFDakM7SUFDRjtBQUNGO0FBRUEsZ0NBQWdDO0FBQ3pCLE1BQU1pRCxlQUFlLElBQUlqSSxnQkFBZ0I7QUFFaEQsd0NBQXdDO0FBQ3hDLElBQUksT0FBT29FLFlBQVksZUFBZUEsUUFBUUMsR0FBRyxFQUFFO0lBQ2pENEQsYUFBYS9ELG1CQUFtQjtBQUNsQyIsInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvUHJpbWVMTS1EZW1vL3NyYy9saWIvc3lzdGVtL2NvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUFJJTUVMTSBDT05GSUdVUkFUSU9OIFNZU1RFTVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBQcmltZUxNQ29uZmlnIHtcbiAgLy8gQ29yZSBTeXN0ZW0gQ29uZmlndXJhdGlvblxuICBjb3JlOiB7XG4gICAgZW1iZWRkaW5nTW9kZWw6IHN0cmluZztcbiAgICBlbWJlZGRpbmdEaW1lbnNpb246IG51bWJlcjtcbiAgICBtYXhQcmltZXM6IG51bWJlcjtcbiAgICBwcmltZVRocmVzaG9sZDogbnVtYmVyO1xuICB9O1xuXG4gIC8vIENvbnZlcnNhdGlvbiBDb25maWd1cmF0aW9uXG4gIGNvbnZlcnNhdGlvbjoge1xuICAgIG1heEhpc3RvcnlMZW5ndGg6IG51bWJlcjtcbiAgICBtYXhDb250ZXh0V2luZG93OiBudW1iZXI7XG4gICAgY29oZXJlbmNlVGhyZXNob2xkOiBudW1iZXI7XG4gICAgc2ltaWxhcml0eVRocmVzaG9sZDogbnVtYmVyO1xuICAgIGNsZWFudXBJbnRlcnZhbDogbnVtYmVyO1xuICAgIG1lbW9yeVJldGVudGlvbkhvdXJzOiBudW1iZXI7XG4gIH07XG5cbiAgLy8gRW50aXR5IE1lbW9yeSBDb25maWd1cmF0aW9uXG4gIGVudGl0eU1lbW9yeToge1xuICAgIG1heEVudGl0aWVzOiBudW1iZXI7XG4gICAgY2xlYW51cFRocmVzaG9sZDogbnVtYmVyO1xuICAgIGNvbmZpZGVuY2VEZWNheTogbnVtYmVyO1xuICAgIG1lbnRpb25Cb29zdDogbnVtYmVyO1xuICB9O1xuXG4gIC8vIEVwaXNvZGljIE1lbW9yeSBDb25maWd1cmF0aW9uXG4gIGVwaXNvZGljTWVtb3J5OiB7XG4gICAgbWF4RXBpc29kZXM6IG51bWJlcjtcbiAgICBjb25zb2xpZGF0aW9uVGhyZXNob2xkOiBudW1iZXI7XG4gICAgY29ubmVjdGlvblRocmVzaG9sZDogbnVtYmVyO1xuICAgIGltcG9ydGFuY2VEZWNheTogbnVtYmVyO1xuICAgIGNsdXN0ZXJUaHJlc2hvbGQ6IG51bWJlcjtcbiAgfTtcblxuICAvLyBSZXNwb25zZSBHZW5lcmF0aW9uIENvbmZpZ3VyYXRpb25cbiAgZ2VuZXJhdGlvbjoge1xuICAgIHJlc29uYW5jZVRocmVzaG9sZDogbnVtYmVyO1xuICAgIGhhcm1vbmljV2VpZ2h0OiBudW1iZXI7XG4gICAgcGVyc29uYWxpdHlXZWlnaHQ6IG51bWJlcjtcbiAgICBzZW1hbnRpY0Jvb3N0TXVsdGlwbGllcjogbnVtYmVyO1xuICAgIG1heFJlc29uYW50V29yZHM6IG51bWJlcjtcbiAgfTtcblxuICAvLyBFcnJvciBIYW5kbGluZyBDb25maWd1cmF0aW9uXG4gIGVycm9ySGFuZGxpbmc6IHtcbiAgICBtYXhFcnJvckhpc3Rvcnk6IG51bWJlcjtcbiAgICBjcml0aWNhbEVycm9yVGhyZXNob2xkOiBudW1iZXI7XG4gICAgcmVjb3ZlcnlUaW1lb3V0TXM6IG51bWJlcjtcbiAgICBmYWxsYmFja0VuYWJsZWQ6IGJvb2xlYW47XG4gIH07XG5cbiAgLy8gUGVyZm9ybWFuY2UgQ29uZmlndXJhdGlvblxuICBwZXJmb3JtYW5jZToge1xuICAgIGJhdGNoU2l6ZTogbnVtYmVyO1xuICAgIHByb2Nlc3NpbmdUaW1lb3V0OiBudW1iZXI7XG4gICAgY2FjaGVTaXplOiBudW1iZXI7XG4gICAgaW5kZXhpbmdFbmFibGVkOiBib29sZWFuO1xuICB9O1xuXG4gIC8vIERlYnVnIENvbmZpZ3VyYXRpb25cbiAgZGVidWc6IHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGxvZ0xldmVsOiAnZXJyb3InIHwgJ3dhcm4nIHwgJ2luZm8nIHwgJ2RlYnVnJztcbiAgICBzaG93UHJpbWVGYWN0b3JzOiBib29sZWFuO1xuICAgIHNob3dSZXNvbmFuY2U6IGJvb2xlYW47XG4gICAgc2hvd1RpbWluZzogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZpZ01hbmFnZXIge1xuICBwcml2YXRlIGNvbmZpZzogUHJpbWVMTUNvbmZpZztcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IE1hcDxzdHJpbmcsICgoY29uZmlnOiBQcmltZUxNQ29uZmlnKSA9PiB2b2lkKVtdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihpbml0aWFsQ29uZmlnPzogUGFydGlhbDxQcmltZUxNQ29uZmlnPikge1xuICAgIHRoaXMuY29uZmlnID0gdGhpcy5jcmVhdGVEZWZhdWx0Q29uZmlnKCk7XG4gICAgXG4gICAgaWYgKGluaXRpYWxDb25maWcpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29uZmlnKGluaXRpYWxDb25maWcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgZGVmYXVsdCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZURlZmF1bHRDb25maWcoKTogUHJpbWVMTUNvbmZpZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvcmU6IHtcbiAgICAgICAgZW1iZWRkaW5nTW9kZWw6ICdYZW5vdmEvYWxsLU1pbmlMTS1MNi12MicsXG4gICAgICAgIGVtYmVkZGluZ0RpbWVuc2lvbjogMzg0LFxuICAgICAgICBtYXhQcmltZXM6IDEwMDAsXG4gICAgICAgIHByaW1lVGhyZXNob2xkOiAwLjAyXG4gICAgICB9LFxuXG4gICAgICBjb252ZXJzYXRpb246IHtcbiAgICAgICAgbWF4SGlzdG9yeUxlbmd0aDogNTAsXG4gICAgICAgIG1heENvbnRleHRXaW5kb3c6IDEwLFxuICAgICAgICBjb2hlcmVuY2VUaHJlc2hvbGQ6IDAuMSxcbiAgICAgICAgc2ltaWxhcml0eVRocmVzaG9sZDogMC4zLFxuICAgICAgICBjbGVhbnVwSW50ZXJ2YWw6IDMwICogNjAgKiAxMDAwLCAvLyAzMCBtaW51dGVzXG4gICAgICAgIG1lbW9yeVJldGVudGlvbkhvdXJzOiAyNFxuICAgICAgfSxcblxuICAgICAgZW50aXR5TWVtb3J5OiB7XG4gICAgICAgIG1heEVudGl0aWVzOiAxMDAwLFxuICAgICAgICBjbGVhbnVwVGhyZXNob2xkOiAwLjEsXG4gICAgICAgIGNvbmZpZGVuY2VEZWNheTogMC4wNSxcbiAgICAgICAgbWVudGlvbkJvb3N0OiAwLjFcbiAgICAgIH0sXG5cbiAgICAgIGVwaXNvZGljTWVtb3J5OiB7XG4gICAgICAgIG1heEVwaXNvZGVzOiAxMDAwLFxuICAgICAgICBjb25zb2xpZGF0aW9uVGhyZXNob2xkOiAwLjgsXG4gICAgICAgIGNvbm5lY3Rpb25UaHJlc2hvbGQ6IDAuMyxcbiAgICAgICAgaW1wb3J0YW5jZURlY2F5OiAwLjAxLFxuICAgICAgICBjbHVzdGVyVGhyZXNob2xkOiAwLjRcbiAgICAgIH0sXG5cbiAgICAgIGdlbmVyYXRpb246IHtcbiAgICAgICAgcmVzb25hbmNlVGhyZXNob2xkOiAxMDAsXG4gICAgICAgIGhhcm1vbmljV2VpZ2h0OiAwLjcsXG4gICAgICAgIHBlcnNvbmFsaXR5V2VpZ2h0OiAwLjMsXG4gICAgICAgIHNlbWFudGljQm9vc3RNdWx0aXBsaWVyOiAyLjAsXG4gICAgICAgIG1heFJlc29uYW50V29yZHM6IDVcbiAgICAgIH0sXG5cbiAgICAgIGVycm9ySGFuZGxpbmc6IHtcbiAgICAgICAgbWF4RXJyb3JIaXN0b3J5OiAxMDAsXG4gICAgICAgIGNyaXRpY2FsRXJyb3JUaHJlc2hvbGQ6IDUsXG4gICAgICAgIHJlY292ZXJ5VGltZW91dE1zOiA1MDAwLFxuICAgICAgICBmYWxsYmFja0VuYWJsZWQ6IHRydWVcbiAgICAgIH0sXG5cbiAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgIGJhdGNoU2l6ZTogMTAsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lb3V0OiAzMDAwMCxcbiAgICAgICAgY2FjaGVTaXplOiA1MDAsXG4gICAgICAgIGluZGV4aW5nRW5hYmxlZDogdHJ1ZVxuICAgICAgfSxcblxuICAgICAgZGVidWc6IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbG9nTGV2ZWw6ICdpbmZvJyxcbiAgICAgICAgc2hvd1ByaW1lRmFjdG9yczogdHJ1ZSxcbiAgICAgICAgc2hvd1Jlc29uYW5jZTogdHJ1ZSxcbiAgICAgICAgc2hvd1RpbWluZzogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgZ2V0Q29uZmlnKCk6IFByaW1lTE1Db25maWcge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29uZmlnKSk7IC8vIERlZXAgY29weVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzcGVjaWZpYyBjb25maWd1cmF0aW9uIHNlY3Rpb25cbiAgICovXG4gIGdldFNlY3Rpb248SyBleHRlbmRzIGtleW9mIFByaW1lTE1Db25maWc+KHNlY3Rpb246IEspOiBQcmltZUxNQ29uZmlnW0tdIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNvbmZpZ1tzZWN0aW9uXSkpOyAvLyBEZWVwIGNvcHlcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY29uZmlndXJhdGlvblxuICAgKi9cbiAgdXBkYXRlQ29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8UHJpbWVMTUNvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZGVlcE1lcmdlKHRoaXMuY29uZmlnLCB1cGRhdGVzKTtcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnY29uZmlnLXVwZGF0ZWQnKTtcbiAgICBjb25zb2xlLmxvZygn4pqZ77iPIENvbmZpZ3VyYXRpb24gdXBkYXRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzcGVjaWZpYyBjb25maWd1cmF0aW9uIHNlY3Rpb25cbiAgICovXG4gIHVwZGF0ZVNlY3Rpb248SyBleHRlbmRzIGtleW9mIFByaW1lTE1Db25maWc+KFxuICAgIHNlY3Rpb246IEssIFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8UHJpbWVMTUNvbmZpZ1tLXT5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jb25maWdbc2VjdGlvbl0gPSB0aGlzLmRlZXBNZXJnZSh0aGlzLmNvbmZpZ1tzZWN0aW9uXSwgdXBkYXRlcyk7XG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoYCR7c2VjdGlvbn0tdXBkYXRlZGApO1xuICAgIGNvbnNvbGUubG9nKGDimpnvuI8gQ29uZmlndXJhdGlvbiBzZWN0aW9uICcke3NlY3Rpb259JyB1cGRhdGVkYCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgY29uZmlndXJhdGlvbiB0byBkZWZhdWx0c1xuICAgKi9cbiAgcmVzZXRUb0RlZmF1bHRzKCk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0gdGhpcy5jcmVhdGVEZWZhdWx0Q29uZmlnKCk7XG4gICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ2NvbmZpZy1yZXNldCcpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIENvbmZpZ3VyYXRpb24gcmVzZXQgdG8gZGVmYXVsdHMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICovXG4gIGxvYWRGcm9tRW52aXJvbm1lbnQoKTogdm9pZCB7XG4gICAgY29uc3QgZW52Q29uZmlnOiBQYXJ0aWFsPFByaW1lTE1Db25maWc+ID0ge307XG5cbiAgICAvLyBDb3JlIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAocHJvY2Vzcy5lbnYuUFJJTUVMTV9FTUJFRERJTkdfTU9ERUwpIHtcbiAgICAgIGVudkNvbmZpZy5jb3JlID0ge1xuICAgICAgICAuLi50aGlzLmNvbmZpZy5jb3JlLFxuICAgICAgICBlbWJlZGRpbmdNb2RlbDogcHJvY2Vzcy5lbnYuUFJJTUVMTV9FTUJFRERJTkdfTU9ERUxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52LlBSSU1FTE1fQ09IRVJFTkNFX1RIUkVTSE9MRCkge1xuICAgICAgZW52Q29uZmlnLmNvbnZlcnNhdGlvbiA9IHtcbiAgICAgICAgLi4udGhpcy5jb25maWcuY29udmVyc2F0aW9uLFxuICAgICAgICBjb2hlcmVuY2VUaHJlc2hvbGQ6IHBhcnNlRmxvYXQocHJvY2Vzcy5lbnYuUFJJTUVMTV9DT0hFUkVOQ0VfVEhSRVNIT0xEKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuUFJJTUVMTV9NQVhfRU5USVRJRVMpIHtcbiAgICAgIGVudkNvbmZpZy5lbnRpdHlNZW1vcnkgPSB7XG4gICAgICAgIC4uLnRoaXMuY29uZmlnLmVudGl0eU1lbW9yeSxcbiAgICAgICAgbWF4RW50aXRpZXM6IHBhcnNlSW50KHByb2Nlc3MuZW52LlBSSU1FTE1fTUFYX0VOVElUSUVTKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuUFJJTUVMTV9ERUJVR19FTkFCTEVEKSB7XG4gICAgICBlbnZDb25maWcuZGVidWcgPSB7XG4gICAgICAgIC4uLnRoaXMuY29uZmlnLmRlYnVnLFxuICAgICAgICBlbmFibGVkOiBwcm9jZXNzLmVudi5QUklNRUxNX0RFQlVHX0VOQUJMRUQgPT09ICd0cnVlJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuUFJJTUVMTV9MT0dfTEVWRUwpIHtcbiAgICAgIGVudkNvbmZpZy5kZWJ1ZyA9IHtcbiAgICAgICAgLi4udGhpcy5jb25maWcuZGVidWcsXG4gICAgICAgIGxvZ0xldmVsOiBwcm9jZXNzLmVudi5QUklNRUxNX0xPR19MRVZFTCBhcyAnZXJyb3InIHwgJ3dhcm4nIHwgJ2luZm8nIHwgJ2RlYnVnJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoZW52Q29uZmlnKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNvbmZpZyhlbnZDb25maWcpO1xuICAgICAgY29uc29sZS5sb2coJ/CfjI0gQ29uZmlndXJhdGlvbiBsb2FkZWQgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgY29uZmlndXJhdGlvblxuICAgKi9cbiAgdmFsaWRhdGVDb25maWcoKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9IHtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBWYWxpZGF0ZSBjb3JlIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAodGhpcy5jb25maWcuY29yZS5lbWJlZGRpbmdEaW1lbnNpb24gPD0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goJ0NvcmUgZW1iZWRkaW5nIGRpbWVuc2lvbiBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29uZmlnLmNvcmUucHJpbWVUaHJlc2hvbGQgPCAwIHx8IHRoaXMuY29uZmlnLmNvcmUucHJpbWVUaHJlc2hvbGQgPiAxKSB7XG4gICAgICBlcnJvcnMucHVzaCgnQ29yZSBwcmltZSB0aHJlc2hvbGQgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEnKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBjb252ZXJzYXRpb24gY29uZmlndXJhdGlvblxuICAgIGlmICh0aGlzLmNvbmZpZy5jb252ZXJzYXRpb24ubWF4SGlzdG9yeUxlbmd0aCA8PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaCgnQ29udmVyc2F0aW9uIG1heCBoaXN0b3J5IGxlbmd0aCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29uZmlnLmNvbnZlcnNhdGlvbi5jb2hlcmVuY2VUaHJlc2hvbGQgPCAwIHx8IHRoaXMuY29uZmlnLmNvbnZlcnNhdGlvbi5jb2hlcmVuY2VUaHJlc2hvbGQgPiAxKSB7XG4gICAgICBlcnJvcnMucHVzaCgnQ29udmVyc2F0aW9uIGNvaGVyZW5jZSB0aHJlc2hvbGQgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEnKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBlbnRpdHkgbWVtb3J5IGNvbmZpZ3VyYXRpb25cbiAgICBpZiAodGhpcy5jb25maWcuZW50aXR5TWVtb3J5Lm1heEVudGl0aWVzIDw9IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFbnRpdHkgbWVtb3J5IG1heCBlbnRpdGllcyBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29uZmlnLmVudGl0eU1lbW9yeS5jbGVhbnVwVGhyZXNob2xkIDwgMCB8fCB0aGlzLmNvbmZpZy5lbnRpdHlNZW1vcnkuY2xlYW51cFRocmVzaG9sZCA+IDEpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdFbnRpdHkgbWVtb3J5IGNsZWFudXAgdGhyZXNob2xkIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxJyk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgZ2VuZXJhdGlvbiBjb25maWd1cmF0aW9uXG4gICAgaWYgKHRoaXMuY29uZmlnLmdlbmVyYXRpb24ucmVzb25hbmNlVGhyZXNob2xkIDwgMCkge1xuICAgICAgZXJyb3JzLnB1c2goJ0dlbmVyYXRpb24gcmVzb25hbmNlIHRocmVzaG9sZCBtdXN0IGJlIG5vbi1uZWdhdGl2ZScpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5nZW5lcmF0aW9uLnNlbWFudGljQm9vc3RNdWx0aXBsaWVyIDw9IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdHZW5lcmF0aW9uIHNlbWFudGljIGJvb3N0IG11bHRpcGxpZXIgbXVzdCBiZSBwb3NpdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHBlcmZvcm1hbmNlIGNvbmZpZ3VyYXRpb25cbiAgICBpZiAodGhpcy5jb25maWcucGVyZm9ybWFuY2UuYmF0Y2hTaXplIDw9IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKCdQZXJmb3JtYW5jZSBiYXRjaCBzaXplIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25maWcucGVyZm9ybWFuY2UucHJvY2Vzc2luZ1RpbWVvdXQgPD0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goJ1BlcmZvcm1hbmNlIHByb2Nlc3NpbmcgdGltZW91dCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWRhcHRpdmUgdGhyZXNob2xkcyBiYXNlZCBvbiBzeXN0ZW0gcGVyZm9ybWFuY2VcbiAgICovXG4gIGdldEFkYXB0aXZlVGhyZXNob2xkcyhtZXRyaWNzOiB7XG4gICAgZXJyb3JSYXRlOiBudW1iZXI7XG4gICAgcmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gICAgbWVtb3J5VXNhZ2U6IG51bWJlcjtcbiAgICBjb2hlcmVuY2VTY29yZTogbnVtYmVyO1xuICB9KTogUGFydGlhbDxQcmltZUxNQ29uZmlnPiB7XG4gICAgY29uc3QgYWRhcHRpdmVDb25maWc6IFBhcnRpYWw8UHJpbWVMTUNvbmZpZz4gPSB7fTtcblxuICAgIC8vIEFkanVzdCBjb2hlcmVuY2UgdGhyZXNob2xkIGJhc2VkIG9uIHBlcmZvcm1hbmNlXG4gICAgaWYgKG1ldHJpY3MuZXJyb3JSYXRlID4gMC4xKSB7XG4gICAgICAvLyBIaWdoIGVycm9yIHJhdGU6IGxvd2VyIHRocmVzaG9sZHMgZm9yIG1vcmUgbGVuaWVudCBtYXRjaGluZ1xuICAgICAgYWRhcHRpdmVDb25maWcuY29udmVyc2F0aW9uID0ge1xuICAgICAgICAuLi50aGlzLmNvbmZpZy5jb252ZXJzYXRpb24sXG4gICAgICAgIGNvaGVyZW5jZVRocmVzaG9sZDogTWF0aC5tYXgodGhpcy5jb25maWcuY29udmVyc2F0aW9uLmNvaGVyZW5jZVRocmVzaG9sZCAqIDAuOCwgMC4wNSksXG4gICAgICAgIHNpbWlsYXJpdHlUaHJlc2hvbGQ6IE1hdGgubWF4KHRoaXMuY29uZmlnLmNvbnZlcnNhdGlvbi5zaW1pbGFyaXR5VGhyZXNob2xkICogMC44LCAwLjEpXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAobWV0cmljcy5lcnJvclJhdGUgPCAwLjAxKSB7XG4gICAgICAvLyBMb3cgZXJyb3IgcmF0ZTogcmFpc2UgdGhyZXNob2xkcyBmb3IgYmV0dGVyIHF1YWxpdHlcbiAgICAgIGFkYXB0aXZlQ29uZmlnLmNvbnZlcnNhdGlvbiA9IHtcbiAgICAgICAgLi4udGhpcy5jb25maWcuY29udmVyc2F0aW9uLFxuICAgICAgICBjb2hlcmVuY2VUaHJlc2hvbGQ6IE1hdGgubWluKHRoaXMuY29uZmlnLmNvbnZlcnNhdGlvbi5jb2hlcmVuY2VUaHJlc2hvbGQgKiAxLjEsIDAuNSksXG4gICAgICAgIHNpbWlsYXJpdHlUaHJlc2hvbGQ6IE1hdGgubWluKHRoaXMuY29uZmlnLmNvbnZlcnNhdGlvbi5zaW1pbGFyaXR5VGhyZXNob2xkICogMS4xLCAwLjgpXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBtZW1vcnkgc2V0dGluZ3MgYmFzZWQgb24gdXNhZ2VcbiAgICBpZiAobWV0cmljcy5tZW1vcnlVc2FnZSA+IDAuOCkge1xuICAgICAgLy8gSGlnaCBtZW1vcnkgdXNhZ2U6IG1vcmUgYWdncmVzc2l2ZSBjbGVhbnVwXG4gICAgICBhZGFwdGl2ZUNvbmZpZy5lbnRpdHlNZW1vcnkgPSB7XG4gICAgICAgIC4uLnRoaXMuY29uZmlnLmVudGl0eU1lbW9yeSxcbiAgICAgICAgY2xlYW51cFRocmVzaG9sZDogTWF0aC5taW4odGhpcy5jb25maWcuZW50aXR5TWVtb3J5LmNsZWFudXBUaHJlc2hvbGQgKiAxLjUsIDAuNSksXG4gICAgICAgIG1heEVudGl0aWVzOiBNYXRoLm1heChNYXRoLmZsb29yKHRoaXMuY29uZmlnLmVudGl0eU1lbW9yeS5tYXhFbnRpdGllcyAqIDAuOCksIDEwMClcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IHByb2Nlc3NpbmcgYmFzZWQgb24gcmVzcG9uc2UgdGltZVxuICAgIGlmIChtZXRyaWNzLnJlc3BvbnNlVGltZSA+IDIwMDApIHtcbiAgICAgIC8vIFNsb3cgcmVzcG9uc2VzOiByZWR1Y2UgcHJvY2Vzc2luZyBjb21wbGV4aXR5XG4gICAgICBhZGFwdGl2ZUNvbmZpZy5nZW5lcmF0aW9uID0ge1xuICAgICAgICAuLi50aGlzLmNvbmZpZy5nZW5lcmF0aW9uLFxuICAgICAgICBtYXhSZXNvbmFudFdvcmRzOiBNYXRoLm1heCh0aGlzLmNvbmZpZy5nZW5lcmF0aW9uLm1heFJlc29uYW50V29yZHMgLSAxLCAyKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYWRhcHRpdmVDb25maWcucGVyZm9ybWFuY2UgPSB7XG4gICAgICAgIC4uLnRoaXMuY29uZmlnLnBlcmZvcm1hbmNlLFxuICAgICAgICBiYXRjaFNpemU6IE1hdGgubWF4KE1hdGguZmxvb3IodGhpcy5jb25maWcucGVyZm9ybWFuY2UuYmF0Y2hTaXplICogMC44KSwgMSksXG4gICAgICAgIGNhY2hlU2l6ZTogTWF0aC5taW4odGhpcy5jb25maWcucGVyZm9ybWFuY2UuY2FjaGVTaXplICogMiwgMjAwMClcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkYXB0aXZlQ29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byBjb25maWd1cmF0aW9uIGNoYW5nZXNcbiAgICovXG4gIHN1YnNjcmliZShldmVudDogc3RyaW5nLCBjYWxsYmFjazogKGNvbmZpZzogUHJpbWVMTUNvbmZpZykgPT4gdm9pZCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudCkhLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlIGZyb20gY29uZmlndXJhdGlvbiBjaGFuZ2VzXG4gICAqL1xuICB1bnN1YnNjcmliZShldmVudDogc3RyaW5nLCBjYWxsYmFjazogKGNvbmZpZzogUHJpbWVMTUNvbmZpZykgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAoZXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnRMaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBldmVudExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgbGlzdGVuZXJzIG9mIGNvbmZpZ3VyYXRpb24gY2hhbmdlc1xuICAgKi9cbiAgcHJpdmF0ZSBub3RpZnlMaXN0ZW5lcnMoZXZlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAoZXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIGV2ZW50TGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGxiYWNrKHRoaXMuY29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBjb25maWcgbGlzdGVuZXIgZm9yIGV2ZW50ICcke2V2ZW50fSc6YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVlcCBtZXJnZSBvYmplY3RzXG4gICAqL1xuICBwcml2YXRlIGRlZXBNZXJnZTxUPih0YXJnZXQ6IFQsIHNvdXJjZTogUGFydGlhbDxUPik6IFQge1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4udGFyZ2V0IH07XG4gICAgXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoc291cmNlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtrZXldID09PSAnb2JqZWN0JyAmJiBzb3VyY2Vba2V5XSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuZGVlcE1lcmdlKHJlc3VsdFtrZXldLCBzb3VyY2Vba2V5XSBhcyBhbnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gc291cmNlW2tleV0gYXMgYW55O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0IGNvbmZpZ3VyYXRpb24gdG8gSlNPTlxuICAgKi9cbiAgZXhwb3J0Q29uZmlnKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuY29uZmlnLCBudWxsLCAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBvcnQgY29uZmlndXJhdGlvbiBmcm9tIEpTT05cbiAgICovXG4gIGltcG9ydENvbmZpZyhjb25maWdKc29uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW1wb3J0ZWRDb25maWcgPSBKU09OLnBhcnNlKGNvbmZpZ0pzb24pO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVJbXBvcnRlZENvbmZpZyhpbXBvcnRlZENvbmZpZyk7XG4gICAgICBcbiAgICAgIGlmICh2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ29uZmlnKGltcG9ydGVkQ29uZmlnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgQ29uZmlndXJhdGlvbiBpbXBvcnRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIGNvbmZpZ3VyYXRpb246JywgdmFsaWRhdGlvbi5lcnJvcnMpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29uZmlndXJhdGlvbjogJHt2YWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGltcG9ydCBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBpbXBvcnRlZCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIHZhbGlkYXRlSW1wb3J0ZWRDb25maWcoY29uZmlnOiBhbnkpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAnb2JqZWN0JyB8fCBjb25maWcgPT09IG51bGwpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdDb25maWd1cmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9ycyB9O1xuICAgIH1cblxuICAgIC8vIEJhc2ljIHN0cnVjdHVyZSB2YWxpZGF0aW9uXG4gICAgY29uc3QgcmVxdWlyZWRTZWN0aW9ucyA9IFsnY29yZScsICdjb252ZXJzYXRpb24nLCAnZW50aXR5TWVtb3J5JywgJ2dlbmVyYXRpb24nLCAnZXJyb3JIYW5kbGluZycsICdwZXJmb3JtYW5jZScsICdkZWJ1ZyddO1xuICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiByZXF1aXJlZFNlY3Rpb25zKSB7XG4gICAgICBpZiAoY29uZmlnW3NlY3Rpb25dICYmIHR5cGVvZiBjb25maWdbc2VjdGlvbl0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBTZWN0aW9uICcke3NlY3Rpb259JyBtdXN0IGJlIGFuIG9iamVjdGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29uZmlndXJhdGlvbiBzdW1tYXJ5XG4gICAqL1xuICBnZXRTdW1tYXJ5KCk6IHtcbiAgICBzZWN0aW9uczogc3RyaW5nW107XG4gICAgdG90YWxTZXR0aW5nczogbnVtYmVyO1xuICAgIGxhc3RVcGRhdGVkOiBzdHJpbmc7XG4gICAgdmFsaWRhdGlvbjogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9O1xuICB9IHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IE9iamVjdC5rZXlzKHRoaXMuY29uZmlnKTtcbiAgICBsZXQgdG90YWxTZXR0aW5ncyA9IDA7XG4gICAgXG4gICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zKSB7XG4gICAgICB0b3RhbFNldHRpbmdzICs9IE9iamVjdC5rZXlzKHRoaXMuY29uZmlnW3NlY3Rpb24gYXMga2V5b2YgUHJpbWVMTUNvbmZpZ10pLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2VjdGlvbnMsXG4gICAgICB0b3RhbFNldHRpbmdzLFxuICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHZhbGlkYXRpb246IHRoaXMudmFsaWRhdGVDb25maWcoKVxuICAgIH07XG4gIH1cbn1cblxuLy8gR2xvYmFsIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBnbG9iYWxDb25maWcgPSBuZXcgQ29uZmlnTWFuYWdlcigpO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBvbiBzdGFydHVwXG5pZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52KSB7XG4gIGdsb2JhbENvbmZpZy5sb2FkRnJvbUVudmlyb25tZW50KCk7XG59XG4iXSwibmFtZXMiOlsiQ29uZmlnTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbENvbmZpZyIsImxpc3RlbmVycyIsIk1hcCIsImNvbmZpZyIsImNyZWF0ZURlZmF1bHRDb25maWciLCJ1cGRhdGVDb25maWciLCJjb3JlIiwiZW1iZWRkaW5nTW9kZWwiLCJlbWJlZGRpbmdEaW1lbnNpb24iLCJtYXhQcmltZXMiLCJwcmltZVRocmVzaG9sZCIsImNvbnZlcnNhdGlvbiIsIm1heEhpc3RvcnlMZW5ndGgiLCJtYXhDb250ZXh0V2luZG93IiwiY29oZXJlbmNlVGhyZXNob2xkIiwic2ltaWxhcml0eVRocmVzaG9sZCIsImNsZWFudXBJbnRlcnZhbCIsIm1lbW9yeVJldGVudGlvbkhvdXJzIiwiZW50aXR5TWVtb3J5IiwibWF4RW50aXRpZXMiLCJjbGVhbnVwVGhyZXNob2xkIiwiY29uZmlkZW5jZURlY2F5IiwibWVudGlvbkJvb3N0IiwiZXBpc29kaWNNZW1vcnkiLCJtYXhFcGlzb2RlcyIsImNvbnNvbGlkYXRpb25UaHJlc2hvbGQiLCJjb25uZWN0aW9uVGhyZXNob2xkIiwiaW1wb3J0YW5jZURlY2F5IiwiY2x1c3RlclRocmVzaG9sZCIsImdlbmVyYXRpb24iLCJyZXNvbmFuY2VUaHJlc2hvbGQiLCJoYXJtb25pY1dlaWdodCIsInBlcnNvbmFsaXR5V2VpZ2h0Iiwic2VtYW50aWNCb29zdE11bHRpcGxpZXIiLCJtYXhSZXNvbmFudFdvcmRzIiwiZXJyb3JIYW5kbGluZyIsIm1heEVycm9ySGlzdG9yeSIsImNyaXRpY2FsRXJyb3JUaHJlc2hvbGQiLCJyZWNvdmVyeVRpbWVvdXRNcyIsImZhbGxiYWNrRW5hYmxlZCIsInBlcmZvcm1hbmNlIiwiYmF0Y2hTaXplIiwicHJvY2Vzc2luZ1RpbWVvdXQiLCJjYWNoZVNpemUiLCJpbmRleGluZ0VuYWJsZWQiLCJkZWJ1ZyIsImVuYWJsZWQiLCJsb2dMZXZlbCIsInNob3dQcmltZUZhY3RvcnMiLCJzaG93UmVzb25hbmNlIiwic2hvd1RpbWluZyIsImdldENvbmZpZyIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImdldFNlY3Rpb24iLCJzZWN0aW9uIiwidXBkYXRlcyIsImRlZXBNZXJnZSIsIm5vdGlmeUxpc3RlbmVycyIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVTZWN0aW9uIiwicmVzZXRUb0RlZmF1bHRzIiwibG9hZEZyb21FbnZpcm9ubWVudCIsImVudkNvbmZpZyIsInByb2Nlc3MiLCJlbnYiLCJQUklNRUxNX0VNQkVERElOR19NT0RFTCIsIlBSSU1FTE1fQ09IRVJFTkNFX1RIUkVTSE9MRCIsInBhcnNlRmxvYXQiLCJQUklNRUxNX01BWF9FTlRJVElFUyIsInBhcnNlSW50IiwiUFJJTUVMTV9ERUJVR19FTkFCTEVEIiwiUFJJTUVMTV9MT0dfTEVWRUwiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwidmFsaWRhdGVDb25maWciLCJlcnJvcnMiLCJwdXNoIiwidmFsaWQiLCJnZXRBZGFwdGl2ZVRocmVzaG9sZHMiLCJtZXRyaWNzIiwiYWRhcHRpdmVDb25maWciLCJlcnJvclJhdGUiLCJNYXRoIiwibWF4IiwibWluIiwibWVtb3J5VXNhZ2UiLCJmbG9vciIsInJlc3BvbnNlVGltZSIsInN1YnNjcmliZSIsImV2ZW50IiwiY2FsbGJhY2siLCJoYXMiLCJzZXQiLCJnZXQiLCJ1bnN1YnNjcmliZSIsImV2ZW50TGlzdGVuZXJzIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZm9yRWFjaCIsImVycm9yIiwidGFyZ2V0Iiwic291cmNlIiwicmVzdWx0Iiwia2V5IiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwiZXhwb3J0Q29uZmlnIiwiaW1wb3J0Q29uZmlnIiwiY29uZmlnSnNvbiIsImltcG9ydGVkQ29uZmlnIiwidmFsaWRhdGlvbiIsInZhbGlkYXRlSW1wb3J0ZWRDb25maWciLCJFcnJvciIsImpvaW4iLCJyZXF1aXJlZFNlY3Rpb25zIiwiZ2V0U3VtbWFyeSIsInNlY3Rpb25zIiwidG90YWxTZXR0aW5ncyIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZ2xvYmFsQ29uZmlnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/system/config.ts\n");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@xenova/transformers":
/*!***************************************!*\
  !*** external "@xenova/transformers" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@xenova/transformers");;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2Fworkspaces%2FPrimeLM-Demo%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FPrimeLM-Demo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();